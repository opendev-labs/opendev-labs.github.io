var XQ=Object.defineProperty;var l3=t=>{throw TypeError(t)};var JQ=(t,e,n)=>e in t?XQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>JQ(t,typeof e!="symbol"?e+"":e,n),mN=(t,e,n)=>e.has(t)||l3("Cannot "+n);var m=(t,e,n)=>(mN(t,e,"read from private field"),n?n.call(t):e.get(t)),j=(t,e,n)=>e.has(t)?l3("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(mN(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),F=(t,e,n)=>(mN(t,e,"access private method"),n);var lr=(t,e,n,r)=>({set _(i){L(t,e,i,n)},get _(){return m(t,e,r)}});function QQ(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Co(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gN={exports:{}},ky={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c3;function ZQ(){if(c3)return ky;c3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var o in i)o!=="key"&&(a[o]=i[o])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return ky.Fragment=e,ky.jsx=n,ky.jsxs=n,ky}var u3;function eZ(){return u3||(u3=1,gN.exports=ZQ()),gN.exports}var v=eZ(),vN={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d3;function tZ(){if(d3)return rt;d3=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function y(Y){return Y===null||typeof Y!="object"?null:(Y=g&&Y[g]||Y["@@iterator"],typeof Y=="function"?Y:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,E={};function C(Y,ne,ue){this.props=Y,this.context=ne,this.refs=E,this.updater=ue||w}C.prototype.isReactComponent={},C.prototype.setState=function(Y,ne){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,ne,"setState")},C.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function M(){}M.prototype=C.prototype;function R(Y,ne,ue){this.props=Y,this.context=ne,this.refs=E,this.updater=ue||w}var D=R.prototype=new M;D.constructor=R,S(D,C.prototype),D.isPureReactComponent=!0;var I=Array.isArray;function P(){}var k={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function B(Y,ne,ue){var me=ue.ref;return{$$typeof:t,type:Y,key:ne,ref:me!==void 0?me:null,props:ue}}function V(Y,ne){return B(Y.type,ne,Y.props)}function H(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===t}function G(Y){var ne={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(ue){return ne[ue]})}var Q=/\/+/g;function W(Y,ne){return typeof Y=="object"&&Y!==null&&Y.key!=null?G(""+Y.key):ne.toString(36)}function ee(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(P,P):(Y.status="pending",Y.then(function(ne){Y.status==="pending"&&(Y.status="fulfilled",Y.value=ne)},function(ne){Y.status==="pending"&&(Y.status="rejected",Y.reason=ne)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function $(Y,ne,ue,me,xe){var Me=typeof Y;(Me==="undefined"||Me==="boolean")&&(Y=null);var Ce=!1;if(Y===null)Ce=!0;else switch(Me){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(Y.$$typeof){case t:case e:Ce=!0;break;case f:return Ce=Y._init,$(Ce(Y._payload),ne,ue,me,xe)}}if(Ce)return xe=xe(Y),Ce=me===""?"."+W(Y,0):me,I(xe)?(ue="",Ce!=null&&(ue=Ce.replace(Q,"$&/")+"/"),$(xe,ne,ue,"",function(He){return He})):xe!=null&&(H(xe)&&(xe=V(xe,ue+(xe.key==null||Y&&Y.key===xe.key?"":(""+xe.key).replace(Q,"$&/")+"/")+Ce)),ne.push(xe)),1;Ce=0;var pt=me===""?".":me+":";if(I(Y))for(var he=0;he<Y.length;he++)me=Y[he],Me=pt+W(me,he),Ce+=$(me,ne,ue,Me,xe);else if(he=y(Y),typeof he=="function")for(Y=he.call(Y),he=0;!(me=Y.next()).done;)me=me.value,Me=pt+W(me,he++),Ce+=$(me,ne,ue,Me,xe);else if(Me==="object"){if(typeof Y.then=="function")return $(ee(Y),ne,ue,me,xe);throw ne=String(Y),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function q(Y,ne,ue){if(Y==null)return Y;var me=[],xe=0;return $(Y,me,"","",function(Me){return ne.call(ue,Me,xe++)}),me}function J(Y){if(Y._status===-1){var ne=Y._result;ne=ne(),ne.then(function(ue){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=ue)},function(ue){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=ue)}),Y._status===-1&&(Y._status=0,Y._result=ne)}if(Y._status===1)return Y._result.default;throw Y._result}var ae=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)},ye={map:q,forEach:function(Y,ne,ue){q(Y,function(){ne.apply(this,arguments)},ue)},count:function(Y){var ne=0;return q(Y,function(){ne++}),ne},toArray:function(Y){return q(Y,function(ne){return ne})||[]},only:function(Y){if(!H(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}};return rt.Activity=h,rt.Children=ye,rt.Component=C,rt.Fragment=n,rt.Profiler=i,rt.PureComponent=R,rt.StrictMode=r,rt.Suspense=c,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,rt.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return k.H.useMemoCache(Y)}},rt.cache=function(Y){return function(){return Y.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(Y,ne,ue){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var me=S({},Y.props),xe=Y.key;if(ne!=null)for(Me in ne.key!==void 0&&(xe=""+ne.key),ne)!U.call(ne,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&ne.ref===void 0||(me[Me]=ne[Me]);var Me=arguments.length-2;if(Me===1)me.children=ue;else if(1<Me){for(var Ce=Array(Me),pt=0;pt<Me;pt++)Ce[pt]=arguments[pt+2];me.children=Ce}return B(Y.type,xe,me)},rt.createContext=function(Y){return Y={$$typeof:s,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:a,_context:Y},Y},rt.createElement=function(Y,ne,ue){var me,xe={},Me=null;if(ne!=null)for(me in ne.key!==void 0&&(Me=""+ne.key),ne)U.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(xe[me]=ne[me]);var Ce=arguments.length-2;if(Ce===1)xe.children=ue;else if(1<Ce){for(var pt=Array(Ce),he=0;he<Ce;he++)pt[he]=arguments[he+2];xe.children=pt}if(Y&&Y.defaultProps)for(me in Ce=Y.defaultProps,Ce)xe[me]===void 0&&(xe[me]=Ce[me]);return B(Y,Me,xe)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(Y){return{$$typeof:o,render:Y}},rt.isValidElement=H,rt.lazy=function(Y){return{$$typeof:f,_payload:{_status:-1,_result:Y},_init:J}},rt.memo=function(Y,ne){return{$$typeof:u,type:Y,compare:ne===void 0?null:ne}},rt.startTransition=function(Y){var ne=k.T,ue={};k.T=ue;try{var me=Y(),xe=k.S;xe!==null&&xe(ue,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(P,ae)}catch(Me){ae(Me)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),k.T=ne}},rt.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},rt.use=function(Y){return k.H.use(Y)},rt.useActionState=function(Y,ne,ue){return k.H.useActionState(Y,ne,ue)},rt.useCallback=function(Y,ne){return k.H.useCallback(Y,ne)},rt.useContext=function(Y){return k.H.useContext(Y)},rt.useDebugValue=function(){},rt.useDeferredValue=function(Y,ne){return k.H.useDeferredValue(Y,ne)},rt.useEffect=function(Y,ne){return k.H.useEffect(Y,ne)},rt.useEffectEvent=function(Y){return k.H.useEffectEvent(Y)},rt.useId=function(){return k.H.useId()},rt.useImperativeHandle=function(Y,ne,ue){return k.H.useImperativeHandle(Y,ne,ue)},rt.useInsertionEffect=function(Y,ne){return k.H.useInsertionEffect(Y,ne)},rt.useLayoutEffect=function(Y,ne){return k.H.useLayoutEffect(Y,ne)},rt.useMemo=function(Y,ne){return k.H.useMemo(Y,ne)},rt.useOptimistic=function(Y,ne){return k.H.useOptimistic(Y,ne)},rt.useReducer=function(Y,ne,ue){return k.H.useReducer(Y,ne,ue)},rt.useRef=function(Y){return k.H.useRef(Y)},rt.useState=function(Y){return k.H.useState(Y)},rt.useSyncExternalStore=function(Y,ne,ue){return k.H.useSyncExternalStore(Y,ne,ue)},rt.useTransition=function(){return k.H.useTransition()},rt.version="19.2.3",rt}var f3;function _v(){return f3||(f3=1,vN.exports=tZ()),vN.exports}var T=_v();const ir=Co(T),Dk=QQ({__proto__:null,default:ir},[T]);var yN={exports:{}},Iy={},bN={exports:{}},xN={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h3;function nZ(){return h3||(h3=1,(function(t){function e($,q){var J=$.length;$.push(q);e:for(;0<J;){var ae=J-1>>>1,ye=$[ae];if(0<i(ye,q))$[ae]=q,$[J]=ye,J=ae;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],J=$.pop();if(J!==q){$[0]=J;e:for(var ae=0,ye=$.length,Y=ye>>>1;ae<Y;){var ne=2*(ae+1)-1,ue=$[ne],me=ne+1,xe=$[me];if(0>i(ue,J))me<ye&&0>i(xe,ue)?($[ae]=xe,$[me]=J,ae=me):($[ae]=ue,$[ne]=J,ae=ne);else if(me<ye&&0>i(xe,J))$[ae]=xe,$[me]=J,ae=me;else break e}}return q}function i($,q){var J=$.sortIndex-q.sortIndex;return J!==0?J:$.id-q.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();t.unstable_now=function(){return s.now()-o}}var c=[],u=[],f=1,h=null,g=3,y=!1,w=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function D($){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=$)r(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(u)}}function I($){if(S=!1,D($),!w)if(n(c)!==null)w=!0,P||(P=!0,G());else{var q=n(u);q!==null&&ee(I,q.startTime-$)}}var P=!1,k=-1,U=5,B=-1;function V(){return E?!0:!(t.unstable_now()-B<U)}function H(){if(E=!1,P){var $=t.unstable_now();B=$;var q=!0;try{e:{w=!1,S&&(S=!1,M(k),k=-1),y=!0;var J=g;try{t:{for(D($),h=n(c);h!==null&&!(h.expirationTime>$&&V());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,g=h.priorityLevel;var ye=ae(h.expirationTime<=$);if($=t.unstable_now(),typeof ye=="function"){h.callback=ye,D($),q=!0;break t}h===n(c)&&r(c),D($)}else r(c);h=n(c)}if(h!==null)q=!0;else{var Y=n(u);Y!==null&&ee(I,Y.startTime-$),q=!1}}break e}finally{h=null,g=J,y=!1}q=void 0}}finally{q?G():P=!1}}}var G;if(typeof R=="function")G=function(){R(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,W=Q.port2;Q.port1.onmessage=H,G=function(){W.postMessage(null)}}else G=function(){C(H,0)};function ee($,q){k=C(function(){$(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var J=g;g=q;try{return $()}finally{g=J}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=g;g=$;try{return q()}finally{g=J}},t.unstable_scheduleCallback=function($,q,J){var ae=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ae+J:ae):J=ae,$){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=J+ye,$={id:f++,callback:q,priorityLevel:$,startTime:J,expirationTime:ye,sortIndex:-1},J>ae?($.sortIndex=J,e(u,$),n(c)===null&&$===n(u)&&(S?(M(k),k=-1):S=!0,ee(I,J-ae))):($.sortIndex=ye,e(c,$),w||y||(w=!0,P||(P=!0,G()))),$},t.unstable_shouldYield=V,t.unstable_wrapCallback=function($){var q=g;return function(){var J=g;g=q;try{return $.apply(this,arguments)}finally{g=J}}}})(xN)),xN}var p3;function rZ(){return p3||(p3=1,bN.exports=nZ()),bN.exports}var wN={exports:{}},fi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m3;function iZ(){if(m3)return fi;m3=1;var t=_v();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,u,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:h==null?null:""+h,children:c,containerInfo:u,implementation:f}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,fi.createPortal=function(c,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(c,u,null,f)},fi.flushSync=function(c){var u=s.T,f=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=u,r.p=f,r.d.f()}},fi.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},fi.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},fi.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin),g=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:y}):f==="script"&&r.d.X(c,{crossOrigin:h,integrity:g,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},fi.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},fi.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,h=o(f,u.crossOrigin);r.d.L(c,f,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},fi.preloadModule=function(c,u){if(typeof c=="string")if(u){var f=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},fi.requestFormReset=function(c){r.d.r(c)},fi.unstable_batchedUpdates=function(c,u){return c(u)},fi.useFormState=function(c,u,f){return s.H.useFormState(c,u,f)},fi.useFormStatus=function(){return s.H.useHostTransitionStatus()},fi.version="19.2.3",fi}var g3;function Q6(){if(g3)return wN.exports;g3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),wN.exports=iZ(),wN.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v3;function aZ(){if(v3)return Iy;v3=1;var t=rZ(),e=_v(),n=Q6();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function s(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function o(l){if(l.tag===31){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function c(l){if(a(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=a(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,b=d;;){var _=p.return;if(_===null)break;var N=_.alternate;if(N===null){if(b=_.return,b!==null){p=b;continue}break}if(_.child===N.child){for(N=_.child;N;){if(N===p)return c(_),l;if(N===b)return c(_),d;N=N.sibling}throw Error(r(188))}if(p.return!==b.return)p=_,b=N;else{for(var O=!1,z=_.child;z;){if(z===p){O=!0,p=_,b=N;break}if(z===b){O=!0,b=_,p=N;break}z=z.sibling}if(!O){for(z=N.child;z;){if(z===p){O=!0,p=N,b=_;break}if(z===b){O=!0,b=N,p=_;break}z=z.sibling}if(!O)throw Error(r(189))}}if(p.alternate!==b)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function f(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=f(l),d!==null)return d;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),R=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=H&&l[H]||l["@@iterator"],typeof l=="function"?l:null)}var Q=Symbol.for("react.client.reference");function W(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Q?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case S:return"Fragment";case C:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case R:return l.displayName||"Context";case M:return(l._context.displayName||"Context")+".Consumer";case D:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case k:return d=l.displayName||null,d!==null?d:W(l.type)||"Memo";case U:d=l._payload,l=l._init;try{return W(l(d))}catch{}}return null}var ee=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},ae=[],ye=-1;function Y(l){return{current:l}}function ne(l){0>ye||(l.current=ae[ye],ae[ye]=null,ye--)}function ue(l,d){ye++,ae[ye]=l.current,l.current=d}var me=Y(null),xe=Y(null),Me=Y(null),Ce=Y(null);function pt(l,d){switch(ue(Me,d),ue(xe,l),ue(me,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?P4(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=P4(d),l=k4(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ne(me),ue(me,l)}function he(){ne(me),ne(xe),ne(Me)}function He(l){l.memoizedState!==null&&ue(Ce,l);var d=me.current,p=k4(d,l.type);d!==p&&(ue(xe,l),ue(me,p))}function ke(l){xe.current===l&&(ne(me),ne(xe)),Ce.current===l&&(ne(Ce),Ny._currentValue=J)}var te,Ee;function be(l){if(te===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);te=d&&d[1]||"",Ee=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+Ee}var Te=!1;function qe(l,d){if(!l||Te)return"";Te=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(de){var le=de}Reflect.construct(l,[],ve)}else{try{ve.call()}catch(de){le=de}l.call(ve.prototype)}}else{try{throw Error()}catch(de){le=de}(ve=l())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(de){if(de&&le&&typeof de.stack=="string")return[de.stack,le.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var N=b.DetermineComponentFrameRoot(),O=N[0],z=N[1];if(O&&z){var X=O.split(`
`),oe=z.split(`
`);for(_=b=0;b<X.length&&!X[b].includes("DetermineComponentFrameRoot");)b++;for(;_<oe.length&&!oe[_].includes("DetermineComponentFrameRoot");)_++;if(b===X.length||_===oe.length)for(b=X.length-1,_=oe.length-1;1<=b&&0<=_&&X[b]!==oe[_];)_--;for(;1<=b&&0<=_;b--,_--)if(X[b]!==oe[_]){if(b!==1||_!==1)do if(b--,_--,0>_||X[b]!==oe[_]){var pe=`
`+X[b].replace(" at new "," at ");return l.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",l.displayName)),pe}while(1<=b&&0<=_);break}}}finally{Te=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?be(p):""}function et(l,d){switch(l.tag){case 26:case 27:case 5:return be(l.type);case 16:return be("Lazy");case 13:return l.child!==d&&d!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return qe(l.type,!1);case 11:return qe(l.type.render,!1);case 1:return qe(l.type,!0);case 31:return be("Activity");default:return""}}function Hn(l){try{var d="",p=null;do d+=et(l,p),p=l,l=l.return;while(l);return d}catch(b){return`
Error generating stack: `+b.message+`
`+b.stack}}var rs=Object.prototype.hasOwnProperty,xr=t.unstable_scheduleCallback,is=t.unstable_cancelCallback,Mn=t.unstable_shouldYield,ya=t.unstable_requestPaint,Lt=t.unstable_now,wr=t.unstable_getCurrentPriorityLevel,Vi=t.unstable_ImmediatePriority,as=t.unstable_UserBlockingPriority,Sn=t.unstable_NormalPriority,Sr=t.unstable_LowPriority,Wi=t.unstable_IdlePriority,ef=t.log,$v=t.unstable_setDisableYieldValue,tf=null,En=null;function Gs(l){if(typeof ef=="function"&&$v(l),En&&typeof En.setStrictMode=="function")try{En.setStrictMode(tf,l)}catch{}}var di=Math.clz32?Math.clz32:_w,Aw=Math.log,oC=Math.LN2;function _w(l){return l>>>=0,l===0?32:31-(Aw(l)/oC|0)|0}var bl=256,nf=262144,lu=4194304;function xl(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function rf(l,d,p){var b=l.pendingLanes;if(b===0)return 0;var _=0,N=l.suspendedLanes,O=l.pingedLanes;l=l.warmLanes;var z=b&134217727;return z!==0?(b=z&~N,b!==0?_=xl(b):(O&=z,O!==0?_=xl(O):p||(p=z&~l,p!==0&&(_=xl(p))))):(z=b&~N,z!==0?_=xl(z):O!==0?_=xl(O):p||(p=b&~l,p!==0&&(_=xl(p)))),_===0?0:d!==0&&d!==_&&(d&N)===0&&(N=_&-_,p=d&-d,N>=p||N===32&&(p&4194048)!==0)?d:_}function af(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function Cw(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sf(){var l=lu;return lu<<=1,(lu&62914560)===0&&(lu=4194304),l}function cu(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function uu(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function lC(l,d,p,b,_,N){var O=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var z=l.entanglements,X=l.expirationTimes,oe=l.hiddenUpdates;for(p=O&~p;0<p;){var pe=31-di(p),ve=1<<pe;z[pe]=0,X[pe]=-1;var le=oe[pe];if(le!==null)for(oe[pe]=null,pe=0;pe<le.length;pe++){var de=le[pe];de!==null&&(de.lane&=-536870913)}p&=~ve}b!==0&&Tw(l,b,0),N!==0&&_===0&&l.tag!==0&&(l.suspendedLanes|=N&~(O&~d))}function Tw(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-di(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|p&261930}function K(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var b=31-di(p),_=1<<b;_&d|l[b]&d&&(l[b]|=d),p&=~_}}function re(l,d){var p=d&-d;return p=(p&42)!==0?1:ce(p),(p&(l.suspendedLanes|d))!==0?0:p}function ce(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function we(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Ae(){var l=q.p;return l!==0?l:(l=window.event,l===void 0?32:t3(l.type))}function Ve(l,d){var p=q.p;try{return q.p=l,d()}finally{q.p=p}}var Ue=Math.random().toString(36).slice(2),_e="__reactFiber$"+Ue,Re="__reactProps$"+Ue,Be="__reactContainer$"+Ue,tt="__reactEvents$"+Ue,Ke="__reactListeners$"+Ue,st="__reactHandles$"+Ue,gt="__reactResources$"+Ue,An="__reactMarker$"+Ue;function Pn(l){delete l[_e],delete l[Re],delete l[tt],delete l[Ke],delete l[st]}function kn(l){var d=l[_e];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Be]||p[_e]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=U4(l);l!==null;){if(p=l[_e])return p;l=U4(l)}return d}l=p,p=l.parentNode}return null}function St(l){if(l=l[_e]||l[Be]){var d=l.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return l}return null}function Er(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function Yi(l){var d=l[gt];return d||(d=l[gt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function pn(l){l[An]=!0}var qs=new Set,ba={};function Vs(l,d){ss(l,d),ss(l+"Capture",d)}function ss(l,d){for(ba[l]=d,l=0;l<d.length;l++)qs.add(d[l])}var wl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),of={},lf={};function Et(l){return rs.call(lf,l)?!0:rs.call(of,l)?!1:wl.test(l)?lf[l]=!0:(of[l]=!0,!1)}function zn(l,d,p){if(Et(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Ws(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function zr(l,d,p,b){if(b===null)l.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+b)}}function At(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function cf(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Nw(l,d,p){var b=Object.getOwnPropertyDescriptor(l.constructor.prototype,d);if(!l.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var _=b.get,N=b.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return _.call(this)},set:function(O){p=""+O,N.call(this,O)}}),Object.defineProperty(l,d,{enumerable:b.enumerable}),{getValue:function(){return p},setValue:function(O){p=""+O},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Gv(l){if(!l._valueTracker){var d=cf(l)?"checked":"value";l._valueTracker=Nw(l,d,""+l[d])}}function AL(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),b="";return l&&(b=cf(l)?l.checked?"true":"false":l.value),l=b,l!==p?(d.setValue(l),!0):!1}function Rw(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var GX=/[\n"\\]/g;function os(l){return l.replace(GX,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function cC(l,d,p,b,_,N,O,z){l.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?l.type=O:l.removeAttribute("type"),d!=null?O==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+At(d)):l.value!==""+At(d)&&(l.value=""+At(d)):O!=="submit"&&O!=="reset"||l.removeAttribute("value"),d!=null?uC(l,O,At(d)):p!=null?uC(l,O,At(p)):b!=null&&l.removeAttribute("value"),_==null&&N!=null&&(l.defaultChecked=!!N),_!=null&&(l.checked=_&&typeof _!="function"&&typeof _!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?l.name=""+At(z):l.removeAttribute("name")}function _L(l,d,p,b,_,N,O,z){if(N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(l.type=N),d!=null||p!=null){if(!(N!=="submit"&&N!=="reset"||d!=null)){Gv(l);return}p=p!=null?""+At(p):"",d=d!=null?""+At(d):p,z||d===l.value||(l.value=d),l.defaultValue=d}b=b??_,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=z?l.checked:!!b,l.defaultChecked=!!b,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(l.name=O),Gv(l)}function uC(l,d,p){d==="number"&&Rw(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Ap(l,d,p,b){if(l=l.options,d){d={};for(var _=0;_<p.length;_++)d["$"+p[_]]=!0;for(p=0;p<l.length;p++)_=d.hasOwnProperty("$"+l[p].value),l[p].selected!==_&&(l[p].selected=_),_&&b&&(l[p].defaultSelected=!0)}else{for(p=""+At(p),d=null,_=0;_<l.length;_++){if(l[_].value===p){l[_].selected=!0,b&&(l[_].defaultSelected=!0);return}d!==null||l[_].disabled||(d=l[_])}d!==null&&(d.selected=!0)}}function CL(l,d,p){if(d!=null&&(d=""+At(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+At(p):""}function TL(l,d,p,b){if(d==null){if(b!=null){if(p!=null)throw Error(r(92));if(ee(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),d=p}p=At(d),l.defaultValue=p,b=l.textContent,b===p&&b!==""&&b!==null&&(l.value=b),Gv(l)}function _p(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var qX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function NL(l,d,p){var b=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,p):typeof p!="number"||p===0||qX.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function RL(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var b in p)!p.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var _ in d)b=d[_],d.hasOwnProperty(_)&&p[_]!==b&&NL(l,_,b)}else for(var N in d)d.hasOwnProperty(N)&&NL(l,N,d[N])}function dC(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mw(l){return WX.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Sl(){}var fC=null;function hC(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Cp=null,Tp=null;function ML(l){var d=St(l);if(d&&(l=d.stateNode)){var p=l[Re]||null;e:switch(l=d.stateNode,d.type){case"input":if(cC(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+os(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var b=p[d];if(b!==l&&b.form===l.form){var _=b[Re]||null;if(!_)throw Error(r(90));cC(b,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(d=0;d<p.length;d++)b=p[d],b.form===l.form&&AL(b)}break e;case"textarea":CL(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Ap(l,!!p.multiple,d,!1)}}}var pC=!1;function PL(l,d,p){if(pC)return l(d,p);pC=!0;try{var b=l(d);return b}finally{if(pC=!1,(Cp!==null||Tp!==null)&&(vS(),Cp&&(d=Cp,l=Tp,Tp=Cp=null,ML(d),l)))for(d=0;d<l.length;d++)ML(l[d])}}function qv(l,d){var p=l.stateNode;if(p===null)return null;var b=p[Re]||null;if(b===null)return null;p=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mC=!1;if(El)try{var Vv={};Object.defineProperty(Vv,"passive",{get:function(){mC=!0}}),window.addEventListener("test",Vv,Vv),window.removeEventListener("test",Vv,Vv)}catch{mC=!1}var du=null,gC=null,Pw=null;function kL(){if(Pw)return Pw;var l,d=gC,p=d.length,b,_="value"in du?du.value:du.textContent,N=_.length;for(l=0;l<p&&d[l]===_[l];l++);var O=p-l;for(b=1;b<=O&&d[p-b]===_[N-b];b++);return Pw=_.slice(l,1<b?1-b:void 0)}function kw(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Iw(){return!0}function IL(){return!1}function Ki(l){function d(p,b,_,N,O){this._reactName=p,this._targetInst=_,this.type=b,this.nativeEvent=N,this.target=O,this.currentTarget=null;for(var z in l)l.hasOwnProperty(z)&&(p=l[z],this[z]=p?p(N):N[z]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?Iw:IL,this.isPropagationStopped=IL,this}return h(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Iw)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Iw)},persist:function(){},isPersistent:Iw}),d}var uf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dw=Ki(uf),Wv=h({},uf,{view:0,detail:0}),YX=Ki(Wv),vC,yC,Yv,Lw=h({},Wv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xC,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Yv&&(Yv&&l.type==="mousemove"?(vC=l.screenX-Yv.screenX,yC=l.screenY-Yv.screenY):yC=vC=0,Yv=l),vC)},movementY:function(l){return"movementY"in l?l.movementY:yC}}),DL=Ki(Lw),KX=h({},Lw,{dataTransfer:0}),XX=Ki(KX),JX=h({},Wv,{relatedTarget:0}),bC=Ki(JX),QX=h({},uf,{animationName:0,elapsedTime:0,pseudoElement:0}),ZX=Ki(QX),eJ=h({},uf,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),tJ=Ki(eJ),nJ=h({},uf,{data:0}),LL=Ki(nJ),rJ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iJ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aJ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sJ(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=aJ[l])?!!d[l]:!1}function xC(){return sJ}var oJ=h({},Wv,{key:function(l){if(l.key){var d=rJ[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=kw(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?iJ[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xC,charCode:function(l){return l.type==="keypress"?kw(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?kw(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),lJ=Ki(oJ),cJ=h({},Lw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OL=Ki(cJ),uJ=h({},Wv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xC}),dJ=Ki(uJ),fJ=h({},uf,{propertyName:0,elapsedTime:0,pseudoElement:0}),hJ=Ki(fJ),pJ=h({},Lw,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),mJ=Ki(pJ),gJ=h({},uf,{newState:0,oldState:0}),vJ=Ki(gJ),yJ=[9,13,27,32],wC=El&&"CompositionEvent"in window,Kv=null;El&&"documentMode"in document&&(Kv=document.documentMode);var bJ=El&&"TextEvent"in window&&!Kv,jL=El&&(!wC||Kv&&8<Kv&&11>=Kv),FL=" ",UL=!1;function BL(l,d){switch(l){case"keyup":return yJ.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HL(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Np=!1;function xJ(l,d){switch(l){case"compositionend":return HL(d);case"keypress":return d.which!==32?null:(UL=!0,FL);case"textInput":return l=d.data,l===FL&&UL?null:l;default:return null}}function wJ(l,d){if(Np)return l==="compositionend"||!wC&&BL(l,d)?(l=kL(),Pw=gC=du=null,Np=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return jL&&d.locale!=="ko"?null:d.data;default:return null}}var SJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zL(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!SJ[l.type]:d==="textarea"}function $L(l,d,p,b){Cp?Tp?Tp.push(b):Tp=[b]:Cp=b,d=AS(d,"onChange"),0<d.length&&(p=new Dw("onChange","change",null,p,b),l.push({event:p,listeners:d}))}var Xv=null,Jv=null;function EJ(l){_4(l,0)}function Ow(l){var d=Er(l);if(AL(d))return l}function GL(l,d){if(l==="change")return d}var qL=!1;if(El){var SC;if(El){var EC="oninput"in document;if(!EC){var VL=document.createElement("div");VL.setAttribute("oninput","return;"),EC=typeof VL.oninput=="function"}SC=EC}else SC=!1;qL=SC&&(!document.documentMode||9<document.documentMode)}function WL(){Xv&&(Xv.detachEvent("onpropertychange",YL),Jv=Xv=null)}function YL(l){if(l.propertyName==="value"&&Ow(Jv)){var d=[];$L(d,Jv,l,hC(l)),PL(EJ,d)}}function AJ(l,d,p){l==="focusin"?(WL(),Xv=d,Jv=p,Xv.attachEvent("onpropertychange",YL)):l==="focusout"&&WL()}function _J(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Ow(Jv)}function CJ(l,d){if(l==="click")return Ow(d)}function TJ(l,d){if(l==="input"||l==="change")return Ow(d)}function NJ(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var xa=typeof Object.is=="function"?Object.is:NJ;function Qv(l,d){if(xa(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),b=Object.keys(d);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var _=p[b];if(!rs.call(d,_)||!xa(l[_],d[_]))return!1}return!0}function KL(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function XL(l,d){var p=KL(l);l=0;for(var b;p;){if(p.nodeType===3){if(b=l+p.textContent.length,l<=d&&b>=d)return{node:p,offset:d-l};l=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=KL(p)}}function JL(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?JL(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function QL(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Rw(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=Rw(l.document)}return d}function AC(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var RJ=El&&"documentMode"in document&&11>=document.documentMode,Rp=null,_C=null,Zv=null,CC=!1;function ZL(l,d,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;CC||Rp==null||Rp!==Rw(b)||(b=Rp,"selectionStart"in b&&AC(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Zv&&Qv(Zv,b)||(Zv=b,b=AS(_C,"onSelect"),0<b.length&&(d=new Dw("onSelect","select",null,d,p),l.push({event:d,listeners:b}),d.target=Rp)))}function df(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Mp={animationend:df("Animation","AnimationEnd"),animationiteration:df("Animation","AnimationIteration"),animationstart:df("Animation","AnimationStart"),transitionrun:df("Transition","TransitionRun"),transitionstart:df("Transition","TransitionStart"),transitioncancel:df("Transition","TransitionCancel"),transitionend:df("Transition","TransitionEnd")},TC={},eO={};El&&(eO=document.createElement("div").style,"AnimationEvent"in window||(delete Mp.animationend.animation,delete Mp.animationiteration.animation,delete Mp.animationstart.animation),"TransitionEvent"in window||delete Mp.transitionend.transition);function ff(l){if(TC[l])return TC[l];if(!Mp[l])return l;var d=Mp[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in eO)return TC[l]=d[p];return l}var tO=ff("animationend"),nO=ff("animationiteration"),rO=ff("animationstart"),MJ=ff("transitionrun"),PJ=ff("transitionstart"),kJ=ff("transitioncancel"),iO=ff("transitionend"),aO=new Map,NC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");NC.push("scrollEnd");function Ys(l,d){aO.set(l,d),Vs(d,[l])}var jw=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ls=[],Pp=0,RC=0;function Fw(){for(var l=Pp,d=RC=Pp=0;d<l;){var p=ls[d];ls[d++]=null;var b=ls[d];ls[d++]=null;var _=ls[d];ls[d++]=null;var N=ls[d];if(ls[d++]=null,b!==null&&_!==null){var O=b.pending;O===null?_.next=_:(_.next=O.next,O.next=_),b.pending=_}N!==0&&sO(p,_,N)}}function Uw(l,d,p,b){ls[Pp++]=l,ls[Pp++]=d,ls[Pp++]=p,ls[Pp++]=b,RC|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function MC(l,d,p,b){return Uw(l,d,p,b),Bw(l)}function hf(l,d){return Uw(l,null,null,d),Bw(l)}function sO(l,d,p){l.lanes|=p;var b=l.alternate;b!==null&&(b.lanes|=p);for(var _=!1,N=l.return;N!==null;)N.childLanes|=p,b=N.alternate,b!==null&&(b.childLanes|=p),N.tag===22&&(l=N.stateNode,l===null||l._visibility&1||(_=!0)),l=N,N=N.return;return l.tag===3?(N=l.stateNode,_&&d!==null&&(_=31-di(p),l=N.hiddenUpdates,b=l[_],b===null?l[_]=[d]:b.push(d),d.lane=p|536870912),N):null}function Bw(l){if(50<wy)throw wy=0,UT=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var kp={};function IJ(l,d,p,b){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(l,d,p,b){return new IJ(l,d,p,b)}function PC(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Al(l,d){var p=l.alternate;return p===null?(p=wa(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function oO(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Hw(l,d,p,b,_,N){var O=0;if(b=l,typeof l=="function")PC(l)&&(O=1);else if(typeof l=="string")O=FQ(l,p,me.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=wa(31,p,d,_),l.elementType=B,l.lanes=N,l;case S:return pf(p.children,_,N,d);case E:O=8,_|=24;break;case C:return l=wa(12,p,d,_|2),l.elementType=C,l.lanes=N,l;case I:return l=wa(13,p,d,_),l.elementType=I,l.lanes=N,l;case P:return l=wa(19,p,d,_),l.elementType=P,l.lanes=N,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case R:O=10;break e;case M:O=9;break e;case D:O=11;break e;case k:O=14;break e;case U:O=16,b=null;break e}O=29,p=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=wa(O,p,d,_),d.elementType=l,d.type=b,d.lanes=N,d}function pf(l,d,p,b){return l=wa(7,l,b,d),l.lanes=p,l}function kC(l,d,p){return l=wa(6,l,null,d),l.lanes=p,l}function lO(l){var d=wa(18,null,null,0);return d.stateNode=l,d}function IC(l,d,p){return d=wa(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var cO=new WeakMap;function cs(l,d){if(typeof l=="object"&&l!==null){var p=cO.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Hn(d)},cO.set(l,d),d)}return{value:l,source:d,stack:Hn(d)}}var Ip=[],Dp=0,zw=null,ey=0,us=[],ds=0,fu=null,No=1,Ro="";function _l(l,d){Ip[Dp++]=ey,Ip[Dp++]=zw,zw=l,ey=d}function uO(l,d,p){us[ds++]=No,us[ds++]=Ro,us[ds++]=fu,fu=l;var b=No;l=Ro;var _=32-di(b)-1;b&=~(1<<_),p+=1;var N=32-di(d)+_;if(30<N){var O=_-_%5;N=(b&(1<<O)-1).toString(32),b>>=O,_-=O,No=1<<32-di(d)+_|p<<_|b,Ro=N+l}else No=1<<N|p<<_|b,Ro=l}function DC(l){l.return!==null&&(_l(l,1),uO(l,1,0))}function LC(l){for(;l===zw;)zw=Ip[--Dp],Ip[Dp]=null,ey=Ip[--Dp],Ip[Dp]=null;for(;l===fu;)fu=us[--ds],us[ds]=null,Ro=us[--ds],us[ds]=null,No=us[--ds],us[ds]=null}function dO(l,d){us[ds++]=No,us[ds++]=Ro,us[ds++]=fu,No=d.id,Ro=d.overflow,fu=l}var $r=null,un=null,_t=!1,hu=null,fs=!1,OC=Error(r(519));function pu(l){var d=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ty(cs(d,l)),OC}function fO(l){var d=l.stateNode,p=l.type,b=l.memoizedProps;switch(d[_e]=l,d[Re]=b,p){case"dialog":yt("cancel",d),yt("close",d);break;case"iframe":case"object":case"embed":yt("load",d);break;case"video":case"audio":for(p=0;p<Ey.length;p++)yt(Ey[p],d);break;case"source":yt("error",d);break;case"img":case"image":case"link":yt("error",d),yt("load",d);break;case"details":yt("toggle",d);break;case"input":yt("invalid",d),_L(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0);break;case"select":yt("invalid",d);break;case"textarea":yt("invalid",d),TL(d,b.value,b.defaultValue,b.children)}p=b.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||b.suppressHydrationWarning===!0||R4(d.textContent,p)?(b.popover!=null&&(yt("beforetoggle",d),yt("toggle",d)),b.onScroll!=null&&yt("scroll",d),b.onScrollEnd!=null&&yt("scrollend",d),b.onClick!=null&&(d.onclick=Sl),d=!0):d=!1,d||pu(l,!0)}function hO(l){for($r=l.return;$r;)switch($r.tag){case 5:case 31:case 13:fs=!1;return;case 27:case 3:fs=!0;return;default:$r=$r.return}}function Lp(l){if(l!==$r)return!1;if(!_t)return hO(l),_t=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||eN(l.type,l.memoizedProps)),p=!p),p&&un&&pu(l),hO(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=F4(l)}else if(d===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));un=F4(l)}else d===27?(d=un,Nu(l.type)?(l=aN,aN=null,un=l):un=d):un=$r?ps(l.stateNode.nextSibling):null;return!0}function mf(){un=$r=null,_t=!1}function jC(){var l=hu;return l!==null&&(Zi===null?Zi=l:Zi.push.apply(Zi,l),hu=null),l}function ty(l){hu===null?hu=[l]:hu.push(l)}var FC=Y(null),gf=null,Cl=null;function mu(l,d,p){ue(FC,d._currentValue),d._currentValue=p}function Tl(l){l._currentValue=FC.current,ne(FC)}function UC(l,d,p){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===p)break;l=l.return}}function BC(l,d,p,b){var _=l.child;for(_!==null&&(_.return=l);_!==null;){var N=_.dependencies;if(N!==null){var O=_.child;N=N.firstContext;e:for(;N!==null;){var z=N;N=_;for(var X=0;X<d.length;X++)if(z.context===d[X]){N.lanes|=p,z=N.alternate,z!==null&&(z.lanes|=p),UC(N.return,p,l),b||(O=null);break e}N=z.next}}else if(_.tag===18){if(O=_.return,O===null)throw Error(r(341));O.lanes|=p,N=O.alternate,N!==null&&(N.lanes|=p),UC(O,p,l),O=null}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===l){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}}function Op(l,d,p,b){l=null;for(var _=d,N=!1;_!==null;){if(!N){if((_.flags&524288)!==0)N=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var O=_.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var z=_.type;xa(_.pendingProps.value,O.value)||(l!==null?l.push(z):l=[z])}}else if(_===Ce.current){if(O=_.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(l!==null?l.push(Ny):l=[Ny])}_=_.return}l!==null&&BC(d,l,p,b),d.flags|=262144}function $w(l){for(l=l.firstContext;l!==null;){if(!xa(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function vf(l){gf=l,Cl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Gr(l){return pO(gf,l)}function Gw(l,d){return gf===null&&vf(l),pO(l,d)}function pO(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},Cl===null){if(l===null)throw Error(r(308));Cl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else Cl=Cl.next=d;return p}var DJ=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},LJ=t.unstable_scheduleCallback,OJ=t.unstable_NormalPriority,Xn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function HC(){return{controller:new DJ,data:new Map,refCount:0}}function ny(l){l.refCount--,l.refCount===0&&LJ(OJ,function(){l.controller.abort()})}var ry=null,zC=0,jp=0,Fp=null;function jJ(l,d){if(ry===null){var p=ry=[];zC=0,jp=qT(),Fp={status:"pending",value:void 0,then:function(b){p.push(b)}}}return zC++,d.then(mO,mO),d}function mO(){if(--zC===0&&ry!==null){Fp!==null&&(Fp.status="fulfilled");var l=ry;ry=null,jp=0,Fp=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function FJ(l,d){var p=[],b={status:"pending",value:null,reason:null,then:function(_){p.push(_)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var _=0;_<p.length;_++)(0,p[_])(d)},function(_){for(b.status="rejected",b.reason=_,_=0;_<p.length;_++)(0,p[_])(void 0)}),b}var gO=$.S;$.S=function(l,d){Zj=Lt(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&jJ(l,d),gO!==null&&gO(l,d)};var yf=Y(null);function $C(){var l=yf.current;return l!==null?l:Zt.pooledCache}function qw(l,d){d===null?ue(yf,yf.current):ue(yf,d.pool)}function vO(){var l=$C();return l===null?null:{parent:Xn._currentValue,pool:l}}var Up=Error(r(460)),GC=Error(r(474)),Vw=Error(r(542)),Ww={then:function(){}};function yO(l){return l=l.status,l==="fulfilled"||l==="rejected"}function bO(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(Sl,Sl),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,wO(l),l;default:if(typeof d.status=="string")d.then(Sl,Sl);else{if(l=Zt,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var _=d;_.status="fulfilled",_.value=b}},function(b){if(d.status==="pending"){var _=d;_.status="rejected",_.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,wO(l),l}throw xf=d,Up}}function bf(l){try{var d=l._init;return d(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(xf=p,Up):p}}var xf=null;function xO(){if(xf===null)throw Error(r(459));var l=xf;return xf=null,l}function wO(l){if(l===Up||l===Vw)throw Error(r(483))}var Bp=null,iy=0;function Yw(l){var d=iy;return iy+=1,Bp===null&&(Bp=[]),bO(Bp,l,d)}function ay(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Kw(l,d){throw d.$$typeof===g?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function SO(l){function d(ie,Z){if(l){var se=ie.deletions;se===null?(ie.deletions=[Z],ie.flags|=16):se.push(Z)}}function p(ie,Z){if(!l)return null;for(;Z!==null;)d(ie,Z),Z=Z.sibling;return null}function b(ie){for(var Z=new Map;ie!==null;)ie.key!==null?Z.set(ie.key,ie):Z.set(ie.index,ie),ie=ie.sibling;return Z}function _(ie,Z){return ie=Al(ie,Z),ie.index=0,ie.sibling=null,ie}function N(ie,Z,se){return ie.index=se,l?(se=ie.alternate,se!==null?(se=se.index,se<Z?(ie.flags|=67108866,Z):se):(ie.flags|=67108866,Z)):(ie.flags|=1048576,Z)}function O(ie){return l&&ie.alternate===null&&(ie.flags|=67108866),ie}function z(ie,Z,se,ge){return Z===null||Z.tag!==6?(Z=kC(se,ie.mode,ge),Z.return=ie,Z):(Z=_(Z,se),Z.return=ie,Z)}function X(ie,Z,se,ge){var Xe=se.type;return Xe===S?pe(ie,Z,se.props.children,ge,se.key):Z!==null&&(Z.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===U&&bf(Xe)===Z.type)?(Z=_(Z,se.props),ay(Z,se),Z.return=ie,Z):(Z=Hw(se.type,se.key,se.props,null,ie.mode,ge),ay(Z,se),Z.return=ie,Z)}function oe(ie,Z,se,ge){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==se.containerInfo||Z.stateNode.implementation!==se.implementation?(Z=IC(se,ie.mode,ge),Z.return=ie,Z):(Z=_(Z,se.children||[]),Z.return=ie,Z)}function pe(ie,Z,se,ge,Xe){return Z===null||Z.tag!==7?(Z=pf(se,ie.mode,ge,Xe),Z.return=ie,Z):(Z=_(Z,se),Z.return=ie,Z)}function ve(ie,Z,se){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=kC(""+Z,ie.mode,se),Z.return=ie,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return se=Hw(Z.type,Z.key,Z.props,null,ie.mode,se),ay(se,Z),se.return=ie,se;case w:return Z=IC(Z,ie.mode,se),Z.return=ie,Z;case U:return Z=bf(Z),ve(ie,Z,se)}if(ee(Z)||G(Z))return Z=pf(Z,ie.mode,se,null),Z.return=ie,Z;if(typeof Z.then=="function")return ve(ie,Yw(Z),se);if(Z.$$typeof===R)return ve(ie,Gw(ie,Z),se);Kw(ie,Z)}return null}function le(ie,Z,se,ge){var Xe=Z!==null?Z.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return Xe!==null?null:z(ie,Z,""+se,ge);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case y:return se.key===Xe?X(ie,Z,se,ge):null;case w:return se.key===Xe?oe(ie,Z,se,ge):null;case U:return se=bf(se),le(ie,Z,se,ge)}if(ee(se)||G(se))return Xe!==null?null:pe(ie,Z,se,ge,null);if(typeof se.then=="function")return le(ie,Z,Yw(se),ge);if(se.$$typeof===R)return le(ie,Z,Gw(ie,se),ge);Kw(ie,se)}return null}function de(ie,Z,se,ge,Xe){if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return ie=ie.get(se)||null,z(Z,ie,""+ge,Xe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case y:return ie=ie.get(ge.key===null?se:ge.key)||null,X(Z,ie,ge,Xe);case w:return ie=ie.get(ge.key===null?se:ge.key)||null,oe(Z,ie,ge,Xe);case U:return ge=bf(ge),de(ie,Z,se,ge,Xe)}if(ee(ge)||G(ge))return ie=ie.get(se)||null,pe(Z,ie,ge,Xe,null);if(typeof ge.then=="function")return de(ie,Z,se,Yw(ge),Xe);if(ge.$$typeof===R)return de(ie,Z,se,Gw(Z,ge),Xe);Kw(Z,ge)}return null}function je(ie,Z,se,ge){for(var Xe=null,Rt=null,ze=Z,ut=Z=0,xt=null;ze!==null&&ut<se.length;ut++){ze.index>ut?(xt=ze,ze=null):xt=ze.sibling;var Mt=le(ie,ze,se[ut],ge);if(Mt===null){ze===null&&(ze=xt);break}l&&ze&&Mt.alternate===null&&d(ie,ze),Z=N(Mt,Z,ut),Rt===null?Xe=Mt:Rt.sibling=Mt,Rt=Mt,ze=xt}if(ut===se.length)return p(ie,ze),_t&&_l(ie,ut),Xe;if(ze===null){for(;ut<se.length;ut++)ze=ve(ie,se[ut],ge),ze!==null&&(Z=N(ze,Z,ut),Rt===null?Xe=ze:Rt.sibling=ze,Rt=ze);return _t&&_l(ie,ut),Xe}for(ze=b(ze);ut<se.length;ut++)xt=de(ze,ie,ut,se[ut],ge),xt!==null&&(l&&xt.alternate!==null&&ze.delete(xt.key===null?ut:xt.key),Z=N(xt,Z,ut),Rt===null?Xe=xt:Rt.sibling=xt,Rt=xt);return l&&ze.forEach(function(Iu){return d(ie,Iu)}),_t&&_l(ie,ut),Xe}function Qe(ie,Z,se,ge){if(se==null)throw Error(r(151));for(var Xe=null,Rt=null,ze=Z,ut=Z=0,xt=null,Mt=se.next();ze!==null&&!Mt.done;ut++,Mt=se.next()){ze.index>ut?(xt=ze,ze=null):xt=ze.sibling;var Iu=le(ie,ze,Mt.value,ge);if(Iu===null){ze===null&&(ze=xt);break}l&&ze&&Iu.alternate===null&&d(ie,ze),Z=N(Iu,Z,ut),Rt===null?Xe=Iu:Rt.sibling=Iu,Rt=Iu,ze=xt}if(Mt.done)return p(ie,ze),_t&&_l(ie,ut),Xe;if(ze===null){for(;!Mt.done;ut++,Mt=se.next())Mt=ve(ie,Mt.value,ge),Mt!==null&&(Z=N(Mt,Z,ut),Rt===null?Xe=Mt:Rt.sibling=Mt,Rt=Mt);return _t&&_l(ie,ut),Xe}for(ze=b(ze);!Mt.done;ut++,Mt=se.next())Mt=de(ze,ie,ut,Mt.value,ge),Mt!==null&&(l&&Mt.alternate!==null&&ze.delete(Mt.key===null?ut:Mt.key),Z=N(Mt,Z,ut),Rt===null?Xe=Mt:Rt.sibling=Mt,Rt=Mt);return l&&ze.forEach(function(KQ){return d(ie,KQ)}),_t&&_l(ie,ut),Xe}function Vt(ie,Z,se,ge){if(typeof se=="object"&&se!==null&&se.type===S&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case y:e:{for(var Xe=se.key;Z!==null;){if(Z.key===Xe){if(Xe=se.type,Xe===S){if(Z.tag===7){p(ie,Z.sibling),ge=_(Z,se.props.children),ge.return=ie,ie=ge;break e}}else if(Z.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===U&&bf(Xe)===Z.type){p(ie,Z.sibling),ge=_(Z,se.props),ay(ge,se),ge.return=ie,ie=ge;break e}p(ie,Z);break}else d(ie,Z);Z=Z.sibling}se.type===S?(ge=pf(se.props.children,ie.mode,ge,se.key),ge.return=ie,ie=ge):(ge=Hw(se.type,se.key,se.props,null,ie.mode,ge),ay(ge,se),ge.return=ie,ie=ge)}return O(ie);case w:e:{for(Xe=se.key;Z!==null;){if(Z.key===Xe)if(Z.tag===4&&Z.stateNode.containerInfo===se.containerInfo&&Z.stateNode.implementation===se.implementation){p(ie,Z.sibling),ge=_(Z,se.children||[]),ge.return=ie,ie=ge;break e}else{p(ie,Z);break}else d(ie,Z);Z=Z.sibling}ge=IC(se,ie.mode,ge),ge.return=ie,ie=ge}return O(ie);case U:return se=bf(se),Vt(ie,Z,se,ge)}if(ee(se))return je(ie,Z,se,ge);if(G(se)){if(Xe=G(se),typeof Xe!="function")throw Error(r(150));return se=Xe.call(se),Qe(ie,Z,se,ge)}if(typeof se.then=="function")return Vt(ie,Z,Yw(se),ge);if(se.$$typeof===R)return Vt(ie,Z,Gw(ie,se),ge);Kw(ie,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,Z!==null&&Z.tag===6?(p(ie,Z.sibling),ge=_(Z,se),ge.return=ie,ie=ge):(p(ie,Z),ge=kC(se,ie.mode,ge),ge.return=ie,ie=ge),O(ie)):p(ie,Z)}return function(ie,Z,se,ge){try{iy=0;var Xe=Vt(ie,Z,se,ge);return Bp=null,Xe}catch(ze){if(ze===Up||ze===Vw)throw ze;var Rt=wa(29,ze,null,ie.mode);return Rt.lanes=ge,Rt.return=ie,Rt}finally{}}}var wf=SO(!0),EO=SO(!1),gu=!1;function qC(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function VC(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function vu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function yu(l,d,p){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(It&2)!==0){var _=b.pending;return _===null?d.next=d:(d.next=_.next,_.next=d),b.pending=d,d=Bw(l),sO(l,null,p),d}return Uw(l,b,d,p),Bw(l)}function sy(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,K(l,p)}}function WC(l,d){var p=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var _=null,N=null;if(p=p.firstBaseUpdate,p!==null){do{var O={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};N===null?_=N=O:N=N.next=O,p=p.next}while(p!==null);N===null?_=N=d:N=N.next=d}else _=N=d;p={baseState:b.baseState,firstBaseUpdate:_,lastBaseUpdate:N,shared:b.shared,callbacks:b.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var YC=!1;function oy(){if(YC){var l=Fp;if(l!==null)throw l}}function ly(l,d,p,b){YC=!1;var _=l.updateQueue;gu=!1;var N=_.firstBaseUpdate,O=_.lastBaseUpdate,z=_.shared.pending;if(z!==null){_.shared.pending=null;var X=z,oe=X.next;X.next=null,O===null?N=oe:O.next=oe,O=X;var pe=l.alternate;pe!==null&&(pe=pe.updateQueue,z=pe.lastBaseUpdate,z!==O&&(z===null?pe.firstBaseUpdate=oe:z.next=oe,pe.lastBaseUpdate=X))}if(N!==null){var ve=_.baseState;O=0,pe=oe=X=null,z=N;do{var le=z.lane&-536870913,de=le!==z.lane;if(de?(bt&le)===le:(b&le)===le){le!==0&&le===jp&&(YC=!0),pe!==null&&(pe=pe.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var je=l,Qe=z;le=d;var Vt=p;switch(Qe.tag){case 1:if(je=Qe.payload,typeof je=="function"){ve=je.call(Vt,ve,le);break e}ve=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Qe.payload,le=typeof je=="function"?je.call(Vt,ve,le):je,le==null)break e;ve=h({},ve,le);break e;case 2:gu=!0}}le=z.callback,le!==null&&(l.flags|=64,de&&(l.flags|=8192),de=_.callbacks,de===null?_.callbacks=[le]:de.push(le))}else de={lane:le,tag:z.tag,payload:z.payload,callback:z.callback,next:null},pe===null?(oe=pe=de,X=ve):pe=pe.next=de,O|=le;if(z=z.next,z===null){if(z=_.shared.pending,z===null)break;de=z,z=de.next,de.next=null,_.lastBaseUpdate=de,_.shared.pending=null}}while(!0);pe===null&&(X=ve),_.baseState=X,_.firstBaseUpdate=oe,_.lastBaseUpdate=pe,N===null&&(_.shared.lanes=0),Eu|=O,l.lanes=O,l.memoizedState=ve}}function AO(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function _O(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)AO(p[l],d)}var Hp=Y(null),Xw=Y(0);function CO(l,d){l=Ol,ue(Xw,l),ue(Hp,d),Ol=l|d.baseLanes}function KC(){ue(Xw,Ol),ue(Hp,Hp.current)}function XC(){Ol=Xw.current,ne(Hp),ne(Xw)}var Sa=Y(null),hs=null;function bu(l){var d=l.alternate;ue($n,$n.current&1),ue(Sa,l),hs===null&&(d===null||Hp.current!==null||d.memoizedState!==null)&&(hs=l)}function JC(l){ue($n,$n.current),ue(Sa,l),hs===null&&(hs=l)}function TO(l){l.tag===22?(ue($n,$n.current),ue(Sa,l),hs===null&&(hs=l)):xu()}function xu(){ue($n,$n.current),ue(Sa,Sa.current)}function Ea(l){ne(Sa),hs===l&&(hs=null),ne($n)}var $n=Y(0);function Jw(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||rN(p)||iN(p)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Nl=0,lt=null,Gt=null,Jn=null,Qw=!1,zp=!1,Sf=!1,Zw=0,cy=0,$p=null,UJ=0;function In(){throw Error(r(321))}function QC(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!xa(l[p],d[p]))return!1;return!0}function ZC(l,d,p,b,_,N){return Nl=N,lt=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,$.H=l===null||l.memoizedState===null?uj:pT,Sf=!1,N=p(b,_),Sf=!1,zp&&(N=RO(d,p,b,_)),NO(l),N}function NO(l){$.H=fy;var d=Gt!==null&&Gt.next!==null;if(Nl=0,Jn=Gt=lt=null,Qw=!1,cy=0,$p=null,d)throw Error(r(300));l===null||Qn||(l=l.dependencies,l!==null&&$w(l)&&(Qn=!0))}function RO(l,d,p,b){lt=l;var _=0;do{if(zp&&($p=null),cy=0,zp=!1,25<=_)throw Error(r(301));if(_+=1,Jn=Gt=null,l.updateQueue!=null){var N=l.updateQueue;N.lastEffect=null,N.events=null,N.stores=null,N.memoCache!=null&&(N.memoCache.index=0)}$.H=dj,N=d(p,b)}while(zp);return N}function BJ(){var l=$.H,d=l.useState()[0];return d=typeof d.then=="function"?uy(d):d,l=l.useState()[0],(Gt!==null?Gt.memoizedState:null)!==l&&(lt.flags|=1024),d}function eT(){var l=Zw!==0;return Zw=0,l}function tT(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function nT(l){if(Qw){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Qw=!1}Nl=0,Jn=Gt=lt=null,zp=!1,cy=Zw=0,$p=null}function Mi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?lt.memoizedState=Jn=l:Jn=Jn.next=l,Jn}function Gn(){if(Gt===null){var l=lt.alternate;l=l!==null?l.memoizedState:null}else l=Gt.next;var d=Jn===null?lt.memoizedState:Jn.next;if(d!==null)Jn=d,Gt=l;else{if(l===null)throw lt.alternate===null?Error(r(467)):Error(r(310));Gt=l,l={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Jn===null?lt.memoizedState=Jn=l:Jn=Jn.next=l}return Jn}function eS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uy(l){var d=cy;return cy+=1,$p===null&&($p=[]),l=bO($p,l,d),d=lt,(Jn===null?d.memoizedState:Jn.next)===null&&(d=d.alternate,$.H=d===null||d.memoizedState===null?uj:pT),l}function tS(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return uy(l);if(l.$$typeof===R)return Gr(l)}throw Error(r(438,String(l)))}function rT(l){var d=null,p=lt.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var b=lt.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(_){return _.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=eS(),lt.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),b=0;b<l;b++)p[b]=V;return d.index++,p}function Rl(l,d){return typeof d=="function"?d(l):d}function nS(l){var d=Gn();return iT(d,Gt,l)}function iT(l,d,p){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var _=l.baseQueue,N=b.pending;if(N!==null){if(_!==null){var O=_.next;_.next=N.next,N.next=O}d.baseQueue=_=N,b.pending=null}if(N=l.baseState,_===null)l.memoizedState=N;else{d=_.next;var z=O=null,X=null,oe=d,pe=!1;do{var ve=oe.lane&-536870913;if(ve!==oe.lane?(bt&ve)===ve:(Nl&ve)===ve){var le=oe.revertLane;if(le===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null}),ve===jp&&(pe=!0);else if((Nl&le)===le){oe=oe.next,le===jp&&(pe=!0);continue}else ve={lane:0,revertLane:oe.revertLane,gesture:null,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},X===null?(z=X=ve,O=N):X=X.next=ve,lt.lanes|=le,Eu|=le;ve=oe.action,Sf&&p(N,ve),N=oe.hasEagerState?oe.eagerState:p(N,ve)}else le={lane:ve,revertLane:oe.revertLane,gesture:oe.gesture,action:oe.action,hasEagerState:oe.hasEagerState,eagerState:oe.eagerState,next:null},X===null?(z=X=le,O=N):X=X.next=le,lt.lanes|=ve,Eu|=ve;oe=oe.next}while(oe!==null&&oe!==d);if(X===null?O=N:X.next=z,!xa(N,l.memoizedState)&&(Qn=!0,pe&&(p=Fp,p!==null)))throw p;l.memoizedState=N,l.baseState=O,l.baseQueue=X,b.lastRenderedState=N}return _===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function aT(l){var d=Gn(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var b=p.dispatch,_=p.pending,N=d.memoizedState;if(_!==null){p.pending=null;var O=_=_.next;do N=l(N,O.action),O=O.next;while(O!==_);xa(N,d.memoizedState)||(Qn=!0),d.memoizedState=N,d.baseQueue===null&&(d.baseState=N),p.lastRenderedState=N}return[N,b]}function MO(l,d,p){var b=lt,_=Gn(),N=_t;if(N){if(p===void 0)throw Error(r(407));p=p()}else p=d();var O=!xa((Gt||_).memoizedState,p);if(O&&(_.memoizedState=p,Qn=!0),_=_.queue,lT(IO.bind(null,b,_,l),[l]),_.getSnapshot!==d||O||Jn!==null&&Jn.memoizedState.tag&1){if(b.flags|=2048,Gp(9,{destroy:void 0},kO.bind(null,b,_,p,d),null),Zt===null)throw Error(r(349));N||(Nl&127)!==0||PO(b,d,p)}return p}function PO(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=lt.updateQueue,d===null?(d=eS(),lt.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function kO(l,d,p,b){d.value=p,d.getSnapshot=b,DO(d)&&LO(l)}function IO(l,d,p){return p(function(){DO(d)&&LO(l)})}function DO(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!xa(l,p)}catch{return!0}}function LO(l){var d=hf(l,2);d!==null&&ea(d,l,2)}function sT(l){var d=Mi();if(typeof l=="function"){var p=l;if(l=p(),Sf){Gs(!0);try{p()}finally{Gs(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:l},d}function OO(l,d,p,b){return l.baseState=p,iT(l,Gt,typeof b=="function"?b:Rl)}function HJ(l,d,p,b,_){if(aS(l))throw Error(r(485));if(l=d.action,l!==null){var N={payload:_,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){N.listeners.push(O)}};$.T!==null?p(!0):N.isTransition=!1,b(N),p=d.pending,p===null?(N.next=d.pending=N,jO(d,N)):(N.next=p.next,d.pending=p.next=N)}}function jO(l,d){var p=d.action,b=d.payload,_=l.state;if(d.isTransition){var N=$.T,O={};$.T=O;try{var z=p(_,b),X=$.S;X!==null&&X(O,z),FO(l,d,z)}catch(oe){oT(l,d,oe)}finally{N!==null&&O.types!==null&&(N.types=O.types),$.T=N}}else try{N=p(_,b),FO(l,d,N)}catch(oe){oT(l,d,oe)}}function FO(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(b){UO(l,d,b)},function(b){return oT(l,d,b)}):UO(l,d,p)}function UO(l,d,p){d.status="fulfilled",d.value=p,BO(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,jO(l,p)))}function oT(l,d,p){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=p,BO(d),d=d.next;while(d!==b)}l.action=null}function BO(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function HO(l,d){return d}function zO(l,d){if(_t){var p=Zt.formState;if(p!==null){e:{var b=lt;if(_t){if(un){t:{for(var _=un,N=fs;_.nodeType!==8;){if(!N){_=null;break t}if(_=ps(_.nextSibling),_===null){_=null;break t}}N=_.data,_=N==="F!"||N==="F"?_:null}if(_){un=ps(_.nextSibling),b=_.data==="F!";break e}}pu(b)}b=!1}b&&(d=p[0])}}return p=Mi(),p.memoizedState=p.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:HO,lastRenderedState:d},p.queue=b,p=oj.bind(null,lt,b),b.dispatch=p,b=sT(!1),N=hT.bind(null,lt,!1,b.queue),b=Mi(),_={state:d,dispatch:null,action:l,pending:null},b.queue=_,p=HJ.bind(null,lt,_,N,p),_.dispatch=p,b.memoizedState=l,[d,p,!1]}function $O(l){var d=Gn();return GO(d,Gt,l)}function GO(l,d,p){if(d=iT(l,d,HO)[0],l=nS(Rl)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=uy(d)}catch(O){throw O===Up?Vw:O}else b=d;d=Gn();var _=d.queue,N=_.dispatch;return p!==d.memoizedState&&(lt.flags|=2048,Gp(9,{destroy:void 0},zJ.bind(null,_,p),null)),[b,N,l]}function zJ(l,d){l.action=d}function qO(l){var d=Gn(),p=Gt;if(p!==null)return GO(d,p,l);Gn(),d=d.memoizedState,p=Gn();var b=p.queue.dispatch;return p.memoizedState=l,[d,b,!1]}function Gp(l,d,p,b){return l={tag:l,create:p,deps:b,inst:d,next:null},d=lt.updateQueue,d===null&&(d=eS(),lt.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(b=p.next,p.next=l,l.next=b,d.lastEffect=l),l}function VO(){return Gn().memoizedState}function rS(l,d,p,b){var _=Mi();lt.flags|=l,_.memoizedState=Gp(1|d,{destroy:void 0},p,b===void 0?null:b)}function iS(l,d,p,b){var _=Gn();b=b===void 0?null:b;var N=_.memoizedState.inst;Gt!==null&&b!==null&&QC(b,Gt.memoizedState.deps)?_.memoizedState=Gp(d,N,p,b):(lt.flags|=l,_.memoizedState=Gp(1|d,N,p,b))}function WO(l,d){rS(8390656,8,l,d)}function lT(l,d){iS(2048,8,l,d)}function $J(l){lt.flags|=4;var d=lt.updateQueue;if(d===null)d=eS(),lt.updateQueue=d,d.events=[l];else{var p=d.events;p===null?d.events=[l]:p.push(l)}}function YO(l){var d=Gn().memoizedState;return $J({ref:d,nextImpl:l}),function(){if((It&2)!==0)throw Error(r(440));return d.impl.apply(void 0,arguments)}}function KO(l,d){return iS(4,2,l,d)}function XO(l,d){return iS(4,4,l,d)}function JO(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function QO(l,d,p){p=p!=null?p.concat([l]):null,iS(4,4,JO.bind(null,d,l),p)}function cT(){}function ZO(l,d){var p=Gn();d=d===void 0?null:d;var b=p.memoizedState;return d!==null&&QC(d,b[1])?b[0]:(p.memoizedState=[l,d],l)}function ej(l,d){var p=Gn();d=d===void 0?null:d;var b=p.memoizedState;if(d!==null&&QC(d,b[1]))return b[0];if(b=l(),Sf){Gs(!0);try{l()}finally{Gs(!1)}}return p.memoizedState=[b,d],b}function uT(l,d,p){return p===void 0||(Nl&1073741824)!==0&&(bt&261930)===0?l.memoizedState=d:(l.memoizedState=p,l=t4(),lt.lanes|=l,Eu|=l,p)}function tj(l,d,p,b){return xa(p,d)?p:Hp.current!==null?(l=uT(l,p,b),xa(l,d)||(Qn=!0),l):(Nl&42)===0||(Nl&1073741824)!==0&&(bt&261930)===0?(Qn=!0,l.memoizedState=p):(l=t4(),lt.lanes|=l,Eu|=l,d)}function nj(l,d,p,b,_){var N=q.p;q.p=N!==0&&8>N?N:8;var O=$.T,z={};$.T=z,hT(l,!1,d,p);try{var X=_(),oe=$.S;if(oe!==null&&oe(z,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var pe=FJ(X,b);dy(l,d,pe,Ca(l))}else dy(l,d,b,Ca(l))}catch(ve){dy(l,d,{then:function(){},status:"rejected",reason:ve},Ca())}finally{q.p=N,O!==null&&z.types!==null&&(O.types=z.types),$.T=O}}function GJ(){}function dT(l,d,p,b){if(l.tag!==5)throw Error(r(476));var _=rj(l).queue;nj(l,_,d,J,p===null?GJ:function(){return ij(l),p(b)})}function rj(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:J},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rl,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function ij(l){var d=rj(l);d.next===null&&(d=l.alternate.memoizedState),dy(l,d.next.queue,{},Ca())}function fT(){return Gr(Ny)}function aj(){return Gn().memoizedState}function sj(){return Gn().memoizedState}function qJ(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Ca();l=vu(p);var b=yu(d,l,p);b!==null&&(ea(b,d,p),sy(b,d,p)),d={cache:HC()},l.payload=d;return}d=d.return}}function VJ(l,d,p){var b=Ca();p={lane:b,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},aS(l)?lj(d,p):(p=MC(l,d,p,b),p!==null&&(ea(p,l,b),cj(p,d,b)))}function oj(l,d,p){var b=Ca();dy(l,d,p,b)}function dy(l,d,p,b){var _={lane:b,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(aS(l))lj(d,_);else{var N=l.alternate;if(l.lanes===0&&(N===null||N.lanes===0)&&(N=d.lastRenderedReducer,N!==null))try{var O=d.lastRenderedState,z=N(O,p);if(_.hasEagerState=!0,_.eagerState=z,xa(z,O))return Uw(l,d,_,0),Zt===null&&Fw(),!1}catch{}finally{}if(p=MC(l,d,_,b),p!==null)return ea(p,l,b),cj(p,d,b),!0}return!1}function hT(l,d,p,b){if(b={lane:2,revertLane:qT(),gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},aS(l)){if(d)throw Error(r(479))}else d=MC(l,p,b,2),d!==null&&ea(d,l,2)}function aS(l){var d=l.alternate;return l===lt||d!==null&&d===lt}function lj(l,d){zp=Qw=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function cj(l,d,p){if((p&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,K(l,p)}}var fy={readContext:Gr,use:tS,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In};fy.useEffectEvent=In;var uj={readContext:Gr,use:tS,useCallback:function(l,d){return Mi().memoizedState=[l,d===void 0?null:d],l},useContext:Gr,useEffect:WO,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,rS(4194308,4,JO.bind(null,d,l),p)},useLayoutEffect:function(l,d){return rS(4194308,4,l,d)},useInsertionEffect:function(l,d){rS(4,2,l,d)},useMemo:function(l,d){var p=Mi();d=d===void 0?null:d;var b=l();if(Sf){Gs(!0);try{l()}finally{Gs(!1)}}return p.memoizedState=[b,d],b},useReducer:function(l,d,p){var b=Mi();if(p!==void 0){var _=p(d);if(Sf){Gs(!0);try{p(d)}finally{Gs(!1)}}}else _=d;return b.memoizedState=b.baseState=_,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:_},b.queue=l,l=l.dispatch=VJ.bind(null,lt,l),[b.memoizedState,l]},useRef:function(l){var d=Mi();return l={current:l},d.memoizedState=l},useState:function(l){l=sT(l);var d=l.queue,p=oj.bind(null,lt,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:cT,useDeferredValue:function(l,d){var p=Mi();return uT(p,l,d)},useTransition:function(){var l=sT(!1);return l=nj.bind(null,lt,l.queue,!0,!1),Mi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var b=lt,_=Mi();if(_t){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),Zt===null)throw Error(r(349));(bt&127)!==0||PO(b,d,p)}_.memoizedState=p;var N={value:p,getSnapshot:d};return _.queue=N,WO(IO.bind(null,b,N,l),[l]),b.flags|=2048,Gp(9,{destroy:void 0},kO.bind(null,b,N,p,d),null),p},useId:function(){var l=Mi(),d=Zt.identifierPrefix;if(_t){var p=Ro,b=No;p=(b&~(1<<32-di(b)-1)).toString(32)+p,d="_"+d+"R_"+p,p=Zw++,0<p&&(d+="H"+p.toString(32)),d+="_"}else p=UJ++,d="_"+d+"r_"+p.toString(32)+"_";return l.memoizedState=d},useHostTransitionStatus:fT,useFormState:zO,useActionState:zO,useOptimistic:function(l){var d=Mi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=hT.bind(null,lt,!0,p),p.dispatch=d,[l,d]},useMemoCache:rT,useCacheRefresh:function(){return Mi().memoizedState=qJ.bind(null,lt)},useEffectEvent:function(l){var d=Mi(),p={impl:l};return d.memoizedState=p,function(){if((It&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},pT={readContext:Gr,use:tS,useCallback:ZO,useContext:Gr,useEffect:lT,useImperativeHandle:QO,useInsertionEffect:KO,useLayoutEffect:XO,useMemo:ej,useReducer:nS,useRef:VO,useState:function(){return nS(Rl)},useDebugValue:cT,useDeferredValue:function(l,d){var p=Gn();return tj(p,Gt.memoizedState,l,d)},useTransition:function(){var l=nS(Rl)[0],d=Gn().memoizedState;return[typeof l=="boolean"?l:uy(l),d]},useSyncExternalStore:MO,useId:aj,useHostTransitionStatus:fT,useFormState:$O,useActionState:$O,useOptimistic:function(l,d){var p=Gn();return OO(p,Gt,l,d)},useMemoCache:rT,useCacheRefresh:sj};pT.useEffectEvent=YO;var dj={readContext:Gr,use:tS,useCallback:ZO,useContext:Gr,useEffect:lT,useImperativeHandle:QO,useInsertionEffect:KO,useLayoutEffect:XO,useMemo:ej,useReducer:aT,useRef:VO,useState:function(){return aT(Rl)},useDebugValue:cT,useDeferredValue:function(l,d){var p=Gn();return Gt===null?uT(p,l,d):tj(p,Gt.memoizedState,l,d)},useTransition:function(){var l=aT(Rl)[0],d=Gn().memoizedState;return[typeof l=="boolean"?l:uy(l),d]},useSyncExternalStore:MO,useId:aj,useHostTransitionStatus:fT,useFormState:qO,useActionState:qO,useOptimistic:function(l,d){var p=Gn();return Gt!==null?OO(p,Gt,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:rT,useCacheRefresh:sj};dj.useEffectEvent=YO;function mT(l,d,p,b){d=l.memoizedState,p=p(b,d),p=p==null?d:h({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var gT={enqueueSetState:function(l,d,p){l=l._reactInternals;var b=Ca(),_=vu(b);_.payload=d,p!=null&&(_.callback=p),d=yu(l,_,b),d!==null&&(ea(d,l,b),sy(d,l,b))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var b=Ca(),_=vu(b);_.tag=1,_.payload=d,p!=null&&(_.callback=p),d=yu(l,_,b),d!==null&&(ea(d,l,b),sy(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Ca(),b=vu(p);b.tag=2,d!=null&&(b.callback=d),d=yu(l,b,p),d!==null&&(ea(d,l,p),sy(d,l,p))}};function fj(l,d,p,b,_,N,O){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,N,O):d.prototype&&d.prototype.isPureReactComponent?!Qv(p,b)||!Qv(_,N):!0}function hj(l,d,p,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,b),d.state!==l&&gT.enqueueReplaceState(d,d.state,null)}function Ef(l,d){var p=d;if("ref"in d){p={};for(var b in d)b!=="ref"&&(p[b]=d[b])}if(l=l.defaultProps){p===d&&(p=h({},p));for(var _ in l)p[_]===void 0&&(p[_]=l[_])}return p}function pj(l){jw(l)}function mj(l){console.error(l)}function gj(l){jw(l)}function sS(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function vj(l,d,p){try{var b=l.onCaughtError;b(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function vT(l,d,p){return p=vu(p),p.tag=3,p.payload={element:null},p.callback=function(){sS(l,d)},p}function yj(l){return l=vu(l),l.tag=3,l}function bj(l,d,p,b){var _=p.type.getDerivedStateFromError;if(typeof _=="function"){var N=b.value;l.payload=function(){return _(N)},l.callback=function(){vj(d,p,b)}}var O=p.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(l.callback=function(){vj(d,p,b),typeof _!="function"&&(Au===null?Au=new Set([this]):Au.add(this));var z=b.stack;this.componentDidCatch(b.value,{componentStack:z!==null?z:""})})}function WJ(l,d,p,b,_){if(p.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=p.alternate,d!==null&&Op(d,p,_,!0),p=Sa.current,p!==null){switch(p.tag){case 31:case 13:return hs===null?yS():p.alternate===null&&Dn===0&&(Dn=3),p.flags&=-257,p.flags|=65536,p.lanes=_,b===Ww?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([b]):d.add(b),zT(l,b,_)),!1;case 22:return p.flags|=65536,b===Ww?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([b]):p.add(b)),zT(l,b,_)),!1}throw Error(r(435,p.tag))}return zT(l,b,_),yS(),!1}if(_t)return d=Sa.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=_,b!==OC&&(l=Error(r(422),{cause:b}),ty(cs(l,p)))):(b!==OC&&(d=Error(r(423),{cause:b}),ty(cs(d,p))),l=l.current.alternate,l.flags|=65536,_&=-_,l.lanes|=_,b=cs(b,p),_=vT(l.stateNode,b,_),WC(l,_),Dn!==4&&(Dn=2)),!1;var N=Error(r(520),{cause:b});if(N=cs(N,p),xy===null?xy=[N]:xy.push(N),Dn!==4&&(Dn=2),d===null)return!0;b=cs(b,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=_&-_,p.lanes|=l,l=vT(p.stateNode,b,l),WC(p,l),!1;case 1:if(d=p.type,N=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Au===null||!Au.has(N))))return p.flags|=65536,_&=-_,p.lanes|=_,_=yj(_),bj(_,l,p,b),WC(p,_),!1}p=p.return}while(p!==null);return!1}var yT=Error(r(461)),Qn=!1;function qr(l,d,p,b){d.child=l===null?EO(d,null,p,b):wf(d,l.child,p,b)}function xj(l,d,p,b,_){p=p.render;var N=d.ref;if("ref"in b){var O={};for(var z in b)z!=="ref"&&(O[z]=b[z])}else O=b;return vf(d),b=ZC(l,d,p,O,N,_),z=eT(),l!==null&&!Qn?(tT(l,d,_),Ml(l,d,_)):(_t&&z&&DC(d),d.flags|=1,qr(l,d,b,_),d.child)}function wj(l,d,p,b,_){if(l===null){var N=p.type;return typeof N=="function"&&!PC(N)&&N.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=N,Sj(l,d,N,b,_)):(l=Hw(p.type,null,b,d,d.mode,_),l.ref=d.ref,l.return=d,d.child=l)}if(N=l.child,!CT(l,_)){var O=N.memoizedProps;if(p=p.compare,p=p!==null?p:Qv,p(O,b)&&l.ref===d.ref)return Ml(l,d,_)}return d.flags|=1,l=Al(N,b),l.ref=d.ref,l.return=d,d.child=l}function Sj(l,d,p,b,_){if(l!==null){var N=l.memoizedProps;if(Qv(N,b)&&l.ref===d.ref)if(Qn=!1,d.pendingProps=b=N,CT(l,_))(l.flags&131072)!==0&&(Qn=!0);else return d.lanes=l.lanes,Ml(l,d,_)}return bT(l,d,p,b,_)}function Ej(l,d,p,b){var _=b.children,N=l!==null?l.memoizedState:null;if(l===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.mode==="hidden"){if((d.flags&128)!==0){if(N=N!==null?N.baseLanes|p:p,l!==null){for(b=d.child=l.child,_=0;b!==null;)_=_|b.lanes|b.childLanes,b=b.sibling;b=_&~N}else b=0,d.child=null;return Aj(l,d,N,p,b)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&qw(d,N!==null?N.cachePool:null),N!==null?CO(d,N):KC(),TO(d);else return b=d.lanes=536870912,Aj(l,d,N!==null?N.baseLanes|p:p,p,b)}else N!==null?(qw(d,N.cachePool),CO(d,N),xu(),d.memoizedState=null):(l!==null&&qw(d,null),KC(),xu());return qr(l,d,_,p),d.child}function hy(l,d){return l!==null&&l.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Aj(l,d,p,b,_){var N=$C();return N=N===null?null:{parent:Xn._currentValue,pool:N},d.memoizedState={baseLanes:p,cachePool:N},l!==null&&qw(d,null),KC(),TO(d),l!==null&&Op(l,d,b,!0),d.childLanes=_,null}function oS(l,d){return d=cS({mode:d.mode,children:d.children},l.mode),d.ref=l.ref,l.child=d,d.return=l,d}function _j(l,d,p){return wf(d,l.child,null,p),l=oS(d,d.pendingProps),l.flags|=2,Ea(d),d.memoizedState=null,l}function YJ(l,d,p){var b=d.pendingProps,_=(d.flags&128)!==0;if(d.flags&=-129,l===null){if(_t){if(b.mode==="hidden")return l=oS(d,b),d.lanes=536870912,hy(null,l);if(JC(d),(l=un)?(l=j4(l,fs),l=l!==null&&l.data==="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:fu!==null?{id:No,overflow:Ro}:null,retryLane:536870912,hydrationErrors:null},p=lO(l),p.return=d,d.child=p,$r=d,un=null)):l=null,l===null)throw pu(d);return d.lanes=536870912,null}return oS(d,b)}var N=l.memoizedState;if(N!==null){var O=N.dehydrated;if(JC(d),_)if(d.flags&256)d.flags&=-257,d=_j(l,d,p);else if(d.memoizedState!==null)d.child=l.child,d.flags|=128,d=null;else throw Error(r(558));else if(Qn||Op(l,d,p,!1),_=(p&l.childLanes)!==0,Qn||_){if(b=Zt,b!==null&&(O=re(b,p),O!==0&&O!==N.retryLane))throw N.retryLane=O,hf(l,O),ea(b,l,O),yT;yS(),d=_j(l,d,p)}else l=N.treeContext,un=ps(O.nextSibling),$r=d,_t=!0,hu=null,fs=!1,l!==null&&dO(d,l),d=oS(d,b),d.flags|=4096;return d}return l=Al(l.child,{mode:b.mode,children:b.children}),l.ref=d.ref,d.child=l,l.return=d,l}function lS(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function bT(l,d,p,b,_){return vf(d),p=ZC(l,d,p,b,void 0,_),b=eT(),l!==null&&!Qn?(tT(l,d,_),Ml(l,d,_)):(_t&&b&&DC(d),d.flags|=1,qr(l,d,p,_),d.child)}function Cj(l,d,p,b,_,N){return vf(d),d.updateQueue=null,p=RO(d,b,p,_),NO(l),b=eT(),l!==null&&!Qn?(tT(l,d,N),Ml(l,d,N)):(_t&&b&&DC(d),d.flags|=1,qr(l,d,p,N),d.child)}function Tj(l,d,p,b,_){if(vf(d),d.stateNode===null){var N=kp,O=p.contextType;typeof O=="object"&&O!==null&&(N=Gr(O)),N=new p(b,N),d.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,N.updater=gT,d.stateNode=N,N._reactInternals=d,N=d.stateNode,N.props=b,N.state=d.memoizedState,N.refs={},qC(d),O=p.contextType,N.context=typeof O=="object"&&O!==null?Gr(O):kp,N.state=d.memoizedState,O=p.getDerivedStateFromProps,typeof O=="function"&&(mT(d,p,O,b),N.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(O=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),O!==N.state&&gT.enqueueReplaceState(N,N.state,null),ly(d,b,N,_),oy(),N.state=d.memoizedState),typeof N.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){N=d.stateNode;var z=d.memoizedProps,X=Ef(p,z);N.props=X;var oe=N.context,pe=p.contextType;O=kp,typeof pe=="object"&&pe!==null&&(O=Gr(pe));var ve=p.getDerivedStateFromProps;pe=typeof ve=="function"||typeof N.getSnapshotBeforeUpdate=="function",z=d.pendingProps!==z,pe||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(z||oe!==O)&&hj(d,N,b,O),gu=!1;var le=d.memoizedState;N.state=le,ly(d,b,N,_),oy(),oe=d.memoizedState,z||le!==oe||gu?(typeof ve=="function"&&(mT(d,p,ve,b),oe=d.memoizedState),(X=gu||fj(d,p,X,b,le,oe,O))?(pe||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount()),typeof N.componentDidMount=="function"&&(d.flags|=4194308)):(typeof N.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=oe),N.props=b,N.state=oe,N.context=O,b=X):(typeof N.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{N=d.stateNode,VC(l,d),O=d.memoizedProps,pe=Ef(p,O),N.props=pe,ve=d.pendingProps,le=N.context,oe=p.contextType,X=kp,typeof oe=="object"&&oe!==null&&(X=Gr(oe)),z=p.getDerivedStateFromProps,(oe=typeof z=="function"||typeof N.getSnapshotBeforeUpdate=="function")||typeof N.UNSAFE_componentWillReceiveProps!="function"&&typeof N.componentWillReceiveProps!="function"||(O!==ve||le!==X)&&hj(d,N,b,X),gu=!1,le=d.memoizedState,N.state=le,ly(d,b,N,_),oy();var de=d.memoizedState;O!==ve||le!==de||gu||l!==null&&l.dependencies!==null&&$w(l.dependencies)?(typeof z=="function"&&(mT(d,p,z,b),de=d.memoizedState),(pe=gu||fj(d,p,pe,b,le,de,X)||l!==null&&l.dependencies!==null&&$w(l.dependencies))?(oe||typeof N.UNSAFE_componentWillUpdate!="function"&&typeof N.componentWillUpdate!="function"||(typeof N.componentWillUpdate=="function"&&N.componentWillUpdate(b,de,X),typeof N.UNSAFE_componentWillUpdate=="function"&&N.UNSAFE_componentWillUpdate(b,de,X)),typeof N.componentDidUpdate=="function"&&(d.flags|=4),typeof N.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof N.componentDidUpdate!="function"||O===l.memoizedProps&&le===l.memoizedState||(d.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||O===l.memoizedProps&&le===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=de),N.props=b,N.state=de,N.context=X,b=pe):(typeof N.componentDidUpdate!="function"||O===l.memoizedProps&&le===l.memoizedState||(d.flags|=4),typeof N.getSnapshotBeforeUpdate!="function"||O===l.memoizedProps&&le===l.memoizedState||(d.flags|=1024),b=!1)}return N=b,lS(l,d),b=(d.flags&128)!==0,N||b?(N=d.stateNode,p=b&&typeof p.getDerivedStateFromError!="function"?null:N.render(),d.flags|=1,l!==null&&b?(d.child=wf(d,l.child,null,_),d.child=wf(d,null,p,_)):qr(l,d,p,_),d.memoizedState=N.state,l=d.child):l=Ml(l,d,_),l}function Nj(l,d,p,b){return mf(),d.flags|=256,qr(l,d,p,b),d.child}var xT={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wT(l){return{baseLanes:l,cachePool:vO()}}function ST(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=_a),l}function Rj(l,d,p){var b=d.pendingProps,_=!1,N=(d.flags&128)!==0,O;if((O=N)||(O=l!==null&&l.memoizedState===null?!1:($n.current&2)!==0),O&&(_=!0,d.flags&=-129),O=(d.flags&32)!==0,d.flags&=-33,l===null){if(_t){if(_?bu(d):xu(),(l=un)?(l=j4(l,fs),l=l!==null&&l.data!=="&"?l:null,l!==null&&(d.memoizedState={dehydrated:l,treeContext:fu!==null?{id:No,overflow:Ro}:null,retryLane:536870912,hydrationErrors:null},p=lO(l),p.return=d,d.child=p,$r=d,un=null)):l=null,l===null)throw pu(d);return iN(l)?d.lanes=32:d.lanes=536870912,null}var z=b.children;return b=b.fallback,_?(xu(),_=d.mode,z=cS({mode:"hidden",children:z},_),b=pf(b,_,p,null),z.return=d,b.return=d,z.sibling=b,d.child=z,b=d.child,b.memoizedState=wT(p),b.childLanes=ST(l,O,p),d.memoizedState=xT,hy(null,b)):(bu(d),ET(d,z))}var X=l.memoizedState;if(X!==null&&(z=X.dehydrated,z!==null)){if(N)d.flags&256?(bu(d),d.flags&=-257,d=AT(l,d,p)):d.memoizedState!==null?(xu(),d.child=l.child,d.flags|=128,d=null):(xu(),z=b.fallback,_=d.mode,b=cS({mode:"visible",children:b.children},_),z=pf(z,_,p,null),z.flags|=2,b.return=d,z.return=d,b.sibling=z,d.child=b,wf(d,l.child,null,p),b=d.child,b.memoizedState=wT(p),b.childLanes=ST(l,O,p),d.memoizedState=xT,d=hy(null,b));else if(bu(d),iN(z)){if(O=z.nextSibling&&z.nextSibling.dataset,O)var oe=O.dgst;O=oe,b=Error(r(419)),b.stack="",b.digest=O,ty({value:b,source:null,stack:null}),d=AT(l,d,p)}else if(Qn||Op(l,d,p,!1),O=(p&l.childLanes)!==0,Qn||O){if(O=Zt,O!==null&&(b=re(O,p),b!==0&&b!==X.retryLane))throw X.retryLane=b,hf(l,b),ea(O,l,b),yT;rN(z)||yS(),d=AT(l,d,p)}else rN(z)?(d.flags|=192,d.child=l.child,d=null):(l=X.treeContext,un=ps(z.nextSibling),$r=d,_t=!0,hu=null,fs=!1,l!==null&&dO(d,l),d=ET(d,b.children),d.flags|=4096);return d}return _?(xu(),z=b.fallback,_=d.mode,X=l.child,oe=X.sibling,b=Al(X,{mode:"hidden",children:b.children}),b.subtreeFlags=X.subtreeFlags&65011712,oe!==null?z=Al(oe,z):(z=pf(z,_,p,null),z.flags|=2),z.return=d,b.return=d,b.sibling=z,d.child=b,hy(null,b),b=d.child,z=l.child.memoizedState,z===null?z=wT(p):(_=z.cachePool,_!==null?(X=Xn._currentValue,_=_.parent!==X?{parent:X,pool:X}:_):_=vO(),z={baseLanes:z.baseLanes|p,cachePool:_}),b.memoizedState=z,b.childLanes=ST(l,O,p),d.memoizedState=xT,hy(l.child,b)):(bu(d),p=l.child,l=p.sibling,p=Al(p,{mode:"visible",children:b.children}),p.return=d,p.sibling=null,l!==null&&(O=d.deletions,O===null?(d.deletions=[l],d.flags|=16):O.push(l)),d.child=p,d.memoizedState=null,p)}function ET(l,d){return d=cS({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function cS(l,d){return l=wa(22,l,null,d),l.lanes=0,l}function AT(l,d,p){return wf(d,l.child,null,p),l=ET(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function Mj(l,d,p){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),UC(l.return,d,p)}function _T(l,d,p,b,_,N){var O=l.memoizedState;O===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:_,treeForkCount:N}:(O.isBackwards=d,O.rendering=null,O.renderingStartTime=0,O.last=b,O.tail=p,O.tailMode=_,O.treeForkCount=N)}function Pj(l,d,p){var b=d.pendingProps,_=b.revealOrder,N=b.tail;b=b.children;var O=$n.current,z=(O&2)!==0;if(z?(O=O&1|2,d.flags|=128):O&=1,ue($n,O),qr(l,d,b,p),b=_t?ey:0,!z&&l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Mj(l,p,d);else if(l.tag===19)Mj(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(_){case"forwards":for(p=d.child,_=null;p!==null;)l=p.alternate,l!==null&&Jw(l)===null&&(_=p),p=p.sibling;p=_,p===null?(_=d.child,d.child=null):(_=p.sibling,p.sibling=null),_T(d,!1,_,p,N,b);break;case"backwards":case"unstable_legacy-backwards":for(p=null,_=d.child,d.child=null;_!==null;){if(l=_.alternate,l!==null&&Jw(l)===null){d.child=_;break}l=_.sibling,_.sibling=p,p=_,_=l}_T(d,!0,p,null,N,b);break;case"together":_T(d,!1,null,null,void 0,b);break;default:d.memoizedState=null}return d.child}function Ml(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),Eu|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(Op(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Al(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Al(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function CT(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&$w(l)))}function KJ(l,d,p){switch(d.tag){case 3:pt(d,d.stateNode.containerInfo),mu(d,Xn,l.memoizedState.cache),mf();break;case 27:case 5:He(d);break;case 4:pt(d,d.stateNode.containerInfo);break;case 10:mu(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,JC(d),null;break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(bu(d),d.flags|=128,null):(p&d.child.childLanes)!==0?Rj(l,d,p):(bu(d),l=Ml(l,d,p),l!==null?l.sibling:null);bu(d);break;case 19:var _=(l.flags&128)!==0;if(b=(p&d.childLanes)!==0,b||(Op(l,d,p,!1),b=(p&d.childLanes)!==0),_){if(b)return Pj(l,d,p);d.flags|=128}if(_=d.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ue($n,$n.current),b)break;return null;case 22:return d.lanes=0,Ej(l,d,p,d.pendingProps);case 24:mu(d,Xn,l.memoizedState.cache)}return Ml(l,d,p)}function kj(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)Qn=!0;else{if(!CT(l,p)&&(d.flags&128)===0)return Qn=!1,KJ(l,d,p);Qn=(l.flags&131072)!==0}else Qn=!1,_t&&(d.flags&1048576)!==0&&uO(d,ey,d.index);switch(d.lanes=0,d.tag){case 16:e:{var b=d.pendingProps;if(l=bf(d.elementType),d.type=l,typeof l=="function")PC(l)?(b=Ef(l,b),d.tag=1,d=Tj(null,d,l,b,p)):(d.tag=0,d=bT(null,d,l,b,p));else{if(l!=null){var _=l.$$typeof;if(_===D){d.tag=11,d=xj(null,d,l,b,p);break e}else if(_===k){d.tag=14,d=wj(null,d,l,b,p);break e}}throw d=W(l)||l,Error(r(306,d,""))}}return d;case 0:return bT(l,d,d.type,d.pendingProps,p);case 1:return b=d.type,_=Ef(b,d.pendingProps),Tj(l,d,b,_,p);case 3:e:{if(pt(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var N=d.memoizedState;_=N.element,VC(l,d),ly(d,b,null,p);var O=d.memoizedState;if(b=O.cache,mu(d,Xn,b),b!==N.cache&&BC(d,[Xn],p,!0),oy(),b=O.element,N.isDehydrated)if(N={element:b,isDehydrated:!1,cache:O.cache},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){d=Nj(l,d,b,p);break e}else if(b!==_){_=cs(Error(r(424)),d),ty(_),d=Nj(l,d,b,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(un=ps(l.firstChild),$r=d,_t=!0,hu=null,fs=!0,p=EO(d,null,b,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(mf(),b===_){d=Ml(l,d,p);break e}qr(l,d,b,p)}d=d.child}return d;case 26:return lS(l,d),l===null?(p=$4(d.type,null,d.pendingProps,null))?d.memoizedState=p:_t||(p=d.type,l=d.pendingProps,b=_S(Me.current).createElement(p),b[_e]=d,b[Re]=l,Vr(b,p,l),pn(b),d.stateNode=b):d.memoizedState=$4(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return He(d),l===null&&_t&&(b=d.stateNode=B4(d.type,d.pendingProps,Me.current),$r=d,fs=!0,_=un,Nu(d.type)?(aN=_,un=ps(b.firstChild)):un=_),qr(l,d,d.pendingProps.children,p),lS(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&_t&&((_=b=un)&&(b=_Q(b,d.type,d.pendingProps,fs),b!==null?(d.stateNode=b,$r=d,un=ps(b.firstChild),fs=!1,_=!0):_=!1),_||pu(d)),He(d),_=d.type,N=d.pendingProps,O=l!==null?l.memoizedProps:null,b=N.children,eN(_,N)?b=null:O!==null&&eN(_,O)&&(d.flags|=32),d.memoizedState!==null&&(_=ZC(l,d,BJ,null,null,p),Ny._currentValue=_),lS(l,d),qr(l,d,b,p),d.child;case 6:return l===null&&_t&&((l=p=un)&&(p=CQ(p,d.pendingProps,fs),p!==null?(d.stateNode=p,$r=d,un=null,l=!0):l=!1),l||pu(d)),null;case 13:return Rj(l,d,p);case 4:return pt(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=wf(d,null,b,p):qr(l,d,b,p),d.child;case 11:return xj(l,d,d.type,d.pendingProps,p);case 7:return qr(l,d,d.pendingProps,p),d.child;case 8:return qr(l,d,d.pendingProps.children,p),d.child;case 12:return qr(l,d,d.pendingProps.children,p),d.child;case 10:return b=d.pendingProps,mu(d,d.type,b.value),qr(l,d,b.children,p),d.child;case 9:return _=d.type._context,b=d.pendingProps.children,vf(d),_=Gr(_),b=b(_),d.flags|=1,qr(l,d,b,p),d.child;case 14:return wj(l,d,d.type,d.pendingProps,p);case 15:return Sj(l,d,d.type,d.pendingProps,p);case 19:return Pj(l,d,p);case 31:return YJ(l,d,p);case 22:return Ej(l,d,p,d.pendingProps);case 24:return vf(d),b=Gr(Xn),l===null?(_=$C(),_===null&&(_=Zt,N=HC(),_.pooledCache=N,N.refCount++,N!==null&&(_.pooledCacheLanes|=p),_=N),d.memoizedState={parent:b,cache:_},qC(d),mu(d,Xn,_)):((l.lanes&p)!==0&&(VC(l,d),ly(d,null,null,p),oy()),_=l.memoizedState,N=d.memoizedState,_.parent!==b?(_={parent:b,cache:b},d.memoizedState=_,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=_),mu(d,Xn,b)):(b=N.cache,mu(d,Xn,b),b!==_.cache&&BC(d,[Xn],p,!0))),qr(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function Pl(l){l.flags|=4}function TT(l,d,p,b,_){if((d=(l.mode&32)!==0)&&(d=!1),d){if(l.flags|=16777216,(_&335544128)===_)if(l.stateNode.complete)l.flags|=8192;else if(a4())l.flags|=8192;else throw xf=Ww,GC}else l.flags&=-16777217}function Ij(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Y4(d))if(a4())l.flags|=8192;else throw xf=Ww,GC}function uS(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?sf():536870912,l.lanes|=d,Yp|=d)}function py(l,d){if(!_t)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function dn(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,b=0;if(d)for(var _=l.child;_!==null;)p|=_.lanes|_.childLanes,b|=_.subtreeFlags&65011712,b|=_.flags&65011712,_.return=l,_=_.sibling;else for(_=l.child;_!==null;)p|=_.lanes|_.childLanes,b|=_.subtreeFlags,b|=_.flags,_.return=l,_=_.sibling;return l.subtreeFlags|=b,l.childLanes=p,d}function XJ(l,d,p){var b=d.pendingProps;switch(LC(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(d),null;case 1:return dn(d),null;case 3:return p=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),Tl(Xn),he(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Lp(d)?Pl(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,jC())),dn(d),null;case 26:var _=d.type,N=d.memoizedState;return l===null?(Pl(d),N!==null?(dn(d),Ij(d,N)):(dn(d),TT(d,_,null,b,p))):N?N!==l.memoizedState?(Pl(d),dn(d),Ij(d,N)):(dn(d),d.flags&=-16777217):(l=l.memoizedProps,l!==b&&Pl(d),dn(d),TT(d,_,l,b,p)),null;case 27:if(ke(d),p=Me.current,_=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Pl(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return dn(d),null}l=me.current,Lp(d)?fO(d):(l=B4(_,b,p),d.stateNode=l,Pl(d))}return dn(d),null;case 5:if(ke(d),_=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&Pl(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return dn(d),null}if(N=me.current,Lp(d))fO(d);else{var O=_S(Me.current);switch(N){case 1:N=O.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:N=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":N=O.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":N=O.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":N=O.createElement("div"),N.innerHTML="<script><\/script>",N=N.removeChild(N.firstChild);break;case"select":N=typeof b.is=="string"?O.createElement("select",{is:b.is}):O.createElement("select"),b.multiple?N.multiple=!0:b.size&&(N.size=b.size);break;default:N=typeof b.is=="string"?O.createElement(_,{is:b.is}):O.createElement(_)}}N[_e]=d,N[Re]=b;e:for(O=d.child;O!==null;){if(O.tag===5||O.tag===6)N.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===d)break e;for(;O.sibling===null;){if(O.return===null||O.return===d)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}d.stateNode=N;e:switch(Vr(N,_,b),_){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}b&&Pl(d)}}return dn(d),TT(d,d.type,l===null?null:l.memoizedProps,d.pendingProps,p),null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&Pl(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=Me.current,Lp(d)){if(l=d.stateNode,p=d.memoizedProps,b=null,_=$r,_!==null)switch(_.tag){case 27:case 5:b=_.memoizedProps}l[_e]=d,l=!!(l.nodeValue===p||b!==null&&b.suppressHydrationWarning===!0||R4(l.nodeValue,p)),l||pu(d,!0)}else l=_S(l).createTextNode(b),l[_e]=d,d.stateNode=l}return dn(d),null;case 31:if(p=d.memoizedState,l===null||l.memoizedState!==null){if(b=Lp(d),p!==null){if(l===null){if(!b)throw Error(r(318));if(l=d.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[_e]=d}else mf(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;dn(d),l=!1}else p=jC(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return d.flags&256?(Ea(d),d):(Ea(d),null);if((d.flags&128)!==0)throw Error(r(558))}return dn(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(_=Lp(d),b!==null&&b.dehydrated!==null){if(l===null){if(!_)throw Error(r(318));if(_=d.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[_e]=d}else mf(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;dn(d),_=!1}else _=jC(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=_),_=!0;if(!_)return d.flags&256?(Ea(d),d):(Ea(d),null)}return Ea(d),(d.flags&128)!==0?(d.lanes=p,d):(p=b!==null,l=l!==null&&l.memoizedState!==null,p&&(b=d.child,_=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(_=b.alternate.memoizedState.cachePool.pool),N=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(N=b.memoizedState.cachePool.pool),N!==_&&(b.flags|=2048)),p!==l&&p&&(d.child.flags|=8192),uS(d,d.updateQueue),dn(d),null);case 4:return he(),l===null&&KT(d.stateNode.containerInfo),dn(d),null;case 10:return Tl(d.type),dn(d),null;case 19:if(ne($n),b=d.memoizedState,b===null)return dn(d),null;if(_=(d.flags&128)!==0,N=b.rendering,N===null)if(_)py(b,!1);else{if(Dn!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(N=Jw(l),N!==null){for(d.flags|=128,py(b,!1),l=N.updateQueue,d.updateQueue=l,uS(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)oO(p,l),p=p.sibling;return ue($n,$n.current&1|2),_t&&_l(d,b.treeForkCount),d.child}l=l.sibling}b.tail!==null&&Lt()>mS&&(d.flags|=128,_=!0,py(b,!1),d.lanes=4194304)}else{if(!_)if(l=Jw(N),l!==null){if(d.flags|=128,_=!0,l=l.updateQueue,d.updateQueue=l,uS(d,l),py(b,!0),b.tail===null&&b.tailMode==="hidden"&&!N.alternate&&!_t)return dn(d),null}else 2*Lt()-b.renderingStartTime>mS&&p!==536870912&&(d.flags|=128,_=!0,py(b,!1),d.lanes=4194304);b.isBackwards?(N.sibling=d.child,d.child=N):(l=b.last,l!==null?l.sibling=N:d.child=N,b.last=N)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=Lt(),l.sibling=null,p=$n.current,ue($n,_?p&1|2:p&1),_t&&_l(d,b.treeForkCount),l):(dn(d),null);case 22:case 23:return Ea(d),XC(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(p&536870912)!==0&&(d.flags&128)===0&&(dn(d),d.subtreeFlags&6&&(d.flags|=8192)):dn(d),p=d.updateQueue,p!==null&&uS(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048),l!==null&&ne(yf),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),Tl(Xn),dn(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function JJ(l,d){switch(LC(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Tl(Xn),he(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return ke(d),null;case 31:if(d.memoizedState!==null){if(Ea(d),d.alternate===null)throw Error(r(340));mf()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 13:if(Ea(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));mf()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return ne($n),null;case 4:return he(),null;case 10:return Tl(d.type),null;case 22:case 23:return Ea(d),XC(),l!==null&&ne(yf),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return Tl(Xn),null;case 25:return null;default:return null}}function Dj(l,d){switch(LC(d),d.tag){case 3:Tl(Xn),he();break;case 26:case 27:case 5:ke(d);break;case 4:he();break;case 31:d.memoizedState!==null&&Ea(d);break;case 13:Ea(d);break;case 19:ne($n);break;case 10:Tl(d.type);break;case 22:case 23:Ea(d),XC(),l!==null&&ne(yf);break;case 24:Tl(Xn)}}function my(l,d){try{var p=d.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var _=b.next;p=_;do{if((p.tag&l)===l){b=void 0;var N=p.create,O=p.inst;b=N(),O.destroy=b}p=p.next}while(p!==_)}}catch(z){Ft(d,d.return,z)}}function wu(l,d,p){try{var b=d.updateQueue,_=b!==null?b.lastEffect:null;if(_!==null){var N=_.next;b=N;do{if((b.tag&l)===l){var O=b.inst,z=O.destroy;if(z!==void 0){O.destroy=void 0,_=d;var X=p,oe=z;try{oe()}catch(pe){Ft(_,X,pe)}}}b=b.next}while(b!==N)}}catch(pe){Ft(d,d.return,pe)}}function Lj(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{_O(d,p)}catch(b){Ft(l,l.return,b)}}}function Oj(l,d,p){p.props=Ef(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(b){Ft(l,d,b)}}function gy(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof p=="function"?l.refCleanup=p(b):p.current=b}}catch(_){Ft(l,d,_)}}function Mo(l,d){var p=l.ref,b=l.refCleanup;if(p!==null)if(typeof b=="function")try{b()}catch(_){Ft(l,d,_)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(_){Ft(l,d,_)}else p.current=null}function jj(l){var d=l.type,p=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&b.focus();break e;case"img":p.src?b.src=p.src:p.srcSet&&(b.srcset=p.srcSet)}}catch(_){Ft(l,l.return,_)}}function NT(l,d,p){try{var b=l.stateNode;bQ(b,l.type,p,d),b[Re]=d}catch(_){Ft(l,l.return,_)}}function Fj(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Nu(l.type)||l.tag===4}function RT(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Fj(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Nu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function MT(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=Sl));else if(b!==4&&(b===27&&Nu(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(MT(l,d,p),l=l.sibling;l!==null;)MT(l,d,p),l=l.sibling}function dS(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(b!==4&&(b===27&&Nu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(dS(l,d,p),l=l.sibling;l!==null;)dS(l,d,p),l=l.sibling}function Uj(l){var d=l.stateNode,p=l.memoizedProps;try{for(var b=l.type,_=d.attributes;_.length;)d.removeAttributeNode(_[0]);Vr(d,b,p),d[_e]=l,d[Re]=p}catch(N){Ft(l,l.return,N)}}var kl=!1,Zn=!1,PT=!1,Bj=typeof WeakSet=="function"?WeakSet:Set,Ar=null;function QJ(l,d){if(l=l.containerInfo,QT=kS,l=QL(l),AC(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var _=b.anchorOffset,N=b.focusNode;b=b.focusOffset;try{p.nodeType,N.nodeType}catch{p=null;break e}var O=0,z=-1,X=-1,oe=0,pe=0,ve=l,le=null;t:for(;;){for(var de;ve!==p||_!==0&&ve.nodeType!==3||(z=O+_),ve!==N||b!==0&&ve.nodeType!==3||(X=O+b),ve.nodeType===3&&(O+=ve.nodeValue.length),(de=ve.firstChild)!==null;)le=ve,ve=de;for(;;){if(ve===l)break t;if(le===p&&++oe===_&&(z=O),le===N&&++pe===b&&(X=O),(de=ve.nextSibling)!==null)break;ve=le,le=ve.parentNode}ve=de}p=z===-1||X===-1?null:{start:z,end:X}}else p=null}p=p||{start:0,end:0}}else p=null;for(ZT={focusedElem:l,selectionRange:p},kS=!1,Ar=d;Ar!==null;)if(d=Ar,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,Ar=l;else for(;Ar!==null;){switch(d=Ar,N=d.alternate,l=d.flags,d.tag){case 0:if((l&4)!==0&&(l=d.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)_=l[p],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&N!==null){l=void 0,p=d,_=N.memoizedProps,N=N.memoizedState,b=p.stateNode;try{var je=Ef(p.type,_);l=b.getSnapshotBeforeUpdate(je,N),b.__reactInternalSnapshotBeforeUpdate=l}catch(Qe){Ft(p,p.return,Qe)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)nN(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":nN(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,Ar=l;break}Ar=d.return}}function Hj(l,d,p){var b=p.flags;switch(p.tag){case 0:case 11:case 15:Dl(l,p),b&4&&my(5,p);break;case 1:if(Dl(l,p),b&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(O){Ft(p,p.return,O)}else{var _=Ef(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(_,d,l.__reactInternalSnapshotBeforeUpdate)}catch(O){Ft(p,p.return,O)}}b&64&&Lj(p),b&512&&gy(p,p.return);break;case 3:if(Dl(l,p),b&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{_O(l,d)}catch(O){Ft(p,p.return,O)}}break;case 27:d===null&&b&4&&Uj(p);case 26:case 5:Dl(l,p),d===null&&b&4&&jj(p),b&512&&gy(p,p.return);break;case 12:Dl(l,p);break;case 31:Dl(l,p),b&4&&Gj(l,p);break;case 13:Dl(l,p),b&4&&qj(l,p),b&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=oQ.bind(null,p),TQ(l,p))));break;case 22:if(b=p.memoizedState!==null||kl,!b){d=d!==null&&d.memoizedState!==null||Zn,_=kl;var N=Zn;kl=b,(Zn=d)&&!N?Ll(l,p,(p.subtreeFlags&8772)!==0):Dl(l,p),kl=_,Zn=N}break;case 30:break;default:Dl(l,p)}}function zj(l){var d=l.alternate;d!==null&&(l.alternate=null,zj(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Pn(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var mn=null,Xi=!1;function Il(l,d,p){for(p=p.child;p!==null;)$j(l,d,p),p=p.sibling}function $j(l,d,p){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(tf,p)}catch{}switch(p.tag){case 26:Zn||Mo(p,d),Il(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Zn||Mo(p,d);var b=mn,_=Xi;Nu(p.type)&&(mn=p.stateNode,Xi=!1),Il(l,d,p),_y(p.stateNode),mn=b,Xi=_;break;case 5:Zn||Mo(p,d);case 6:if(b=mn,_=Xi,mn=null,Il(l,d,p),mn=b,Xi=_,mn!==null)if(Xi)try{(mn.nodeType===9?mn.body:mn.nodeName==="HTML"?mn.ownerDocument.body:mn).removeChild(p.stateNode)}catch(N){Ft(p,d,N)}else try{mn.removeChild(p.stateNode)}catch(N){Ft(p,d,N)}break;case 18:mn!==null&&(Xi?(l=mn,L4(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),nm(l)):L4(mn,p.stateNode));break;case 4:b=mn,_=Xi,mn=p.stateNode.containerInfo,Xi=!0,Il(l,d,p),mn=b,Xi=_;break;case 0:case 11:case 14:case 15:wu(2,p,d),Zn||wu(4,p,d),Il(l,d,p);break;case 1:Zn||(Mo(p,d),b=p.stateNode,typeof b.componentWillUnmount=="function"&&Oj(p,d,b)),Il(l,d,p);break;case 21:Il(l,d,p);break;case 22:Zn=(b=Zn)||p.memoizedState!==null,Il(l,d,p),Zn=b;break;default:Il(l,d,p)}}function Gj(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{nm(l)}catch(p){Ft(d,d.return,p)}}}function qj(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{nm(l)}catch(p){Ft(d,d.return,p)}}function ZJ(l){switch(l.tag){case 31:case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new Bj),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new Bj),d;default:throw Error(r(435,l.tag))}}function fS(l,d){var p=ZJ(l);d.forEach(function(b){if(!p.has(b)){p.add(b);var _=lQ.bind(null,l,b);b.then(_,_)}})}function Ji(l,d){var p=d.deletions;if(p!==null)for(var b=0;b<p.length;b++){var _=p[b],N=l,O=d,z=O;e:for(;z!==null;){switch(z.tag){case 27:if(Nu(z.type)){mn=z.stateNode,Xi=!1;break e}break;case 5:mn=z.stateNode,Xi=!1;break e;case 3:case 4:mn=z.stateNode.containerInfo,Xi=!0;break e}z=z.return}if(mn===null)throw Error(r(160));$j(N,O,_),mn=null,Xi=!1,N=_.alternate,N!==null&&(N.return=null),_.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)Vj(d,l),d=d.sibling}var Ks=null;function Vj(l,d){var p=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ji(d,l),Qi(l),b&4&&(wu(3,l,l.return),my(3,l),wu(5,l,l.return));break;case 1:Ji(d,l),Qi(l),b&512&&(Zn||p===null||Mo(p,p.return)),b&64&&kl&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?b:p.concat(b))));break;case 26:var _=Ks;if(Ji(d,l),Qi(l),b&512&&(Zn||p===null||Mo(p,p.return)),b&4){var N=p!==null?p.memoizedState:null;if(b=l.memoizedState,p===null)if(b===null)if(l.stateNode===null){e:{b=l.type,p=l.memoizedProps,_=_.ownerDocument||_;t:switch(b){case"title":N=_.getElementsByTagName("title")[0],(!N||N[An]||N[_e]||N.namespaceURI==="http://www.w3.org/2000/svg"||N.hasAttribute("itemprop"))&&(N=_.createElement(b),_.head.insertBefore(N,_.querySelector("head > title"))),Vr(N,b,p),N[_e]=l,pn(N),b=N;break e;case"link":var O=V4("link","href",_).get(b+(p.href||""));if(O){for(var z=0;z<O.length;z++)if(N=O[z],N.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&N.getAttribute("rel")===(p.rel==null?null:p.rel)&&N.getAttribute("title")===(p.title==null?null:p.title)&&N.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){O.splice(z,1);break t}}N=_.createElement(b),Vr(N,b,p),_.head.appendChild(N);break;case"meta":if(O=V4("meta","content",_).get(b+(p.content||""))){for(z=0;z<O.length;z++)if(N=O[z],N.getAttribute("content")===(p.content==null?null:""+p.content)&&N.getAttribute("name")===(p.name==null?null:p.name)&&N.getAttribute("property")===(p.property==null?null:p.property)&&N.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&N.getAttribute("charset")===(p.charSet==null?null:p.charSet)){O.splice(z,1);break t}}N=_.createElement(b),Vr(N,b,p),_.head.appendChild(N);break;default:throw Error(r(468,b))}N[_e]=l,pn(N),b=N}l.stateNode=b}else W4(_,l.type,l.stateNode);else l.stateNode=q4(_,b,l.memoizedProps);else N!==b?(N===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):N.count--,b===null?W4(_,l.type,l.stateNode):q4(_,b,l.memoizedProps)):b===null&&l.stateNode!==null&&NT(l,l.memoizedProps,p.memoizedProps)}break;case 27:Ji(d,l),Qi(l),b&512&&(Zn||p===null||Mo(p,p.return)),p!==null&&b&4&&NT(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Ji(d,l),Qi(l),b&512&&(Zn||p===null||Mo(p,p.return)),l.flags&32){_=l.stateNode;try{_p(_,"")}catch(je){Ft(l,l.return,je)}}b&4&&l.stateNode!=null&&(_=l.memoizedProps,NT(l,_,p!==null?p.memoizedProps:_)),b&1024&&(PT=!0);break;case 6:if(Ji(d,l),Qi(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,p=l.stateNode;try{p.nodeValue=b}catch(je){Ft(l,l.return,je)}}break;case 3:if(NS=null,_=Ks,Ks=CS(d.containerInfo),Ji(d,l),Ks=_,Qi(l),b&4&&p!==null&&p.memoizedState.isDehydrated)try{nm(d.containerInfo)}catch(je){Ft(l,l.return,je)}PT&&(PT=!1,Wj(l));break;case 4:b=Ks,Ks=CS(l.stateNode.containerInfo),Ji(d,l),Qi(l),Ks=b;break;case 12:Ji(d,l),Qi(l);break;case 31:Ji(d,l),Qi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,fS(l,b)));break;case 13:Ji(d,l),Qi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(pS=Lt()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,fS(l,b)));break;case 22:_=l.memoizedState!==null;var X=p!==null&&p.memoizedState!==null,oe=kl,pe=Zn;if(kl=oe||_,Zn=pe||X,Ji(d,l),Zn=pe,kl=oe,Qi(l),b&8192)e:for(d=l.stateNode,d._visibility=_?d._visibility&-2:d._visibility|1,_&&(p===null||X||kl||Zn||Af(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){X=p=d;try{if(N=X.stateNode,_)O=N.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{z=X.stateNode;var ve=X.memoizedProps.style,le=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;z.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(je){Ft(X,X.return,je)}}}else if(d.tag===6){if(p===null){X=d;try{X.stateNode.nodeValue=_?"":X.memoizedProps}catch(je){Ft(X,X.return,je)}}}else if(d.tag===18){if(p===null){X=d;try{var de=X.stateNode;_?O4(de,!0):O4(X.stateNode,!1)}catch(je){Ft(X,X.return,je)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(p=b.retryQueue,p!==null&&(b.retryQueue=null,fS(l,p))));break;case 19:Ji(d,l),Qi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,fS(l,b)));break;case 30:break;case 21:break;default:Ji(d,l),Qi(l)}}function Qi(l){var d=l.flags;if(d&2){try{for(var p,b=l.return;b!==null;){if(Fj(b)){p=b;break}b=b.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var _=p.stateNode,N=RT(l);dS(l,N,_);break;case 5:var O=p.stateNode;p.flags&32&&(_p(O,""),p.flags&=-33);var z=RT(l);dS(l,z,O);break;case 3:case 4:var X=p.stateNode.containerInfo,oe=RT(l);MT(l,oe,X);break;default:throw Error(r(161))}}catch(pe){Ft(l,l.return,pe)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function Wj(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;Wj(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function Dl(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Hj(l,d.alternate,d),d=d.sibling}function Af(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:wu(4,d,d.return),Af(d);break;case 1:Mo(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&Oj(d,d.return,p),Af(d);break;case 27:_y(d.stateNode);case 26:case 5:Mo(d,d.return),Af(d);break;case 22:d.memoizedState===null&&Af(d);break;case 30:Af(d);break;default:Af(d)}l=l.sibling}}function Ll(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,_=l,N=d,O=N.flags;switch(N.tag){case 0:case 11:case 15:Ll(_,N,p),my(4,N);break;case 1:if(Ll(_,N,p),b=N,_=b.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(oe){Ft(b,b.return,oe)}if(b=N,_=b.updateQueue,_!==null){var z=b.stateNode;try{var X=_.shared.hiddenCallbacks;if(X!==null)for(_.shared.hiddenCallbacks=null,_=0;_<X.length;_++)AO(X[_],z)}catch(oe){Ft(b,b.return,oe)}}p&&O&64&&Lj(N),gy(N,N.return);break;case 27:Uj(N);case 26:case 5:Ll(_,N,p),p&&b===null&&O&4&&jj(N),gy(N,N.return);break;case 12:Ll(_,N,p);break;case 31:Ll(_,N,p),p&&O&4&&Gj(_,N);break;case 13:Ll(_,N,p),p&&O&4&&qj(_,N);break;case 22:N.memoizedState===null&&Ll(_,N,p),gy(N,N.return);break;case 30:break;default:Ll(_,N,p)}d=d.sibling}}function kT(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&ny(p))}function IT(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ny(l))}function Xs(l,d,p,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Yj(l,d,p,b),d=d.sibling}function Yj(l,d,p,b){var _=d.flags;switch(d.tag){case 0:case 11:case 15:Xs(l,d,p,b),_&2048&&my(9,d);break;case 1:Xs(l,d,p,b);break;case 3:Xs(l,d,p,b),_&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&ny(l)));break;case 12:if(_&2048){Xs(l,d,p,b),l=d.stateNode;try{var N=d.memoizedProps,O=N.id,z=N.onPostCommit;typeof z=="function"&&z(O,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(X){Ft(d,d.return,X)}}else Xs(l,d,p,b);break;case 31:Xs(l,d,p,b);break;case 13:Xs(l,d,p,b);break;case 23:break;case 22:N=d.stateNode,O=d.alternate,d.memoizedState!==null?N._visibility&2?Xs(l,d,p,b):vy(l,d):N._visibility&2?Xs(l,d,p,b):(N._visibility|=2,qp(l,d,p,b,(d.subtreeFlags&10256)!==0||!1)),_&2048&&kT(O,d);break;case 24:Xs(l,d,p,b),_&2048&&IT(d.alternate,d);break;default:Xs(l,d,p,b)}}function qp(l,d,p,b,_){for(_=_&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var N=l,O=d,z=p,X=b,oe=O.flags;switch(O.tag){case 0:case 11:case 15:qp(N,O,z,X,_),my(8,O);break;case 23:break;case 22:var pe=O.stateNode;O.memoizedState!==null?pe._visibility&2?qp(N,O,z,X,_):vy(N,O):(pe._visibility|=2,qp(N,O,z,X,_)),_&&oe&2048&&kT(O.alternate,O);break;case 24:qp(N,O,z,X,_),_&&oe&2048&&IT(O.alternate,O);break;default:qp(N,O,z,X,_)}d=d.sibling}}function vy(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,b=d,_=b.flags;switch(b.tag){case 22:vy(p,b),_&2048&&kT(b.alternate,b);break;case 24:vy(p,b),_&2048&&IT(b.alternate,b);break;default:vy(p,b)}d=d.sibling}}var yy=8192;function Vp(l,d,p){if(l.subtreeFlags&yy)for(l=l.child;l!==null;)Kj(l,d,p),l=l.sibling}function Kj(l,d,p){switch(l.tag){case 26:Vp(l,d,p),l.flags&yy&&l.memoizedState!==null&&UQ(p,Ks,l.memoizedState,l.memoizedProps);break;case 5:Vp(l,d,p);break;case 3:case 4:var b=Ks;Ks=CS(l.stateNode.containerInfo),Vp(l,d,p),Ks=b;break;case 22:l.memoizedState===null&&(b=l.alternate,b!==null&&b.memoizedState!==null?(b=yy,yy=16777216,Vp(l,d,p),yy=b):Vp(l,d,p));break;default:Vp(l,d,p)}}function Xj(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function by(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];Ar=b,Qj(b,l)}Xj(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Jj(l),l=l.sibling}function Jj(l){switch(l.tag){case 0:case 11:case 15:by(l),l.flags&2048&&wu(9,l,l.return);break;case 3:by(l);break;case 12:by(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,hS(l)):by(l);break;default:by(l)}}function hS(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];Ar=b,Qj(b,l)}Xj(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:wu(8,d,d.return),hS(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,hS(d));break;default:hS(d)}l=l.sibling}}function Qj(l,d){for(;Ar!==null;){var p=Ar;switch(p.tag){case 0:case 11:case 15:wu(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var b=p.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:ny(p.memoizedState.cache)}if(b=p.child,b!==null)b.return=p,Ar=b;else e:for(p=l;Ar!==null;){b=Ar;var _=b.sibling,N=b.return;if(zj(b),b===p){Ar=null;break e}if(_!==null){_.return=N,Ar=_;break e}Ar=N}}}var eQ={getCacheForType:function(l){var d=Gr(Xn),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p},cacheSignal:function(){return Gr(Xn).controller.signal}},tQ=typeof WeakMap=="function"?WeakMap:Map,It=0,Zt=null,vt=null,bt=0,jt=0,Aa=null,Su=!1,Wp=!1,DT=!1,Ol=0,Dn=0,Eu=0,_f=0,LT=0,_a=0,Yp=0,xy=null,Zi=null,OT=!1,pS=0,Zj=0,mS=1/0,gS=null,Au=null,or=0,_u=null,Kp=null,jl=0,jT=0,FT=null,e4=null,wy=0,UT=null;function Ca(){return(It&2)!==0&&bt!==0?bt&-bt:$.T!==null?qT():Ae()}function t4(){if(_a===0)if((bt&536870912)===0||_t){var l=nf;nf<<=1,(nf&3932160)===0&&(nf=262144),_a=l}else _a=536870912;return l=Sa.current,l!==null&&(l.flags|=32),_a}function ea(l,d,p){(l===Zt&&(jt===2||jt===9)||l.cancelPendingCommit!==null)&&(Xp(l,0),Cu(l,bt,_a,!1)),uu(l,p),((It&2)===0||l!==Zt)&&(l===Zt&&((It&2)===0&&(_f|=p),Dn===4&&Cu(l,bt,_a,!1)),Po(l))}function n4(l,d,p){if((It&6)!==0)throw Error(r(327));var b=!p&&(d&127)===0&&(d&l.expiredLanes)===0||af(l,d),_=b?iQ(l,d):HT(l,d,!0),N=b;do{if(_===0){Wp&&!b&&Cu(l,d,0,!1);break}else{if(p=l.current.alternate,N&&!nQ(p)){_=HT(l,d,!1),N=!1;continue}if(_===2){if(N=d,l.errorRecoveryDisabledLanes&N)var O=0;else O=l.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){d=O;e:{var z=l;_=xy;var X=z.current.memoizedState.isDehydrated;if(X&&(Xp(z,O).flags|=256),O=HT(z,O,!1),O!==2){if(DT&&!X){z.errorRecoveryDisabledLanes|=N,_f|=N,_=4;break e}N=Zi,Zi=_,N!==null&&(Zi===null?Zi=N:Zi.push.apply(Zi,N))}_=O}if(N=!1,_!==2)continue}}if(_===1){Xp(l,0),Cu(l,d,0,!0);break}e:{switch(b=l,N=_,N){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Cu(b,d,_a,!Su);break e;case 2:Zi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(_=pS+300-Lt(),10<_)){if(Cu(b,d,_a,!Su),rf(b,0,!0)!==0)break e;jl=d,b.timeoutHandle=I4(r4.bind(null,b,p,Zi,gS,OT,d,_a,_f,Yp,Su,N,"Throttled",-0,0),_);break e}r4(b,p,Zi,gS,OT,d,_a,_f,Yp,Su,N,null,-0,0)}}break}while(!0);Po(l)}function r4(l,d,p,b,_,N,O,z,X,oe,pe,ve,le,de){if(l.timeoutHandle=-1,ve=d.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sl},Kj(d,N,ve);var je=(N&62914560)===N?pS-Lt():(N&4194048)===N?Zj-Lt():0;if(je=BQ(ve,je),je!==null){jl=N,l.cancelPendingCommit=je(d4.bind(null,l,d,N,p,b,_,O,z,X,pe,ve,null,le,de)),Cu(l,N,O,!oe);return}}d4(l,d,N,p,b,_,O,z,X)}function nQ(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var b=0;b<p.length;b++){var _=p[b],N=_.getSnapshot;_=_.value;try{if(!xa(N(),_))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Cu(l,d,p,b){d&=~LT,d&=~_f,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var _=d;0<_;){var N=31-di(_),O=1<<N;b[N]=-1,_&=~O}p!==0&&Tw(l,p,d)}function vS(){return(It&6)===0?(Sy(0),!1):!0}function BT(){if(vt!==null){if(jt===0)var l=vt.return;else l=vt,Cl=gf=null,nT(l),Bp=null,iy=0,l=vt;for(;l!==null;)Dj(l.alternate,l),l=l.return;vt=null}}function Xp(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,SQ(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),jl=0,BT(),Zt=l,vt=p=Al(l.current,null),bt=d,jt=0,Aa=null,Su=!1,Wp=af(l,d),DT=!1,Yp=_a=LT=_f=Eu=Dn=0,Zi=xy=null,OT=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var _=31-di(b),N=1<<_;d|=l[_],b&=~N}return Ol=d,Fw(),p}function i4(l,d){lt=null,$.H=fy,d===Up||d===Vw?(d=xO(),jt=3):d===GC?(d=xO(),jt=4):jt=d===yT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Aa=d,vt===null&&(Dn=1,sS(l,cs(d,l.current)))}function a4(){var l=Sa.current;return l===null?!0:(bt&4194048)===bt?hs===null:(bt&62914560)===bt||(bt&536870912)!==0?l===hs:!1}function s4(){var l=$.H;return $.H=fy,l===null?fy:l}function o4(){var l=$.A;return $.A=eQ,l}function yS(){Dn=4,Su||(bt&4194048)!==bt&&Sa.current!==null||(Wp=!0),(Eu&134217727)===0&&(_f&134217727)===0||Zt===null||Cu(Zt,bt,_a,!1)}function HT(l,d,p){var b=It;It|=2;var _=s4(),N=o4();(Zt!==l||bt!==d)&&(gS=null,Xp(l,d)),d=!1;var O=Dn;e:do try{if(jt!==0&&vt!==null){var z=vt,X=Aa;switch(jt){case 8:BT(),O=6;break e;case 3:case 2:case 9:case 6:Sa.current===null&&(d=!0);var oe=jt;if(jt=0,Aa=null,Jp(l,z,X,oe),p&&Wp){O=0;break e}break;default:oe=jt,jt=0,Aa=null,Jp(l,z,X,oe)}}rQ(),O=Dn;break}catch(pe){i4(l,pe)}while(!0);return d&&l.shellSuspendCounter++,Cl=gf=null,It=b,$.H=_,$.A=N,vt===null&&(Zt=null,bt=0,Fw()),O}function rQ(){for(;vt!==null;)l4(vt)}function iQ(l,d){var p=It;It|=2;var b=s4(),_=o4();Zt!==l||bt!==d?(gS=null,mS=Lt()+500,Xp(l,d)):Wp=af(l,d);e:do try{if(jt!==0&&vt!==null){d=vt;var N=Aa;t:switch(jt){case 1:jt=0,Aa=null,Jp(l,d,N,1);break;case 2:case 9:if(yO(N)){jt=0,Aa=null,c4(d);break}d=function(){jt!==2&&jt!==9||Zt!==l||(jt=7),Po(l)},N.then(d,d);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:yO(N)?(jt=0,Aa=null,c4(d)):(jt=0,Aa=null,Jp(l,d,N,7));break;case 5:var O=null;switch(vt.tag){case 26:O=vt.memoizedState;case 5:case 27:var z=vt;if(O?Y4(O):z.stateNode.complete){jt=0,Aa=null;var X=z.sibling;if(X!==null)vt=X;else{var oe=z.return;oe!==null?(vt=oe,bS(oe)):vt=null}break t}}jt=0,Aa=null,Jp(l,d,N,5);break;case 6:jt=0,Aa=null,Jp(l,d,N,6);break;case 8:BT(),Dn=6;break e;default:throw Error(r(462))}}aQ();break}catch(pe){i4(l,pe)}while(!0);return Cl=gf=null,$.H=b,$.A=_,It=p,vt!==null?0:(Zt=null,bt=0,Fw(),Dn)}function aQ(){for(;vt!==null&&!Mn();)l4(vt)}function l4(l){var d=kj(l.alternate,l,Ol);l.memoizedProps=l.pendingProps,d===null?bS(l):vt=d}function c4(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=Cj(p,d,d.pendingProps,d.type,void 0,bt);break;case 11:d=Cj(p,d,d.pendingProps,d.type.render,d.ref,bt);break;case 5:nT(d);default:Dj(p,d),d=vt=oO(d,Ol),d=kj(p,d,Ol)}l.memoizedProps=l.pendingProps,d===null?bS(l):vt=d}function Jp(l,d,p,b){Cl=gf=null,nT(d),Bp=null,iy=0;var _=d.return;try{if(WJ(l,_,d,p,bt)){Dn=1,sS(l,cs(p,l.current)),vt=null;return}}catch(N){if(_!==null)throw vt=_,N;Dn=1,sS(l,cs(p,l.current)),vt=null;return}d.flags&32768?(_t||b===1?l=!0:Wp||(bt&536870912)!==0?l=!1:(Su=l=!0,(b===2||b===9||b===3||b===6)&&(b=Sa.current,b!==null&&b.tag===13&&(b.flags|=16384))),u4(d,l)):bS(d)}function bS(l){var d=l;do{if((d.flags&32768)!==0){u4(d,Su);return}l=d.return;var p=XJ(d.alternate,d,Ol);if(p!==null){vt=p;return}if(d=d.sibling,d!==null){vt=d;return}vt=d=l}while(d!==null);Dn===0&&(Dn=5)}function u4(l,d){do{var p=JJ(l.alternate,l);if(p!==null){p.flags&=32767,vt=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){vt=l;return}vt=l=p}while(l!==null);Dn=6,vt=null}function d4(l,d,p,b,_,N,O,z,X){l.cancelPendingCommit=null;do xS();while(or!==0);if((It&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(N=d.lanes|d.childLanes,N|=RC,lC(l,p,N,O,z,X),l===Zt&&(vt=Zt=null,bt=0),Kp=d,_u=l,jl=p,jT=N,FT=_,e4=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,cQ(Sn,function(){return g4(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=$.T,$.T=null,_=q.p,q.p=2,O=It,It|=4;try{QJ(l,d,p)}finally{It=O,q.p=_,$.T=b}}or=1,f4(),h4(),p4()}}function f4(){if(or===1){or=0;var l=_u,d=Kp,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=$.T,$.T=null;var b=q.p;q.p=2;var _=It;It|=4;try{Vj(d,l);var N=ZT,O=QL(l.containerInfo),z=N.focusedElem,X=N.selectionRange;if(O!==z&&z&&z.ownerDocument&&JL(z.ownerDocument.documentElement,z)){if(X!==null&&AC(z)){var oe=X.start,pe=X.end;if(pe===void 0&&(pe=oe),"selectionStart"in z)z.selectionStart=oe,z.selectionEnd=Math.min(pe,z.value.length);else{var ve=z.ownerDocument||document,le=ve&&ve.defaultView||window;if(le.getSelection){var de=le.getSelection(),je=z.textContent.length,Qe=Math.min(X.start,je),Vt=X.end===void 0?Qe:Math.min(X.end,je);!de.extend&&Qe>Vt&&(O=Vt,Vt=Qe,Qe=O);var ie=XL(z,Qe),Z=XL(z,Vt);if(ie&&Z&&(de.rangeCount!==1||de.anchorNode!==ie.node||de.anchorOffset!==ie.offset||de.focusNode!==Z.node||de.focusOffset!==Z.offset)){var se=ve.createRange();se.setStart(ie.node,ie.offset),de.removeAllRanges(),Qe>Vt?(de.addRange(se),de.extend(Z.node,Z.offset)):(se.setEnd(Z.node,Z.offset),de.addRange(se))}}}}for(ve=[],de=z;de=de.parentNode;)de.nodeType===1&&ve.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<ve.length;z++){var ge=ve[z];ge.element.scrollLeft=ge.left,ge.element.scrollTop=ge.top}}kS=!!QT,ZT=QT=null}finally{It=_,q.p=b,$.T=p}}l.current=d,or=2}}function h4(){if(or===2){or=0;var l=_u,d=Kp,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=$.T,$.T=null;var b=q.p;q.p=2;var _=It;It|=4;try{Hj(l,d.alternate,d)}finally{It=_,q.p=b,$.T=p}}or=3}}function p4(){if(or===4||or===3){or=0,ya();var l=_u,d=Kp,p=jl,b=e4;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?or=5:(or=0,Kp=_u=null,m4(l,l.pendingLanes));var _=l.pendingLanes;if(_===0&&(Au=null),we(p),d=d.stateNode,En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(tf,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=$.T,_=q.p,q.p=2,$.T=null;try{for(var N=l.onRecoverableError,O=0;O<b.length;O++){var z=b[O];N(z.value,{componentStack:z.stack})}}finally{$.T=d,q.p=_}}(jl&3)!==0&&xS(),Po(l),_=l.pendingLanes,(p&261930)!==0&&(_&42)!==0?l===UT?wy++:(wy=0,UT=l):wy=0,Sy(0)}}function m4(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,ny(d)))}function xS(){return f4(),h4(),p4(),g4()}function g4(){if(or!==5)return!1;var l=_u,d=jT;jT=0;var p=we(jl),b=$.T,_=q.p;try{q.p=32>p?32:p,$.T=null,p=FT,FT=null;var N=_u,O=jl;if(or=0,Kp=_u=null,jl=0,(It&6)!==0)throw Error(r(331));var z=It;if(It|=4,Jj(N.current),Yj(N,N.current,O,p),It=z,Sy(0,!1),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(tf,N)}catch{}return!0}finally{q.p=_,$.T=b,m4(l,d)}}function v4(l,d,p){d=cs(p,d),d=vT(l.stateNode,d,2),l=yu(l,d,2),l!==null&&(uu(l,2),Po(l))}function Ft(l,d,p){if(l.tag===3)v4(l,l,p);else for(;d!==null;){if(d.tag===3){v4(d,l,p);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Au===null||!Au.has(b))){l=cs(p,l),p=yj(2),b=yu(d,p,2),b!==null&&(bj(p,b,d,l),uu(b,2),Po(b));break}}d=d.return}}function zT(l,d,p){var b=l.pingCache;if(b===null){b=l.pingCache=new tQ;var _=new Set;b.set(d,_)}else _=b.get(d),_===void 0&&(_=new Set,b.set(d,_));_.has(p)||(DT=!0,_.add(p),l=sQ.bind(null,l,d,p),d.then(l,l))}function sQ(l,d,p){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Zt===l&&(bt&p)===p&&(Dn===4||Dn===3&&(bt&62914560)===bt&&300>Lt()-pS?(It&2)===0&&Xp(l,0):LT|=p,Yp===bt&&(Yp=0)),Po(l)}function y4(l,d){d===0&&(d=sf()),l=hf(l,d),l!==null&&(uu(l,d),Po(l))}function oQ(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),y4(l,p)}function lQ(l,d){var p=0;switch(l.tag){case 31:case 13:var b=l.stateNode,_=l.memoizedState;_!==null&&(p=_.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),y4(l,p)}function cQ(l,d){return xr(l,d)}var wS=null,Qp=null,$T=!1,SS=!1,GT=!1,Tu=0;function Po(l){l!==Qp&&l.next===null&&(Qp===null?wS=Qp=l:Qp=Qp.next=l),SS=!0,$T||($T=!0,dQ())}function Sy(l,d){if(!GT&&SS){GT=!0;do for(var p=!1,b=wS;b!==null;){if(l!==0){var _=b.pendingLanes;if(_===0)var N=0;else{var O=b.suspendedLanes,z=b.pingedLanes;N=(1<<31-di(42|l)+1)-1,N&=_&~(O&~z),N=N&201326741?N&201326741|1:N?N|2:0}N!==0&&(p=!0,S4(b,N))}else N=bt,N=rf(b,b===Zt?N:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(N&3)===0||af(b,N)||(p=!0,S4(b,N));b=b.next}while(p);GT=!1}}function uQ(){b4()}function b4(){SS=$T=!1;var l=0;Tu!==0&&wQ()&&(l=Tu);for(var d=Lt(),p=null,b=wS;b!==null;){var _=b.next,N=x4(b,d);N===0?(b.next=null,p===null?wS=_:p.next=_,_===null&&(Qp=p)):(p=b,(l!==0||(N&3)!==0)&&(SS=!0)),b=_}or!==0&&or!==5||Sy(l),Tu!==0&&(Tu=0)}function x4(l,d){for(var p=l.suspendedLanes,b=l.pingedLanes,_=l.expirationTimes,N=l.pendingLanes&-62914561;0<N;){var O=31-di(N),z=1<<O,X=_[O];X===-1?((z&p)===0||(z&b)!==0)&&(_[O]=Cw(z,d)):X<=d&&(l.expiredLanes|=z),N&=~z}if(d=Zt,p=bt,p=rf(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,p===0||l===d&&(jt===2||jt===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&is(b),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||af(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(b!==null&&is(b),we(p)){case 2:case 8:p=as;break;case 32:p=Sn;break;case 268435456:p=Wi;break;default:p=Sn}return b=w4.bind(null,l),p=xr(p,b),l.callbackPriority=d,l.callbackNode=p,d}return b!==null&&b!==null&&is(b),l.callbackPriority=2,l.callbackNode=null,2}function w4(l,d){if(or!==0&&or!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(xS()&&l.callbackNode!==p)return null;var b=bt;return b=rf(l,l===Zt?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(n4(l,b,d),x4(l,Lt()),l.callbackNode!=null&&l.callbackNode===p?w4.bind(null,l):null)}function S4(l,d){if(xS())return null;n4(l,d,!0)}function dQ(){EQ(function(){(It&6)!==0?xr(Vi,uQ):b4()})}function qT(){if(Tu===0){var l=jp;l===0&&(l=bl,bl<<=1,(bl&261888)===0&&(bl=256)),Tu=l}return Tu}function E4(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Mw(""+l)}function A4(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function fQ(l,d,p,b,_){if(d==="submit"&&p&&p.stateNode===_){var N=E4((_[Re]||null).action),O=b.submitter;O&&(d=(d=O[Re]||null)?E4(d.formAction):O.getAttribute("formAction"),d!==null&&(N=d,O=null));var z=new Dw("action","action",null,b,_);l.push({event:z,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Tu!==0){var X=O?A4(_,O):new FormData(_);dT(p,{pending:!0,data:X,method:_.method,action:N},null,X)}}else typeof N=="function"&&(z.preventDefault(),X=O?A4(_,O):new FormData(_),dT(p,{pending:!0,data:X,method:_.method,action:N},N,X))},currentTarget:_}]})}}for(var VT=0;VT<NC.length;VT++){var WT=NC[VT],hQ=WT.toLowerCase(),pQ=WT[0].toUpperCase()+WT.slice(1);Ys(hQ,"on"+pQ)}Ys(tO,"onAnimationEnd"),Ys(nO,"onAnimationIteration"),Ys(rO,"onAnimationStart"),Ys("dblclick","onDoubleClick"),Ys("focusin","onFocus"),Ys("focusout","onBlur"),Ys(MJ,"onTransitionRun"),Ys(PJ,"onTransitionStart"),Ys(kJ,"onTransitionCancel"),Ys(iO,"onTransitionEnd"),ss("onMouseEnter",["mouseout","mouseover"]),ss("onMouseLeave",["mouseout","mouseover"]),ss("onPointerEnter",["pointerout","pointerover"]),ss("onPointerLeave",["pointerout","pointerover"]),Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ey="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mQ=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ey));function _4(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var b=l[p],_=b.event;b=b.listeners;e:{var N=void 0;if(d)for(var O=b.length-1;0<=O;O--){var z=b[O],X=z.instance,oe=z.currentTarget;if(z=z.listener,X!==N&&_.isPropagationStopped())break e;N=z,_.currentTarget=oe;try{N(_)}catch(pe){jw(pe)}_.currentTarget=null,N=X}else for(O=0;O<b.length;O++){if(z=b[O],X=z.instance,oe=z.currentTarget,z=z.listener,X!==N&&_.isPropagationStopped())break e;N=z,_.currentTarget=oe;try{N(_)}catch(pe){jw(pe)}_.currentTarget=null,N=X}}}}function yt(l,d){var p=d[tt];p===void 0&&(p=d[tt]=new Set);var b=l+"__bubble";p.has(b)||(C4(d,l,2,!1),p.add(b))}function YT(l,d,p){var b=0;d&&(b|=4),C4(p,l,b,d)}var ES="_reactListening"+Math.random().toString(36).slice(2);function KT(l){if(!l[ES]){l[ES]=!0,qs.forEach(function(p){p!=="selectionchange"&&(mQ.has(p)||YT(p,!1,l),YT(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[ES]||(d[ES]=!0,YT("selectionchange",!1,d))}}function C4(l,d,p,b){switch(t3(d)){case 2:var _=$Q;break;case 8:_=GQ;break;default:_=uN}p=_.bind(null,d,p,l),_=void 0,!mC||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(_=!0),b?_!==void 0?l.addEventListener(d,p,{capture:!0,passive:_}):l.addEventListener(d,p,!0):_!==void 0?l.addEventListener(d,p,{passive:_}):l.addEventListener(d,p,!1)}function XT(l,d,p,b,_){var N=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var O=b.tag;if(O===3||O===4){var z=b.stateNode.containerInfo;if(z===_)break;if(O===4)for(O=b.return;O!==null;){var X=O.tag;if((X===3||X===4)&&O.stateNode.containerInfo===_)return;O=O.return}for(;z!==null;){if(O=kn(z),O===null)return;if(X=O.tag,X===5||X===6||X===26||X===27){b=N=O;continue e}z=z.parentNode}}b=b.return}PL(function(){var oe=N,pe=hC(p),ve=[];e:{var le=aO.get(l);if(le!==void 0){var de=Dw,je=l;switch(l){case"keypress":if(kw(p)===0)break e;case"keydown":case"keyup":de=lJ;break;case"focusin":je="focus",de=bC;break;case"focusout":je="blur",de=bC;break;case"beforeblur":case"afterblur":de=bC;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=DL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=XX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=dJ;break;case tO:case nO:case rO:de=ZX;break;case iO:de=hJ;break;case"scroll":case"scrollend":de=YX;break;case"wheel":de=mJ;break;case"copy":case"cut":case"paste":de=tJ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=OL;break;case"toggle":case"beforetoggle":de=vJ}var Qe=(d&4)!==0,Vt=!Qe&&(l==="scroll"||l==="scrollend"),ie=Qe?le!==null?le+"Capture":null:le;Qe=[];for(var Z=oe,se;Z!==null;){var ge=Z;if(se=ge.stateNode,ge=ge.tag,ge!==5&&ge!==26&&ge!==27||se===null||ie===null||(ge=qv(Z,ie),ge!=null&&Qe.push(Ay(Z,ge,se))),Vt)break;Z=Z.return}0<Qe.length&&(le=new de(le,je,null,p,pe),ve.push({event:le,listeners:Qe}))}}if((d&7)===0){e:{if(le=l==="mouseover"||l==="pointerover",de=l==="mouseout"||l==="pointerout",le&&p!==fC&&(je=p.relatedTarget||p.fromElement)&&(kn(je)||je[Be]))break e;if((de||le)&&(le=pe.window===pe?pe:(le=pe.ownerDocument)?le.defaultView||le.parentWindow:window,de?(je=p.relatedTarget||p.toElement,de=oe,je=je?kn(je):null,je!==null&&(Vt=a(je),Qe=je.tag,je!==Vt||Qe!==5&&Qe!==27&&Qe!==6)&&(je=null)):(de=null,je=oe),de!==je)){if(Qe=DL,ge="onMouseLeave",ie="onMouseEnter",Z="mouse",(l==="pointerout"||l==="pointerover")&&(Qe=OL,ge="onPointerLeave",ie="onPointerEnter",Z="pointer"),Vt=de==null?le:Er(de),se=je==null?le:Er(je),le=new Qe(ge,Z+"leave",de,p,pe),le.target=Vt,le.relatedTarget=se,ge=null,kn(pe)===oe&&(Qe=new Qe(ie,Z+"enter",je,p,pe),Qe.target=se,Qe.relatedTarget=Vt,ge=Qe),Vt=ge,de&&je)t:{for(Qe=gQ,ie=de,Z=je,se=0,ge=ie;ge;ge=Qe(ge))se++;ge=0;for(var Xe=Z;Xe;Xe=Qe(Xe))ge++;for(;0<se-ge;)ie=Qe(ie),se--;for(;0<ge-se;)Z=Qe(Z),ge--;for(;se--;){if(ie===Z||Z!==null&&ie===Z.alternate){Qe=ie;break t}ie=Qe(ie),Z=Qe(Z)}Qe=null}else Qe=null;de!==null&&T4(ve,le,de,Qe,!1),je!==null&&Vt!==null&&T4(ve,Vt,je,Qe,!0)}}e:{if(le=oe?Er(oe):window,de=le.nodeName&&le.nodeName.toLowerCase(),de==="select"||de==="input"&&le.type==="file")var Rt=GL;else if(zL(le))if(qL)Rt=TJ;else{Rt=_J;var ze=AJ}else de=le.nodeName,!de||de.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?oe&&dC(oe.elementType)&&(Rt=GL):Rt=CJ;if(Rt&&(Rt=Rt(l,oe))){$L(ve,Rt,p,pe);break e}ze&&ze(l,le,oe),l==="focusout"&&oe&&le.type==="number"&&oe.memoizedProps.value!=null&&uC(le,"number",le.value)}switch(ze=oe?Er(oe):window,l){case"focusin":(zL(ze)||ze.contentEditable==="true")&&(Rp=ze,_C=oe,Zv=null);break;case"focusout":Zv=_C=Rp=null;break;case"mousedown":CC=!0;break;case"contextmenu":case"mouseup":case"dragend":CC=!1,ZL(ve,p,pe);break;case"selectionchange":if(RJ)break;case"keydown":case"keyup":ZL(ve,p,pe)}var ut;if(wC)e:{switch(l){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else Np?BL(l,p)&&(xt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(xt="onCompositionStart");xt&&(jL&&p.locale!=="ko"&&(Np||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&Np&&(ut=kL()):(du=pe,gC="value"in du?du.value:du.textContent,Np=!0)),ze=AS(oe,xt),0<ze.length&&(xt=new LL(xt,l,null,p,pe),ve.push({event:xt,listeners:ze}),ut?xt.data=ut:(ut=HL(p),ut!==null&&(xt.data=ut)))),(ut=bJ?xJ(l,p):wJ(l,p))&&(xt=AS(oe,"onBeforeInput"),0<xt.length&&(ze=new LL("onBeforeInput","beforeinput",null,p,pe),ve.push({event:ze,listeners:xt}),ze.data=ut)),fQ(ve,l,oe,p,pe)}_4(ve,d)})}function Ay(l,d,p){return{instance:l,listener:d,currentTarget:p}}function AS(l,d){for(var p=d+"Capture",b=[];l!==null;){var _=l,N=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||N===null||(_=qv(l,p),_!=null&&b.unshift(Ay(l,_,N)),_=qv(l,d),_!=null&&b.push(Ay(l,_,N))),l.tag===3)return b;l=l.return}return[]}function gQ(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function T4(l,d,p,b,_){for(var N=d._reactName,O=[];p!==null&&p!==b;){var z=p,X=z.alternate,oe=z.stateNode;if(z=z.tag,X!==null&&X===b)break;z!==5&&z!==26&&z!==27||oe===null||(X=oe,_?(oe=qv(p,N),oe!=null&&O.unshift(Ay(p,oe,X))):_||(oe=qv(p,N),oe!=null&&O.push(Ay(p,oe,X)))),p=p.return}O.length!==0&&l.push({event:d,listeners:O})}var vQ=/\r\n?/g,yQ=/\u0000|\uFFFD/g;function N4(l){return(typeof l=="string"?l:""+l).replace(vQ,`
`).replace(yQ,"")}function R4(l,d){return d=N4(d),N4(l)===d}function qt(l,d,p,b,_,N){switch(p){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||_p(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&_p(l,""+b);break;case"className":Ws(l,"class",b);break;case"tabIndex":Ws(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Ws(l,p,b);break;case"style":RL(l,b,N);break;case"data":if(d!=="object"){Ws(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Mw(""+b),l.setAttribute(p,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof N=="function"&&(p==="formAction"?(d!=="input"&&qt(l,d,"name",_.name,_,null),qt(l,d,"formEncType",_.formEncType,_,null),qt(l,d,"formMethod",_.formMethod,_,null),qt(l,d,"formTarget",_.formTarget,_,null)):(qt(l,d,"encType",_.encType,_,null),qt(l,d,"method",_.method,_,null),qt(l,d,"target",_.target,_,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Mw(""+b),l.setAttribute(p,b);break;case"onClick":b!=null&&(l.onclick=Sl);break;case"onScroll":b!=null&&yt("scroll",l);break;case"onScrollEnd":b!=null&&yt("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}p=Mw(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""+b):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":b===!0?l.setAttribute(p,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,b):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(p,b):l.removeAttribute(p);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(p):l.setAttribute(p,b);break;case"popover":yt("beforetoggle",l),yt("toggle",l),zn(l,"popover",b);break;case"xlinkActuate":zr(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":zr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":zr(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":zr(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":zr(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":zr(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":zr(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":zr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":zr(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":zn(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=VX.get(p)||p,zn(l,p,b))}}function JT(l,d,p,b,_,N){switch(p){case"style":RL(l,b,N);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(_.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof b=="string"?_p(l,b):(typeof b=="number"||typeof b=="bigint")&&_p(l,""+b);break;case"onScroll":b!=null&&yt("scroll",l);break;case"onScrollEnd":b!=null&&yt("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Sl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ba.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(_=p.endsWith("Capture"),d=p.slice(2,_?p.length-7:void 0),N=l[Re]||null,N=N!=null?N[p]:null,typeof N=="function"&&l.removeEventListener(d,N,_),typeof b=="function")){typeof N!="function"&&N!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,b,_);break e}p in l?l[p]=b:b===!0?l.setAttribute(p,""):zn(l,p,b)}}}function Vr(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",l),yt("load",l);var b=!1,_=!1,N;for(N in p)if(p.hasOwnProperty(N)){var O=p[N];if(O!=null)switch(N){case"src":b=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:qt(l,d,N,O,p,null)}}_&&qt(l,d,"srcSet",p.srcSet,p,null),b&&qt(l,d,"src",p.src,p,null);return;case"input":yt("invalid",l);var z=N=O=_=null,X=null,oe=null;for(b in p)if(p.hasOwnProperty(b)){var pe=p[b];if(pe!=null)switch(b){case"name":_=pe;break;case"type":O=pe;break;case"checked":X=pe;break;case"defaultChecked":oe=pe;break;case"value":N=pe;break;case"defaultValue":z=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,d));break;default:qt(l,d,b,pe,p,null)}}_L(l,N,z,X,oe,O,_,!1);return;case"select":yt("invalid",l),b=O=N=null;for(_ in p)if(p.hasOwnProperty(_)&&(z=p[_],z!=null))switch(_){case"value":N=z;break;case"defaultValue":O=z;break;case"multiple":b=z;default:qt(l,d,_,z,p,null)}d=N,p=O,l.multiple=!!b,d!=null?Ap(l,!!b,d,!1):p!=null&&Ap(l,!!b,p,!0);return;case"textarea":yt("invalid",l),N=_=b=null;for(O in p)if(p.hasOwnProperty(O)&&(z=p[O],z!=null))switch(O){case"value":b=z;break;case"defaultValue":_=z;break;case"children":N=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(91));break;default:qt(l,d,O,z,p,null)}TL(l,b,_,N);return;case"option":for(X in p)if(p.hasOwnProperty(X)&&(b=p[X],b!=null))switch(X){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:qt(l,d,X,b,p,null)}return;case"dialog":yt("beforetoggle",l),yt("toggle",l),yt("cancel",l),yt("close",l);break;case"iframe":case"object":yt("load",l);break;case"video":case"audio":for(b=0;b<Ey.length;b++)yt(Ey[b],l);break;case"image":yt("error",l),yt("load",l);break;case"details":yt("toggle",l);break;case"embed":case"source":case"link":yt("error",l),yt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(oe in p)if(p.hasOwnProperty(oe)&&(b=p[oe],b!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:qt(l,d,oe,b,p,null)}return;default:if(dC(d)){for(pe in p)p.hasOwnProperty(pe)&&(b=p[pe],b!==void 0&&JT(l,d,pe,b,p,void 0));return}}for(z in p)p.hasOwnProperty(z)&&(b=p[z],b!=null&&qt(l,d,z,b,p,null))}function bQ(l,d,p,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,N=null,O=null,z=null,X=null,oe=null,pe=null;for(de in p){var ve=p[de];if(p.hasOwnProperty(de)&&ve!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":X=ve;default:b.hasOwnProperty(de)||qt(l,d,de,null,b,ve)}}for(var le in b){var de=b[le];if(ve=p[le],b.hasOwnProperty(le)&&(de!=null||ve!=null))switch(le){case"type":N=de;break;case"name":_=de;break;case"checked":oe=de;break;case"defaultChecked":pe=de;break;case"value":O=de;break;case"defaultValue":z=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,d));break;default:de!==ve&&qt(l,d,le,de,b,ve)}}cC(l,O,z,X,oe,pe,N,_);return;case"select":de=O=z=le=null;for(N in p)if(X=p[N],p.hasOwnProperty(N)&&X!=null)switch(N){case"value":break;case"multiple":de=X;default:b.hasOwnProperty(N)||qt(l,d,N,null,b,X)}for(_ in b)if(N=b[_],X=p[_],b.hasOwnProperty(_)&&(N!=null||X!=null))switch(_){case"value":le=N;break;case"defaultValue":z=N;break;case"multiple":O=N;default:N!==X&&qt(l,d,_,N,b,X)}d=z,p=O,b=de,le!=null?Ap(l,!!p,le,!1):!!b!=!!p&&(d!=null?Ap(l,!!p,d,!0):Ap(l,!!p,p?[]:"",!1));return;case"textarea":de=le=null;for(z in p)if(_=p[z],p.hasOwnProperty(z)&&_!=null&&!b.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:qt(l,d,z,null,b,_)}for(O in b)if(_=b[O],N=p[O],b.hasOwnProperty(O)&&(_!=null||N!=null))switch(O){case"value":le=_;break;case"defaultValue":de=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:_!==N&&qt(l,d,O,_,b,N)}CL(l,le,de);return;case"option":for(var je in p)if(le=p[je],p.hasOwnProperty(je)&&le!=null&&!b.hasOwnProperty(je))switch(je){case"selected":l.selected=!1;break;default:qt(l,d,je,null,b,le)}for(X in b)if(le=b[X],de=p[X],b.hasOwnProperty(X)&&le!==de&&(le!=null||de!=null))switch(X){case"selected":l.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:qt(l,d,X,le,b,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in p)le=p[Qe],p.hasOwnProperty(Qe)&&le!=null&&!b.hasOwnProperty(Qe)&&qt(l,d,Qe,null,b,le);for(oe in b)if(le=b[oe],de=p[oe],b.hasOwnProperty(oe)&&le!==de&&(le!=null||de!=null))switch(oe){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,d));break;default:qt(l,d,oe,le,b,de)}return;default:if(dC(d)){for(var Vt in p)le=p[Vt],p.hasOwnProperty(Vt)&&le!==void 0&&!b.hasOwnProperty(Vt)&&JT(l,d,Vt,void 0,b,le);for(pe in b)le=b[pe],de=p[pe],!b.hasOwnProperty(pe)||le===de||le===void 0&&de===void 0||JT(l,d,pe,le,b,de);return}}for(var ie in p)le=p[ie],p.hasOwnProperty(ie)&&le!=null&&!b.hasOwnProperty(ie)&&qt(l,d,ie,null,b,le);for(ve in b)le=b[ve],de=p[ve],!b.hasOwnProperty(ve)||le===de||le==null&&de==null||qt(l,d,ve,le,b,de)}function M4(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function xQ(){if(typeof performance.getEntriesByType=="function"){for(var l=0,d=0,p=performance.getEntriesByType("resource"),b=0;b<p.length;b++){var _=p[b],N=_.transferSize,O=_.initiatorType,z=_.duration;if(N&&z&&M4(O)){for(O=0,z=_.responseEnd,b+=1;b<p.length;b++){var X=p[b],oe=X.startTime;if(oe>z)break;var pe=X.transferSize,ve=X.initiatorType;pe&&M4(ve)&&(X=X.responseEnd,O+=pe*(X<z?1:(z-oe)/(X-oe)))}if(--b,d+=8*(N+O)/(_.duration/1e3),l++,10<l)break}}if(0<l)return d/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var QT=null,ZT=null;function _S(l){return l.nodeType===9?l:l.ownerDocument}function P4(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function k4(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function eN(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var tN=null;function wQ(){var l=window.event;return l&&l.type==="popstate"?l===tN?!1:(tN=l,!0):(tN=null,!1)}var I4=typeof setTimeout=="function"?setTimeout:void 0,SQ=typeof clearTimeout=="function"?clearTimeout:void 0,D4=typeof Promise=="function"?Promise:void 0,EQ=typeof queueMicrotask=="function"?queueMicrotask:typeof D4<"u"?function(l){return D4.resolve(null).then(l).catch(AQ)}:I4;function AQ(l){setTimeout(function(){throw l})}function Nu(l){return l==="head"}function L4(l,d){var p=d,b=0;do{var _=p.nextSibling;if(l.removeChild(p),_&&_.nodeType===8)if(p=_.data,p==="/$"||p==="/&"){if(b===0){l.removeChild(_),nm(d);return}b--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")b++;else if(p==="html")_y(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,_y(p);for(var N=p.firstChild;N;){var O=N.nextSibling,z=N.nodeName;N[An]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&N.rel.toLowerCase()==="stylesheet"||p.removeChild(N),N=O}}else p==="body"&&_y(l.ownerDocument.body);p=_}while(p);nm(d)}function O4(l,d){var p=l;l=0;do{var b=p.nextSibling;if(p.nodeType===1?d?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(d?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),b&&b.nodeType===8)if(p=b.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=b}while(p)}function nN(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":nN(p),Pn(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function _Q(l,d,p,b){for(;l.nodeType===1;){var _=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[An])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(N=l.getAttribute("rel"),N==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(N!==_.rel||l.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||l.getAttribute("title")!==(_.title==null?null:_.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(N=l.getAttribute("src"),(N!==(_.src==null?null:_.src)||l.getAttribute("type")!==(_.type==null?null:_.type)||l.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&N&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var N=_.name==null?null:""+_.name;if(_.type==="hidden"&&l.getAttribute("name")===N)return l}else return l;if(l=ps(l.nextSibling),l===null)break}return null}function CQ(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=ps(l.nextSibling),l===null))return null;return l}function j4(l,d){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!d||(l=ps(l.nextSibling),l===null))return null;return l}function rN(l){return l.data==="$?"||l.data==="$~"}function iN(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function TQ(l,d){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=d;else if(l.data!=="$?"||p.readyState!=="loading")d();else{var b=function(){d(),p.removeEventListener("DOMContentLoaded",b)};p.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function ps(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return l}var aN=null;function F4(l){l=l.nextSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(d===0)return ps(l.nextSibling);d--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||d++}l=l.nextSibling}return null}function U4(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(d===0)return l;d--}else p!=="/$"&&p!=="/&"||d++}l=l.previousSibling}return null}function B4(l,d,p){switch(d=_S(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function _y(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Pn(l)}var ms=new Map,H4=new Set;function CS(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Fl=q.d;q.d={f:NQ,r:RQ,D:MQ,C:PQ,L:kQ,m:IQ,X:LQ,S:DQ,M:OQ};function NQ(){var l=Fl.f(),d=vS();return l||d}function RQ(l){var d=St(l);d!==null&&d.tag===5&&d.type==="form"?ij(d):Fl.r(l)}var Zp=typeof document>"u"?null:document;function z4(l,d,p){var b=Zp;if(b&&typeof d=="string"&&d){var _=os(d);_='link[rel="'+l+'"][href="'+_+'"]',typeof p=="string"&&(_+='[crossorigin="'+p+'"]'),H4.has(_)||(H4.add(_),l={rel:l,crossOrigin:p,href:d},b.querySelector(_)===null&&(d=b.createElement("link"),Vr(d,"link",l),pn(d),b.head.appendChild(d)))}}function MQ(l){Fl.D(l),z4("dns-prefetch",l,null)}function PQ(l,d){Fl.C(l,d),z4("preconnect",l,d)}function kQ(l,d,p){Fl.L(l,d,p);var b=Zp;if(b&&l&&d){var _='link[rel="preload"][as="'+os(d)+'"]';d==="image"&&p&&p.imageSrcSet?(_+='[imagesrcset="'+os(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(_+='[imagesizes="'+os(p.imageSizes)+'"]')):_+='[href="'+os(l)+'"]';var N=_;switch(d){case"style":N=em(l);break;case"script":N=tm(l)}ms.has(N)||(l=h({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),ms.set(N,l),b.querySelector(_)!==null||d==="style"&&b.querySelector(Cy(N))||d==="script"&&b.querySelector(Ty(N))||(d=b.createElement("link"),Vr(d,"link",l),pn(d),b.head.appendChild(d)))}}function IQ(l,d){Fl.m(l,d);var p=Zp;if(p&&l){var b=d&&typeof d.as=="string"?d.as:"script",_='link[rel="modulepreload"][as="'+os(b)+'"][href="'+os(l)+'"]',N=_;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":N=tm(l)}if(!ms.has(N)&&(l=h({rel:"modulepreload",href:l},d),ms.set(N,l),p.querySelector(_)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Ty(N)))return}b=p.createElement("link"),Vr(b,"link",l),pn(b),p.head.appendChild(b)}}}function DQ(l,d,p){Fl.S(l,d,p);var b=Zp;if(b&&l){var _=Yi(b).hoistableStyles,N=em(l);d=d||"default";var O=_.get(N);if(!O){var z={loading:0,preload:null};if(O=b.querySelector(Cy(N)))z.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":d},p),(p=ms.get(N))&&sN(l,p);var X=O=b.createElement("link");pn(X),Vr(X,"link",l),X._p=new Promise(function(oe,pe){X.onload=oe,X.onerror=pe}),X.addEventListener("load",function(){z.loading|=1}),X.addEventListener("error",function(){z.loading|=2}),z.loading|=4,TS(O,d,b)}O={type:"stylesheet",instance:O,count:1,state:z},_.set(N,O)}}}function LQ(l,d){Fl.X(l,d);var p=Zp;if(p&&l){var b=Yi(p).hoistableScripts,_=tm(l),N=b.get(_);N||(N=p.querySelector(Ty(_)),N||(l=h({src:l,async:!0},d),(d=ms.get(_))&&oN(l,d),N=p.createElement("script"),pn(N),Vr(N,"link",l),p.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},b.set(_,N))}}function OQ(l,d){Fl.M(l,d);var p=Zp;if(p&&l){var b=Yi(p).hoistableScripts,_=tm(l),N=b.get(_);N||(N=p.querySelector(Ty(_)),N||(l=h({src:l,async:!0,type:"module"},d),(d=ms.get(_))&&oN(l,d),N=p.createElement("script"),pn(N),Vr(N,"link",l),p.head.appendChild(N)),N={type:"script",instance:N,count:1,state:null},b.set(_,N))}}function $4(l,d,p,b){var _=(_=Me.current)?CS(_):null;if(!_)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=em(p.href),p=Yi(_).hoistableStyles,b=p.get(d),b||(b={type:"style",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=em(p.href);var N=Yi(_).hoistableStyles,O=N.get(l);if(O||(_=_.ownerDocument||_,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},N.set(l,O),(N=_.querySelector(Cy(l)))&&!N._p&&(O.instance=N,O.state.loading=5),ms.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ms.set(l,p),N||jQ(_,l,p,O.state))),d&&b===null)throw Error(r(528,""));return O}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=tm(p),p=Yi(_).hoistableScripts,b=p.get(d),b||(b={type:"script",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function em(l){return'href="'+os(l)+'"'}function Cy(l){return'link[rel="stylesheet"]['+l+"]"}function G4(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function jQ(l,d,p,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Vr(d,"link",p),pn(d),l.head.appendChild(d))}function tm(l){return'[src="'+os(l)+'"]'}function Ty(l){return"script[async]"+l}function q4(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+os(p.href)+'"]');if(b)return d.instance=b,pn(b),b;var _=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),pn(b),Vr(b,"style",_),TS(b,p.precedence,l),d.instance=b;case"stylesheet":_=em(p.href);var N=l.querySelector(Cy(_));if(N)return d.state.loading|=4,d.instance=N,pn(N),N;b=G4(p),(_=ms.get(_))&&sN(b,_),N=(l.ownerDocument||l).createElement("link"),pn(N);var O=N;return O._p=new Promise(function(z,X){O.onload=z,O.onerror=X}),Vr(N,"link",b),d.state.loading|=4,TS(N,p.precedence,l),d.instance=N;case"script":return N=tm(p.src),(_=l.querySelector(Ty(N)))?(d.instance=_,pn(_),_):(b=p,(_=ms.get(N))&&(b=h({},p),oN(b,_)),l=l.ownerDocument||l,_=l.createElement("script"),pn(_),Vr(_,"link",b),l.head.appendChild(_),d.instance=_);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,TS(b,p.precedence,l));return d.instance}function TS(l,d,p){for(var b=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=b.length?b[b.length-1]:null,N=_,O=0;O<b.length;O++){var z=b[O];if(z.dataset.precedence===d)N=z;else if(N!==_)break}N?N.parentNode.insertBefore(l,N.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function sN(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function oN(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var NS=null;function V4(l,d,p){if(NS===null){var b=new Map,_=NS=new Map;_.set(p,b)}else _=NS,b=_.get(p),b||(b=new Map,_.set(p,b));if(b.has(l))return b;for(b.set(l,null),p=p.getElementsByTagName(l),_=0;_<p.length;_++){var N=p[_];if(!(N[An]||N[_e]||l==="link"&&N.getAttribute("rel")==="stylesheet")&&N.namespaceURI!=="http://www.w3.org/2000/svg"){var O=N.getAttribute(d)||"";O=l+O;var z=b.get(O);z?z.push(N):b.set(O,[N])}}return b}function W4(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function FQ(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function Y4(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function UQ(l,d,p,b){if(p.type==="stylesheet"&&(typeof b.media!="string"||matchMedia(b.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var _=em(b.href),N=d.querySelector(Cy(_));if(N){d=N._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(l.count++,l=RS.bind(l),d.then(l,l)),p.state.loading|=4,p.instance=N,pn(N);return}N=d.ownerDocument||d,b=G4(b),(_=ms.get(_))&&sN(b,_),N=N.createElement("link"),pn(N);var O=N;O._p=new Promise(function(z,X){O.onload=z,O.onerror=X}),Vr(N,"link",b),p.instance=N}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,d),(d=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=RS.bind(l),d.addEventListener("load",p),d.addEventListener("error",p))}}var lN=0;function BQ(l,d){return l.stylesheets&&l.count===0&&PS(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var b=setTimeout(function(){if(l.stylesheets&&PS(l,l.stylesheets),l.unsuspend){var N=l.unsuspend;l.unsuspend=null,N()}},6e4+d);0<l.imgBytes&&lN===0&&(lN=62500*xQ());var _=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&PS(l,l.stylesheets),l.unsuspend)){var N=l.unsuspend;l.unsuspend=null,N()}},(l.imgBytes>lN?50:800)+d);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(b),clearTimeout(_)}}:null}function RS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)PS(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var MS=null;function PS(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,MS=new Map,d.forEach(HQ,l),MS=null,RS.call(l))}function HQ(l,d){if(!(d.state.loading&4)){var p=MS.get(l);if(p)var b=p.get(null);else{p=new Map,MS.set(l,p);for(var _=l.querySelectorAll("link[data-precedence],style[data-precedence]"),N=0;N<_.length;N++){var O=_[N];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(p.set(O.dataset.precedence,O),b=O)}b&&p.set(null,b)}_=d.instance,O=_.getAttribute("data-precedence"),N=p.get(O)||b,N===b&&p.set(null,_),p.set(O,_),this.count++,b=RS.bind(this),_.addEventListener("load",b),_.addEventListener("error",b),N?N.parentNode.insertBefore(_,N.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(_,l.firstChild)),d.state.loading|=4}}var Ny={$$typeof:R,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function zQ(l,d,p,b,_,N,O,z,X){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cu(0),this.hiddenUpdates=cu(null),this.identifierPrefix=b,this.onUncaughtError=_,this.onCaughtError=N,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function K4(l,d,p,b,_,N,O,z,X,oe,pe,ve){return l=new zQ(l,d,p,O,X,oe,pe,ve,z),d=1,N===!0&&(d|=24),N=wa(3,null,null,d),l.current=N,N.stateNode=l,d=HC(),d.refCount++,l.pooledCache=d,d.refCount++,N.memoizedState={element:b,isDehydrated:p,cache:d},qC(N),l}function X4(l){return l?(l=kp,l):kp}function J4(l,d,p,b,_,N){_=X4(_),b.context===null?b.context=_:b.pendingContext=_,b=vu(d),b.payload={element:p},N=N===void 0?null:N,N!==null&&(b.callback=N),p=yu(l,b,d),p!==null&&(ea(p,l,d),sy(p,l,d))}function Q4(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function cN(l,d){Q4(l,d),(l=l.alternate)&&Q4(l,d)}function Z4(l){if(l.tag===13||l.tag===31){var d=hf(l,67108864);d!==null&&ea(d,l,67108864),cN(l,67108864)}}function e3(l){if(l.tag===13||l.tag===31){var d=Ca();d=ce(d);var p=hf(l,d);p!==null&&ea(p,l,d),cN(l,d)}}var kS=!0;function $Q(l,d,p,b){var _=$.T;$.T=null;var N=q.p;try{q.p=2,uN(l,d,p,b)}finally{q.p=N,$.T=_}}function GQ(l,d,p,b){var _=$.T;$.T=null;var N=q.p;try{q.p=8,uN(l,d,p,b)}finally{q.p=N,$.T=_}}function uN(l,d,p,b){if(kS){var _=dN(b);if(_===null)XT(l,d,b,IS,p),n3(l,b);else if(VQ(_,l,d,p,b))b.stopPropagation();else if(n3(l,b),d&4&&-1<qQ.indexOf(l)){for(;_!==null;){var N=St(_);if(N!==null)switch(N.tag){case 3:if(N=N.stateNode,N.current.memoizedState.isDehydrated){var O=xl(N.pendingLanes);if(O!==0){var z=N;for(z.pendingLanes|=2,z.entangledLanes|=2;O;){var X=1<<31-di(O);z.entanglements[1]|=X,O&=~X}Po(N),(It&6)===0&&(mS=Lt()+500,Sy(0))}}break;case 31:case 13:z=hf(N,2),z!==null&&ea(z,N,2),vS(),cN(N,2)}if(N=dN(b),N===null&&XT(l,d,b,IS,p),N===_)break;_=N}_!==null&&b.stopPropagation()}else XT(l,d,b,null,p)}}function dN(l){return l=hC(l),fN(l)}var IS=null;function fN(l){if(IS=null,l=kn(l),l!==null){var d=a(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=s(d),l!==null)return l;l=null}else if(p===31){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return IS=l,null}function t3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wr()){case Vi:return 2;case as:return 8;case Sn:case Sr:return 32;case Wi:return 268435456;default:return 32}default:return 32}}var hN=!1,Ru=null,Mu=null,Pu=null,Ry=new Map,My=new Map,ku=[],qQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n3(l,d){switch(l){case"focusin":case"focusout":Ru=null;break;case"dragenter":case"dragleave":Mu=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":Ry.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":My.delete(d.pointerId)}}function Py(l,d,p,b,_,N){return l===null||l.nativeEvent!==N?(l={blockedOn:d,domEventName:p,eventSystemFlags:b,nativeEvent:N,targetContainers:[_]},d!==null&&(d=St(d),d!==null&&Z4(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,_!==null&&d.indexOf(_)===-1&&d.push(_),l)}function VQ(l,d,p,b,_){switch(d){case"focusin":return Ru=Py(Ru,l,d,p,b,_),!0;case"dragenter":return Mu=Py(Mu,l,d,p,b,_),!0;case"mouseover":return Pu=Py(Pu,l,d,p,b,_),!0;case"pointerover":var N=_.pointerId;return Ry.set(N,Py(Ry.get(N)||null,l,d,p,b,_)),!0;case"gotpointercapture":return N=_.pointerId,My.set(N,Py(My.get(N)||null,l,d,p,b,_)),!0}return!1}function r3(l){var d=kn(l.target);if(d!==null){var p=a(d);if(p!==null){if(d=p.tag,d===13){if(d=s(p),d!==null){l.blockedOn=d,Ve(l.priority,function(){e3(p)});return}}else if(d===31){if(d=o(p),d!==null){l.blockedOn=d,Ve(l.priority,function(){e3(p)});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function DS(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=dN(l.nativeEvent);if(p===null){p=l.nativeEvent;var b=new p.constructor(p.type,p);fC=b,p.target.dispatchEvent(b),fC=null}else return d=St(p),d!==null&&Z4(d),l.blockedOn=p,!1;d.shift()}return!0}function i3(l,d,p){DS(l)&&p.delete(d)}function WQ(){hN=!1,Ru!==null&&DS(Ru)&&(Ru=null),Mu!==null&&DS(Mu)&&(Mu=null),Pu!==null&&DS(Pu)&&(Pu=null),Ry.forEach(i3),My.forEach(i3)}function LS(l,d){l.blockedOn===d&&(l.blockedOn=null,hN||(hN=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,WQ)))}var OS=null;function a3(l){OS!==l&&(OS=l,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){OS===l&&(OS=null);for(var d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],_=l[d+2];if(typeof b!="function"){if(fN(b||p)===null)continue;break}var N=St(p);N!==null&&(l.splice(d,3),d-=3,dT(N,{pending:!0,data:_,method:p.method,action:b},b,_))}}))}function nm(l){function d(X){return LS(X,l)}Ru!==null&&LS(Ru,l),Mu!==null&&LS(Mu,l),Pu!==null&&LS(Pu,l),Ry.forEach(d),My.forEach(d);for(var p=0;p<ku.length;p++){var b=ku[p];b.blockedOn===l&&(b.blockedOn=null)}for(;0<ku.length&&(p=ku[0],p.blockedOn===null);)r3(p),p.blockedOn===null&&ku.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(b=0;b<p.length;b+=3){var _=p[b],N=p[b+1],O=_[Re]||null;if(typeof N=="function")O||a3(p);else if(O){var z=null;if(N&&N.hasAttribute("formAction")){if(_=N,O=N[Re]||null)z=O.formAction;else if(fN(_)!==null)continue}else z=O.action;typeof z=="function"?p[b+1]=z:(p.splice(b,3),b-=3),a3(p)}}}function s3(){function l(N){N.canIntercept&&N.info==="react-transition"&&N.intercept({handler:function(){return new Promise(function(O){return _=O})},focusReset:"manual",scroll:"manual"})}function d(){_!==null&&(_(),_=null),b||setTimeout(p,20)}function p(){if(!b&&!navigation.transition){var N=navigation.currentEntry;N&&N.url!=null&&navigation.navigate(N.url,{state:N.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var b=!1,_=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(p,100),function(){b=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),_!==null&&(_(),_=null)}}}function pN(l){this._internalRoot=l}jS.prototype.render=pN.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,b=Ca();J4(p,b,l,d,null,null)},jS.prototype.unmount=pN.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;J4(l.current,2,null,l,null,null),vS(),d[Be]=null}};function jS(l){this._internalRoot=l}jS.prototype.unstable_scheduleHydration=function(l){if(l){var d=Ae();l={blockedOn:null,target:l,priority:d};for(var p=0;p<ku.length&&d!==0&&d<ku[p].priority;p++);ku.splice(p,0,l),p===0&&r3(l)}};var o3=e.version;if(o3!=="19.2.3")throw Error(r(527,o3,"19.2.3"));q.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var YQ={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var FS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!FS.isDisabled&&FS.supportsFiber)try{tf=FS.inject(YQ),En=FS}catch{}}return Iy.createRoot=function(l,d){if(!i(l))throw Error(r(299));var p=!1,b="",_=pj,N=mj,O=gj;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(_=d.onUncaughtError),d.onCaughtError!==void 0&&(N=d.onCaughtError),d.onRecoverableError!==void 0&&(O=d.onRecoverableError)),d=K4(l,1,!1,null,null,p,b,null,_,N,O,s3),l[Be]=d.current,KT(l),new pN(d)},Iy.hydrateRoot=function(l,d,p){if(!i(l))throw Error(r(299));var b=!1,_="",N=pj,O=mj,z=gj,X=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(_=p.identifierPrefix),p.onUncaughtError!==void 0&&(N=p.onUncaughtError),p.onCaughtError!==void 0&&(O=p.onCaughtError),p.onRecoverableError!==void 0&&(z=p.onRecoverableError),p.formState!==void 0&&(X=p.formState)),d=K4(l,1,!0,d,p??null,b,_,X,N,O,z,s3),d.context=X4(null),p=d.current,b=Ca(),b=ce(b),_=vu(b),_.callback=null,yu(p,_,b),p=b,d.current.lanes=p,uu(d,p),Po(d),l[Be]=d.current,KT(l),new jS(d)},Iy.version="19.2.3",Iy}var y3;function sZ(){if(y3)return yN.exports;y3=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),yN.exports=aZ(),yN.exports}var oZ=sZ();const lZ=Co(oZ);/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Z6=t=>{throw TypeError(t)},cZ=(t,e,n)=>e.has(t)||Z6("Cannot "+n),SN=(t,e,n)=>(cZ(t,e,"read from private field"),n?n.call(t):e.get(t)),uZ=(t,e,n)=>e.has(t)?Z6("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),e$=(t=>(t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE",t))(e$||{}),b3="popstate";function Lk(t={}){let{initialEntries:e=["/"],initialIndex:n,v5Compat:r=!1}=t,i;i=e.map((y,w)=>f(y,typeof y=="string"?null:y.state,w===0?"default":void 0));let a=c(n??i.length-1),s="POP",o=null;function c(y){return Math.min(Math.max(y,0),i.length-1)}function u(){return i[a]}function f(y,w=null,S){let E=Lc(i?u().pathname:"/",y,w,S);return Qt(E.pathname.charAt(0)==="/",`relative pathnames are not supported in memory history: ${JSON.stringify(y)}`),E}function h(y){return typeof y=="string"?y:ci(y)}return{get index(){return a},get action(){return s},get location(){return u()},createHref:h,createURL(y){return new URL(h(y),"http://localhost")},encodeLocation(y){let w=typeof y=="string"?ts(y):y;return{pathname:w.pathname||"",search:w.search||"",hash:w.hash||""}},push(y,w){s="PUSH";let S=f(y,w);a+=1,i.splice(a,i.length,S),r&&o&&o({action:s,location:S,delta:1})},replace(y,w){s="REPLACE";let S=f(y,w);i[a]=S,r&&o&&o({action:s,location:S,delta:0})},go(y){s="POP";let w=c(a+y),S=i[w];a=w,o&&o({action:s,location:S,delta:y})},listen(y){return o=y,()=>{o=null}}}}function zA(t={}){function e(r,i){let{pathname:a,search:s,hash:o}=r.location;return Lc("",{pathname:a,search:s,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ci(i)}return t$(e,n,null,t)}function Ok(t={}){function e(i,a){let{pathname:s="/",search:o="",hash:c=""}=ts(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),Lc("",{pathname:s,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let s=i.document.querySelector("base"),o="";if(s&&s.getAttribute("href")){let c=i.location.href,u=c.indexOf("#");o=u===-1?c:c.slice(0,u)}return o+"#"+(typeof a=="string"?a:ci(a))}function r(i,a){Qt(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return t$(e,n,r,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Qt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dZ(){return Math.random().toString(36).substring(2,10)}function x3(t,e){return{usr:t.state,key:t.key,idx:e}}function Lc(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ts(e):e,state:n,key:e&&e.key||r||dZ()}}function ci({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ts(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function t$(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,o="POP",c=null,u=f();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function f(){return(s.state||{idx:null}).idx}function h(){o="POP";let E=f(),C=E==null?null:E-u;u=E,c&&c({action:o,location:S.location,delta:C})}function g(E,C){o="PUSH";let M=Lc(S.location,E,C);n&&n(M,E),u=f()+1;let R=x3(M,u),D=S.createHref(M);try{s.pushState(R,"",D)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(D)}a&&c&&c({action:o,location:S.location,delta:1})}function y(E,C){o="REPLACE";let M=Lc(S.location,E,C);n&&n(M,E),u=f();let R=x3(M,u),D=S.createHref(M);s.replaceState(R,"",D),a&&c&&c({action:o,location:S.location,delta:0})}function w(E){return n$(E)}let S={get action(){return o},get location(){return t(i,s)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(b3,h),c=E,()=>{i.removeEventListener(b3,h),c=null}},createHref(E){return e(i,E)},createURL:w,encodeLocation(E){let C=w(E);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:y,go(E){return s.go(E)}};return S}function n$(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ye(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ci(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function fZ(t){return{defaultValue:t}}var Zy,cl=class{constructor(t){if(uZ(this,Zy,new Map),t)for(let[e,n]of t)this.set(e,n)}get(t){if(SN(this,Zy).has(t))return SN(this,Zy).get(t);if(t.defaultValue!==void 0)return t.defaultValue;throw new Error("No value found for context")}set(t,e){SN(this,Zy).set(t,e)}};Zy=new WeakMap;var hZ=new Set(["lazy","caseSensitive","path","id","index","children"]);function pZ(t){return hZ.has(t)}var mZ=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function gZ(t){return mZ.has(t)}function vZ(t){return t.index===!0}function Ud(t,e,n=[],r={},i=!1){return t.map((a,s)=>{let o=[...n,String(s)],c=typeof a.id=="string"?a.id:o.join("-");if(Ye(a.index!==!0||!a.children,"Cannot specify children on an index route"),Ye(i||!r[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),vZ(a)){let u={...a,id:c};return r[c]=w3(u,e(u)),u}else{let u={...a,id:c,children:void 0};return r[c]=w3(u,e(u)),a.children&&(u.children=Ud(a.children,e,o,r,i)),u}})}function w3(t,e){return Object.assign(t,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...t.lazy,...e.lazy}}:{}})}function fa(t,e,n="/"){return e0(t,e,n,!1)}function e0(t,e,n,r){let i=typeof e=="string"?ts(e):e,a=mr(i.pathname||"/",n);if(a==null)return null;let s=i$(t);yZ(s);let o=null;for(let c=0;o==null&&c<s.length;++c){let u=o$(a);o=TZ(s[c],u,r)}return o}function r$(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function i$(t,e=[],n=[],r="",i=!1){let a=(s,o,c=i,u)=>{let f={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(r)&&c)return;Ye(f.relativePath.startsWith(r),`Absolute route path "${f.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(r.length)}let h=dl([r,f.relativePath]),g=n.concat(f);s.children&&s.children.length>0&&(Ye(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),i$(s.children,e,g,h,c)),!(s.path==null&&!s.index)&&e.push({path:h,score:_Z(h,s.index),routesMeta:g})};return t.forEach((s,o)=>{var c;if(s.path===""||!((c=s.path)!=null&&c.includes("?")))a(s,o);else for(let u of a$(s.path))a(s,o,!0,u)}),e}function a$(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=a$(r.join("/")),o=[];return o.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&o.push(...s),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function yZ(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:CZ(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var bZ=/^:[\w-]+$/,xZ=3,wZ=2,SZ=1,EZ=10,AZ=-2,S3=t=>t==="*";function _Z(t,e){let n=t.split("/"),r=n.length;return n.some(S3)&&(r+=AZ),e&&(r+=wZ),n.filter(i=>!S3(i)).reduce((i,a)=>i+(bZ.test(a)?xZ:a===""?SZ:EZ),r)}function CZ(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function TZ(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let o=0;o<r.length;++o){let c=r[o],u=o===r.length-1,f=a==="/"?e:e.slice(a.length)||"/",h=mv({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),g=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=mv({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:dl([a,h.pathname]),pathnameBase:MZ(dl([a,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(a=dl([a,h.pathnameBase]))}return s}function NZ(t,e={}){let n=t;n.endsWith("*")&&n!=="*"&&!n.endsWith("/*")&&(Qt(!1,`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`),n=n.replace(/\*$/,"/*"));const r=n.startsWith("/")?"/":"",i=s=>s==null?"":typeof s=="string"?s:String(s),a=n.split(/\/+/).map((s,o,c)=>{if(o===c.length-1&&s==="*")return i(e["*"]);const f=s.match(/^:([\w-]+)(\??)(.*)/);if(f){const[,h,g,y]=f;let w=e[h];return Ye(g==="?"||w!=null,`Missing ":${h}" param`),encodeURIComponent(i(w))+y}return s.replace(/\?$/g,"")}).filter(s=>!!s);return r+a.join("/")}function mv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=s$(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((u,{paramName:f,isOptional:h},g)=>{if(f==="*"){let w=o[g]||"";s=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const y=o[g];return h&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:t}}function s$(t,e=!1,n=!0){Qt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function o$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function mr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RZ({basename:t,pathname:e}){return e==="/"?t:dl([t,e])}var l$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$A=t=>l$.test(t);function c$(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ts(t):t,a;if(n)if($A(n))a=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Qt(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${n}`)}n.startsWith("/")?a=E3(n.substring(1),"/"):a=E3(n,e)}else a=e;return{pathname:a,search:PZ(r),hash:kZ(i)}}function E3(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function EN(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function GA(t){let e=u$(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function qA(t,e,n,r=!1){let i;typeof t=="string"?i=ts(t):(i={...t},Ye(!i.pathname||!i.pathname.includes("?"),EN("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),EN("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),EN("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,o;if(s==null)o=n;else{let h=e.length-1;if(!r&&s.startsWith("..")){let g=s.split("/");for(;g[0]==="..";)g.shift(),h-=1;i.pathname=g.join("/")}o=h>=0?e[h]:"/"}let c=c$(i,o),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}var dl=t=>t.join("/").replace(/\/\/+/g,"/"),MZ=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PZ=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kZ=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,IZ=class{constructor(t,e){this.type="DataWithResponseInit",this.data=t,this.init=e||null}};function d$(t,e){return new IZ(t,typeof e=="number"?{status:e}:e)}var $x=(t,e=302)=>{let n=e;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let r=new Headers(n.headers);return r.set("Location",t),new Response(null,{...n,headers:r})},f$=(t,e)=>{let n=$x(t,e);return n.headers.set("X-Remix-Reload-Document","true"),n},h$=(t,e)=>{let n=$x(t,e);return n.headers.set("X-Remix-Replace","true"),n},Ni=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Kn(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Mc(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var p$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function m$(t,e){let n=t;if(typeof n!="string"||!l$.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(p$)try{let a=new URL(window.location.href),s=n.startsWith("//")?new URL(a.protocol+n):new URL(n),o=mr(s.pathname,e);s.origin===a.origin&&o!=null?n=o+s.search+s.hash:i=!0}catch{Qt(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}var Id=Symbol("Uninstrumented");function g$(t,e){let n={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};t.forEach(i=>i({id:e.id,index:e.index,path:e.path,instrument(a){let s=Object.keys(n);for(let o of s)a[o]&&n[o].push(a[o])}}));let r={};if(typeof e.lazy=="function"&&n.lazy.length>0){let i=Uf(n.lazy,e.lazy,()=>{});i&&(r.lazy=i)}if(typeof e.lazy=="object"){let i=e.lazy;["middleware","loader","action"].forEach(a=>{let s=i[a],o=n[`lazy.${a}`];if(typeof s=="function"&&o.length>0){let c=Uf(o,s,()=>{});c&&(r.lazy=Object.assign(r.lazy||{},{[a]:c}))}})}return["loader","action"].forEach(i=>{let a=e[i];if(typeof a=="function"&&n[i].length>0){let s=a[Id]??a,o=Uf(n[i],s,(...c)=>A3(c[0]));o&&(i==="loader"&&s.hydrate===!0&&(o.hydrate=!0),o[Id]=s,r[i]=o)}}),e.middleware&&e.middleware.length>0&&n.middleware.length>0&&(r.middleware=e.middleware.map(i=>{let a=i[Id]??i,s=Uf(n.middleware,a,(...o)=>A3(o[0]));return s?(s[Id]=a,s):i})),r}function DZ(t,e){let n={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(i){let a=Object.keys(i);for(let s of a)i[s]&&n[s].push(i[s])}})),n.navigate.length>0){let r=t.navigate[Id]??t.navigate,i=Uf(n.navigate,r,(...a)=>{let[s,o]=a;return{to:typeof s=="number"||typeof s=="string"?s:s?ci(s):".",..._3(t,o??{})}});i&&(i[Id]=r,t.navigate=i)}if(n.fetch.length>0){let r=t.fetch[Id]??t.fetch,i=Uf(n.fetch,r,(...a)=>{let[s,,o,c]=a;return{href:o??".",fetcherKey:s,..._3(t,c??{})}});i&&(i[Id]=r,t.fetch=i)}return t}function LZ(t,e){let n={request:[]};e.forEach(i=>i({instrument(a){let s=Object.keys(a);for(let o of s)a[o]&&n[o].push(a[o])}}));let r=t;return n.request.length>0&&(r=Uf(n.request,t,(...i)=>{let[a,s]=i;return{request:y$(a),context:s!=null?b$(s):s}})),r}function Uf(t,e,n){return t.length===0?null:async(...r)=>{let i=await v$(t,n(...r),()=>e(...r),t.length-1);if(i.type==="error")throw i.value;return i.value}}async function v$(t,e,n,r){let i=t[r],a;if(i){let s,o=async()=>(s?console.error("You cannot call instrumented handlers more than once"):s=v$(t,e,n,r-1),a=await s,Ye(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await i(o,e)}catch(c){console.error("An instrumentation function threw an error:",c)}s||await o(),await s}else try{a={type:"success",value:await n()}}catch(s){a={type:"error",value:s}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function A3(t){let{request:e,context:n,params:r,unstable_pattern:i}=t;return{request:y$(e),params:{...r},unstable_pattern:i,context:b$(n)}}function _3(t,e){return{currentUrl:ci(t.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function y$(t){return{method:t.method,url:t.url,headers:{get:(...e)=>t.headers.get(...e)}}}function b$(t){if(jZ(t)){let e={...t};return Object.freeze(e),e}else return{get:e=>t.get(e)}}var OZ=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jZ(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===OZ}var x$=["POST","PUT","PATCH","DELETE"],FZ=new Set(x$),UZ=["GET",...x$],BZ=new Set(UZ),w$=new Set([301,302,303,307,308]),HZ=new Set([307,308]),C0={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},VA={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ju={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},S$=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),E$="remix-router-transitions",A$=Symbol("ResetLoaderData");function Gx(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Ye(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=t.hydrationRouteProperties||[],i=t.mapRouteProperties||S$,a=i;if(t.unstable_instrumentations){let K=t.unstable_instrumentations;a=re=>({...i(re),...g$(K.map(ce=>ce.route).filter(Boolean),re)})}let s={},o=Ud(t.routes,a,void 0,s),c,u=t.basename||"/";u.startsWith("/")||(u=`/${u}`);let f=t.dataStrategy||WZ,h={...t.future},g=null,y=new Set,w=null,S=null,E=null,C=t.hydrationData!=null,M=fa(o,t.history.location,u),R=!1,D=null,I;if(M==null&&!t.patchRoutesOnNavigation){let K=rr(404,{pathname:t.history.location.pathname}),{matches:re,route:ce}=Sm(o);I=!0,M=re,D={[ce.id]:K}}else if(M&&!t.hydrationData&&sf(M,o,t.history.location.pathname).active&&(M=null),M)if(M.some(K=>K.route.lazy))I=!1;else if(!M.some(K=>jk(K.route)))I=!0;else{let K=t.hydrationData?t.hydrationData.loaderData:null,re=t.hydrationData?t.hydrationData.errors:null;if(re){let ce=M.findIndex(we=>re[we.route.id]!==void 0);I=M.slice(0,ce+1).every(we=>!MR(we.route,K,re))}else I=M.every(ce=>!MR(ce.route,K,re))}else{I=!1,M=[];let K=sf(null,o,t.history.location.pathname);K.active&&K.matches&&(R=!0,M=K.matches)}let P,k={historyAction:t.history.action,location:t.history.location,matches:M,initialized:I,navigation:C0,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||D,fetchers:new Map,blockers:new Map},U="POP",B=null,V=!1,H,G=!1,Q=new Map,W=null,ee=!1,$=!1,q=new Set,J=new Map,ae=0,ye=-1,Y=new Map,ne=new Set,ue=new Map,me=new Map,xe=new Set,Me=new Map,Ce,pt=null;function he(){if(g=t.history.listen(({action:K,location:re,delta:ce})=>{if(Ce){Ce(),Ce=void 0;return}Qt(Me.size===0||ce!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let we=nf({currentLocation:k.location,nextLocation:re,historyAction:K});if(we&&ce!=null){let Ae=new Promise(Ve=>{Ce=Ve});t.history.go(ce*-1),bl(we,{state:"blocked",location:re,proceed(){bl(we,{state:"proceeding",proceed:void 0,reset:void 0,location:re}),Ae.then(()=>t.history.go(ce))},reset(){let Ve=new Map(k.blockers);Ve.set(we,ju),te({blockers:Ve})}}),B==null||B.resolve(),B=null;return}return qe(K,re)}),n){ZZ(e,Q);let K=()=>eee(e,Q);e.addEventListener("pagehide",K),W=()=>e.removeEventListener("pagehide",K)}return k.initialized||qe("POP",k.location,{initialHydration:!0}),P}function He(){g&&g(),W&&W(),y.clear(),H&&H.abort(),k.fetchers.forEach((K,re)=>$v(re)),k.blockers.forEach((K,re)=>_w(re))}function ke(K){return y.add(K),()=>y.delete(K)}function te(K,re={}){K.matches&&(K.matches=K.matches.map(Ae=>{let Ve=s[Ae.route.id],Ue=Ae.route;return Ue.element!==Ve.element||Ue.errorElement!==Ve.errorElement||Ue.hydrateFallbackElement!==Ve.hydrateFallbackElement?{...Ae,route:Ve}:Ae})),k={...k,...K};let ce=[],we=[];k.fetchers.forEach((Ae,Ve)=>{Ae.state==="idle"&&(xe.has(Ve)?ce.push(Ve):we.push(Ve))}),xe.forEach(Ae=>{!k.fetchers.has(Ae)&&!J.has(Ae)&&ce.push(Ae)}),[...y].forEach(Ae=>Ae(k,{deletedFetchers:ce,newErrors:K.errors??null,viewTransitionOpts:re.viewTransitionOpts,flushSync:re.flushSync===!0})),ce.forEach(Ae=>$v(Ae)),we.forEach(Ae=>k.fetchers.delete(Ae))}function Ee(K,re,{flushSync:ce}={}){var tt,Ke;let we=k.actionData!=null&&k.navigation.formMethod!=null&&ni(k.navigation.formMethod)&&k.navigation.state==="loading"&&((tt=K.state)==null?void 0:tt._isRedirect)!==!0,Ae;re.actionData?Object.keys(re.actionData).length>0?Ae=re.actionData:Ae=null:we?Ae=k.actionData:Ae=null;let Ve=re.loaderData?j3(k.loaderData,re.loaderData,re.matches||[],re.errors):k.loaderData,Ue=k.blockers;Ue.size>0&&(Ue=new Map(Ue),Ue.forEach((st,gt)=>Ue.set(gt,ju)));let _e=ee?!1:Cw(K,re.matches||k.matches),Re=V===!0||k.navigation.formMethod!=null&&ni(k.navigation.formMethod)&&((Ke=K.state)==null?void 0:Ke._isRedirect)!==!0;c&&(o=c,c=void 0),ee||U==="POP"||(U==="PUSH"?t.history.push(K,K.state):U==="REPLACE"&&t.history.replace(K,K.state));let Be;if(U==="POP"){let st=Q.get(k.location.pathname);st&&st.has(K.pathname)?Be={currentLocation:k.location,nextLocation:K}:Q.has(K.pathname)&&(Be={currentLocation:K,nextLocation:k.location})}else if(G){let st=Q.get(k.location.pathname);st?st.add(K.pathname):(st=new Set([K.pathname]),Q.set(k.location.pathname,st)),Be={currentLocation:k.location,nextLocation:K}}te({...re,actionData:Ae,loaderData:Ve,historyAction:U,location:K,initialized:!0,navigation:C0,revalidation:"idle",restoreScrollPosition:_e,preventScrollReset:Re,blockers:Ue},{viewTransitionOpts:Be,flushSync:ce===!0}),U="POP",V=!1,G=!1,ee=!1,$=!1,B==null||B.resolve(),B=null,pt==null||pt.resolve(),pt=null}async function be(K,re){if(B==null||B.resolve(),B=null,typeof K=="number"){B||(B=B3());let gt=B.promise;return t.history.go(K),gt}let ce=RR(k.location,k.matches,u,K,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:we,submission:Ae,error:Ve}=T3(!1,ce,re),Ue=k.location,_e=Lc(k.location,we,re&&re.state);_e={..._e,...t.history.encodeLocation(_e)};let Re=re&&re.replace!=null?re.replace:void 0,Be="PUSH";Re===!0?Be="REPLACE":Re===!1||Ae!=null&&ni(Ae.formMethod)&&Ae.formAction===k.location.pathname+k.location.search&&(Be="REPLACE");let tt=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,Ke=(re&&re.flushSync)===!0,st=nf({currentLocation:Ue,nextLocation:_e,historyAction:Be});if(st){bl(st,{state:"blocked",location:_e,proceed(){bl(st,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),be(K,re)},reset(){let gt=new Map(k.blockers);gt.set(st,ju),te({blockers:gt})}});return}await qe(Be,_e,{submission:Ae,pendingError:Ve,preventScrollReset:tt,replace:re&&re.replace,enableViewTransition:re&&re.viewTransition,flushSync:Ke,callSiteDefaultShouldRevalidate:re&&re.unstable_defaultShouldRevalidate})}function Te(){pt||(pt=B3()),as(),te({revalidation:"loading"});let K=pt.promise;return k.navigation.state==="submitting"?K:k.navigation.state==="idle"?(qe(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),K):(qe(U||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:G===!0}),K)}async function qe(K,re,ce){H&&H.abort(),H=null,U=K,ee=(ce&&ce.startUninterruptedRevalidation)===!0,af(k.location,k.matches),V=(ce&&ce.preventScrollReset)===!0,G=(ce&&ce.enableViewTransition)===!0;let we=c||o,Ae=ce&&ce.overrideNavigation,Ve=ce!=null&&ce.initialHydration&&k.matches&&k.matches.length>0&&!R?k.matches:fa(we,re,u),Ue=(ce&&ce.flushSync)===!0;if(Ve&&k.initialized&&!$&&KZ(k.location,re)&&!(ce&&ce.submission&&ni(ce.submission.formMethod))){Ee(re,{matches:Ve},{flushSync:Ue});return}let _e=sf(Ve,we,re.pathname);if(_e.active&&_e.matches&&(Ve=_e.matches),!Ve){let{error:Pn,notFoundMatches:kn,route:St}=lu(re.pathname);Ee(re,{matches:kn,loaderData:{},errors:{[St.id]:Pn}},{flushSync:Ue});return}H=new AbortController;let Re=dm(t.history,re,H.signal,ce&&ce.submission),Be=t.getContext?await t.getContext():new cl,tt;if(ce&&ce.pendingError)tt=[Ps(Ve).route.id,{type:"error",error:ce.pendingError}];else if(ce&&ce.submission&&ni(ce.submission.formMethod)){let Pn=await et(Re,re,ce.submission,Ve,Be,_e.active,ce&&ce.initialHydration===!0,{replace:ce.replace,flushSync:Ue});if(Pn.shortCircuited)return;if(Pn.pendingActionResult){let[kn,St]=Pn.pendingActionResult;if(Lr(St)&&Kn(St.error)&&St.error.status===404){H=null,Ee(re,{matches:Pn.matches,loaderData:{},errors:{[kn]:St.error}});return}}Ve=Pn.matches||Ve,tt=Pn.pendingActionResult,Ae=AN(re,ce.submission),Ue=!1,_e.active=!1,Re=dm(t.history,Re.url,Re.signal)}let{shortCircuited:Ke,matches:st,loaderData:gt,errors:An}=await Hn(Re,re,Ve,Be,_e.active,Ae,ce&&ce.submission,ce&&ce.fetcherSubmission,ce&&ce.replace,ce&&ce.initialHydration===!0,Ue,tt,ce&&ce.callSiteDefaultShouldRevalidate);Ke||(H=null,Ee(re,{matches:st||Ve,...F3(tt),loaderData:gt,errors:An}))}async function et(K,re,ce,we,Ae,Ve,Ue,_e={}){as();let Re=JZ(re,ce);if(te({navigation:Re},{flushSync:_e.flushSync===!0}),Ve){let Ke=await cu(we,re.pathname,K.signal);if(Ke.type==="aborted")return{shortCircuited:!0};if(Ke.type==="error"){if(Ke.partialMatches.length===0){let{matches:gt,route:An}=Sm(o);return{matches:gt,pendingActionResult:[An.id,{type:"error",error:Ke.error}]}}let st=Ps(Ke.partialMatches).route.id;return{matches:Ke.partialMatches,pendingActionResult:[st,{type:"error",error:Ke.error}]}}else if(Ke.matches)we=Ke.matches;else{let{notFoundMatches:st,error:gt,route:An}=lu(re.pathname);return{matches:st,pendingActionResult:[An.id,{type:"error",error:gt}]}}}let Be,tt=Im(we,re);if(!tt.route.action&&!tt.route.lazy)Be={type:"error",error:rr(405,{method:K.method,pathname:re.pathname,routeId:tt.route.id})};else{let Ke=Od(a,s,K,we,tt,Ue?[]:r,Ae),st=await wr(K,Ke,Ae,null);if(Be=st[tt.route.id],!Be){for(let gt of we)if(st[gt.route.id]){Be=st[gt.route.id];break}}if(K.signal.aborted)return{shortCircuited:!0}}if(Dd(Be)){let Ke;return _e&&_e.replace!=null?Ke=_e.replace:Ke=D3(Be.response.headers.get("Location"),new URL(K.url),u,t.history)===k.location.pathname+k.location.search,await Lt(K,Be,!0,{submission:ce,replace:Ke}),{shortCircuited:!0}}if(Lr(Be)){let Ke=Ps(we,tt.route.id);return(_e&&_e.replace)!==!0&&(U="PUSH"),{matches:we,pendingActionResult:[Ke.route.id,Be,tt.route.id]}}return{matches:we,pendingActionResult:[tt.route.id,Be]}}async function Hn(K,re,ce,we,Ae,Ve,Ue,_e,Re,Be,tt,Ke,st){let gt=Ve||AN(re,Ue),An=Ue||_e||U3(gt),Pn=!ee&&!Be;if(Ae){if(Pn){let zn=rs(Ke);te({navigation:gt,...zn!==void 0?{actionData:zn}:{}},{flushSync:tt})}let Et=await cu(ce,re.pathname,K.signal);if(Et.type==="aborted")return{shortCircuited:!0};if(Et.type==="error"){if(Et.partialMatches.length===0){let{matches:Ws,route:zr}=Sm(o);return{matches:Ws,loaderData:{},errors:{[zr.id]:Et.error}}}let zn=Ps(Et.partialMatches).route.id;return{matches:Et.partialMatches,loaderData:{},errors:{[zn]:Et.error}}}else if(Et.matches)ce=Et.matches;else{let{error:zn,notFoundMatches:Ws,route:zr}=lu(re.pathname);return{matches:Ws,loaderData:{},errors:{[zr.id]:zn}}}}let kn=c||o,{dsMatches:St,revalidatingFetchers:Er}=N3(K,we,a,s,t.history,k,ce,An,re,Be?[]:r,Be===!0,$,q,xe,ue,ne,kn,u,t.patchRoutesOnNavigation!=null,Ke,st);if(ye=++ae,!t.dataStrategy&&!St.some(Et=>Et.shouldLoad)&&!St.some(Et=>Et.route.middleware&&Et.route.middleware.length>0)&&Er.length===0){let Et=di();return Ee(re,{matches:ce,loaderData:{},errors:Ke&&Lr(Ke[1])?{[Ke[0]]:Ke[1].error}:null,...F3(Ke),...Et?{fetchers:new Map(k.fetchers)}:{}},{flushSync:tt}),{shortCircuited:!0}}if(Pn){let Et={};if(!Ae){Et.navigation=gt;let zn=rs(Ke);zn!==void 0&&(Et.actionData=zn)}Er.length>0&&(Et.fetchers=xr(Er)),te(Et,{flushSync:tt})}Er.forEach(Et=>{En(Et.key),Et.controller&&J.set(Et.key,Et.controller)});let Yi=()=>Er.forEach(Et=>En(Et.key));H&&H.signal.addEventListener("abort",Yi);let{loaderResults:pn,fetcherResults:qs}=await Vi(St,Er,K,we);if(K.signal.aborted)return{shortCircuited:!0};H&&H.signal.removeEventListener("abort",Yi),Er.forEach(Et=>J.delete(Et.key));let ba=US(pn);if(ba)return await Lt(K,ba.result,!0,{replace:Re}),{shortCircuited:!0};if(ba=US(qs),ba)return ne.add(ba.key),await Lt(K,ba.result,!0,{replace:Re}),{shortCircuited:!0};let{loaderData:Vs,errors:ss}=O3(k,ce,pn,Ke,Er,qs);Be&&k.errors&&(ss={...k.errors,...ss});let wl=di(),of=Aw(ye),lf=wl||of||Er.length>0;return{matches:ce,loaderData:Vs,errors:ss,...lf?{fetchers:new Map(k.fetchers)}:{}}}function rs(K){if(K&&!Lr(K[1]))return{[K[0]]:K[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function xr(K){return K.forEach(re=>{let ce=k.fetchers.get(re.key),we=Dy(void 0,ce?ce.data:void 0);k.fetchers.set(re.key,we)}),new Map(k.fetchers)}async function is(K,re,ce,we){En(K);let Ae=(we&&we.flushSync)===!0,Ve=c||o,Ue=RR(k.location,k.matches,u,ce,re,we==null?void 0:we.relative),_e=fa(Ve,Ue,u),Re=sf(_e,Ve,Ue);if(Re.active&&Re.matches&&(_e=Re.matches),!_e){Sr(K,re,rr(404,{pathname:Ue}),{flushSync:Ae});return}let{path:Be,submission:tt,error:Ke}=T3(!0,Ue,we);if(Ke){Sr(K,re,Ke,{flushSync:Ae});return}let st=t.getContext?await t.getContext():new cl,gt=(we&&we.preventScrollReset)===!0;if(tt&&ni(tt.formMethod)){await Mn(K,re,Be,_e,st,Re.active,Ae,gt,tt,we&&we.unstable_defaultShouldRevalidate);return}ue.set(K,{routeId:re,path:Be}),await ya(K,re,Be,_e,st,Re.active,Ae,gt,tt)}async function Mn(K,re,ce,we,Ae,Ve,Ue,_e,Re,Be){as(),ue.delete(K);let tt=k.fetchers.get(K);Sn(K,QZ(Re,tt),{flushSync:Ue});let Ke=new AbortController,st=dm(t.history,ce,Ke.signal,Re);if(Ve){let At=await cu(we,new URL(st.url).pathname,st.signal,K);if(At.type==="aborted")return;if(At.type==="error"){Sr(K,re,At.error,{flushSync:Ue});return}else if(At.matches)we=At.matches;else{Sr(K,re,rr(404,{pathname:ce}),{flushSync:Ue});return}}let gt=Im(we,ce);if(!gt.route.action&&!gt.route.lazy){let At=rr(405,{method:Re.formMethod,pathname:ce,routeId:re});Sr(K,re,At,{flushSync:Ue});return}J.set(K,Ke);let An=ae,Pn=Od(a,s,st,we,gt,r,Ae),kn=await wr(st,Pn,Ae,K),St=kn[gt.route.id];if(!St){for(let At of Pn)if(kn[At.route.id]){St=kn[At.route.id];break}}if(st.signal.aborted){J.get(K)===Ke&&J.delete(K);return}if(xe.has(K)){if(Dd(St)||Lr(St)){Sn(K,Ul(void 0));return}}else{if(Dd(St))if(J.delete(K),ye>An){Sn(K,Ul(void 0));return}else return ne.add(K),Sn(K,Dy(Re)),Lt(st,St,!1,{fetcherSubmission:Re,preventScrollReset:_e});if(Lr(St)){Sr(K,re,St.error);return}}let Er=k.navigation.location||k.location,Yi=dm(t.history,Er,Ke.signal),pn=c||o,qs=k.navigation.state!=="idle"?fa(pn,k.navigation.location,u):k.matches;Ye(qs,"Didn't find any matches after fetcher action");let ba=++ae;Y.set(K,ba);let Vs=Dy(Re,St.data);k.fetchers.set(K,Vs);let{dsMatches:ss,revalidatingFetchers:wl}=N3(Yi,Ae,a,s,t.history,k,qs,Re,Er,r,!1,$,q,xe,ue,ne,pn,u,t.patchRoutesOnNavigation!=null,[gt.route.id,St],Be);wl.filter(At=>At.key!==K).forEach(At=>{let cf=At.key,Nw=k.fetchers.get(cf),Gv=Dy(void 0,Nw?Nw.data:void 0);k.fetchers.set(cf,Gv),En(cf),At.controller&&J.set(cf,At.controller)}),te({fetchers:new Map(k.fetchers)});let of=()=>wl.forEach(At=>En(At.key));Ke.signal.addEventListener("abort",of);let{loaderResults:lf,fetcherResults:Et}=await Vi(ss,wl,Yi,Ae);if(Ke.signal.aborted)return;if(Ke.signal.removeEventListener("abort",of),Y.delete(K),J.delete(K),wl.forEach(At=>J.delete(At.key)),k.fetchers.has(K)){let At=Ul(St.data);k.fetchers.set(K,At)}let zn=US(lf);if(zn)return Lt(Yi,zn.result,!1,{preventScrollReset:_e});if(zn=US(Et),zn)return ne.add(zn.key),Lt(Yi,zn.result,!1,{preventScrollReset:_e});let{loaderData:Ws,errors:zr}=O3(k,qs,lf,void 0,wl,Et);Aw(ba),k.navigation.state==="loading"&&ba>ye?(Ye(U,"Expected pending action"),H&&H.abort(),Ee(k.navigation.location,{matches:qs,loaderData:Ws,errors:zr,fetchers:new Map(k.fetchers)})):(te({errors:zr,loaderData:j3(k.loaderData,Ws,qs,zr),fetchers:new Map(k.fetchers)}),$=!1)}async function ya(K,re,ce,we,Ae,Ve,Ue,_e,Re){let Be=k.fetchers.get(K);Sn(K,Dy(Re,Be?Be.data:void 0),{flushSync:Ue});let tt=new AbortController,Ke=dm(t.history,ce,tt.signal);if(Ve){let St=await cu(we,new URL(Ke.url).pathname,Ke.signal,K);if(St.type==="aborted")return;if(St.type==="error"){Sr(K,re,St.error,{flushSync:Ue});return}else if(St.matches)we=St.matches;else{Sr(K,re,rr(404,{pathname:ce}),{flushSync:Ue});return}}let st=Im(we,ce);J.set(K,tt);let gt=ae,An=Od(a,s,Ke,we,st,r,Ae),kn=(await wr(Ke,An,Ae,K))[st.route.id];if(J.get(K)===tt&&J.delete(K),!Ke.signal.aborted){if(xe.has(K)){Sn(K,Ul(void 0));return}if(Dd(kn))if(ye>gt){Sn(K,Ul(void 0));return}else{ne.add(K),await Lt(Ke,kn,!1,{preventScrollReset:_e});return}if(Lr(kn)){Sr(K,re,kn.error);return}Sn(K,Ul(kn.data))}}async function Lt(K,re,ce,{submission:we,fetcherSubmission:Ae,preventScrollReset:Ve,replace:Ue}={}){ce||(B==null||B.resolve(),B=null),re.response.headers.has("X-Remix-Revalidate")&&($=!0);let _e=re.response.headers.get("Location");Ye(_e,"Expected a Location header on the redirect Response"),_e=D3(_e,new URL(K.url),u,t.history);let Re=Lc(k.location,_e,{_isRedirect:!0});if(n){let An=!1;if(re.response.headers.has("X-Remix-Reload-Document"))An=!0;else if($A(_e)){const Pn=n$(_e,!0);An=Pn.origin!==e.location.origin||mr(Pn.pathname,u)==null}if(An){Ue?e.location.replace(_e):e.location.assign(_e);return}}H=null;let Be=Ue===!0||re.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:tt,formAction:Ke,formEncType:st}=k.navigation;!we&&!Ae&&tt&&Ke&&st&&(we=U3(k.navigation));let gt=we||Ae;if(HZ.has(re.response.status)&&gt&&ni(gt.formMethod))await qe(Be,Re,{submission:{...gt,formAction:_e},preventScrollReset:Ve||V,enableViewTransition:ce?G:void 0});else{let An=AN(Re,we);await qe(Be,Re,{overrideNavigation:An,fetcherSubmission:Ae,preventScrollReset:Ve||V,enableViewTransition:ce?G:void 0})}}async function wr(K,re,ce,we){var Ue;let Ae,Ve={};try{Ae=await k$(f,K,re,we,ce,!1)}catch(_e){return re.filter(Re=>Re.shouldLoad).forEach(Re=>{Ve[Re.route.id]={type:"error",error:_e}}),Ve}if(K.signal.aborted)return Ve;if(!ni(K.method))for(let _e of re){if(((Ue=Ae[_e.route.id])==null?void 0:Ue.type)==="error")break;!Ae.hasOwnProperty(_e.route.id)&&!k.loaderData.hasOwnProperty(_e.route.id)&&(!k.errors||!k.errors.hasOwnProperty(_e.route.id))&&_e.shouldCallHandler()&&(Ae[_e.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${_e.route.id}`)})}for(let[_e,Re]of Object.entries(Ae))if(B$(Re)){let Be=Re.result;Ve[_e]={type:"redirect",response:L$(Be,K,_e,re,u)}}else Ve[_e]=await D$(Re);return Ve}async function Vi(K,re,ce,we){let Ae=wr(ce,K,we,null),Ve=Promise.all(re.map(async Re=>{if(Re.matches&&Re.match&&Re.request&&Re.controller){let tt=(await wr(Re.request,Re.matches,we,Re.key))[Re.match.route.id];return{[Re.key]:tt}}else return Promise.resolve({[Re.key]:{type:"error",error:rr(404,{pathname:Re.path})}})})),Ue=await Ae,_e=(await Ve).reduce((Re,Be)=>Object.assign(Re,Be),{});return{loaderResults:Ue,fetcherResults:_e}}function as(){$=!0,ue.forEach((K,re)=>{J.has(re)&&q.add(re),En(re)})}function Sn(K,re,ce={}){k.fetchers.set(K,re),te({fetchers:new Map(k.fetchers)},{flushSync:(ce&&ce.flushSync)===!0})}function Sr(K,re,ce,we={}){let Ae=Ps(k.matches,re);$v(K),te({errors:{[Ae.route.id]:ce},fetchers:new Map(k.fetchers)},{flushSync:(we&&we.flushSync)===!0})}function Wi(K){return me.set(K,(me.get(K)||0)+1),xe.has(K)&&xe.delete(K),k.fetchers.get(K)||VA}function ef(K,re){En(K,re==null?void 0:re.reason),Sn(K,Ul(null))}function $v(K){let re=k.fetchers.get(K);J.has(K)&&!(re&&re.state==="loading"&&Y.has(K))&&En(K),ue.delete(K),Y.delete(K),ne.delete(K),xe.delete(K),q.delete(K),k.fetchers.delete(K)}function tf(K){let re=(me.get(K)||0)-1;re<=0?(me.delete(K),xe.add(K)):me.set(K,re),te({fetchers:new Map(k.fetchers)})}function En(K,re){let ce=J.get(K);ce&&(ce.abort(re),J.delete(K))}function Gs(K){for(let re of K){let ce=Wi(re),we=Ul(ce.data);k.fetchers.set(re,we)}}function di(){let K=[],re=!1;for(let ce of ne){let we=k.fetchers.get(ce);Ye(we,`Expected fetcher: ${ce}`),we.state==="loading"&&(ne.delete(ce),K.push(ce),re=!0)}return Gs(K),re}function Aw(K){let re=[];for(let[ce,we]of Y)if(we<K){let Ae=k.fetchers.get(ce);Ye(Ae,`Expected fetcher: ${ce}`),Ae.state==="loading"&&(En(ce),Y.delete(ce),re.push(ce))}return Gs(re),re.length>0}function oC(K,re){let ce=k.blockers.get(K)||ju;return Me.get(K)!==re&&Me.set(K,re),ce}function _w(K){k.blockers.delete(K),Me.delete(K)}function bl(K,re){let ce=k.blockers.get(K)||ju;Ye(ce.state==="unblocked"&&re.state==="blocked"||ce.state==="blocked"&&re.state==="blocked"||ce.state==="blocked"&&re.state==="proceeding"||ce.state==="blocked"&&re.state==="unblocked"||ce.state==="proceeding"&&re.state==="unblocked",`Invalid blocker state transition: ${ce.state} -> ${re.state}`);let we=new Map(k.blockers);we.set(K,re),te({blockers:we})}function nf({currentLocation:K,nextLocation:re,historyAction:ce}){if(Me.size===0)return;Me.size>1&&Qt(!1,"A router only supports one blocker at a time");let we=Array.from(Me.entries()),[Ae,Ve]=we[we.length-1],Ue=k.blockers.get(Ae);if(!(Ue&&Ue.state==="proceeding")&&Ve({currentLocation:K,nextLocation:re,historyAction:ce}))return Ae}function lu(K){let re=rr(404,{pathname:K}),ce=c||o,{matches:we,route:Ae}=Sm(ce);return{notFoundMatches:we,route:Ae,error:re}}function xl(K,re,ce){if(w=K,E=re,S=ce||null,!C&&k.navigation===C0){C=!0;let we=Cw(k.location,k.matches);we!=null&&te({restoreScrollPosition:we})}return()=>{w=null,E=null,S=null}}function rf(K,re){return S&&S(K,re.map(we=>r$(we,k.loaderData)))||K.key}function af(K,re){if(w&&E){let ce=rf(K,re);w[ce]=E()}}function Cw(K,re){if(w){let ce=rf(K,re),we=w[ce];if(typeof we=="number")return we}return null}function sf(K,re,ce){if(t.patchRoutesOnNavigation)if(K){if(Object.keys(K[0].params).length>0)return{active:!0,matches:e0(re,ce,u,!0)}}else return{active:!0,matches:e0(re,ce,u,!0)||[]};return{active:!1,matches:null}}async function cu(K,re,ce,we){if(!t.patchRoutesOnNavigation)return{type:"success",matches:K};let Ae=K;for(;;){let Ve=c==null,Ue=c||o,_e=s;try{await t.patchRoutesOnNavigation({signal:ce,path:re,matches:Ae,fetcherKey:we,patch:(tt,Ke)=>{ce.aborted||R3(tt,Ke,Ue,_e,a,!1)}})}catch(tt){return{type:"error",error:tt,partialMatches:Ae}}finally{Ve&&!ce.aborted&&(o=[...o])}if(ce.aborted)return{type:"aborted"};let Re=fa(Ue,re,u),Be=null;if(Re){if(Object.keys(Re[0].params).length===0)return{type:"success",matches:Re};if(Be=e0(Ue,re,u,!0),!(Be&&Ae.length<Be.length&&uu(Ae,Be.slice(0,Ae.length))))return{type:"success",matches:Re}}if(Be||(Be=e0(Ue,re,u,!0)),!Be||uu(Ae,Be))return{type:"success",matches:null};Ae=Be}}function uu(K,re){return K.length===re.length&&K.every((ce,we)=>ce.route.id===re[we].route.id)}function lC(K){s={},c=Ud(K,a,void 0,s)}function Tw(K,re,ce=!1){let we=c==null;R3(K,re,c||o,s,a,ce),we&&(o=[...o],te({}))}return P={get basename(){return u},get future(){return h},get state(){return k},get routes(){return o},get window(){return e},initialize:he,subscribe:ke,enableScrollRestoration:xl,navigate:be,fetch:is,revalidate:Te,createHref:K=>t.history.createHref(K),encodeLocation:K=>t.history.encodeLocation(K),getFetcher:Wi,resetFetcher:ef,deleteFetcher:tf,dispose:He,getBlocker:oC,deleteBlocker:_w,patchRoutes:Tw,_internalFetchControllers:J,_internalSetRoutes:lC,_internalSetStateDoNotUseOrYouWillBreakYourApp(K){te(K)}},t.unstable_instrumentations&&(P=DZ(P,t.unstable_instrumentations.map(K=>K.router).filter(Boolean))),P}function _$(t,e){Ye(t.length>0,"You must provide a non-empty routes array to createStaticHandler");let n={},r=(e?e.basename:null)||"/",i=(e==null?void 0:e.mapRouteProperties)||S$,a=i;if(e!=null&&e.unstable_instrumentations){let y=e.unstable_instrumentations;a=w=>({...i(w),...g$(y.map(S=>S.route).filter(Boolean),w)})}let s=Ud(t,a,void 0,n);async function o(y,{requestContext:w,filterMatchesToLoad:S,skipLoaderErrorBubbling:E,skipRevalidation:C,dataStrategy:M,generateMiddlewareResponse:R}={}){let D=new URL(y.url),I=y.method,P=Lc("",ci(D),null,"default"),k=fa(s,P,r);if(w=w??new cl,!DR(I)&&I!=="HEAD"){let B=rr(405,{method:I}),{matches:V,route:H}=Sm(s),G={basename:r,location:P,matches:V,loaderData:{},actionData:null,errors:{[H.id]:B},statusCode:B.status,loaderHeaders:{},actionHeaders:{}};return R?R(()=>Promise.resolve(G)):G}else if(!k){let B=rr(404,{pathname:P.pathname}),{matches:V,route:H}=Sm(s),G={basename:r,location:P,matches:V,loaderData:{},actionData:null,errors:{[H.id]:B},statusCode:B.status,loaderHeaders:{},actionHeaders:{}};return R?R(()=>Promise.resolve(G)):G}if(R){Ye(w instanceof cl,"When using middleware in `staticHandler.query()`, any provided `requestContext` must be an instance of `RouterContextProvider`");try{await k3(k,n,a);let B,V=await I3({request:y,unstable_pattern:Mc(k),matches:k,params:k[0].params,context:w},async()=>await R(async(G,Q={})=>{let W=await u(G,P,k,w,M||null,E===!0,null,"filterMatchesToLoad"in Q?Q.filterMatchesToLoad??null:S??null,C===!0);return Tn(W)?W:(B={location:P,basename:r,...W},B)}),async(H,G)=>{var Q;if(k0(H))return H;if(Tn(H))try{H=new Ni(H.status,H.statusText,await I$(H))}catch(W){H=W}if(jd(H)&&(H=F$(H)),B){G in B.loaderData&&(B.loaderData[G]=void 0);let W=C$(s,B,H,E?G:Ps(k,G).route.id);return R(()=>Promise.resolve(W))}else{let W=E?G:Ps(k,((Q=k.find($=>$.route.id===G||$.route.loader))==null?void 0:Q.route.id)||G).route.id,ee={matches:k,location:P,basename:r,loaderData:{},actionData:null,errors:{[W]:H},statusCode:Kn(H)?H.status:500,actionHeaders:{},loaderHeaders:{}};return R(()=>Promise.resolve(ee))}});return Ye(Tn(V),"Expected a response in query()"),V}catch(B){if(Tn(B))return B;throw B}}let U=await u(y,P,k,w,M||null,E===!0,null,S||null,C===!0);return Tn(U)?U:{location:P,basename:r,...U}}async function c(y,{routeId:w,requestContext:S,dataStrategy:E,generateMiddlewareResponse:C}={}){let M=new URL(y.url),R=y.method,D=Lc("",ci(M),null,"default"),I=fa(s,D,r);if(S=S??new cl,!DR(R)&&R!=="HEAD"&&R!=="OPTIONS")throw rr(405,{method:R});if(!I)throw rr(404,{pathname:D.pathname});let P=w?I.find(B=>B.route.id===w):Im(I,D);if(w&&!P)throw rr(403,{pathname:D.pathname,routeId:w});if(!P)throw rr(404,{pathname:D.pathname});if(C)return Ye(S instanceof cl,"When using middleware in `staticHandler.queryRoute()`, any provided `requestContext` must be an instance of `RouterContextProvider`"),await k3(I,n,a),await I3({request:y,unstable_pattern:Mc(I),matches:I,params:I[0].params,context:S},async()=>await C(async H=>{let G=await u(H,D,I,S,E||null,!1,P,null,!1),Q=U(G);return Tn(Q)?Q:typeof Q=="string"?new Response(Q):Response.json(Q)}),V=>{if(jd(V))return Promise.resolve(IR(V));if(Tn(V))return Promise.resolve(V);throw V});let k=await u(y,D,I,S,E||null,!1,P,null,!1);return U(k);function U(B){if(Tn(B))return B;let V=B.errors?Object.values(B.errors)[0]:void 0;if(V!==void 0)throw V;if(B.actionData)return Object.values(B.actionData)[0];if(B.loaderData)return Object.values(B.loaderData)[0]}}async function u(y,w,S,E,C,M,R,D,I){Ye(y.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(ni(y.method))return await f(y,S,R||Im(S,w),E,C,M,R!=null,D,I);let P=await h(y,S,E,C,M,R,D);return Tn(P)?P:{...P,actionData:null,actionHeaders:{}}}catch(P){if(U$(P)&&Tn(P.result)){if(P.type==="error")throw P.result;return P.result}if(k0(P))return P;throw P}}async function f(y,w,S,E,C,M,R,D,I){let P;if(!S.route.action&&!S.route.lazy){let B=rr(405,{method:y.method,pathname:new URL(y.url).pathname,routeId:S.route.id});if(R)throw B;P={type:"error",error:B}}else{let B=Od(a,n,y,w,S,[],E);P=(await g(y,B,R,E,C))[S.route.id],y.signal.aborted&&C3(y,R)}if(Dd(P))throw new Response(null,{status:P.response.status,headers:{Location:P.response.headers.get("Location")}});if(R){if(Lr(P))throw P.error;return{matches:[S],loaderData:{},actionData:{[S.route.id]:P.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{}}}if(I)if(Lr(P)){let B=M?S:Ps(w,S.route.id);return{statusCode:Kn(P.error)?P.error.status:P.statusCode!=null?P.statusCode:500,actionData:null,actionHeaders:{...P.headers?{[S.route.id]:P.headers}:{}},matches:w,loaderData:{},errors:{[B.route.id]:P.error},loaderHeaders:{}}}else return{actionData:{[S.route.id]:P.data},actionHeaders:P.headers?{[S.route.id]:P.headers}:{},matches:w,loaderData:{},errors:null,statusCode:P.statusCode||200,loaderHeaders:{}};let k=new Request(y.url,{headers:y.headers,redirect:y.redirect,signal:y.signal});if(Lr(P)){let B=M?S:Ps(w,S.route.id);return{...await h(k,w,E,C,M,null,D,[B.route.id,P]),statusCode:Kn(P.error)?P.error.status:P.statusCode!=null?P.statusCode:500,actionData:null,actionHeaders:{...P.headers?{[S.route.id]:P.headers}:{}}}}return{...await h(k,w,E,C,M,null,D),actionData:{[S.route.id]:P.data},...P.statusCode?{statusCode:P.statusCode}:{},actionHeaders:P.headers?{[S.route.id]:P.headers}:{}}}async function h(y,w,S,E,C,M,R,D){let I=M!=null;if(I&&!(M!=null&&M.route.loader)&&!(M!=null&&M.route.lazy))throw rr(400,{method:y.method,pathname:new URL(y.url).pathname,routeId:M==null?void 0:M.route.id});let P;if(M)P=Od(a,n,y,w,M,[],S);else{let B=D&&Lr(D[1])?w.findIndex(H=>H.route.id===D[0])-1:void 0,V=Mc(w);P=w.map((H,G)=>B!=null&&G>B?P0(a,n,y,V,H,[],S,!1):P0(a,n,y,V,H,[],S,(H.route.loader||H.route.lazy)!=null&&(!R||R(H))))}if(!E&&!P.some(B=>B.shouldLoad))return{matches:w,loaderData:{},errors:D&&Lr(D[1])?{[D[0]]:D[1].error}:null,statusCode:200,loaderHeaders:{}};let k=await g(y,P,I,S,E);return y.signal.aborted&&C3(y,I),{...O$(w,k,D,!0,C),matches:w}}async function g(y,w,S,E,C){let M=await k$(C||PR,y,w,null,E,!0),R={};return await Promise.all(w.map(async D=>{if(!(D.route.id in M))return;let I=M[D.route.id];if(B$(I)){let P=I.result;throw L$(P,y,D.route.id,w,r)}if(S){if(Tn(I.result))throw I;if(jd(I.result))throw IR(I.result)}R[D.route.id]=await D$(I)})),R}return{dataRoutes:s,query:o,queryRoute:c}}function C$(t,e,n,r){let i=r||e._deepestRenderedBoundaryId||t[0].id;return{...e,statusCode:Kn(n)?n.status:500,errors:{[i]:n}}}function C3(t,e){if(t.signal.reason!==void 0)throw t.signal.reason;let n=e?"queryRoute":"query";throw new Error(`${n}() call aborted without an \`AbortSignal.reason\`: ${t.method} ${t.url}`)}function zZ(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function RR(t,e,n,r,i,a){let s,o;if(i){s=[];for(let u of e)if(s.push(u),u.route.id===i){o=u;break}}else s=e,o=e[e.length-1];let c=qA(r||".",GA(s),mr(t.pathname,n)||t.pathname,a==="path");if(r==null&&(c.search=t.search,c.hash=t.hash),(r==null||r===""||r===".")&&o){let u=Uk(c.search);if(o.route.index&&!u)c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index";else if(!o.route.index&&u){let f=new URLSearchParams(c.search),h=f.getAll("index");f.delete("index"),h.filter(y=>y).forEach(y=>f.append("index",y));let g=f.toString();c.search=g?`?${g}`:""}}return n!=="/"&&(c.pathname=RZ({basename:n,pathname:c.pathname})),ci(c)}function T3(t,e,n){if(!n||!zZ(n))return{path:e};if(n.formMethod&&!DR(n.formMethod))return{path:e,error:rr(405,{method:n.formMethod})};let r=()=>({path:e,error:rr(400,{type:"invalid-body"})}),a=(n.formMethod||"get").toUpperCase(),s=j$(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ni(a))return r();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((g,[y,w])=>`${g}${y}=${w}
`,""):String(n.body);return{path:e,submission:{formMethod:a,formAction:s,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!ni(a))return r();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:a,formAction:s,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}Ye(typeof FormData=="function","FormData is not available in this environment");let o,c;if(n.formData)o=kR(n.formData),c=n.formData;else if(n.body instanceof FormData)o=kR(n.body),c=n.body;else if(n.body instanceof URLSearchParams)o=n.body,c=L3(o);else if(n.body==null)o=new URLSearchParams,c=new FormData;else try{o=new URLSearchParams(n.body),c=L3(o)}catch{return r()}let u={formMethod:a,formAction:s,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ni(u.formMethod))return{path:e,submission:u};let f=ts(e);return t&&f.search&&Uk(f.search)&&o.append("index",""),f.search=`?${o}`,{path:ci(f),submission:u}}function N3(t,e,n,r,i,a,s,o,c,u,f,h,g,y,w,S,E,C,M,R,D){var ee;let I=R?Lr(R[1])?R[1].error:R[1].data:void 0,P=i.createURL(a.location),k=i.createURL(c),U;if(f&&a.errors){let $=Object.keys(a.errors)[0];U=s.findIndex(q=>q.route.id===$)}else if(R&&Lr(R[1])){let $=R[0];U=s.findIndex(q=>q.route.id===$)-1}let B=R?R[1].statusCode:void 0,V=B&&B>=400,H={currentUrl:P,currentParams:((ee=a.matches[0])==null?void 0:ee.params)||{},nextUrl:k,nextParams:s[0].params,...o,actionResult:I,actionStatus:B},G=Mc(s),Q=s.map(($,q)=>{let{route:J}=$,ae=null;if(U!=null&&q>U?ae=!1:J.lazy?ae=!0:jk(J)?f?ae=MR(J,a.loaderData,a.errors):$Z(a.loaderData,a.matches[q],$)&&(ae=!0):ae=!1,ae!==null)return P0(n,r,t,G,$,u,e,ae);let ye=!1;typeof D=="boolean"?ye=D:V?ye=!1:(h||P.pathname+P.search===k.pathname+k.search||P.search!==k.search||GZ(a.matches[q],$))&&(ye=!0);let Y={...H,defaultShouldRevalidate:ye},ne=T0($,Y);return P0(n,r,t,G,$,u,e,ne,Y,D)}),W=[];return w.forEach(($,q)=>{if(f||!s.some(xe=>xe.route.id===$.routeId)||y.has(q))return;let J=a.fetchers.get(q),ae=J&&J.state!=="idle"&&J.data===void 0,ye=fa(E,$.path,C);if(!ye){if(M&&ae)return;W.push({key:q,routeId:$.routeId,path:$.path,matches:null,match:null,request:null,controller:null});return}if(S.has(q))return;let Y=Im(ye,$.path),ne=new AbortController,ue=dm(i,$.path,ne.signal),me=null;if(g.has(q))g.delete(q),me=Od(n,r,ue,ye,Y,u,e);else if(ae)h&&(me=Od(n,r,ue,ye,Y,u,e));else{let xe;typeof D=="boolean"?xe=D:V?xe=!1:xe=h;let Me={...H,defaultShouldRevalidate:xe};T0(Y,Me)&&(me=Od(n,r,ue,ye,Y,u,e,Me))}me&&W.push({key:q,routeId:$.routeId,path:$.path,matches:me,match:Y,request:ue,controller:ne})}),{dsMatches:Q,revalidatingFetchers:W}}function jk(t){return t.loader!=null||t.middleware!=null&&t.middleware.length>0}function MR(t,e,n){if(t.lazy)return!0;if(!jk(t))return!1;let r=e!=null&&t.id in e,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function $Z(t,e,n){let r=!e||n.route.id!==e.route.id,i=!t.hasOwnProperty(n.route.id);return r||i}function GZ(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function T0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function R3(t,e,n,r,i,a){let s;if(t){let u=r[t];Ye(u,`No route found to patch children into: routeId = ${t}`),u.children||(u.children=[]),s=u.children}else s=n;let o=[],c=[];if(e.forEach(u=>{let f=s.find(h=>T$(u,h));f?c.push({existingRoute:f,newRoute:u}):o.push(u)}),o.length>0){let u=Ud(o,i,[t||"_","patch",String((s==null?void 0:s.length)||"0")],r);s.push(...u)}if(a&&c.length>0)for(let u=0;u<c.length;u++){let{existingRoute:f,newRoute:h}=c[u],g=f,[y]=Ud([h],i,[],{},!0);Object.assign(g,{element:y.element?y.element:g.element,errorElement:y.errorElement?y.errorElement:g.errorElement,hydrateFallbackElement:y.hydrateFallbackElement?y.hydrateFallbackElement:g.hydrateFallbackElement})}}function T$(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(a=>T$(n,a))}):!1}var M3=new WeakMap,Fk=({key:t,route:e,manifest:n,mapRouteProperties:r})=>{let i=n[e.id];if(Ye(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let a=i.lazy[t];if(!a)return;let s=M3.get(i);s||(s={},M3.set(i,s));let o=s[t];if(o)return o;let c=(async()=>{let u=pZ(t),h=i[t]!==void 0&&t!=="hasErrorBoundary";if(u)Qt(!u,"Route property "+t+" is not a supported lazy route property. This property will be ignored."),s[t]=Promise.resolve();else if(h)Qt(!1,`Route "${i.id}" has a static property "${t}" defined. The lazy property will be ignored.`);else{let g=await a();g!=null&&(Object.assign(i,{[t]:g}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[t]=void 0,Object.values(i.lazy).every(g=>g===void 0)&&(i.lazy=void 0))})();return s[t]=c,c},P3=new WeakMap;function qZ(t,e,n,r,i){let a=n[t.id];if(Ye(a,"No route found in manifest"),!t.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof t.lazy=="function"){let f=P3.get(a);if(f)return{lazyRoutePromise:f,lazyHandlerPromise:f};let h=(async()=>{Ye(typeof t.lazy=="function","No lazy route function found");let g=await t.lazy(),y={};for(let w in g){let S=g[w];if(S===void 0)continue;let E=gZ(w),M=a[w]!==void 0&&w!=="hasErrorBoundary";E?Qt(!E,"Route property "+w+" is not a supported property to be returned from a lazy route function. This property will be ignored."):M?Qt(!M,`Route "${a.id}" has a static property "${w}" defined but its lazy function is also returning a value for this property. The lazy route property "${w}" will be ignored.`):y[w]=S}Object.assign(a,y),Object.assign(a,{...r(a),lazy:void 0})})();return P3.set(a,h),h.catch(()=>{}),{lazyRoutePromise:h,lazyHandlerPromise:h}}let s=Object.keys(t.lazy),o=[],c;for(let f of s){if(i&&i.includes(f))continue;let h=Fk({key:f,route:t,manifest:n,mapRouteProperties:r});h&&(o.push(h),f===e&&(c=h))}let u=o.length>0?Promise.all(o).then(()=>{}):void 0;return u==null||u.catch(()=>{}),c==null||c.catch(()=>{}),{lazyRoutePromise:u,lazyHandlerPromise:c}}function VZ(t){return t!==void 0}function k3(t,e,n){let r=t.map(({route:i})=>{if(!(typeof i.lazy!="object"||!i.lazy.middleware))return Fk({key:"middleware",route:i,manifest:e,mapRouteProperties:n})}).filter(VZ);return r.length>0?Promise.all(r):void 0}async function PR(t){let e=t.matches.filter(i=>i.shouldLoad),n={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,a)=>{n[e[a].route.id]=i}),n}async function WZ(t){return t.matches.some(e=>e.route.middleware)?N$(t,()=>PR(t)):PR(t)}function I3(t,e,n){return R$(t,e,r,Tn,n);function r(i){return jd(i)?IR(i):i}}function N$(t,e){return R$(t,e,r=>{if(k0(r))throw r;return r},XZ,n);function n(r,i,a){if(a)return Promise.resolve(Object.assign(a.value,{[i]:{type:"error",result:r}}));{let{matches:s}=t,o=Math.min(Math.max(s.findIndex(u=>u.route.id===i),0),Math.max(s.findIndex(u=>u.shouldCallHandler()),0)),c=Ps(s,s[o].route.id).route.id;return Promise.resolve({[c]:{type:"error",result:r}})}}}async function R$(t,e,n,r,i){let{matches:a,request:s,params:o,context:c,unstable_pattern:u}=t,f=a.flatMap(g=>g.route.middleware?g.route.middleware.map(y=>[g.route.id,y]):[]);return await M$({request:s,params:o,context:c,unstable_pattern:u},f,e,n,r,i)}async function M$(t,e,n,r,i,a,s=0){let{request:o}=t;if(o.signal.aborted)throw o.signal.reason??new Error(`Request aborted: ${o.method} ${o.url}`);let c=e[s];if(!c)return await n();let[u,f]=c,h,g=async()=>{if(h)throw new Error("You may only call `next()` once per middleware");try{return h={value:await M$(t,e,n,r,i,a,s+1)},h.value}catch(y){return h={value:await a(y,u,h)},h.value}};try{let y=await f(t,g),w=y!=null?r(y):void 0;return i(w)?w:h?w??h.value:(h={value:await g()},h.value)}catch(y){return await a(y,u,h)}}function P$(t,e,n,r,i){let a=Fk({key:"middleware",route:r.route,manifest:e,mapRouteProperties:t}),s=qZ(r.route,ni(n.method)?"action":"loader",e,t,i);return{middleware:a,route:s.lazyRoutePromise,handler:s.lazyHandlerPromise}}function P0(t,e,n,r,i,a,s,o,c=null,u){let f=!1,h=P$(t,e,n,i,a);return{...i,_lazyPromises:h,shouldLoad:o,shouldRevalidateArgs:c,shouldCallHandler(g){return f=!0,c?typeof u=="boolean"?T0(i,{...c,defaultShouldRevalidate:u}):typeof g=="boolean"?T0(i,{...c,defaultShouldRevalidate:g}):T0(i,c):o},resolve(g){let{lazy:y,loader:w,middleware:S}=i.route,E=f||o||g&&!ni(n.method)&&(y||w),C=S&&S.length>0&&!w&&!y;return E&&(ni(n.method)||!C)?YZ({request:n,unstable_pattern:r,match:i,lazyHandlerPromise:h==null?void 0:h.handler,lazyRoutePromise:h==null?void 0:h.route,handlerOverride:g,scopedContext:s}):Promise.resolve({type:"data",result:void 0})}}}function Od(t,e,n,r,i,a,s,o=null){return r.map(c=>c.route.id!==i.route.id?{...c,shouldLoad:!1,shouldRevalidateArgs:o,shouldCallHandler:()=>!1,_lazyPromises:P$(t,e,n,c,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:P0(t,e,n,Mc(r),c,a,s,!0,o))}async function k$(t,e,n,r,i,a){n.some(u=>{var f;return(f=u._lazyPromises)==null?void 0:f.middleware})&&await Promise.all(n.map(u=>{var f;return(f=u._lazyPromises)==null?void 0:f.middleware}));let s={request:e,unstable_pattern:Mc(n),params:n[0].params,context:i,matches:n},c=await t({...s,fetcherKey:r,runClientMiddleware:a?()=>{throw new Error("You cannot call `runClientMiddleware()` from a static handler `dataStrategy`. Middleware is run outside of `dataStrategy` during SSR in order to bubble up the Response.  You can enable middleware via the `respond` API in `query`/`queryRoute`")}:u=>{let f=s;return N$(f,()=>u({...f,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(u=>{var f,h;return[(f=u._lazyPromises)==null?void 0:f.handler,(h=u._lazyPromises)==null?void 0:h.route]}))}catch{}return c}async function YZ({request:t,unstable_pattern:e,match:n,lazyHandlerPromise:r,lazyRoutePromise:i,handlerOverride:a,scopedContext:s}){let o,c,u=ni(t.method),f=u?"action":"loader",h=g=>{let y,w=new Promise((C,M)=>y=M);c=()=>y(),t.signal.addEventListener("abort",c);let S=C=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${f}" [routeId: ${n.route.id}]`)):g({request:t,unstable_pattern:e,params:n.params,context:s},...C!==void 0?[C]:[]),E=(async()=>{try{return{type:"data",result:await(a?a(M=>S(M)):S())}}catch(C){return{type:"error",result:C}}})();return Promise.race([E,w])};try{let g=u?n.route.action:n.route.loader;if(r||i)if(g){let y,[w]=await Promise.all([h(g).catch(S=>{y=S}),r,i]);if(y!==void 0)throw y;o=w}else{await r;let y=u?n.route.action:n.route.loader;if(y)[o]=await Promise.all([h(y),i]);else if(f==="action"){let w=new URL(t.url),S=w.pathname+w.search;throw rr(405,{method:t.method,pathname:S,routeId:n.route.id})}else return{type:"data",result:void 0}}else if(g)o=await h(g);else{let y=new URL(t.url),w=y.pathname+y.search;throw rr(404,{pathname:w})}}catch(g){return{type:"error",result:g}}finally{c&&t.signal.removeEventListener("abort",c)}return o}async function I$(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}async function D$(t){var r,i,a,s,o;let{result:e,type:n}=t;if(Tn(e)){let c;try{c=await I$(e)}catch(u){return{type:"error",error:u}}return n==="error"?{type:"error",error:new Ni(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:"data",data:c,statusCode:e.status,headers:e.headers}}return n==="error"?jd(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:F$(e),statusCode:Kn(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Kn(e)?e.status:void 0}:jd(e)?{type:"data",data:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function L$(t,e,n,r,i){let a=t.headers.get("Location");if(Ye(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!$A(a)){let s=r.slice(0,r.findIndex(o=>o.route.id===n)+1);a=RR(new URL(e.url),s,i,a),t.headers.set("Location",a)}return t}function D3(t,e,n,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if($A(t)){let a=t,s=a.startsWith("//")?new URL(e.protocol+a):new URL(a);if(i.includes(s.protocol))throw new Error("Invalid redirect location");let o=mr(s.pathname,n)!=null;if(s.origin===e.origin&&o)return s.pathname+s.search+s.hash}try{let a=r.createURL(t);if(i.includes(a.protocol))throw new Error("Invalid redirect location")}catch{}return t}function dm(t,e,n,r){let i=t.createURL(j$(e)).toString(),a={signal:n};if(r&&ni(r.formMethod)){let{formMethod:s,formEncType:o}=r;a.method=s.toUpperCase(),o==="application/json"?(a.headers=new Headers({"Content-Type":o}),a.body=JSON.stringify(r.json)):o==="text/plain"?a.body=r.text:o==="application/x-www-form-urlencoded"&&r.formData?a.body=kR(r.formData):a.body=r.formData}return new Request(i,a)}function kR(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function L3(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function O$(t,e,n,r=!1,i=!1){let a={},s=null,o,c=!1,u={},f=n&&Lr(n[1])?n[1].error:void 0;return t.forEach(h=>{if(!(h.route.id in e))return;let g=h.route.id,y=e[g];if(Ye(!Dd(y),"Cannot handle redirect results in processLoaderData"),Lr(y)){let w=y.error;if(f!==void 0&&(w=f,f=void 0),s=s||{},i)s[g]=w;else{let S=Ps(t,g);s[S.route.id]==null&&(s[S.route.id]=w)}r||(a[g]=A$),c||(c=!0,o=Kn(y.error)?y.error.status:500),y.headers&&(u[g]=y.headers)}else a[g]=y.data,y.statusCode&&y.statusCode!==200&&!c&&(o=y.statusCode),y.headers&&(u[g]=y.headers)}),f!==void 0&&n&&(s={[n[0]]:f},n[2]&&(a[n[2]]=void 0)),{loaderData:a,errors:s,statusCode:o||200,loaderHeaders:u}}function O3(t,e,n,r,i,a){let{loaderData:s,errors:o}=O$(e,n,r);return i.filter(c=>!c.matches||c.matches.some(u=>u.shouldLoad)).forEach(c=>{let{key:u,match:f,controller:h}=c;if(h&&h.signal.aborted)return;let g=a[u];if(Ye(g,"Did not find corresponding fetcher result"),Lr(g)){let y=Ps(t.matches,f==null?void 0:f.route.id);o&&o[y.route.id]||(o={...o,[y.route.id]:g.error}),t.fetchers.delete(u)}else if(Dd(g))Ye(!1,"Unhandled fetcher revalidation redirect");else{let y=Ul(g.data);t.fetchers.set(u,y)}}),{loaderData:s,errors:o}}function j3(t,e,n,r){let i=Object.entries(e).filter(([,a])=>a!==A$).reduce((a,[s,o])=>(a[s]=o,a),{});for(let a of n){let s=a.route.id;if(!e.hasOwnProperty(s)&&t.hasOwnProperty(s)&&a.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function F3(t){return t?Lr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ps(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Sm(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rr(t,{pathname:e,routeId:n,method:r,type:i,message:a}={}){let s="Unknown Server Error",o="Unknown @remix-run/router error";return t===400?(s="Bad Request",r&&e&&n?o=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:i==="invalid-body"&&(o="Unable to encode submission body")):t===403?(s="Forbidden",o=`Route "${n}" does not match URL "${e}"`):t===404?(s="Not Found",o=`No route matches URL "${e}"`):t===405&&(s="Method Not Allowed",r&&e&&n?o=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:r&&(o=`Invalid request method "${r.toUpperCase()}"`)),new Ni(t||500,s,new Error(o),!0)}function US(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Dd(i))return{key:r,result:i}}}function j$(t){let e=typeof t=="string"?ts(t):t;return ci({...e,hash:""})}function KZ(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function IR(t){return Response.json(t.data,t.init??void 0)}function F$(t){var e,n;return new Ni(((e=t.init)==null?void 0:e.status)??500,((n=t.init)==null?void 0:n.statusText)??"Internal Server Error",t.data)}function XZ(t){return t!=null&&typeof t=="object"&&Object.entries(t).every(([e,n])=>typeof e=="string"&&U$(n))}function U$(t){return t!=null&&typeof t=="object"&&"type"in t&&"result"in t&&(t.type==="data"||t.type==="error")}function B$(t){return Tn(t.result)&&w$.has(t.result.status)}function Lr(t){return t.type==="error"}function Dd(t){return(t&&t.type)==="redirect"}function jd(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function Tn(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function WA(t){return w$.has(t)}function k0(t){return Tn(t)&&WA(t.status)&&t.headers.has("Location")}function DR(t){return BZ.has(t.toUpperCase())}function ni(t){return FZ.has(t.toUpperCase())}function Uk(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Im(t,e){let n=typeof e=="string"?ts(e).search:e.search;if(t[t.length-1].route.index&&Uk(n||""))return t[t.length-1];let r=u$(t);return r[r.length-1]}function U3(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:a,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function AN(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function JZ(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Dy(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function QZ(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ul(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function ZZ(t,e){try{let n=t.sessionStorage.getItem(E$);if(n){let r=JSON.parse(n);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function eee(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(E$,JSON.stringify(n))}catch(r){Qt(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function B3(){let t,e,n=new Promise((r,i)=>{t=async a=>{r(a);try{await n}catch{}},e=async a=>{i(a);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}var yl=T.createContext(null);yl.displayName="DataRouter";var Yc=T.createContext(null);Yc.displayName="DataRouterState";var Bk=T.createContext(!1);function H$(){return T.useContext(Bk)}var qx=T.createContext({isTransitioning:!1});qx.displayName="ViewTransition";var Vx=T.createContext(new Map);Vx.displayName="Fetchers";var gv=T.createContext(null);gv.displayName="Await";var tee=t=>T.createElement(gv.Provider,t),Ri=T.createContext(null);Ri.displayName="Navigation";var gp=T.createContext(null);gp.displayName="Location";var pa=T.createContext({outlet:null,matches:[],isDataRoute:!1});pa.displayName="Route";var Hk=T.createContext(null);Hk.displayName="RouteError";var z$="REACT_ROUTER_ERROR",nee="REDIRECT",ree="ROUTE_ERROR_RESPONSE";function LR(t){if(t.startsWith(`${z$}:${nee}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function OR(t){if(t.startsWith(`${z$}:${ree}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Ni(e.status,e.statusText,e.data)}catch{}}function $$(t,{relative:e}={}){Ye(Kd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=T.useContext(Ri),{hash:i,pathname:a,search:s}=Cv(t,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:dl([n,a])),r.createHref({pathname:o,search:s,hash:i})}function Kd(){return T.useContext(gp)!=null}function ma(){return Ye(Kd(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(gp).location}function iee(){return T.useContext(gp).navigationType}function aee(t){Ye(Kd(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:e}=ma();return T.useMemo(()=>mv(t,o$(e)),[e,t])}var G$="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function q$(t){T.useContext(Ri).static||T.useLayoutEffect(t)}function YA(){let{isDataRoute:t}=T.useContext(pa);return t?yee():see()}function see(){Ye(Kd(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(yl),{basename:e,navigator:n}=T.useContext(Ri),{matches:r}=T.useContext(pa),{pathname:i}=ma(),a=JSON.stringify(GA(r)),s=T.useRef(!1);return q$(()=>{s.current=!0}),T.useCallback((c,u={})=>{if(Qt(s.current,G$),!s.current)return;if(typeof c=="number"){n.go(c);return}let f=qA(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:dl([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,a,i,t])}var V$=T.createContext(null);function oee(){return T.useContext(V$)}function W$(t){let e=T.useContext(pa).outlet;return T.useMemo(()=>e&&T.createElement(V$.Provider,{value:t},e),[e,t])}function KA(){let{matches:t}=T.useContext(pa),e=t[t.length-1];return e?e.params:{}}function Cv(t,{relative:e}={}){let{matches:n}=T.useContext(pa),{pathname:r}=ma(),i=JSON.stringify(GA(n));return T.useMemo(()=>qA(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function Y$(t,e){return zk(t,e)}function zk(t,e,n,r,i){var M;Ye(Kd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=T.useContext(Ri),{matches:s}=T.useContext(pa),o=s[s.length-1],c=o?o.params:{},u=o?o.pathname:"/",f=o?o.pathnameBase:"/",h=o&&o.route;{let R=h&&h.path||"";e8(u,!h||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let g=ma(),y;if(e){let R=typeof e=="string"?ts(e):e;Ye(f==="/"||((M=R.pathname)==null?void 0:M.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),y=R}else y=g;let w=y.pathname||"/",S=w;if(f!=="/"){let R=f.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=fa(t,{pathname:S});Qt(h||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Qt(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=X$(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:dl([f,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:dl([f,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),s,n,r,i);return e&&C?T.createElement(gp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},C):C}function lee(){let t=Wx(),e=Kn(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:a},"ErrorBoundary")," or"," ",T.createElement("code",{style:a},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),n?T.createElement("pre",{style:i},n):null,s)}var cee=T.createElement(lee,null),K$=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=OR(t.digest);n&&(t=n)}let e=t!==void 0?T.createElement(pa.Provider,{value:this.props.routeContext},T.createElement(Hk.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?T.createElement(uee,{error:t},e):e}};K$.contextType=Bk;var _N=new WeakMap;function uee({children:t,error:e}){let{basename:n}=T.useContext(Ri);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=LR(e.digest);if(r){let i=_N.get(e);if(i)throw i;let a=m$(r.location,n);if(p$&&!_N.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw _N.set(e,s),s}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function dee({routeContext:t,match:e,children:n}){let r=T.useContext(yl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(pa.Provider,{value:t},n)}function X$(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n==null?void 0:n.errors;if(s!=null){let f=a.findIndex(h=>h.route.id&&(s==null?void 0:s[h.route.id])!==void 0);Ye(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let o=!1,c=-1;if(n)for(let f=0;f<a.length;f++){let h=a[f];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=f),h.route.id){let{loaderData:g,errors:y}=n,w=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!y||y[h.route.id]===void 0);if(h.route.lazy||w){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let u=n&&r?(f,h)=>{var g,y;r(f,{location:n.location,params:((y=(g=n.matches)==null?void 0:g[0])==null?void 0:y.params)??{},unstable_pattern:Mc(n.matches),errorInfo:h})}:void 0;return a.reduceRight((f,h,g)=>{let y,w=!1,S=null,E=null;n&&(y=s&&h.route.id?s[h.route.id]:void 0,S=h.route.errorElement||cee,o&&(c<0&&g===0?(e8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,E=null):c===g&&(w=!0,E=h.route.hydrateFallbackElement||null)));let C=e.concat(a.slice(0,g+1)),M=()=>{let R;return y?R=S:w?R=E:h.route.Component?R=T.createElement(h.route.Component,null):h.route.element?R=h.route.element:R=f,T.createElement(dee,{match:h,routeContext:{outlet:f,matches:C,isDataRoute:n!=null},children:R})};return n&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?T.createElement(K$,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:M(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:u}):M()},null)}function $k(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gk(t){let e=T.useContext(yl);return Ye(e,$k(t)),e}function Kc(t){let e=T.useContext(Yc);return Ye(e,$k(t)),e}function fee(t){let e=T.useContext(pa);return Ye(e,$k(t)),e}function Tv(t){let e=fee(t),n=e.matches[e.matches.length-1];return Ye(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function hee(){return Tv("useRouteId")}function J$(){return Kc("useNavigation").navigation}function pee(){let t=Gk("useRevalidator"),e=Kc("useRevalidator"),n=T.useCallback(async()=>{await t.router.revalidate()},[t.router]);return T.useMemo(()=>({revalidate:n,state:e.revalidation}),[n,e.revalidation])}function XA(){let{matches:t,loaderData:e}=Kc("useMatches");return T.useMemo(()=>t.map(n=>r$(n,e)),[t,e])}function JA(){let t=Kc("useLoaderData"),e=Tv("useLoaderData");return t.loaderData[e]}function mee(t){return Kc("useRouteLoaderData").loaderData[t]}function QA(){let t=Kc("useActionData"),e=Tv("useLoaderData");return t.actionData?t.actionData[e]:void 0}function Wx(){var r;let t=T.useContext(Hk),e=Kc("useRouteError"),n=Tv("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Q$(){let t=T.useContext(gv);return t==null?void 0:t._data}function gee(){let t=T.useContext(gv);return t==null?void 0:t._error}var vee=0;function Z$(t){let{router:e,basename:n}=Gk("useBlocker"),r=Kc("useBlocker"),[i,a]=T.useState(""),s=T.useCallback(o=>{if(typeof t!="function")return!!t;if(n==="/")return t(o);let{currentLocation:c,nextLocation:u,historyAction:f}=o;return t({currentLocation:{...c,pathname:mr(c.pathname,n)||c.pathname},nextLocation:{...u,pathname:mr(u.pathname,n)||u.pathname},historyAction:f})},[n,t]);return T.useEffect(()=>{let o=String(++vee);return a(o),()=>e.deleteBlocker(o)},[e]),T.useEffect(()=>{i!==""&&e.getBlocker(i,s)},[e,i,s]),i&&r.blockers.has(i)?r.blockers.get(i):ju}function yee(){let{router:t}=Gk("useNavigate"),e=Tv("useNavigate"),n=T.useRef(!1);return q$(()=>{n.current=!0}),T.useCallback(async(i,a={})=>{Qt(n.current,G$),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var H3={};function e8(t,e,n){!e&&!H3[t]&&(H3[t]=!0,Qt(!1,n))}function bee(...t){var a;const e=Tv("useRoute"),n=t[0]??e,r=Kc("useRoute"),i=r.matches.find(({route:s})=>s.id===n);if(i!==void 0)return{handle:i.route.handle,loaderData:r.loaderData[n],actionData:(a=r.actionData)==null?void 0:a[n]}}var z3={};function I0(t,e){!t&&!z3[e]&&(z3[e]=!0,console.warn(e))}var xee="useOptimistic",$3=Dk[xee],wee=()=>{};function See(t){return $3?$3(t):[t,wee]}function vp(t){let e={hasErrorBoundary:t.hasErrorBoundary||t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&(t.element&&Qt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:T.createElement(t.Component),Component:void 0})),t.HydrateFallback&&(t.hydrateFallbackElement&&Qt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:T.createElement(t.HydrateFallback),HydrateFallback:void 0})),t.ErrorBoundary&&(t.errorElement&&Qt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:T.createElement(t.ErrorBoundary),ErrorBoundary:void 0})),e}var Yx=["HydrateFallback","hydrateFallbackElement"];function t8(t,e){return Gx({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Lk({initialEntries:e==null?void 0:e.initialEntries,initialIndex:e==null?void 0:e.initialIndex}),hydrationData:e==null?void 0:e.hydrationData,routes:t,hydrationRouteProperties:Yx,mapRouteProperties:vp,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}var Eee=class{constructor(){this.status="pending",this.promise=new Promise((t,e)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",e(n))}})}};function n8({router:t,flushSync:e,onError:n,unstable_useTransitions:r}){r=H$()||r;let[a,s]=T.useState(t.state),[o,c]=See(a),[u,f]=T.useState(),[h,g]=T.useState({isTransitioning:!1}),[y,w]=T.useState(),[S,E]=T.useState(),[C,M]=T.useState(),R=T.useRef(new Map),D=T.useCallback((U,{deletedFetchers:B,newErrors:V,flushSync:H,viewTransitionOpts:G})=>{V&&n&&Object.values(V).forEach(W=>{var ee;return n(W,{location:U.location,params:((ee=U.matches[0])==null?void 0:ee.params)??{},unstable_pattern:Mc(U.matches)})}),U.fetchers.forEach((W,ee)=>{W.data!==void 0&&R.current.set(ee,W.data)}),B.forEach(W=>R.current.delete(W)),I0(H===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let Q=t.window!=null&&t.window.document!=null&&typeof t.window.document.startViewTransition=="function";if(I0(G==null||Q,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!G||!Q){e&&H?e(()=>s(U)):r===!1?s(U):T.startTransition(()=>{r===!0&&c(W=>G3(W,U)),s(U)});return}if(e&&H){e(()=>{S&&(y==null||y.resolve(),S.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:G.currentLocation,nextLocation:G.nextLocation})});let W=t.window.document.startViewTransition(()=>{e(()=>s(U))});W.finished.finally(()=>{e(()=>{w(void 0),E(void 0),f(void 0),g({isTransitioning:!1})})}),e(()=>E(W));return}S?(y==null||y.resolve(),S.skipTransition(),M({state:U,currentLocation:G.currentLocation,nextLocation:G.nextLocation})):(f(U),g({isTransitioning:!0,flushSync:!1,currentLocation:G.currentLocation,nextLocation:G.nextLocation}))},[t.window,e,S,y,r,c,n]);T.useLayoutEffect(()=>t.subscribe(D),[t,D]),T.useEffect(()=>{h.isTransitioning&&!h.flushSync&&w(new Eee)},[h]),T.useEffect(()=>{if(y&&u&&t.window){let U=u,B=y.promise,V=t.window.document.startViewTransition(async()=>{r===!1?s(U):T.startTransition(()=>{r===!0&&c(H=>G3(H,U)),s(U)}),await B});V.finished.finally(()=>{w(void 0),E(void 0),f(void 0),g({isTransitioning:!1})}),E(V)}},[u,y,t.window,r,c]),T.useEffect(()=>{y&&u&&o.location.key===u.location.key&&y.resolve()},[y,S,o.location,u]),T.useEffect(()=>{!h.isTransitioning&&C&&(f(C.state),g({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),M(void 0))},[h.isTransitioning,C]);let I=T.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:U=>t.navigate(U),push:(U,B,V)=>t.navigate(U,{state:B,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(U,B,V)=>t.navigate(U,{replace:!0,state:B,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[t]),P=t.basename||"/",k=T.useMemo(()=>({router:t,navigator:I,static:!1,basename:P,onError:n}),[t,I,P,n]);return T.createElement(T.Fragment,null,T.createElement(yl.Provider,{value:k},T.createElement(Yc.Provider,{value:o},T.createElement(Vx.Provider,{value:R.current},T.createElement(qx.Provider,{value:h},T.createElement(Xd,{basename:P,location:o.location,navigationType:o.historyAction,navigator:I,unstable_useTransitions:r},T.createElement(Aee,{routes:t.routes,future:t.future,state:o,onError:n})))))),null)}function G3(t,e){return{...t,navigation:e.navigation.state!=="idle"?e.navigation:t.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:t.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:t.actionData,fetchers:e.fetchers}}var Aee=T.memo(_ee);function _ee({routes:t,future:e,state:n,onError:r}){return zk(t,void 0,n,r,e)}function Cee({basename:t,children:e,initialEntries:n,initialIndex:r,unstable_useTransitions:i}){let a=T.useRef();a.current==null&&(a.current=Lk({initialEntries:n,initialIndex:r,v5Compat:!0}));let s=a.current,[o,c]=T.useState({action:s.action,location:s.location}),u=T.useCallback(f=>{i===!1?c(f):T.startTransition(()=>c(f))},[i]);return T.useLayoutEffect(()=>s.listen(u),[s,u]),T.createElement(Xd,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s,unstable_useTransitions:i})}function Tee({to:t,replace:e,state:n,relative:r}){Ye(Kd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=T.useContext(Ri);Qt(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=T.useContext(pa),{pathname:s}=ma(),o=YA(),c=qA(t,GA(a),s,r==="path"),u=JSON.stringify(c);return T.useEffect(()=>{o(JSON.parse(u),{replace:e,state:n,relative:r})},[o,u,r,e,n]),null}function r8(t){return W$(t.context)}function i8(t){Ye(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xd({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:s}){Ye(!Kd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=T.useMemo(()=>({basename:o,navigator:i,static:a,unstable_useTransitions:s,future:{}}),[o,i,a,s]);typeof n=="string"&&(n=ts(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:y="default"}=n,w=T.useMemo(()=>{let S=mr(u,o);return S==null?null:{location:{pathname:S,search:f,hash:h,state:g,key:y},navigationType:r}},[o,u,f,h,g,y,r]);return Qt(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${f}${h}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:T.createElement(Ri.Provider,{value:c},T.createElement(gp.Provider,{children:e,value:w}))}function Nee({children:t,location:e}){return Y$(D0(t),e)}function Ree({children:t,errorElement:e,resolve:n}){let r=T.useContext(yl),i=T.useContext(Yc),a=T.useCallback((s,o)=>{var c;r&&r.onError&&i&&r.onError(s,{location:i.location,params:((c=i.matches[0])==null?void 0:c.params)||{},unstable_pattern:Mc(i.matches),errorInfo:o})},[r,i]);return T.createElement(Mee,{resolve:n,errorElement:e,onError:a},T.createElement(Pee,null,t))}var Mee=class extends T.Component{constructor(t){super(t),this.state={error:null}}static getDerivedStateFromError(t){return{error:t}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("<Await> caught the following error during render",t,e)}render(){let{children:t,errorElement:e,resolve:n}=this.props,r=null,i=0;if(!(n instanceof Promise))i=1,r=Promise.resolve(),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_data",{get:()=>n});else if(this.state.error){i=2;let a=this.state.error;r=Promise.reject().catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),Object.defineProperty(r,"_error",{get:()=>a})}else n._tracked?(r=n,i="_error"in r?2:"_data"in r?1:0):(i=0,Object.defineProperty(n,"_tracked",{get:()=>!0}),r=n.then(a=>Object.defineProperty(n,"_data",{get:()=>a}),a=>{var s,o;(o=(s=this.props).onError)==null||o.call(s,a),Object.defineProperty(n,"_error",{get:()=>a})}));if(i===2&&!e)throw r._error;if(i===2)return T.createElement(gv.Provider,{value:r,children:e});if(i===1)return T.createElement(gv.Provider,{value:r,children:t});throw r}};function Pee({children:t}){let e=Q$(),n=typeof t=="function"?t(e):t;return T.createElement(T.Fragment,null,n)}function D0(t,e=[]){let n=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let a=[...e,i];if(r.type===T.Fragment){n.push.apply(n,D0(r.props.children,a));return}Ye(r.type===i8,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ye(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=D0(r.props.children,a)),n.push(s)}),n}var kee=D0;function Iee(t){return X$(t)}function a8(){return{params:KA(),loaderData:JA(),actionData:QA(),matches:XA()}}function Dee({children:t}){const e=a8();return T.cloneElement(t,e)}function s8(t){return function(){const n=a8();return T.createElement(t,n)}}function o8(){return{params:KA(),loaderData:JA(),actionData:QA()}}function Lee({children:t}){const e=o8();return T.cloneElement(t,e)}function l8(t){return function(){const n=o8();return T.createElement(t,n)}}function c8(){return{params:KA(),loaderData:JA(),actionData:QA(),error:Wx()}}function Oee({children:t}){const e=c8();return T.cloneElement(t,e)}function u8(t){return function(){const n=c8();return T.createElement(t,n)}}var w1="get",S1="application/x-www-form-urlencoded";function ZA(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function jee(t){return ZA(t)&&t.tagName.toLowerCase()==="button"}function Fee(t){return ZA(t)&&t.tagName.toLowerCase()==="form"}function Uee(t){return ZA(t)&&t.tagName.toLowerCase()==="input"}function Bee(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Hee(t,e){return t.button===0&&(!e||e==="_self")&&!Bee(t)}function dE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function zee(t,e){let n=dE(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var BS=null;function $ee(){if(BS===null)try{new FormData(document.createElement("form"),0),BS=!1}catch{BS=!0}return BS}var Gee=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function CN(t){return t!=null&&!Gee.has(t)?(Qt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${S1}"`),null):t}function qee(t,e){let n,r,i,a,s;if(Fee(t)){let o=t.getAttribute("action");r=o?mr(o,e):null,n=t.getAttribute("method")||w1,i=CN(t.getAttribute("enctype"))||S1,a=new FormData(t)}else if(jee(t)||Uee(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||o.getAttribute("action");if(r=c?mr(c,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||w1,i=CN(t.getAttribute("formenctype"))||CN(o.getAttribute("enctype"))||S1,a=new FormData(o,t),!$ee()){let{name:u,type:f,value:h}=t;if(f==="image"){let g=u?`${u}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else u&&a.append(u,h)}}else{if(ZA(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=w1,r=null,i=S1,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}var d8=-1,f8=-2,h8=-3,p8=-4,qk=-5,m8=-6,g8=-7,v8="B",y8="D",Dm="E",jR="M",b8="N",Lm="P",x8="R",FR="S",w8="Y",S8="U",UR="Z",E8=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};function Vee(){const t=new TextDecoder;let e="";return new TransformStream({transform(n,r){const i=t.decode(n,{stream:!0}),a=(e+i).split(`
`);e=a.pop()||"";for(const s of a)r.enqueue(s)},flush(n){e&&n.enqueue(e)}})}function bs(t){const{indices:e}=this,n=e.get(t);if(n)return[n];if(t===void 0)return g8;if(t===null)return qk;if(Number.isNaN(t))return f8;if(t===Number.POSITIVE_INFINITY)return m8;if(t===Number.NEGATIVE_INFINITY)return h8;if(t===0&&1/t<0)return p8;const r=this.index++;return e.set(t,r),Wee.call(this,t,r),r}function Wee(t,e){const{deferred:n,plugins:r,postPlugins:i}=this,a=this.stringified,s=[[t,e]];for(;s.length>0;){const[o,c]=s.pop(),u=h=>Object.keys(h).map(g=>`"_${bs.call(this,g)}":${bs.call(this,h[g])}`).join(",");let f=null;switch(typeof o){case"boolean":case"number":case"string":a[c]=JSON.stringify(o);break;case"bigint":a[c]=`["${v8}","${o}"]`;break;case"symbol":{const h=Symbol.keyFor(o);h?a[c]=`["${w8}",${JSON.stringify(h)}]`:f=new Error("Cannot encode symbol unless created with Symbol.for()");break}case"object":{if(!o){a[c]=`${qk}`;break}const h=Array.isArray(o);let g=!1;if(!h&&r)for(const y of r){const w=y(o);if(Array.isArray(w)){g=!0;const[S,...E]=w;a[c]=`[${JSON.stringify(S)}`,E.length>0&&(a[c]+=`,${E.map(C=>bs.call(this,C)).join(",")}`),a[c]+="]";break}}if(!g){let y=h?"[":"{";if(h){for(let w=0;w<o.length;w++)y+=(w?",":"")+(w in o?bs.call(this,o[w]):d8);a[c]=`${y}]`}else if(o instanceof Date){const w=o.getTime();a[c]=`["${y8}",${Number.isNaN(w)?JSON.stringify("invalid"):w}]`}else o instanceof URL?a[c]=`["${S8}",${JSON.stringify(o.href)}]`:o instanceof RegExp?a[c]=`["${x8}",${JSON.stringify(o.source)},${JSON.stringify(o.flags)}]`:o instanceof Set?o.size>0?a[c]=`["${FR}",${[...o].map(w=>bs.call(this,w)).join(",")}]`:a[c]=`["${FR}"]`:o instanceof Map?o.size>0?a[c]=`["${jR}",${[...o].flatMap(([w,S])=>[bs.call(this,w),bs.call(this,S)]).join(",")}]`:a[c]=`["${jR}"]`:o instanceof Promise?(a[c]=`["${Lm}",${c}]`,n[c]=o):o instanceof Error?(a[c]=`["${Dm}",${JSON.stringify(o.message)}`,o.name!=="Error"&&(a[c]+=`,${JSON.stringify(o.name)}`),a[c]+="]"):Object.getPrototypeOf(o)===null?a[c]=`["${b8}",{${u(o)}}]`:Kee(o)?a[c]=`{${u(o)}}`:f=new Error("Cannot encode object with prototype")}break}default:{const h=Array.isArray(o);let g=!1;if(!h&&r)for(const y of r){const w=y(o);if(Array.isArray(w)){g=!0;const[S,...E]=w;a[c]=`[${JSON.stringify(S)}`,E.length>0&&(a[c]+=`,${E.map(C=>bs.call(this,C)).join(",")}`),a[c]+="]";break}}g||(f=new Error("Cannot encode function or unexpected type"))}}if(f){let h=!1;if(i)for(const g of i){const y=g(o);if(Array.isArray(y)){h=!0;const[w,...S]=y;a[c]=`[${JSON.stringify(w)}`,S.length>0&&(a[c]+=`,${S.map(E=>bs.call(this,E)).join(",")}`),a[c]+="]";break}}if(!h)throw f}}}var Yee=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Kee(t){const e=Object.getPrototypeOf(t);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===Yee}var TN=typeof window<"u"?window:typeof globalThis<"u"?globalThis:void 0;function BR(t){const{hydrated:e,values:n}=this;if(typeof t=="number")return q3.call(this,t);if(!Array.isArray(t)||!t.length)throw new SyntaxError;const r=n.length;for(const i of t)n.push(i);return e.length=n.length,q3.call(this,r)}function q3(t){const{hydrated:e,values:n,deferred:r,plugins:i}=this;let a;const s=[[t,c=>{a=c}]];let o=[];for(;s.length>0;){const[c,u]=s.pop();switch(c){case g8:u(void 0);continue;case qk:u(null);continue;case f8:u(NaN);continue;case m8:u(1/0);continue;case h8:u(-1/0);continue;case p8:u(-0);continue}if(e[c]){u(e[c]);continue}const f=n[c];if(!f||typeof f!="object"){e[c]=f,u(f);continue}if(Array.isArray(f))if(typeof f[0]=="string"){const[h,g,y]=f;switch(h){case y8:u(e[c]=new Date(g));continue;case S8:u(e[c]=new URL(g));continue;case v8:u(e[c]=BigInt(g));continue;case x8:u(e[c]=new RegExp(g,y));continue;case w8:u(e[c]=Symbol.for(g));continue;case FR:const w=new Set;e[c]=w;for(let D=f.length-1;D>0;D--)s.push([f[D],I=>{w.add(I)}]);u(w);continue;case jR:const S=new Map;e[c]=S;for(let D=f.length-2;D>0;D-=2){const I=[];s.push([f[D+1],P=>{I[1]=P}]),s.push([f[D],P=>{I[0]=P}]),o.push(()=>{S.set(I[0],I[1])})}u(S);continue;case b8:const E=Object.create(null);e[c]=E;for(const D of Object.keys(g).reverse()){const I=[];s.push([g[D],P=>{I[1]=P}]),s.push([Number(D.slice(1)),P=>{I[0]=P}]),o.push(()=>{E[I[0]]=I[1]})}u(E);continue;case Lm:if(e[g])u(e[c]=e[g]);else{const D=new E8;r[g]=D,u(e[c]=D.promise)}continue;case Dm:const[,C,M]=f;let R=M&&TN&&TN[M]?new TN[M](C):new Error(C);e[c]=R,u(R);continue;case UR:u(e[c]=e[g]);continue;default:if(Array.isArray(i)){const D=[],I=f.slice(1);for(let P=0;P<I.length;P++){const k=I[P];s.push([k,U=>{D[P]=U}])}o.push(()=>{for(const P of i){const k=P(f[0],...D);if(k){u(e[c]=k.value);return}}throw new SyntaxError});continue}throw new SyntaxError}}else{const h=[];e[c]=h;for(let g=0;g<f.length;g++){const y=f[g];y!==d8&&s.push([y,w=>{h[g]=w}])}u(h);continue}else{const h={};e[c]=h;for(const g of Object.keys(f).reverse()){const y=[];s.push([f[g],w=>{y[1]=w}]),s.push([Number(g.slice(1)),w=>{y[0]=w}]),o.push(()=>{h[y[0]]=y[1]})}u(h);continue}}for(;o.length>0;)o.pop()();return a}async function Xee(t,e){const{plugins:n}=e??{},r=new E8,i=t.pipeThrough(Vee()).getReader(),a={values:[],hydrated:[],deferred:{},plugins:n},s=await Jee.call(a,i);let o=r.promise;return s.done?r.resolve():o=Qee.call(a,i).then(r.resolve).catch(c=>{for(const u of Object.values(a.deferred))u.reject(c);r.reject(c)}),{done:o.then(()=>i.closed),value:s.value}}async function Jee(t){const e=await t.read();if(!e.value)throw new SyntaxError;let n;try{n=JSON.parse(e.value)}catch{throw new SyntaxError}return{done:e.done,value:BR.call(this,n)}}async function Qee(t){let e=await t.read();for(;!e.done;){if(!e.value)continue;const n=e.value;switch(n[0]){case Lm:{const r=n.indexOf(":"),i=Number(n.slice(1,r)),a=this.deferred[i];if(!a)throw new Error(`Deferred ID ${i} not found in stream`);const s=n.slice(r+1);let o;try{o=JSON.parse(s)}catch{throw new SyntaxError}const c=BR.call(this,o);a.resolve(c);break}case Dm:{const r=n.indexOf(":"),i=Number(n.slice(1,r)),a=this.deferred[i];if(!a)throw new Error(`Deferred ID ${i} not found in stream`);const s=n.slice(r+1);let o;try{o=JSON.parse(s)}catch{throw new SyntaxError}const c=BR.call(this,o);a.reject(c);break}default:throw new SyntaxError}e=await t.read()}}function Zee(t,e){const{plugins:n,postPlugins:r,signal:i}=e??{},a={deferred:{},index:0,indices:new Map,stringified:[],plugins:n,postPlugins:r,signal:i},s=new TextEncoder;let o=0;return new ReadableStream({async start(u){const f=bs.call(a,t);if(Array.isArray(f))throw new Error("This should never happen");f<0?u.enqueue(s.encode(`${f}
`)):(u.enqueue(s.encode(`[${a.stringified.join(",")}]
`)),o=a.stringified.length-1);const h=new WeakSet;if(Object.keys(a.deferred).length){let g;const y=new Promise((w,S)=>{if(g=w,i){const E=()=>S(i.reason||new Error("Signal was aborted."));i.aborted?E():i.addEventListener("abort",C=>{E()})}});for(;Object.keys(a.deferred).length>0;){for(const[w,S]of Object.entries(a.deferred))h.has(S)||h.add(a.deferred[Number(w)]=Promise.race([y,S]).then(E=>{const C=bs.call(a,E);if(Array.isArray(C))u.enqueue(s.encode(`${Lm}${w}:[["${UR}",${C[0]}]]
`)),a.index++,o++;else if(C<0)u.enqueue(s.encode(`${Lm}${w}:${C}
`));else{const M=a.stringified.slice(o+1).join(",");u.enqueue(s.encode(`${Lm}${w}:[${M}]
`)),o=a.stringified.length-1}},E=>{(!E||typeof E!="object"||!(E instanceof Error))&&(E=new Error("An unknown error occurred"));const C=bs.call(a,E);if(Array.isArray(C))u.enqueue(s.encode(`${Dm}${w}:[["${UR}",${C[0]}]]
`)),a.index++,o++;else if(C<0)u.enqueue(s.encode(`${Dm}${w}:${C}
`));else{const M=a.stringified.slice(o+1).join(",");u.enqueue(s.encode(`${Dm}${w}:[${M}]
`)),o=a.stringified.length-1}}).finally(()=>{delete a.deferred[Number(w)]}));await Promise.race(Object.values(a.deferred))}g()}await Promise.all(Object.values(a.deferred)),u.close()}})}async function ete(t){let e={signal:t.signal};if(t.method!=="GET"){e.method=t.method;let n=t.headers.get("Content-Type");n&&/\bapplication\/json\b/.test(n)?(e.headers={"Content-Type":n},e.body=JSON.stringify(await t.json())):n&&/\btext\/plain\b/.test(n)?(e.headers={"Content-Type":n},e.body=await t.text()):n&&/\bapplication\/x-www-form-urlencoded\b/.test(n)?e.body=new URLSearchParams(await t.text()):e.body=await t.formData()}return e}var tte={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},nte=/[&><\u2028\u2029]/g;function Bd(t){return t.replace(nte,e=>tte[e])}function Ei(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}var Oc=Symbol("SingleFetchRedirect"),A8=class extends Error{},Vk=202,_8=new Set([100,101,204,205]);function C8({context:t,identifier:e,reader:n,textDecoder:r,nonce:i}){if(!t.renderMeta||!t.renderMeta.didRenderScripts)return null;t.renderMeta.streamCache||(t.renderMeta.streamCache={});let{streamCache:a}=t.renderMeta,s=a[e];if(s||(s=a[e]=n.read().then(f=>{a[e].result={done:f.done,value:r.decode(f.value,{stream:!0})}}).catch(f=>{a[e].error=f})),s.error)throw s.error;if(s.result===void 0)throw s;let{done:o,value:c}=s.result,u=c?T.createElement("script",{nonce:i,dangerouslySetInnerHTML:{__html:`window.__reactRouterContext.streamController.enqueue(${Bd(JSON.stringify(c))});`}}):null;return o?T.createElement(T.Fragment,null,u,T.createElement("script",{nonce:i,dangerouslySetInnerHTML:{__html:"window.__reactRouterContext.streamController.close();"}})):T.createElement(T.Fragment,null,u,T.createElement(T.Suspense,null,T.createElement(C8,{context:t,identifier:e+1,reader:n,textDecoder:r,nonce:i})))}function T8(t,e,n,r,i,a){let s=rte(t,o=>{let c=e.routes[o.route.id];Ei(c,"Route not found in manifest");let u=n[o.route.id];return{hasLoader:c.hasLoader,hasClientLoader:c.hasClientLoader,hasShouldRevalidate:!!(u!=null&&u.shouldRevalidate)}},ute,r,i,a);return async o=>o.runClientMiddleware(s)}function rte(t,e,n,r,i,a,s=()=>!0){return async o=>{let{request:c,matches:u,fetcherKey:f}=o,h=t();if(c.method!=="GET")return ite(o,n,i,a);let g=u.some(y=>{let{hasLoader:w,hasClientLoader:S}=e(y);return y.shouldCallHandler()&&w&&!S});return!r&&!g?ate(o,e,n,i,a):f?lte(o,n,i,a):ste(o,h,e,n,r,i,a,s)}}async function ite(t,e,n,r){let i=t.matches.find(o=>o.shouldCallHandler());Ei(i,"No action match found");let a,s=await i.resolve(async o=>await o(async()=>{let{data:u,status:f}=await e(t,n,r,[i.route.id]);return a=f,L0(u,i.route.id)}));return Tn(s.result)||Kn(s.result)||jd(s.result)?{[i.route.id]:s}:{[i.route.id]:{type:s.type,result:d$(s.result,a)}}}async function ate(t,e,n,r,i){let a=t.matches.filter(o=>o.shouldCallHandler()),s={};return await Promise.all(a.map(o=>o.resolve(async c=>{try{let{hasClientLoader:u}=e(o),f=o.route.id,h=u?await c(async()=>{let{data:g}=await n(t,r,i,[f]);return L0(g,f)}):await c();s[o.route.id]={type:"data",result:h}}catch(u){s[o.route.id]={type:"error",result:u}}}))),s}async function ste(t,e,n,r,i,a,s,o=()=>!0){let c=new Set,u=!1,f=t.matches.map(()=>V3()),h=V3(),g={},y=Promise.all(t.matches.map(async(S,E)=>S.resolve(async C=>{f[E].resolve();let M=S.route.id,{hasLoader:R,hasClientLoader:D,hasShouldRevalidate:I}=n(S),P=!S.shouldRevalidateArgs||S.shouldRevalidateArgs.actionStatus==null||S.shouldRevalidateArgs.actionStatus<400;if(!S.shouldCallHandler(P)){u||(u=S.shouldRevalidateArgs!=null&&R&&I===!0);return}if(o(S)&&D){R&&(u=!0);try{let U=await C(async()=>{let{data:B}=await r(t,a,s,[M]);return L0(B,M)});g[M]={type:"data",result:U}}catch(U){g[M]={type:"error",result:U}}return}R&&c.add(M);try{let U=await C(async()=>{let B=await h.promise;return L0(B,M)});g[M]={type:"data",result:U}}catch(U){g[M]={type:"error",result:U}}})));if(await Promise.all(f.map(S=>S.promise)),(!e.state.initialized&&e.state.navigation.state==="idle"||c.size===0)&&!window.__reactRouterHdrActive)h.resolve({routes:{}});else{let S=i&&u&&c.size>0?[...c.keys()]:void 0;try{let E=await r(t,a,s,S);h.resolve(E.data)}catch(E){h.reject(E)}}return await y,await ote(h.promise,t.matches,c,g),g}async function ote(t,e,n,r){var i;try{let a,s=await t;if("routes"in s){for(let o of e)if(o.route.id in s.routes){let c=s.routes[o.route.id];if("error"in c){a=c.error,((i=r[o.route.id])==null?void 0:i.result)==null&&(r[o.route.id]={type:"error",result:a});break}}}a!==void 0&&Array.from(n.values()).forEach(o=>{r[o].result instanceof A8&&(r[o].result=a)})}catch{}}async function lte(t,e,n,r){let i=t.matches.find(o=>o.shouldCallHandler());Ei(i,"No fetcher match found");let a=i.route.id,s=await i.resolve(async o=>o(async()=>{let{data:c}=await e(t,n,r,[a]);return L0(c,a)}));return{[i.route.id]:s}}function cte(t){let e=t.searchParams.getAll("index");t.searchParams.delete("index");let n=[];for(let r of e)r&&n.push(r);for(let r of n)t.searchParams.append("index",r);return t}function N8(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&mr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function ute(t,e,n,r){let{request:i}=t,a=N8(i.url,e,n,"data");i.method==="GET"&&(a=cte(a),r&&a.searchParams.set("_routes",r.join(",")));let s=await fetch(a,await ete(i));if(s.status>=400&&!s.headers.has("X-Remix-Response"))throw new Ni(s.status,s.statusText,await s.text());if(s.status===204&&s.headers.has("X-Remix-Redirect"))return{status:Vk,data:{redirect:{redirect:s.headers.get("X-Remix-Redirect"),status:Number(s.headers.get("X-Remix-Status")||"302"),revalidate:s.headers.get("X-Remix-Revalidate")==="true",reload:s.headers.get("X-Remix-Reload-Document")==="true",replace:s.headers.get("X-Remix-Replace")==="true"}}};if(_8.has(s.status)){let o={};return r&&i.method!=="GET"&&(o[r[0]]={data:void 0}),{status:s.status,data:{routes:o}}}Ei(s.body,"No response body to decode");try{let o=await e_(s.body,window),c;if(i.method==="GET"){let u=o.value;Oc in u?c={redirect:u[Oc]}:c={routes:u}}else{let u=o.value,f=r==null?void 0:r[0];Ei(f,"No routeId found for single fetch call decoding"),"redirect"in u?c={redirect:u}:c={routes:{[f]:u}}}return{status:s.status,data:c}}catch{throw new Error("Unable to decode turbo-stream response")}}function e_(t,e){return Xee(t,{plugins:[(n,...r)=>{if(n==="SanitizedError"){let[i,a,s]=r,o=Error;i&&i in e&&typeof e[i]=="function"&&(o=e[i]);let c=new o(a);return c.stack=s,{value:c}}if(n==="ErrorResponse"){let[i,a,s]=r;return{value:new Ni(a,s,i)}}if(n==="SingleFetchRedirect")return{value:{[Oc]:r[0]}};if(n==="SingleFetchClassInstance")return{value:r[0]};if(n==="SingleFetchFallback")return{value:void 0}}]})}function L0(t,e){if("redirect"in t){let{redirect:r,revalidate:i,reload:a,replace:s,status:o}=t.redirect;throw $x(r,{status:o,headers:{...i?{"X-Remix-Revalidate":"yes"}:null,...a?{"X-Remix-Reload-Document":"yes"}:null,...s?{"X-Remix-Replace":"yes"}:null}})}let n=t.routes[e];if(n==null)throw new A8(`No result found for routeId "${e}"`);if("error"in n)throw n.error;if("data"in n)return n.data;throw new Error(`Invalid response found for routeId "${e}"`)}function V3(){let t,e,n=new Promise((r,i)=>{t=async a=>{r(a);try{await n}catch{}},e=async a=>{i(a);try{await n}catch{}}});return{promise:n,resolve:t,reject:e}}async function R8(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dte(t,e,n){let r=t.map(a=>{var c;let s=e[a.route.id],o=n.routes[a.route.id];return[o&&o.css?o.css.map(u=>({rel:"stylesheet",href:u})):[],((c=s==null?void 0:s.links)==null?void 0:c.call(s))||[]]}).flat(2),i=Yk(t,n);return I8(r,i)}function M8(t){return t.css?t.css.map(e=>({rel:"stylesheet",href:e})):[]}async function fte(t){if(!t.css)return;let e=M8(t);await Promise.all(e.map(k8))}async function P8(t,e){if(!t.css&&!e.links||!vte())return;let n=[];if(t.css&&n.push(...M8(t)),e.links&&n.push(...e.links()),n.length===0)return;let r=[];for(let i of n)!Wk(i)&&i.rel==="stylesheet"&&r.push({...i,rel:"preload",as:"style"});await Promise.all(r.map(k8))}async function k8(t){return new Promise(e=>{if(t.media&&!window.matchMedia(t.media).matches||document.querySelector(`link[rel="stylesheet"][href="${t.href}"]`))return e();let n=document.createElement("link");Object.assign(n,t);function r(){document.head.contains(n)&&document.head.removeChild(n)}n.onload=()=>{r(),e()},n.onerror=()=>{r(),e()},document.head.appendChild(n)})}function Wk(t){return t!=null&&typeof t.page=="string"}function hte(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function pte(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await R8(a,n);return s.links?s.links():[]}return[]}));return I8(r.flat(1).filter(hte).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function W3(t,e,n,r,i,a){let s=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,o=(c,u)=>{var f;return n[u].pathname!==c.pathname||((f=n[u].route.path)==null?void 0:f.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,u)=>s(c,u)||o(c,u)):a==="data"?e.filter((c,u)=>{var h;let f=r.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(s(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let g=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=n[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Yk(t,e,{includeHydrateFallback:n}={}){return mte(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function mte(t){return[...new Set(t)]}function gte(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function I8(t,e){let n=new Set,r=new Set(e);return t.reduce((i,a)=>{if(e&&!Wk(a)&&a.as==="script"&&a.href&&r.has(a.href))return i;let o=JSON.stringify(gte(a));return n.has(o)||(n.add(o),i.push({key:o,link:a})),i},[])}var HS;function vte(){if(HS!==void 0)return HS;let t=document.createElement("link");return HS=t.relList.supports("preload"),t=null,HS}function yte(){return T.createElement(HR,{title:"Loading...",renderScripts:!0},T.createElement("script",{dangerouslySetInnerHTML:{__html:`
              console.log(
                " Hey developer . You can provide a way better UX than this " +
                "when your app is loading JS modules and/or running \`clientLoader\` " +
                "functions. Check out https://reactrouter.com/start/framework/route-module#hydratefallback " +
                "for more information."
              );
            `}}))}function Kk(t){let e={};return Object.values(t).forEach(n=>{if(n){let r=n.parentId||"";e[r]||(e[r]=[]),e[r].push(n)}}),e}function D8(t,e,n){let r=j8(e),i=e.HydrateFallback&&(!n||t.id==="root")?e.HydrateFallback:t.id==="root"?yte:void 0,a=e.ErrorBoundary?e.ErrorBoundary:t.id==="root"?()=>T.createElement($8,{error:Wx()}):void 0;return t.id==="root"&&e.Layout?{...r?{element:T.createElement(e.Layout,null,T.createElement(r,null))}:{Component:r},...a?{errorElement:T.createElement(e.Layout,null,T.createElement(a,null))}:{ErrorBoundary:a},...i?{hydrateFallbackElement:T.createElement(e.Layout,null,T.createElement(i,null))}:{HydrateFallback:i}}:{Component:r,ErrorBoundary:a,HydrateFallback:i}}function L8(t,e,n,r,i="",a=Kk(t),s=Promise.resolve({Component:()=>null})){return(a[i]||[]).map(o=>{let c=e[o.id];Ei(c,"No `routeModule` available to create server routes");let u={...D8(o,c,r),caseSensitive:o.caseSensitive,id:o.id,index:o.index,path:o.path,handle:c.handle,lazy:r?()=>s:void 0,loader:o.hasLoader||o.hasClientLoader?()=>null:void 0},f=L8(t,e,n,r,o.id,a,s);return f.length>0&&(u.children=f),u})}function O8(t,e,n,r,i,a){return Kx(e,n,r,i,a,"",Kk(e),t)}function zS(t,e){if(t==="loader"&&!e.hasLoader||t==="action"&&!e.hasAction){let r=`You are trying to call ${t==="action"?"serverAction()":"serverLoader()"} on a route that does not have a server ${t} (routeId: "${e.id}")`;throw console.error(r),new Ni(400,"Bad Request",new Error(r),!0)}}function NN(t,e){let n=t==="clientAction"?"a":"an",r=`Route "${e}" does not have ${n} ${t}, but you are trying to submit to it. To fix this, please add ${n} \`${t}\` function to the route`;throw console.error(r),new Ni(405,"Method Not Allowed",new Error(r),!0)}function Kx(t,e,n,r,i,a="",s=Kk(t),o){return(s[a]||[]).map(c=>{var M,R,D;let u=e[c.id];function f(I){return Ei(typeof I=="function","No single fetch function available for route handler"),I()}function h(I){return c.hasLoader?f(I):Promise.resolve(null)}function g(I){if(!c.hasAction)throw NN("action",c.id);return f(I)}function y(I){import(I)}function w(I){I.clientActionModule&&y(I.clientActionModule),I.clientLoaderModule&&y(I.clientLoaderModule)}async function S(I){let P=e[c.id],k=P?P8(c,P):Promise.resolve();try{return I()}finally{await k}}let E={id:c.id,index:c.index,path:c.path};if(u){Object.assign(E,{...E,...D8(c,u,i),middleware:u.clientMiddleware,handle:u.handle,shouldRevalidate:Y3(E.path,u,c,r,o)});let I=n&&n.loaderData&&c.id in n.loaderData,P=I?(M=n==null?void 0:n.loaderData)==null?void 0:M[c.id]:void 0,k=n&&n.errors&&c.id in n.errors,U=k?(R=n==null?void 0:n.errors)==null?void 0:R[c.id]:void 0,B=o==null&&(((D=u.clientLoader)==null?void 0:D.hydrate)===!0||!c.hasLoader);E.loader=async({request:V,params:H,context:G,unstable_pattern:Q},W)=>{try{return await S(async()=>(Ei(u,"No `routeModule` available for critical-route loader"),u.clientLoader?u.clientLoader({request:V,params:H,context:G,unstable_pattern:Q,async serverLoader(){if(zS("loader",c),B){if(I)return P;if(k)throw U}return h(W)}}):h(W)))}finally{B=!1}},E.loader.hydrate=Xx(c.id,u.clientLoader,c.hasLoader,i),E.action=({request:V,params:H,context:G,unstable_pattern:Q},W)=>S(async()=>{if(Ei(u,"No `routeModule` available for critical-route action"),!u.clientAction){if(i)throw NN("clientAction",c.id);return g(W)}return u.clientAction({request:V,params:H,context:G,unstable_pattern:Q,async serverAction(){return zS("action",c),g(W)}})})}else{c.hasClientLoader||(E.loader=(k,U)=>S(()=>h(U))),c.hasClientAction||(E.action=(k,U)=>S(()=>{if(i)throw NN("clientAction",c.id);return g(U)}));let I;async function P(){return I?await I:(I=(async()=>{(c.clientLoaderModule||c.clientActionModule)&&await new Promise(U=>setTimeout(U,0));let k=xte(c,e);return w(c),await k})(),await I)}E.lazy={loader:c.hasClientLoader?async()=>{let{clientLoader:k}=c.clientLoaderModule?await import(c.clientLoaderModule):await P();return Ei(k,"No `clientLoader` export found"),(U,B)=>k({...U,async serverLoader(){return zS("loader",c),h(B)}})}:void 0,action:c.hasClientAction?async()=>{let k=c.clientActionModule?import(c.clientActionModule):P();w(c);let{clientAction:U}=await k;return Ei(U,"No `clientAction` export found"),(B,V)=>U({...B,async serverAction(){return zS("action",c),g(V)}})}:void 0,middleware:c.hasClientMiddleware?async()=>{let{clientMiddleware:k}=c.clientMiddlewareModule?await import(c.clientMiddlewareModule):await P();return Ei(k,"No `clientMiddleware` export found"),k}:void 0,shouldRevalidate:async()=>{let k=await P();return Y3(E.path,k,c,r,o)},handle:async()=>(await P()).handle,Component:async()=>(await P()).Component,ErrorBoundary:c.hasErrorBoundary?async()=>(await P()).ErrorBoundary:void 0}}let C=Kx(t,e,n,r,i,c.id,s,o);return C.length>0&&(E.children=C),E})}function Y3(t,e,n,r,i){if(i)return bte(n.id,e.shouldRevalidate,i);if(!r&&n.hasLoader&&!n.hasClientLoader){let a=t?s$(t)[1].map(o=>o.paramName):[];const s=o=>a.some(c=>o.currentParams[c]!==o.nextParams[c]);if(e.shouldRevalidate){let o=e.shouldRevalidate;return c=>o({...c,defaultShouldRevalidate:s(c)})}else return o=>s(o)}return e.shouldRevalidate}function bte(t,e,n){let r=!1;return i=>r?e?e(i):i.defaultShouldRevalidate:(r=!0,n.has(t))}async function xte(t,e){let n=R8(t,e),r=fte(t),i=await n;return await Promise.all([r,P8(t,i)]),{Component:j8(i),ErrorBoundary:i.ErrorBoundary,clientMiddleware:i.clientMiddleware,clientAction:i.clientAction,clientLoader:i.clientLoader,handle:i.handle,links:i.links,meta:i.meta,shouldRevalidate:i.shouldRevalidate}}function j8(t){if(t.default==null)return;if(!(typeof t.default=="object"&&Object.keys(t.default).length===0))return t.default}function Xx(t,e,n,r){return r&&t!=="root"||e!=null&&(e.hydrate===!0||n!==!0)}var E1=new Set,wte=1e3,fE=new Set,Ste=7680;function Xk(t,e){return t.mode==="lazy"&&e===!0}function Ete({sri:t,...e},n){let r=new Set(n.state.matches.map(o=>o.route.id)),i=n.state.location.pathname.split("/").filter(Boolean),a=["/"];for(i.pop();i.length>0;)a.push(`/${i.join("/")}`),i.pop();a.forEach(o=>{let c=fa(n.routes,o,n.basename);c&&c.forEach(u=>r.add(u.route.id))});let s=[...r].reduce((o,c)=>Object.assign(o,{[c]:e.routes[c]}),{});return{...e,routes:s,sri:t?!0:void 0}}function F8(t,e,n,r,i,a){if(Xk(r,n))return async({path:s,patch:o,signal:c,fetcherKey:u})=>{fE.has(s)||await H8([s],u?window.location.href:s,t,e,n,i,a,r.manifestPath,o,c)}}function U8(t,e,n,r,i,a){T.useEffect(()=>{var f,h;if(!Xk(i,r)||((h=(f=window.navigator)==null?void 0:f.connection)==null?void 0:h.saveData)===!0)return;function s(g){let y=g.tagName==="FORM"?g.getAttribute("action"):g.getAttribute("href");if(!y)return;let w=g.tagName==="A"?g.pathname:new URL(y,window.location.origin).pathname;fE.has(w)||E1.add(w)}async function o(){document.querySelectorAll("a[data-discover], form[data-discover]").forEach(s);let g=Array.from(E1.keys()).filter(y=>fE.has(y)?(E1.delete(y),!1):!0);if(g.length!==0)try{await H8(g,null,e,n,r,a,t.basename,i.manifestPath,t.patchRoutes)}catch(y){console.error("Failed to fetch manifest patches",y)}}let c=_te(o,100);o();let u=new MutationObserver(()=>c());return u.observe(document.documentElement,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-discover","href","action"]}),()=>u.disconnect()},[r,a,e,n,t,i])}function B8(t,e){let n=t||"/__manifest";return e==null?n:`${e}${n}`.replace(/\/+/g,"/")}var RN="react-router-manifest-version";async function H8(t,e,n,r,i,a,s,o,c,u){const f=new URLSearchParams;f.set("paths",t.sort().join(",")),f.set("version",n.version);let h=new URL(B8(o,s),window.location.origin);if(h.search=f.toString(),h.toString().length>Ste){E1.clear();return}let g;try{let E=await fetch(h,{signal:u});if(E.ok){if(E.status===204&&E.headers.has("X-Remix-Reload-Document")){if(!e){console.warn("Detected a manifest version mismatch during eager route discovery. The next navigation/fetch to an undiscovered route will result in a new document navigation to sync up with the latest manifest.");return}try{if(sessionStorage.getItem(RN)===n.version){console.error("Unable to discover routes due to manifest version mismatch.");return}sessionStorage.setItem(RN,n.version)}catch{}window.location.href=e,console.warn("Detected manifest version mismatch, reloading..."),await new Promise(()=>{})}else if(E.status>=400)throw new Error(await E.text())}else throw new Error(`${E.status} ${E.statusText}`);try{sessionStorage.removeItem(RN)}catch{}g=await E.json()}catch(E){if(u!=null&&u.aborted)return;throw E}let y=new Set(Object.keys(n.routes)),w=Object.values(g).reduce((E,C)=>(C&&!y.has(C.id)&&(E[C.id]=C),E),{});Object.assign(n.routes,w),t.forEach(E=>Ate(E,fE));let S=new Set;Object.values(w).forEach(E=>{E&&(!E.parentId||!w[E.parentId])&&S.add(E.parentId)}),S.forEach(E=>c(E||null,Kx(w,r,null,i,a,E)))}function Ate(t,e){if(e.size>=wte){let n=e.values().next().value;e.delete(n)}e.add(t)}function _te(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function Jk(){let t=T.useContext(yl);return Ei(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function t_(){let t=T.useContext(Yc);return Ei(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Xc=T.createContext(void 0);Xc.displayName="FrameworkContext";function Nv(){let t=T.useContext(Xc);return Ei(t,"You must render this element inside a <HydratedRouter> element"),t}function Cte(t,e){let n=T.useContext(Xc),[r,i]=T.useState(!1),[a,s]=T.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:f,onTouchStart:h}=e,g=T.useRef(null);T.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let S=C=>{C.forEach(M=>{s(M.isIntersecting)})},E=new IntersectionObserver(S,{threshold:.5});return g.current&&E.observe(g.current),()=>{E.disconnect()}}},[t]),T.useEffect(()=>{if(r){let S=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(S)}}},[r]);let y=()=>{i(!0)},w=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,g,{}]:[a,g,{onFocus:Ly(o,y),onBlur:Ly(c,w),onMouseEnter:Ly(u,y),onMouseLeave:Ly(f,w),onTouchStart:Ly(h,y)}]:[!1,g,{}]}function Ly(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Qk(t,e,n){if(n&&!hE)return[t[0]];if(e){let r=t.findIndex(i=>e[i.route.id]!==void 0);return t.slice(0,r+1)}return t}var K3="data-react-router-critical-css";function Tte({nonce:t}){let{isSpaMode:e,manifest:n,routeModules:r,criticalCss:i}=Nv(),{errors:a,matches:s}=t_(),o=Qk(s,a,e),c=T.useMemo(()=>dte(o,r,n),[o,r,n]);return T.createElement(T.Fragment,null,typeof i=="string"?T.createElement("style",{[K3]:"",dangerouslySetInnerHTML:{__html:i}}):null,typeof i=="object"?T.createElement("link",{[K3]:"",rel:"stylesheet",href:i.href,nonce:t}):null,c.map(({key:u,link:f})=>Wk(f)?T.createElement(Zk,{key:u,nonce:t,...f}):T.createElement("link",{key:u,nonce:t,...f})))}function Zk({page:t,...e}){let{router:n}=Jk(),r=T.useMemo(()=>fa(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?T.createElement(Rte,{page:t,matches:r,...e}):null}function Nte(t){let{manifest:e,routeModules:n}=Nv(),[r,i]=T.useState([]);return T.useEffect(()=>{let a=!1;return pte(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function Rte({page:t,matches:e,...n}){let r=ma(),{future:i,manifest:a,routeModules:s}=Nv(),{basename:o}=Jk(),{loaderData:c,matches:u}=t_(),f=T.useMemo(()=>W3(t,e,u,a,r,"data"),[t,e,u,a,r]),h=T.useMemo(()=>W3(t,e,u,a,r,"assets"),[t,e,u,a,r]),g=T.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let S=new Set,E=!1;if(e.forEach(M=>{var D;let R=a.routes[M.route.id];!R||!R.hasLoader||(!f.some(I=>I.route.id===M.route.id)&&M.route.id in c&&((D=s[M.route.id])!=null&&D.shouldRevalidate)||R.hasClientLoader?E=!0:S.add(M.route.id))}),S.size===0)return[];let C=N8(t,o,i.unstable_trailingSlashAwareDataRequests,"data");return E&&S.size>0&&C.searchParams.set("_routes",e.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[C.pathname+C.search]},[o,i.unstable_trailingSlashAwareDataRequests,c,r,a,f,e,t,s]),y=T.useMemo(()=>Yk(h,a),[h,a]),w=Nte(h);return T.createElement(T.Fragment,null,g.map(S=>T.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),y.map(S=>T.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:E})=>T.createElement("link",{key:S,nonce:n.nonce,...E})))}function Mte(){let{isSpaMode:t,routeModules:e}=Nv(),{errors:n,matches:r,loaderData:i}=t_(),a=ma(),s=Qk(r,n,t),o=null;n&&(o=n[s[s.length-1].route.id]);let c=[],u=null,f=[];for(let h=0;h<s.length;h++){let g=s[h],y=g.route.id,w=i[y],S=g.params,E=e[y],C=[],M={id:y,data:w,loaderData:w,meta:[],params:g.params,pathname:g.pathname,handle:g.route.handle,error:o};if(f[h]=M,E!=null&&E.meta?C=typeof E.meta=="function"?E.meta({data:w,loaderData:w,params:S,location:a,matches:f,error:o}):Array.isArray(E.meta)?[...E.meta]:E.meta:u&&(C=[...u]),C=C||[],!Array.isArray(C))throw new Error("The route at "+g.route.path+` returns an invalid value. All route meta functions must return an array of meta objects.

To reference the meta function API, see https://remix.run/route/meta`);M.meta=C,f[h]=M,c=[...C],u=c}return T.createElement(T.Fragment,null,c.flat().map(h=>{if(!h)return null;if("tagName"in h){let{tagName:g,...y}=h;if(!Pte(g))return console.warn(`A meta object uses an invalid tagName: ${g}. Expected either 'link' or 'meta'`),null;let w=g;return T.createElement(w,{key:JSON.stringify(y),...y})}if("title"in h)return T.createElement("title",{key:"title"},String(h.title));if("charset"in h&&(h.charSet??(h.charSet=h.charset),delete h.charset),"charSet"in h&&h.charSet!=null)return typeof h.charSet=="string"?T.createElement("meta",{key:"charSet",charSet:h.charSet}):null;if("script:ld+json"in h)try{let g=JSON.stringify(h["script:ld+json"]);return T.createElement("script",{key:`script:ld+json:${g}`,type:"application/ld+json",dangerouslySetInnerHTML:{__html:Bd(g)}})}catch{return null}return T.createElement("meta",{key:JSON.stringify(h),...h})}))}function Pte(t){return typeof t=="string"&&/^(meta|link)$/.test(t)}var hE=!1;function kte(){hE=!0}function z8(t){let{manifest:e,serverHandoffString:n,isSpaMode:r,renderMeta:i,routeDiscovery:a,ssr:s}=Nv(),{router:o,static:c,staticContext:u}=Jk(),{matches:f}=t_(),h=H$(),g=Xk(a,s);i&&(i.didRenderScripts=!0);let y=Qk(f,null,r);T.useEffect(()=>{kte()},[]);let w=T.useMemo(()=>{var D;if(h)return null;let M=u?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",R=c?`${(D=e.hmr)!=null&&D.runtime?`import ${JSON.stringify(e.hmr.runtime)};`:""}${g?"":`import ${JSON.stringify(e.url)}`};
${y.map((I,P)=>{let k=`route${P}`,U=e.routes[I.route.id];Ei(U,`Route ${I.route.id} not found in manifest`);let{clientActionModule:B,clientLoaderModule:V,clientMiddlewareModule:H,hydrateFallbackModule:G,module:Q}=U,W=[...B?[{module:B,varName:`${k}_clientAction`}]:[],...V?[{module:V,varName:`${k}_clientLoader`}]:[],...H?[{module:H,varName:`${k}_clientMiddleware`}]:[],...G?[{module:G,varName:`${k}_HydrateFallback`}]:[],{module:Q,varName:`${k}_main`}];if(W.length===1)return`import * as ${k} from ${JSON.stringify(Q)};`;let ee=W.map(q=>`import * as ${q.varName} from "${q.module}";`).join(`
`),$=`const ${k} = {${W.map(q=>`...${q.varName}`).join(",")}};`;return[ee,$].join(`
`)}).join(`
`)}
  ${g?`window.__reactRouterManifest = ${JSON.stringify(Ete(e,o),null,2)};`:""}
  window.__reactRouterRouteModules = {${y.map((I,P)=>`${JSON.stringify(I.route.id)}:route${P}`).join(",")}};

import(${JSON.stringify(e.entry.module)});`:" ";return T.createElement(T.Fragment,null,T.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:M},type:void 0}),T.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:R},type:"module",async:!0}))},[]),S=hE||h?[]:Ite(e.entry.imports.concat(Yk(y,e,{includeHydrateFallback:!0}))),E=typeof e.sri=="object"?e.sri:{};return I0(!h,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),hE||h?null:T.createElement(T.Fragment,null,typeof e.sri=="object"?T.createElement("script",{...t,"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:E})}}):null,g?null:T.createElement("link",{rel:"modulepreload",href:e.url,crossOrigin:t.crossOrigin,integrity:E[e.url],suppressHydrationWarning:!0}),T.createElement("link",{rel:"modulepreload",href:e.entry.module,crossOrigin:t.crossOrigin,integrity:E[e.entry.module],suppressHydrationWarning:!0}),S.map(C=>T.createElement("link",{key:C,rel:"modulepreload",href:C,crossOrigin:t.crossOrigin,integrity:E[C],suppressHydrationWarning:!0})),w)}function Ite(t){return[...new Set(t)]}function Dte(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var eI=class extends T.Component{constructor(t){super(t),this.state={error:t.error||null,location:t.location}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location?{error:t.error||null,location:t.location}:{error:t.error||e.error,location:e.location}}render(){return this.state.error?T.createElement($8,{error:this.state.error,isOutsideRemixApp:!0}):this.props.children}};function $8({error:t,isOutsideRemixApp:e}){console.error(t);let n=T.createElement("script",{dangerouslySetInnerHTML:{__html:`
        console.log(
          " Hey developer . You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."
        );
      `}});if(Kn(t))return T.createElement(HR,{title:"Unhandled Thrown Response!"},T.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),n);let r;if(t instanceof Error)r=t;else{let i=t==null?"Unknown Error":typeof t=="object"&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(i)}return T.createElement(HR,{title:"Application Error!",isOutsideRemixApp:e},T.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),T.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),n)}function HR({title:t,renderScripts:e,isOutsideRemixApp:n,children:r}){var a;let{routeModules:i}=Nv();return(a=i.root)!=null&&a.Layout&&!n?r:T.createElement("html",{lang:"en"},T.createElement("head",null,T.createElement("meta",{charSet:"utf-8"}),T.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),T.createElement("title",null,t)),T.createElement("body",null,T.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},r,e?T.createElement(z8,null):null)))}var Lte=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lte&&(window.__reactRouterVersion="7.12.0")}catch{}function Ote(t,e){return Gx({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:zA({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||G8(),routes:t,mapRouteProperties:vp,hydrationRouteProperties:Yx,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function jte(t,e){return Gx({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Ok({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||G8(),routes:t,mapRouteProperties:vp,hydrationRouteProperties:Yx,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function G8(){let t=window==null?void 0:window.__staticRouterHydrationData;return t&&t.errors&&(t={...t,errors:Fte(t.errors)}),t}function Fte(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ni(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let a=new Error(i.message);a.stack="",n[r]=a}}else n[r]=i;return n}function Ute({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=T.useRef();i.current==null&&(i.current=zA({window:r,v5Compat:!0}));let a=i.current,[s,o]=T.useState({action:a.action,location:a.location}),c=T.useCallback(u=>{n===!1?o(u):T.startTransition(()=>o(u))},[n]);return T.useLayoutEffect(()=>a.listen(c),[a,c]),T.createElement(Xd,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}function Bte({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=T.useRef();i.current==null&&(i.current=Ok({window:r,v5Compat:!0}));let a=i.current,[s,o]=T.useState({action:a.action,location:a.location}),c=T.useCallback(u=>{n===!1?o(u):T.startTransition(()=>o(u))},[n]);return T.useLayoutEffect(()=>a.listen(c),[a,c]),T.createElement(Xd,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:a,unstable_useTransitions:n})}function q8({basename:t,children:e,history:n,unstable_useTransitions:r}){let[i,a]=T.useState({action:n.action,location:n.location}),s=T.useCallback(o=>{r===!1?a(o):T.startTransition(()=>a(o))},[r]);return T.useLayoutEffect(()=>n.listen(s),[n,s]),T.createElement(Xd,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:n,unstable_useTransitions:r})}q8.displayName="unstable_HistoryRouter";var V8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tI=T.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:o,target:c,to:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...y},w){let{basename:S,unstable_useTransitions:E}=T.useContext(Ri),C=typeof u=="string"&&V8.test(u),M=m$(u,S);u=M.to;let R=$$(u,{relative:i}),[D,I,P]=Cte(r,y),k=X8(u,{replace:s,state:o,target:c,preventScrollReset:f,relative:i,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:E});function U(V){e&&e(V),V.defaultPrevented||k(V)}let B=T.createElement("a",{...y,...P,href:M.absoluteURL||R,onClick:M.isExternal||a?e:U,ref:Dte(w,I),target:c,"data-discover":!C&&n==="render"?"true":void 0});return D&&!C?T.createElement(T.Fragment,null,B,T.createElement(Zk,{page:R})):B});tI.displayName="Link";var W8=T.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:o,children:c,...u},f){let h=Cv(s,{relative:u.relative}),g=ma(),y=T.useContext(Yc),{navigator:w,basename:S}=T.useContext(Ri),E=y!=null&&Z8(h)&&o===!0,C=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,M=g.pathname,R=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(M=M.toLowerCase(),R=R?R.toLowerCase():null,C=C.toLowerCase()),R&&S&&(R=mr(R,S)||R);const D=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let I=M===C||!i&&M.startsWith(C)&&M.charAt(D)==="/",P=R!=null&&(R===C||!i&&R.startsWith(C)&&R.charAt(C.length)==="/"),k={isActive:I,isPending:P,isTransitioning:E},U=I?e:void 0,B;typeof r=="function"?B=r(k):B=[r,I?"active":null,P?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(k):a;return T.createElement(tI,{...u,"aria-current":U,className:B,ref:f,style:V,to:s,viewTransition:o},typeof c=="function"?c(k):c)});W8.displayName="NavLink";var nI=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=w1,action:o,onSubmit:c,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g,...y},w)=>{let{unstable_useTransitions:S}=T.useContext(Ri),E=iI(),C=J8(o,{relative:u}),M=s.toLowerCase()==="get"?"get":"post",R=typeof o=="string"&&V8.test(o),D=I=>{if(c&&c(I),I.defaultPrevented)return;I.preventDefault();let P=I.nativeEvent.submitter,k=(P==null?void 0:P.getAttribute("formmethod"))||s,U=()=>E(P||I.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:a,relative:u,preventScrollReset:f,viewTransition:h,unstable_defaultShouldRevalidate:g});S&&n!==!1?T.startTransition(()=>U()):U()};return T.createElement("form",{ref:w,method:M,action:C,onSubmit:r?c:D,...y,"data-discover":!R&&t==="render"?"true":void 0})});nI.displayName="Form";function Y8({getKey:t,storageKey:e,...n}){let r=T.useContext(Xc),{basename:i}=T.useContext(Ri),a=ma(),s=XA();Q8({getKey:t,storageKey:e});let o=T.useMemo(()=>{if(!r||!t)return null;let u=$R(a,s,i,t);return u!==a.key?u:null},[]);if(!r||r.isSpaMode)return null;let c=((u,f)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let g=JSON.parse(sessionStorage.getItem(u)||"{}")[f||window.history.state.key];typeof g=="number"&&window.scrollTo(0,g)}catch(h){console.error(h),sessionStorage.removeItem(u)}}).toString();return T.createElement("script",{...n,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${c})(${Bd(JSON.stringify(e||zR))}, ${Bd(JSON.stringify(o))})`}})}Y8.displayName="ScrollRestoration";function K8(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n_(t){let e=T.useContext(yl);return Ye(e,K8(t)),e}function rI(t){let e=T.useContext(Yc);return Ye(e,K8(t)),e}function X8(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o,unstable_useTransitions:c}={}){let u=YA(),f=ma(),h=Cv(t,{relative:a});return T.useCallback(g=>{if(Hee(g,e)){g.preventDefault();let y=n!==void 0?n:ci(f)===ci(h),w=()=>u(t,{replace:y,state:r,preventScrollReset:i,relative:a,viewTransition:s,unstable_defaultShouldRevalidate:o});c?T.startTransition(()=>w()):w()}},[f,u,h,n,r,e,t,i,a,s,o,c])}function Hte(t){Qt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=T.useRef(dE(t)),n=T.useRef(!1),r=ma(),i=T.useMemo(()=>zee(r.search,n.current?null:e.current),[r.search]),a=YA(),s=T.useCallback((o,c)=>{const u=dE(typeof o=="function"?o(new URLSearchParams(i)):o);n.current=!0,a("?"+u,c)},[a,i]);return[i,s]}var zte=0,$te=()=>`__${String(++zte)}__`;function iI(){let{router:t}=n_("useSubmit"),{basename:e}=T.useContext(Ri),n=hee(),r=t.fetch,i=t.navigate;return T.useCallback(async(a,s={})=>{let{action:o,method:c,encType:u,formData:f,body:h}=qee(a,e);if(s.navigate===!1){let g=s.fetcherKey||$te();await r(g,n,s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,flushSync:s.flushSync})}else await i(s.action||o,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:f,body:h,formMethod:s.method||c,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,e,n])}function J8(t,{relative:e}={}){let{basename:n}=T.useContext(Ri),r=T.useContext(pa);Ye(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Cv(t||".",{relative:e})},s=ma();if(t==null){a.search=s.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(h=>h).forEach(h=>o.append("index",h));let f=o.toString();a.search=f?`?${f}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:dl([n,a.pathname])),ci(a)}function Gte({key:t}={}){var I;let{router:e}=n_("useFetcher"),n=rI("useFetcher"),r=T.useContext(Vx),i=T.useContext(pa),a=(I=i.matches[i.matches.length-1])==null?void 0:I.route.id;Ye(r,"useFetcher must be used inside a FetchersContext"),Ye(i,"useFetcher must be used inside a RouteContext"),Ye(a!=null,'useFetcher can only be used on routes that contain a unique "id"');let s=T.useId(),[o,c]=T.useState(t||s);t&&t!==o&&c(t);let{deleteFetcher:u,getFetcher:f,resetFetcher:h,fetch:g}=e;T.useEffect(()=>(f(o),()=>u(o)),[u,f,o]);let y=T.useCallback(async(P,k)=>{Ye(a,"No routeId available for fetcher.load()"),await g(o,a,P,k)},[o,a,g]),w=iI(),S=T.useCallback(async(P,k)=>{await w(P,{...k,navigate:!1,fetcherKey:o})},[o,w]),E=T.useCallback(P=>h(o,P),[h,o]),C=T.useMemo(()=>{let P=T.forwardRef((k,U)=>T.createElement(nI,{...k,navigate:!1,fetcherKey:o,ref:U}));return P.displayName="fetcher.Form",P},[o]),M=n.fetchers.get(o)||VA,R=r.get(o);return T.useMemo(()=>({Form:C,submit:S,load:y,reset:E,...M,data:R}),[C,S,y,E,M,R])}function qte(){let t=rI("useFetchers");return Array.from(t.fetchers.entries()).map(([e,n])=>({...n,key:e}))}var zR="react-router-scroll-positions",$S={};function $R(t,e,n,r){let i=null;return r&&(n!=="/"?i=r({...t,pathname:mr(t.pathname,n)||t.pathname},e):i=r(t,e)),i==null&&(i=t.key),i}function Q8({getKey:t,storageKey:e}={}){let{router:n}=n_("useScrollRestoration"),{restoreScrollPosition:r,preventScrollReset:i}=rI("useScrollRestoration"),{basename:a}=T.useContext(Ri),s=ma(),o=XA(),c=J$();T.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),Wte(T.useCallback(()=>{if(c.state==="idle"){let u=$R(s,o,a,t);$S[u]=window.scrollY}try{sessionStorage.setItem(e||zR,JSON.stringify($S))}catch(u){Qt(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${u}).`)}window.history.scrollRestoration="auto"},[c.state,t,a,s,o,e])),typeof document<"u"&&(T.useLayoutEffect(()=>{try{let u=sessionStorage.getItem(e||zR);u&&($S=JSON.parse(u))}catch{}},[e]),T.useLayoutEffect(()=>{let u=n==null?void 0:n.enableScrollRestoration($S,()=>window.scrollY,t?(f,h)=>$R(f,h,a,t):void 0);return()=>u&&u()},[n,a,t]),T.useLayoutEffect(()=>{if(r!==!1){if(typeof r=="number"){window.scrollTo(0,r);return}try{if(s.hash){let u=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(u){u.scrollIntoView();return}}}catch{Qt(!1,`"${s.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}i!==!0&&window.scrollTo(0,0)}},[s,r,i]))}function Vte(t,e){let{capture:n}=e||{};T.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("beforeunload",t,r),()=>{window.removeEventListener("beforeunload",t,r)}},[t,n])}function Wte(t,e){let{capture:n}={};T.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function Yte({when:t,message:e}){let n=Z$(t);T.useEffect(()=>{n.state==="blocked"&&(window.confirm(e)?setTimeout(n.proceed,0):n.reset())},[n,e]),T.useEffect(()=>{n.state==="blocked"&&!t&&n.reset()},[n,t])}function Z8(t,{relative:e}={}){let n=T.useContext(qx);Ye(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=n_("useViewTransitionState"),i=Cv(t,{relative:e});if(!n.isTransitioning)return!1;let a=mr(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=mr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mv(i.pathname,s)!=null||mv(i.pathname,a)!=null}function Kte({basename:t,children:e,location:n="/"}){typeof n=="string"&&(n=ts(n));let r="POP",i={pathname:n.pathname||"/",search:n.search||"",hash:n.hash||"",state:n.state!=null?n.state:null,key:n.key||"default"},a=eG();return T.createElement(Xd,{basename:t,children:e,location:i,navigationType:r,navigator:a,static:!0,unstable_useTransitions:!1})}function aI({context:t,router:e,hydrate:n=!0,nonce:r}){Ye(e&&t,"You must provide `router` and `context` to <StaticRouterProvider>");let i={router:e,navigator:eG(),static:!0,staticContext:t,basename:t.basename||"/"},a=new Map,s="";if(n!==!1){let c={loaderData:t.loaderData,actionData:t.actionData,errors:Jte(t.errors)};s=`window.__staticRouterHydrationData = JSON.parse(${Bd(JSON.stringify(JSON.stringify(c)))});`}let{state:o}=i.router;return T.createElement(T.Fragment,null,T.createElement(yl.Provider,{value:i},T.createElement(Yc.Provider,{value:o},T.createElement(Vx.Provider,{value:a},T.createElement(qx.Provider,{value:{isTransitioning:!1}},T.createElement(Xd,{basename:i.basename,location:o.location,navigationType:o.historyAction,navigator:i.navigator,static:i.static,unstable_useTransitions:!1},T.createElement(Xte,{routes:e.routes,future:e.future,state:o})))))),s?T.createElement("script",{suppressHydrationWarning:!0,nonce:r,dangerouslySetInnerHTML:{__html:s}}):null)}function Xte({routes:t,future:e,state:n}){return zk(t,void 0,n,void 0,e)}function Jte(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)Kn(i)?n[r]={...i,__type:"RouteErrorResponse"}:i instanceof Error?n[r]={message:i.message,__type:"Error",...i.name!=="Error"?{__subType:i.name}:{}}:n[r]=i;return n}function eG(){return{createHref:tG,encodeLocation:nG,push(t){throw new Error(`You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(t)})\` somewhere in your app.`)},replace(t){throw new Error(`You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(t)}, { replace: true })\` somewhere in your app.`)},go(t){throw new Error(`You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${t})\` somewhere in your app.`)},back(){throw new Error("You cannot use navigator.back() on the server because it is a stateless environment.")},forward(){throw new Error("You cannot use navigator.forward() on the server because it is a stateless environment.")}}}function Qte(t,e){return _$(t,{...e,mapRouteProperties:vp})}function sI(t,e,n={}){let r={},i=Ud(t,vp,void 0,r),a=e.matches.map(o=>{let c=r[o.route.id]||o.route;return{...o,route:c}}),s=o=>`You cannot use router.${o}() on the server because it is a stateless environment`;return{get basename(){return e.basename},get future(){return{v8_middleware:!1,...n==null?void 0:n.future}},get state(){return{historyAction:"POP",location:e.location,matches:a,loaderData:e.loaderData,actionData:e.actionData,errors:e.errors,initialized:!0,navigation:C0,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",fetchers:new Map,blockers:new Map}},get routes(){return i},get window(){},initialize(){throw s("initialize")},subscribe(){throw s("subscribe")},enableScrollRestoration(){throw s("enableScrollRestoration")},navigate(){throw s("navigate")},fetch(){throw s("fetch")},revalidate(){throw s("revalidate")},createHref:tG,encodeLocation:nG,getFetcher(){return VA},deleteFetcher(){throw s("deleteFetcher")},resetFetcher(){throw s("resetFetcher")},dispose(){throw s("dispose")},getBlocker(){return ju},deleteBlocker(){throw s("deleteBlocker")},patchRoutes(){throw s("patchRoutes")},_internalFetchControllers:new Map,_internalSetRoutes(){throw s("_internalSetRoutes")},_internalSetStateDoNotUseOrYouWillBreakYourApp(){throw s("_internalSetStateDoNotUseOrYouWillBreakYourApp")}}}function tG(t){return typeof t=="string"?t:ci(t)}function nG(t){let e=typeof t=="string"?t:ci(t);e=e.replace(/ $/,"%20");let n=Zte.test(e)?new URL(e):new URL(e,"http://localhost");return{pathname:n.pathname,search:n.search,hash:n.hash}}var Zte=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Js={},X3;function ene(){if(X3)return Js;X3=1,Object.defineProperty(Js,"__esModule",{value:!0}),Js.parseCookie=o,Js.parse=o,Js.stringifyCookie=c,Js.stringifySetCookie=u,Js.serialize=u,Js.parseSetCookie=f,Js.stringifySetCookie=u,Js.serialize=u;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=/^-?\d+$/,a=Object.prototype.toString,s=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function o(E,C){const M=new s,R=E.length;if(R<2)return M;const D=(C==null?void 0:C.decode)||w;let I=0;do{const P=g(E,I,R);if(P===-1)break;const k=h(E,I,R);if(P>k){I=E.lastIndexOf(";",P-1)+1;continue}const U=y(E,I,P);M[U]===void 0&&(M[U]=D(y(E,P+1,k))),I=k+1}while(I<R);return M}function c(E,C){const M=(C==null?void 0:C.encode)||encodeURIComponent,R=[];for(const D of Object.keys(E)){const I=E[D];if(I===void 0)continue;if(!t.test(D))throw new TypeError(`cookie name is invalid: ${D}`);const P=M(I);if(!e.test(P))throw new TypeError(`cookie val is invalid: ${I}`);R.push(`${D}=${P}`)}return R.join("; ")}function u(E,C,M){const R=typeof E=="object"?E:{...M,name:E,value:String(C)},D=typeof C=="object"?C:M,I=(D==null?void 0:D.encode)||encodeURIComponent;if(!t.test(R.name))throw new TypeError(`argument name is invalid: ${R.name}`);const P=R.value?I(R.value):"";if(!e.test(P))throw new TypeError(`argument val is invalid: ${R.value}`);let k=R.name+"="+P;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);k+="; Max-Age="+R.maxAge}if(R.domain){if(!n.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);k+="; Domain="+R.domain}if(R.path){if(!r.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);k+="; Path="+R.path}if(R.expires){if(!S(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);k+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(k+="; HttpOnly"),R.secure&&(k+="; Secure"),R.partitioned&&(k+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return k}function f(E,C){const M=(C==null?void 0:C.decode)||w,R=E.length,D=h(E,0,R),I=g(E,0,D),P=I===-1?{name:"",value:M(y(E,0,D))}:{name:y(E,0,I),value:M(y(E,I+1,D))};let k=D+1;for(;k<R;){const U=h(E,k,R),B=g(E,k,U),V=B===-1?y(E,k,U):y(E,k,B),H=B===-1?void 0:y(E,B+1,U);switch(V.toLowerCase()){case"httponly":P.httpOnly=!0;break;case"secure":P.secure=!0;break;case"partitioned":P.partitioned=!0;break;case"domain":P.domain=H;break;case"path":P.path=H;break;case"max-age":H&&i.test(H)&&(P.maxAge=Number(H));break;case"expires":if(!H)break;const G=new Date(H);Number.isFinite(G.valueOf())&&(P.expires=G);break;case"priority":if(!H)break;const Q=H.toLowerCase();(Q==="low"||Q==="medium"||Q==="high")&&(P.priority=Q);break;case"samesite":if(!H)break;const W=H.toLowerCase();(W==="lax"||W==="strict"||W==="none")&&(P.sameSite=W);break}k=U+1}return P}function h(E,C,M){const R=E.indexOf(";",C);return R===-1?M:R}function g(E,C,M){const R=E.indexOf("=",C);return R<M?R:-1}function y(E,C,M){let R=C,D=M;do{const I=E.charCodeAt(R);if(I!==32&&I!==9)break}while(++R<D);for(;D>R;){const I=E.charCodeAt(D-1);if(I!==32&&I!==9)break;D--}return E.slice(R,D)}function w(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function S(E){return a.call(E)==="[object Date]"}return Js}var J3=ene(),rm={exports:{}},Q3;function tne(){if(Q3)return rm.exports;Q3=1;var t={decodeValues:!0,map:!1,silent:!1};function e(c){return typeof c!="string"||c in{}}function n(){return Object.create(null)}function r(c){return typeof c=="string"&&!!c.trim()}function i(c,u){var f=c.split(";").filter(r),h=f.shift(),g=a(h),y=g.name,w=g.value;if(u=u?Object.assign({},t,u):t,e(y))return null;try{w=u.decodeValues?decodeURIComponent(w):w}catch(E){console.error("set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.",E)}var S=n();return S.name=y,S.value=w,f.forEach(function(E){var C=E.split("="),M=C.shift().trimLeft().toLowerCase();if(!e(M)){var R=C.join("=");if(M==="expires")S.expires=new Date(R);else if(M==="max-age"){var D=parseInt(R,10);Number.isNaN(D)||(S.maxAge=D)}else M==="secure"?S.secure=!0:M==="httponly"?S.httpOnly=!0:M==="samesite"?S.sameSite=R:M==="partitioned"?S.partitioned=!0:M&&(S[M]=R)}}),S}function a(c){var u="",f="",h=c.split("=");return h.length>1?(u=h.shift(),f=h.join("=")):f=c,{name:u,value:f}}function s(c,u){if(u=u?Object.assign({},t,u):t,!c)return u.map?n():[];if(c.headers)if(typeof c.headers.getSetCookie=="function")c=c.headers.getSetCookie();else if(c.headers["set-cookie"])c=c.headers["set-cookie"];else{var f=c.headers[Object.keys(c.headers).find(function(g){return g.toLowerCase()==="set-cookie"})];!f&&c.headers.cookie&&!u.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),c=f}if(Array.isArray(c)||(c=[c]),u.map){var h=n();return c.filter(r).reduce(function(g,y){var w=i(y,u);return w&&!e(w.name)&&(g[w.name]=w),g},h)}else return c.filter(r).map(function(g){return i(g,u)}).filter(Boolean)}function o(c){if(Array.isArray(c))return c;if(typeof c!="string")return[];var u=[],f=0,h,g,y,w,S;function E(){for(;f<c.length&&/\s/.test(c.charAt(f));)f+=1;return f<c.length}function C(){return g=c.charAt(f),g!=="="&&g!==";"&&g!==","}for(;f<c.length;){for(h=f,S=!1;E();)if(g=c.charAt(f),g===","){for(y=f,f+=1,E(),w=f;f<c.length&&C();)f+=1;f<c.length&&c.charAt(f)==="="?(S=!0,f=w,u.push(c.substring(h,y)),h=f):f=y+1}else f+=1;(!S||f>=c.length)&&u.push(c.substring(h,c.length))}return u}return rm.exports=s,rm.exports.parse=s,rm.exports.parseString=i,rm.exports.splitCookiesString=o,rm.exports}var nne=tne(),MN={};function rne({context:t,url:e,nonce:n}){typeof e=="string"&&(e=new URL(e));let{manifest:r,routeModules:i,criticalCss:a,serverHandoffString:s}=t,o=L8(r.routes,i,t.future,t.isSpaMode);t.staticHandlerContext.loaderData={...t.staticHandlerContext.loaderData};for(let u of t.staticHandlerContext.matches){let f=u.route.id,h=i[f],g=t.manifest.routes[f];h&&g&&Xx(f,h.clientLoader,g.hasLoader,t.isSpaMode)&&(h.HydrateFallback||!g.hasLoader)&&delete t.staticHandlerContext.loaderData[f]}let c=sI(o,t.staticHandlerContext);return T.createElement(T.Fragment,null,T.createElement(Xc.Provider,{value:{manifest:r,routeModules:i,criticalCss:a,serverHandoffString:s,future:t.future,ssr:t.ssr,isSpaMode:t.isSpaMode,routeDiscovery:t.routeDiscovery,serializeError:t.serializeError,renderMeta:t.renderMeta}},T.createElement(eI,{location:c.state.location},T.createElement(aI,{router:c,context:t.staticHandlerContext,hydrate:!1}))),t.serverHandoffStream?T.createElement(T.Suspense,null,T.createElement(C8,{context:t,identifier:0,reader:t.serverHandoffStream.getReader(),textDecoder:new TextDecoder,nonce:n})):null)}function ine(t,e){return function({initialEntries:r,initialIndex:i,hydrationData:a,future:s}){let o=T.useRef(),c=T.useRef();if(o.current==null){c.current={future:{unstable_subResourceIntegrity:(s==null?void 0:s.unstable_subResourceIntegrity)===!0,v8_middleware:(s==null?void 0:s.v8_middleware)===!0,unstable_trailingSlashAwareDataRequests:(s==null?void 0:s.unstable_trailingSlashAwareDataRequests)===!0},manifest:{routes:{},entry:{imports:[],module:""},url:"",version:""},routeModules:{},ssr:!1,isSpaMode:!1,routeDiscovery:{mode:"lazy",manifestPath:"/__manifest"}};let u=rG(Ud(t,f=>f),e!==void 0?e:s!=null&&s.v8_middleware?new cl:{},c.current.manifest,c.current.routeModules);o.current=t8(u,{initialEntries:r,initialIndex:i,hydrationData:a})}return T.createElement(Xc.Provider,{value:c.current},T.createElement(n8,{router:o.current}))}}function rG(t,e,n,r,i){return t.map(a=>{if(!a.id)throw new Error("Expected a route.id in react-router processRoutes() function");let s={id:a.id,path:a.path,index:a.index,Component:a.Component?s8(a.Component):void 0,HydrateFallback:a.HydrateFallback?l8(a.HydrateFallback):void 0,ErrorBoundary:a.ErrorBoundary?u8(a.ErrorBoundary):void 0,action:a.action?c=>a.action({...c,context:e}):void 0,loader:a.loader?c=>a.loader({...c,context:e}):void 0,middleware:a.middleware?a.middleware.map(c=>(...u)=>c({...u[0],context:e},u[1])):void 0,handle:a.handle,shouldRevalidate:a.shouldRevalidate},o={id:a.id,path:a.path,index:a.index,parentId:i,hasAction:a.action!=null,hasLoader:a.loader!=null,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:a.ErrorBoundary!=null,module:"build/stub-path-to-module.js",clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0};return n.routes[s.id]=o,r[a.id]={default:s.Component||r8,ErrorBoundary:s.ErrorBoundary||void 0,handle:a.handle,links:a.links,meta:a.meta,shouldRevalidate:a.shouldRevalidate},a.children&&(s.children=rG(a.children,e,n,r,s.id)),s})}var oI=new TextEncoder,ane=async(t,e)=>{let n=oI.encode(t),r=await iG(e,["sign"]),i=await crypto.subtle.sign("HMAC",r,n),a=btoa(String.fromCharCode(...new Uint8Array(i))).replace(/=+$/,"");return t+"."+a},sne=async(t,e)=>{let n=t.lastIndexOf("."),r=t.slice(0,n),i=t.slice(n+1),a=oI.encode(r),s=await iG(e,["verify"]);try{let o=one(atob(i));return await crypto.subtle.verify("HMAC",s,o,a)?r:!1}catch{return!1}},iG=async(t,e)=>crypto.subtle.importKey("raw",oI.encode(t),{name:"HMAC",hash:"SHA-256"},!1,e);function one(t){let e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var lI=(t,e={})=>{let{secrets:n=[],...r}={path:"/",sameSite:"lax",...e};return hne(t,r.expires),{get name(){return t},get isSigned(){return n.length>0},get expires(){return typeof r.maxAge<"u"?new Date(Date.now()+r.maxAge*1e3):r.expires},async parse(i,a){if(!i)return null;let s=J3.parse(i,{...r,...a});if(t in s){let o=s[t];return typeof o=="string"&&o!==""?await cne(o,n):""}else return null},async serialize(i,a){return J3.serialize(t,i===""?"":await lne(i,n),{...r,...a})}}},cI=t=>t!=null&&typeof t.name=="string"&&typeof t.isSigned=="boolean"&&typeof t.parse=="function"&&typeof t.serialize=="function";async function lne(t,e){let n=une(t);return e.length>0&&(n=await ane(n,e[0])),n}async function cne(t,e){if(e.length>0){for(let n of e){let r=await sne(t,n);if(r!==!1)return Z3(r)}return null}return Z3(t)}function une(t){return btoa(fne(encodeURIComponent(JSON.stringify(t))))}function Z3(t){try{return JSON.parse(decodeURIComponent(dne(atob(t))))}catch{return{}}}function dne(t){let e=t.toString(),n="",r=0,i,a;for(;r<e.length;)i=e.charAt(r++),/[\w*+\-./@]/.exec(i)?n+=i:(a=i.charCodeAt(0),a<256?n+="%"+e5(a,2):n+="%u"+e5(a,4).toUpperCase());return n}function e5(t,e){let n=t.toString(16);for(;n.length<e;)n="0"+n;return n}function fne(t){let e=t.toString(),n="",r=0,i,a;for(;r<e.length;){if(i=e.charAt(r++),i==="%"){if(e.charAt(r)==="u"){if(a=e.slice(r+1,r+5),/^[\da-f]{4}$/i.exec(a)){n+=String.fromCharCode(parseInt(a,16)),r+=5;continue}}else if(a=e.slice(r,r+2),/^[\da-f]{2}$/i.exec(a)){n+=String.fromCharCode(parseInt(a,16)),r+=2;continue}}n+=i}return n}function hne(t,e){I0(!e,`The "${t}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}function pne(t){return Object.keys(t).reduce((e,n)=>{let r=t[n];return r&&(e[n]=r.module),e},{})}var aG=(t=>(t.Development="development",t.Production="production",t.Test="test",t))(aG||{});function mne(t){return t==="development"||t==="production"||t==="test"}function r_(t,e){if(t instanceof Error&&e!=="development"){let n=new Error("Unexpected Server Error");return n.stack=void 0,n}return t}function pE(t,e){return Object.entries(t).reduce((n,[r,i])=>Object.assign(n,{[r]:r_(i,e)}),{})}function sG(t,e){let n=r_(t,e);return{message:n.message,stack:n.stack}}function t5(t,e){if(!t)return null;let n=Object.entries(t),r={};for(let[i,a]of n)if(Kn(a))r[i]={...a,__type:"RouteErrorResponse"};else if(a instanceof Error){let s=r_(a,e);r[i]={message:s.message,stack:s.stack,__type:"Error",...s.name!=="Error"?{__subType:s.name}:{}}}else r[i]=a;return r}function GR(t,e,n){let r=fa(t,e,n);return r?r.map(i=>({params:i.params,pathname:i.pathname,route:i.route})):null}async function n5(t,e){let n=await t({request:vne(gne(e.request)),params:e.params,context:e.context,unstable_pattern:e.unstable_pattern});if(jd(n)&&n.init&&n.init.status&&WA(n.init.status))throw new Response(null,n.init);return n}function gne(t){let e=new URL(t.url),n=e.searchParams.getAll("index");e.searchParams.delete("index");let r=[];for(let a of n)a&&r.push(a);for(let a of r)e.searchParams.append("index",a);let i={method:t.method,body:t.body,headers:t.headers,signal:t.signal};return i.body&&(i.duplex="half"),new Request(e.href,i)}function vne(t){let e=new URL(t.url);e.searchParams.delete("_routes");let n={method:t.method,body:t.body,headers:t.headers,signal:t.signal};return n.body&&(n.duplex="half"),new Request(e.href,n)}function A1(t,e){if(t===!1||t===null||typeof t>"u")throw console.error("The following error is a bug in React Router; please open an issue! https://github.com/remix-run/react-router/issues/new/choose"),new Error(e)}var oG="__reactRouterDevServerHooks";function yne(t){globalThis[oG]=t}function PN(){return globalThis[oG]}function lG(t,e){if(typeof process<"u")try{if((MN==null?void 0:MN.IS_RR_BUILD_REQUEST)==="yes")return t.headers.get(e)}catch{}return null}function cG(t){let e={};return Object.values(t).forEach(n=>{if(n){let r=n.parentId||"";e[r]||(e[r]=[]),e[r].push(n)}}),e}function uG(t,e="",n=cG(t)){return(n[e]||[]).map(r=>({...r,children:uG(t,r.id,n)}))}function dG(t,e,n="",r=cG(t)){return(r[n]||[]).map(i=>{let a={hasErrorBoundary:i.id==="root"||i.module.ErrorBoundary!=null,id:i.id,path:i.path,middleware:i.module.middleware,loader:i.module.loader?async s=>{let o=lG(s.request,"X-React-Router-Prerender-Data");if(o!=null){let u=o&&decodeURI(o);A1(u,"Missing prerendered data for route");let f=new TextEncoder().encode(u),h=new ReadableStream({start(w){w.enqueue(f),w.close()}}),y=(await e_(h,global)).value;if(y&&Oc in y){let w=y[Oc],S={status:w.status};throw w.reload?f$(w.redirect,S):w.replace?h$(w.redirect,S):$x(w.redirect,S)}else{A1(y&&i.id in y,"Unable to decode prerendered data");let w=y[i.id];return A1("data"in w,"Unable to process prerendered data"),w.data}}return await n5(i.module.loader,s)}:void 0,action:i.module.action?s=>n5(i.module.action,s):void 0,handle:i.module.handle};return i.index?{index:!0,...a}:{caseSensitive:i.caseSensitive,children:dG(t,e,i.id,r),...a}})}function r5(t){return Bd(JSON.stringify(t))}function uI(t,e){return bne(t,n=>{let r=e.routes[n.route.id];return A1(r,`Route with id "${n.route.id}" not found in build`),r.module.headers})}function bne(t,e,n){let r=t.errors?t.matches.findIndex(o=>t.errors[o.route.id]):-1,i=r>=0?t.matches.slice(0,r+1):t.matches,a;if(r>=0){let{actionHeaders:o,actionData:c,loaderHeaders:u,loaderData:f}=t;t.matches.slice(r).some(h=>{let g=h.route.id;return o[g]&&(!c||!c.hasOwnProperty(g))?a=o[g]:u[g]&&!f.hasOwnProperty(g)&&(a=u[g]),a!=null})}const s=new Headers(n);return i.reduce((o,c,u)=>{let{id:f}=c.route,h=t.loaderHeaders[f]||new Headers,g=t.actionHeaders[f]||new Headers,y=a!=null&&u===i.length-1,w=y&&a!==h&&a!==g,S=e(c);if(S==null){let C=new Headers(o);return w&&Cf(a,C),Cf(g,C),Cf(h,C),C}let E=new Headers(typeof S=="function"?S({loaderHeaders:h,parentHeaders:o,actionHeaders:g,errorHeaders:y?a:void 0}):S);return w&&Cf(a,E),Cf(g,E),Cf(h,E),Cf(o,E),E},new Headers(s))}function Cf(t,e){let n=t.get("Set-Cookie");if(n){let r=nne.splitCookiesString(n),i=new Set(e.getSetCookie());r.forEach(a=>{i.has(a)||e.append("Set-Cookie",a)})}}function fG(t,e){let n=t.get("origin"),r=typeof n=="string"&&n!=="null"?new URL(n).host:n,i=Sne(t);if(r&&(!i||r!==i.value)&&!wne(r,e))throw i?new Error(`${i.type} header does not match \`origin\` header from a forwarded action request. Aborting the action.`):new Error("`x-forwarded-host` or `host` headers are not provided. One of these is needed to compare the `origin` header from a forwarded action request. Aborting the action.")}function xne(t,e){const n=t.split("."),r=e.split(".");if(r.length<1||n.length<r.length||r.length===1&&(r[0]==="*"||r[0]==="**"))return!1;for(;r.length;){const i=r.pop(),a=n.pop();switch(i){case"":return!1;case"*":{if(a)continue;return!1}case"**":return r.length>0?!1:a!==void 0;case void 0:default:if(a!==i)return!1}}return n.length===0}function wne(t,e=[]){return e.some(n=>n&&(n===t||xne(t,n)))}function Sne(t){var i;let e=t.get("x-forwarded-host"),n=(i=e==null?void 0:e.split(",")[0])==null?void 0:i.trim(),r=t.get("host");return n?{type:"x-forwarded-host",value:n}:r?{type:"host",value:r}:void 0}var hG=new Set([..._8,304]);async function Ene(t,e,n,r,i,a,s){try{fG(r.headers,Array.isArray(t.allowedActionOrigins)?t.allowedActionOrigins:[]);let f=new Request(i,{method:r.method,body:r.body,headers:r.headers,signal:r.signal,...r.body?{duplex:"half"}:void 0}),h=await n.query(f,{requestContext:a,skipLoaderErrorBubbling:!0,skipRevalidation:!0,generateMiddlewareResponse:t.future.v8_middleware?async g=>{try{let y=await g(f);return o(y)}catch(y){return c(y)}}:void 0});return o(h)}catch(f){return c(f)}function o(f){return Tn(f)?f:u(f)}function c(f){return s(f),O0(r,t,e,{result:{error:f},headers:new Headers,status:500})}function u(f){let h=uI(f,t);if(WA(f.statusCode)&&h.has("Location"))return new Response(null,{status:f.statusCode,headers:h});f.errors&&(Object.values(f.errors).forEach(y=>{(!Kn(y)||y.error)&&s(y)}),f.errors=pE(f.errors,e));let g;return f.errors?g={error:Object.values(f.errors)[0]}:g={data:Object.values(f.actionData||{})[0]},O0(r,t,e,{result:g,headers:h,status:f.statusCode})}}async function Ane(t,e,n,r,i,a,s){let o=new URL(r.url).searchParams.get("_routes"),c=o?new Set(o.split(",")):null;try{let g=new Request(i,{headers:r.headers,signal:r.signal}),y=await n.query(g,{requestContext:a,filterMatchesToLoad:w=>!c||c.has(w.route.id),skipLoaderErrorBubbling:!0,generateMiddlewareResponse:t.future.v8_middleware?async w=>{try{let S=await w(g);return u(S)}catch(S){return f(S)}}:void 0});return u(y)}catch(g){return f(g)}function u(g){return Tn(g)?g:h(g)}function f(g){return s(g),O0(r,t,e,{result:{error:g},headers:new Headers,status:500})}function h(g){let y=uI(g,t);if(WA(g.statusCode)&&y.has("Location"))return new Response(null,{status:g.statusCode,headers:y});g.errors&&(Object.values(g.errors).forEach(E=>{(!Kn(E)||E.error)&&s(E)}),g.errors=pE(g.errors,e));let w={},S=new Set(g.matches.filter(E=>c?c.has(E.route.id):E.route.loader!=null).map(E=>E.route.id));if(g.errors)for(let[E,C]of Object.entries(g.errors))w[E]={error:C};for(let[E,C]of Object.entries(g.loaderData))!(E in w)&&S.has(E)&&(w[E]={data:C});return O0(r,t,e,{result:w,headers:y,status:g.statusCode})}}function O0(t,e,n,{result:r,headers:i,status:a}){let s=new Headers(i);return s.set("X-Remix-Response","yes"),hG.has(a)?new Response(null,{status:a,headers:s}):(s.set("Content-Type","text/x-script"),s.delete("Content-Length"),new Response(qR(r,t.signal,e.entry.module.streamTimeout,n),{status:a||200,headers:s}))}function i5(t,e,n,r){let i=_ne(t.status,t.headers,n.basename),a=new Headers(t.headers);return a.delete("Location"),a.set("Content-Type","text/x-script"),O0(e,n,r,{result:e.method==="GET"?{[Oc]:i}:i,headers:a,status:Vk})}function _ne(t,e,n){let r=e.get("Location");return n&&(r=mr(r,n)||r),{redirect:r,status:t,revalidate:e.has("X-Remix-Revalidate")||e.has("Set-Cookie"),reload:e.has("X-Remix-Reload-Document"),replace:e.has("X-Remix-Replace")}}function qR(t,e,n,r){let i=new AbortController,a=setTimeout(()=>i.abort(new Error("Server Timeout")),typeof n=="number"?n:4950);return e.addEventListener("abort",()=>clearTimeout(a)),Zee(t,{signal:i.signal,plugins:[s=>{if(s instanceof Error){let{name:o,message:c,stack:u}=r==="production"?r_(s,r):s;return["SanitizedError",o,c,u]}if(s instanceof Ni){let{data:o,status:c,statusText:u}=s;return["ErrorResponse",o,c,u]}if(s&&typeof s=="object"&&Oc in s)return["SingleFetchRedirect",s[Oc]]}],postPlugins:[s=>{if(s&&typeof s=="object")return["SingleFetchClassInstance",Object.fromEntries(Object.entries(s))]},()=>["SingleFetchFallback"]]})}function a5(t,e){let n=uG(t.routes),r=dG(t.routes,t.future),i=mne(e)?e:"production",a=_$(r,{basename:t.basename,unstable_instrumentations:t.entry.module.unstable_instrumentations}),s=t.entry.module.handleError||((c,{request:u})=>{i!=="test"&&!u.signal.aborted&&console.error(Kn(c)&&c.error?c.error:c)}),o=async(c,u)=>{var D,I,P;let f={},h,g=k=>{var U,B;e==="development"&&((B=(U=PN())==null?void 0:U.processRequestError)==null||B.call(U,k)),s(k,{context:h,params:f,request:c})};if(t.future.v8_middleware){if(u&&!(u instanceof cl)){let k=new Error("Invalid `context` value provided to `handleRequest`. When middleware is enabled you must return an instance of `RouterContextProvider` from your `getLoadContext` function.");return g(k),mE(k,i)}h=u||new cl}else h=u||{};let y=new URL(c.url),w=t.basename||"/",S=y.pathname;t.future.unstable_trailingSlashAwareDataRequests?S.endsWith("/_.data")?S=S.replace(/_.data$/,""):S=S.replace(/\.data$/,""):(mr(S,w)==="/_root.data"?S=w:S.endsWith(".data")&&(S=S.replace(/\.data$/,"")),mr(S,w)!=="/"&&S.endsWith("/")&&(S=S.slice(0,-1)));let E=lG(c,"X-React-Router-SPA-Mode")==="yes";if(!t.ssr){let k=decodeURI(S);if(w!=="/"){let U=mr(k,w);if(U==null)return s(new Ni(404,"Not Found",`Refusing to prerender the \`${k}\` path because it does not start with the basename \`${w}\``),{context:h,params:f,request:c}),new Response("Not Found",{status:404,statusText:"Not Found"});k=U}if(t.prerender.length===0)E=!0;else if(!t.prerender.includes(k)&&!t.prerender.includes(k+"/")){if(y.pathname.endsWith(".data"))return s(new Ni(404,"Not Found",`Refusing to SSR the path \`${k}\` because \`ssr:false\` is set and the path is not included in the \`prerender\` config, so in production the path will be a 404.`),{context:h,params:f,request:c}),new Response("Not Found",{status:404,statusText:"Not Found"});E=!0}}let C=B8(t.routeDiscovery.manifestPath,w);if(y.pathname===C)try{return await Tne(t,n,y)}catch(k){return g(k),new Response("Unknown Server Error",{status:500})}let M=GR(n,S,t.basename);M&&M.length>0&&Object.assign(f,M[0].params);let R;if(y.pathname.endsWith(".data")){let k=new URL(c.url);k.pathname=S;let U=GR(n,k.pathname,t.basename);R=await Nne(i,t,a,c,k,h,g),k0(R)&&(R=i5(R,c,t,i)),t.entry.module.handleDataRequest&&(R=await t.entry.module.handleDataRequest(R,{context:h,params:U?U[0].params:{},request:c}),k0(R)&&(R=i5(R,c,t,i)))}else if(!E&&M&&M[M.length-1].route.module.default==null&&M[M.length-1].route.module.ErrorBoundary==null)R=await Mne(i,t,a,M.slice(-1)[0].route.id,c,h,g);else{let{pathname:k}=y,U;t.unstable_getCriticalCss?U=await t.unstable_getCriticalCss({pathname:k}):e==="development"&&((D=PN())!=null&&D.getCriticalCss)&&(U=await((P=(I=PN())==null?void 0:I.getCriticalCss)==null?void 0:P.call(I,k))),R=await Rne(i,t,a,c,h,g,E,U)}return c.method==="HEAD"?new Response(null,{headers:R.headers,status:R.status,statusText:R.statusText}):R};return t.entry.module.unstable_instrumentations&&(o=LZ(o,t.entry.module.unstable_instrumentations.map(c=>c.handler).filter(Boolean))),{routes:n,dataRoutes:r,serverMode:i,staticHandler:a,errorHandler:s,requestHandler:o}}var Cne=(t,e)=>{let n,r,i,a,s,o;return async function(u,f){if(n=typeof t=="function"?await t():t,typeof t=="function"){let h=a5(n,e);r=h.routes,i=h.serverMode,a=h.staticHandler,s=h.errorHandler,o=h.requestHandler}else if(!r||!i||!a||!s||!o){let h=a5(n,e);r=h.routes,i=h.serverMode,a=h.staticHandler,s=h.errorHandler,o=h.requestHandler}return o(u,f)}};async function Tne(t,e,n){if(t.assets.version!==n.searchParams.get("version"))return new Response(null,{status:204,headers:{"X-Remix-Reload-Document":"true"}});let r={};if(n.searchParams.has("paths")){let i=new Set;(n.searchParams.get("paths")||"").split(",").filter(Boolean).forEach(o=>{o.startsWith("/")||(o=`/${o}`);let c=o.split("/").slice(1);c.forEach((u,f)=>{let h=c.slice(0,f+1).join("/");i.add(`/${h}`)})});for(let o of i){let c=GR(e,o,t.basename);if(c)for(let u of c){let f=u.route.id,h=t.assets.routes[f];h&&(r[f]=h)}}return Response.json(r,{headers:{"Cache-Control":"public, max-age=31536000, immutable"}})}return new Response("Invalid Request",{status:400})}async function Nne(t,e,n,r,i,a,s){return r.method!=="GET"?await Ene(e,t,n,r,i,a,s):await Ane(e,t,n,r,i,a,s)}async function Rne(t,e,n,r,i,a,s,o){try{r.method==="POST"&&fG(r.headers,Array.isArray(e.allowedActionOrigins)?e.allowedActionOrigins:[]);let u=await n.query(r,{requestContext:i,generateMiddlewareResponse:e.future.v8_middleware?async f=>{try{let h=await f(r);return Tn(h)||(h=await c(h,s)),h}catch(h){return a(h),new Response(null,{status:500})}}:void 0});return Tn(u)||(u=await c(u,s)),u}catch(u){return a(u),new Response(null,{status:500})}async function c(u,f){let h=uI(u,e);if(hG.has(u.statusCode))return new Response(null,{status:u.statusCode,headers:h});u.errors&&(Object.values(u.errors).forEach(E=>{(!Kn(E)||E.error)&&a(E)}),u.errors=pE(u.errors,t));let g={loaderData:u.loaderData,actionData:u.actionData,errors:t5(u.errors,t)},y={basename:e.basename,future:e.future,routeDiscovery:e.routeDiscovery,ssr:e.ssr,isSpaMode:f},w={manifest:e.assets,routeModules:pne(e.routes),staticHandlerContext:u,criticalCss:o,serverHandoffString:r5({...y,criticalCss:o}),serverHandoffStream:qR(g,r.signal,e.entry.module.streamTimeout,t),renderMeta:{},future:e.future,ssr:e.ssr,routeDiscovery:e.routeDiscovery,isSpaMode:f,serializeError:E=>sG(E,t)},S=e.entry.module.default;try{return await S(r,u.statusCode,h,w,i)}catch(E){a(E);let C=E;if(Tn(E))try{let R=await kne(E);C=new Ni(E.status,E.statusText,R)}catch{}u=C$(n.dataRoutes,u,C),u.errors&&(u.errors=pE(u.errors,t));let M={loaderData:u.loaderData,actionData:u.actionData,errors:t5(u.errors,t)};w={...w,staticHandlerContext:u,serverHandoffString:r5(y),serverHandoffStream:qR(M,r.signal,e.entry.module.streamTimeout,t),renderMeta:{}};try{return await S(r,u.statusCode,h,w,i)}catch(R){return a(R),mE(R,t)}}}}async function Mne(t,e,n,r,i,a,s){try{let u=await n.queryRoute(i,{routeId:r,requestContext:a,generateMiddlewareResponse:e.future.v8_middleware?async f=>{try{let h=await f(i);return o(h)}catch(h){return c(h)}}:void 0});return o(u)}catch(u){return c(u)}function o(u){return Tn(u)?u:typeof u=="string"?new Response(u):Response.json(u)}function c(u){if(Tn(u))return u;if(Kn(u))return s(u),Pne(u,t);if(u instanceof Error&&u.message==="Expected a response from queryRoute"){let f=new Error("Expected a Response to be returned from resource route handler");return s(f),mE(f,t)}return s(u),mE(u,t)}}function Pne(t,e){return Response.json(sG(t.error||new Error("Unexpected Server Error"),e),{status:t.status,statusText:t.statusText})}function mE(t,e){let n="Unexpected Server Error";return e!=="production"&&(n+=`

${String(t)}`),new Response(n,{status:500,headers:{"Content-Type":"text/plain"}})}function kne(t){let e=t.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?t.body==null?null:t.json():t.text()}function kN(t){return`__flash_${t}__`}var dI=(t={},e="")=>{let n=new Map(Object.entries(t));return{get id(){return e},get data(){return Object.fromEntries(n)},has(r){return n.has(r)||n.has(kN(r))},get(r){if(n.has(r))return n.get(r);let i=kN(r);if(n.has(i)){let a=n.get(i);return n.delete(i),a}},set(r,i){n.set(r,i)},flash(r,i){n.set(kN(r),i)},unset(r){n.delete(r)}}},Ine=t=>t!=null&&typeof t.id=="string"&&typeof t.data<"u"&&typeof t.has=="function"&&typeof t.get=="function"&&typeof t.set=="function"&&typeof t.flash=="function"&&typeof t.unset=="function";function pG({cookie:t,createData:e,readData:n,updateData:r,deleteData:i}){let a=cI(t)?t:lI((t==null?void 0:t.name)||"__session",t);return mG(a),{async getSession(s,o){let c=s&&await a.parse(s,o),u=c&&await n(c);return dI(u||{},c||"")},async commitSession(s,o){let{id:c,data:u}=s,f=(o==null?void 0:o.maxAge)!=null?new Date(Date.now()+o.maxAge*1e3):(o==null?void 0:o.expires)!=null?o.expires:a.expires;return c?await r(c,u,f):c=await e(u,f),a.serialize(c,o)},async destroySession(s,o){return await i(s.id),a.serialize("",{...o,maxAge:void 0,expires:new Date(0)})}}}function mG(t){I0(t.isSigned,`The "${t.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://reactrouter.com/explanation/sessions-and-cookies#signing-cookies for more information.`)}function Dne({cookie:t}={}){let e=cI(t)?t:lI((t==null?void 0:t.name)||"__session",t);return mG(e),{async getSession(n,r){return dI(n&&await e.parse(n,r)||{})},async commitSession(n,r){let i=await e.serialize(n.data,r);if(i.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+i.length);return i},async destroySession(n,r){return e.serialize("",{...r,maxAge:void 0,expires:new Date(0)})}}}function Lne({cookie:t}={}){let e=new Map;return pG({cookie:t,async createData(n,r){let i=Math.random().toString(36).substring(2,10);return e.set(i,{data:n,expires:r}),i},async readData(n){if(e.has(n)){let{data:r,expires:i}=e.get(n);if(!i||i>new Date)return r;i&&e.delete(n)}return null},async updateData(n,r,i){e.set(n,{data:r,expires:i})},async deleteData(n){e.delete(n)}})}function One(t,...e){let n=e[0],r=jne(t).replace(/\/:([\w-]+)(\?)?/g,(i,a,s)=>{const o=s===void 0,c=n==null?void 0:n[a];if(o&&c===void 0)throw new Error(`Path '${t}' requires param '${a}' but it was not provided`);return c===void 0?"":"/"+c});if(t.endsWith("*")){const i=n==null?void 0:n["*"];i!==void 0&&(r+="/"+i)}return r||"/"}function jne(t){let e=t.length-1,n=t[e];if(n!=="*"&&n!=="/")return t;for(e--;e>=0&&t[e]==="/";e--);return t.slice(0,e+1)}var VR=new TextEncoder,s5="</body></html>";function o5(t){let e=new TextDecoder,n,r=new Promise(c=>n=c),i=!1,a=[],s=null;function o(c){for(let u of a){let f=e.decode(u,{stream:!0});f.endsWith(s5)&&(f=f.slice(0,-s5.length)),c.enqueue(VR.encode(f))}a.length=0,s=null}return new TransformStream({transform(c,u){a.push(c),!s&&(s=setTimeout(async()=>{o(u),i||(i=!0,Fne(t,u).catch(f=>u.error(f)).then(n))},0))},async flush(c){await r,s&&(clearTimeout(s),o(c)),c.enqueue(VR.encode("</body></html>"))}})}async function Fne(t,e){let n=new TextDecoder("utf-8",{fatal:!0});const r=t.getReader();try{let a;for(;(a=await r.read())&&!a.done;){const s=a.value;try{IN(JSON.stringify(n.decode(s,{stream:!0})),e)}catch{let c=JSON.stringify(btoa(String.fromCodePoint(...s)));IN(`Uint8Array.from(atob(${c}), m => m.codePointAt(0))`,e)}}}finally{r.releaseLock()}let i=n.decode();i.length&&IN(JSON.stringify(i),e)}function IN(t,e){e.enqueue(VR.encode(`<script>${Une(`(self.__FLIGHT_DATA||=[]).push(${t})`)}<\/script>`))}function Une(t){return t.replace(/<!--/g,"<\\!--").replace(/<\/(script)/gi,"</\\$1")}var Bne=class extends ir.Component{constructor(t){super(t),this.state={error:null,location:t.location}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location?{error:null,location:t.location}:{error:e.error,location:e.location}}render(){return this.state.error?ir.createElement(gG,{error:this.state.error,renderAppShell:!0}):this.props.children}};function l5({renderAppShell:t,title:e,children:n}){return t?ir.createElement("html",{lang:"en"},ir.createElement("head",null,ir.createElement("meta",{charSet:"utf-8"}),ir.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),ir.createElement("title",null,e)),ir.createElement("body",null,ir.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},n))):n}function gG({error:t,renderAppShell:e}){console.error(t);let n=ir.createElement("script",{dangerouslySetInnerHTML:{__html:`
        console.log(
          " Hey developer . You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."
        );
      `}});if(Kn(t))return ir.createElement(l5,{renderAppShell:e,title:"Unhandled Thrown Response!"},ir.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),n);let r;if(t instanceof Error)r=t;else{let i=t==null?"Unknown Error":typeof t=="object"&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(i)}return ir.createElement(l5,{renderAppShell:e,title:"Application Error!"},ir.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),ir.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),n)}function Hne({hasRootLayout:t}){let e=Wx();if(t===void 0)throw new Error("Missing 'hasRootLayout' prop");return ir.createElement(gG,{renderAppShell:!t,error:e})}function zne(t){const e={};for(const n of t.matches)$ne(e,n);return e}function $ne(t,e){e=Array.isArray(e)?e:[e];for(const n of e)t[n.id]={links:n.links,meta:n.meta,default:Gne}}var Gne=()=>null,qne="use",c5=Dk[qne];function Vne(t){if(c5)return c5(t);throw new Error("React Router v7 requires React 19+ for RSC features.")}async function Wne({request:t,serverResponse:e,createFromReadableStream:n,renderHTML:r,hydrate:i=!0}){const a=new URL(t.url);if(Kne(a)||Xne(a)||t.headers.has("rsc-action-id")||e.headers.get("React-Router-Resource")==="true")return e;if(!e.body)throw new Error("Missing body in server response");const c=e.clone();let u=null;i&&(u=e.clone());const f=e.body;let h,g=[];const y=()=>h?new ReadableStream({start(M){h.forEach(R=>M.enqueue(R)),g.push(M)}}):(h=[],f.pipeThrough(new TransformStream({transform(M,R){h.push(M),R.enqueue(M),g.forEach(D=>D.enqueue(M))},flush(){g.forEach(M=>M.close()),g=[]}})));let w=null;const S=()=>{const M=Promise.resolve(n(y()));return Object.defineProperties(M,{_deepestRenderedBoundaryId:{get(){return w},set(R){w=R}},formState:{get(){return M.then(R=>R.type==="render"?R.formState:void 0)}}})};let E,C;try{if(!c.body)throw new Error("Failed to clone server response");const M=await n(c.body);if(e.status===Vk&&M.type==="redirect"){const V=new Headers(e.headers);return V.delete("Content-Encoding"),V.delete("Content-Length"),V.delete("Content-Type"),V.delete("X-Remix-Response"),V.set("Location",M.location),new Response((u==null?void 0:u.body)||"",{headers:V,status:M.status,statusText:e.statusText})}let R=new Headers,D=e.status,I=e.statusText,P=await r(S,{onError(V){if(typeof V=="object"&&V&&"digest"in V&&typeof V.digest=="string"){if(E=LR(V.digest),E)return V.digest;let H=OR(V.digest);if(H)return C=H,D=H.status,I=H.statusText,V.digest}},onHeaders(V){for(const[H,G]of V)R.append(H,G)}});const k=new Headers(R);for(const[V,H]of e.headers)k.append(V,H);if(k.set("Content-Type","text/html; charset=utf-8"),E)return k.set("Location",E.location),new Response(P,{status:E.status,headers:k});const U=new TransformStream({flush(V){E&&V.enqueue(new TextEncoder().encode(`<meta http-equiv="refresh" content="0;url=${Bd(E.location)}"/>`))}});if(!i)return new Response(P.pipeThrough(U),{status:D,statusText:I,headers:k});if(!(u!=null&&u.body))throw new Error("Failed to clone server response");const B=P.pipeThrough(o5(u.body)).pipeThrough(U);return new Response(B,{status:D,statusText:I,headers:k})}catch(M){if(M instanceof Response)return M;if(E)return new Response(`Redirect: ${E.location}`,{status:E.status,headers:{Location:E.location}});try{M=C??M;let[R,D]=Kn(M)?[M.status,M.statusText]:[500,""],I,P=new Headers;const k=await r(()=>{const G=Promise.resolve(n(y())).then(Q=>Object.assign(Q,{status:R,errors:w?{[w]:M}:{}}));return Object.defineProperties(G,{_deepestRenderedBoundaryId:{get(){return w},set(Q){w=Q}},formState:{get(){return G.then(Q=>Q.type==="render"?Q.formState:void 0)}}})},{onError(H){if(typeof H=="object"&&H&&"digest"in H&&typeof H.digest=="string"){if(I=LR(H.digest),I)return H.digest;let G=OR(H.digest);if(G)return R=G.status,D=G.statusText,H.digest}},onHeaders(H){for(const[G,Q]of H)P.append(G,Q)}}),U=new Headers(P);for(const[H,G]of e.headers)U.append(H,G);if(U.set("Content-Type","text/html; charset=utf-8"),I)return U.set("Location",I.location),new Response(k,{status:I.status,headers:U});const B=new TransformStream({flush(H){I&&H.enqueue(new TextEncoder().encode(`<meta http-equiv="refresh" content="0;url=${Bd(I.location)}"/>`))}});if(!i)return new Response(k.pipeThrough(B),{status:R,statusText:D,headers:U});if(!(u!=null&&u.body))throw new Error("Failed to clone server response");const V=k.pipeThrough(o5(u.body)).pipeThrough(B);return new Response(V,{status:R,statusText:D,headers:U})}catch{}throw M}}function Yne({getPayload:t}){const e=t(),n=Vne(e);if(n.type==="redirect")throw new Response(null,{status:n.status,headers:{Location:n.location}});if(n.type!=="render")return null;let r={...n.loaderData};for(const o of n.matches)Xx(o.id,o.clientLoader,o.hasLoader,!1)&&(o.hydrateFallbackElement||!o.hasLoader)&&delete r[o.id];const i={get _deepestRenderedBoundaryId(){return e._deepestRenderedBoundaryId??null},set _deepestRenderedBoundaryId(o){e._deepestRenderedBoundaryId=o},actionData:n.actionData,actionHeaders:{},basename:n.basename,errors:n.errors,loaderData:r,loaderHeaders:{},location:n.location,statusCode:200,matches:n.matches.map(o=>({params:o.params,pathname:o.pathname,pathnameBase:o.pathnameBase,route:{id:o.id,action:o.hasAction||!!o.clientAction,handle:o.handle,hasErrorBoundary:o.hasErrorBoundary,loader:o.hasLoader||!!o.clientLoader,index:o.index,path:o.path,shouldRevalidate:o.shouldRevalidate}}))},a=sI(n.matches.reduceRight((o,c)=>{const u={id:c.id,action:c.hasAction||!!c.clientAction,element:c.element,errorElement:c.errorElement,handle:c.handle,hasErrorBoundary:!!c.errorElement,hydrateFallbackElement:c.hydrateFallbackElement,index:c.index,loader:c.hasLoader||!!c.clientLoader,path:c.path,shouldRevalidate:c.shouldRevalidate};return o.length>0&&(u.children=o),[u]},[]),i),s={future:{v8_middleware:!1,unstable_subResourceIntegrity:!1,unstable_trailingSlashAwareDataRequests:!0},isSpaMode:!1,ssr:!0,criticalCss:"",manifest:{routes:{},version:"1",url:"",entry:{module:"",imports:[]}},routeDiscovery:{mode:"lazy",manifestPath:"/__manifest"},routeModules:zne(n)};return T.createElement(Bk.Provider,{value:!0},T.createElement(Bne,{location:n.location},T.createElement(Xc.Provider,{value:s},T.createElement(aI,{context:i,router:a,hydrate:!1,nonce:n.nonce}))))}function Kne(t){return t.pathname.endsWith(".rsc")}function Xne(t){return t.pathname.endsWith(".manifest")}function vG(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ni(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let s=new a(i.message);s.stack=i.stack,n[r]=s}catch{}}if(n[r]==null){let a=new Error(i.message);a.stack=i.stack,n[r]=a}}else n[r]=i;return n}function yG({state:t,routes:e,getRouteInfo:n,location:r,basename:i,isSpaMode:a}){let s={...t,loaderData:{...t.loaderData}},o=fa(e,r,i);if(o)for(let c of o){let u=c.route.id,f=n(u);Xx(u,f.clientLoader,f.hasLoader,a)&&(f.hasHydrateFallback||!f.hasLoader)?delete s.loaderData[u]:f.hasLoader||(s.loaderData[u]=null)}return s}var i_=Q6();const Jne=Co(i_);function bG(t){return T.createElement(n8,{flushSync:i_.flushSync,...t})}var Ge=null,Oy=null;function Qne(){if(!Ge&&window.__reactRouterContext&&window.__reactRouterManifest&&window.__reactRouterRouteModules){if(window.__reactRouterManifest.sri===!0){const t=document.querySelector("script[rr-importmap]");if(t!=null&&t.textContent)try{window.__reactRouterManifest.sri=JSON.parse(t.textContent).integrity}catch(e){console.error("Failed to parse import map",e)}}Ge={context:window.__reactRouterContext,manifest:window.__reactRouterManifest,routeModules:window.__reactRouterRouteModules,stateDecodingPromise:void 0,router:void 0,routerInitialized:!1}}}function Zne({getContext:t,unstable_instrumentations:e}){var s,o;if(Qne(),!Ge)throw new Error("You must be using the SSR features of React Router in order to skip passing a `router` prop to `<RouterProvider>`");let n=Ge;if(!Ge.stateDecodingPromise){let c=Ge.context.stream;Ye(c,"No stream found for single fetch decoding"),Ge.context.stream=void 0,Ge.stateDecodingPromise=e_(c,window).then(u=>{Ge.context.state=u.value,n.stateDecodingPromise.value=!0}).catch(u=>{n.stateDecodingPromise.error=u})}if(Ge.stateDecodingPromise.error)throw Ge.stateDecodingPromise.error;if(!Ge.stateDecodingPromise.value)throw Ge.stateDecodingPromise;let r=Kx(Ge.manifest.routes,Ge.routeModules,Ge.context.state,Ge.context.ssr,Ge.context.isSpaMode),i;if(Ge.context.isSpaMode){let{loaderData:c}=Ge.context.state;(s=Ge.manifest.routes.root)!=null&&s.hasLoader&&c&&"root"in c&&(i={loaderData:{root:c.root}})}else i=yG({state:Ge.context.state,routes:r,getRouteInfo:c=>{var u,f,h;return{clientLoader:(u=Ge.routeModules[c])==null?void 0:u.clientLoader,hasLoader:((f=Ge.manifest.routes[c])==null?void 0:f.hasLoader)===!0,hasHydrateFallback:((h=Ge.routeModules[c])==null?void 0:h.HydrateFallback)!=null}},location:window.location,basename:(o=window.__reactRouterContext)==null?void 0:o.basename,isSpaMode:Ge.context.isSpaMode}),i&&i.errors&&(i.errors=vG(i.errors));let a=Gx({routes:r,history:zA(),basename:Ge.context.basename,getContext:t,hydrationData:i,hydrationRouteProperties:Yx,unstable_instrumentations:e,mapRouteProperties:vp,future:{middleware:Ge.context.future.v8_middleware},dataStrategy:T8(()=>a,Ge.manifest,Ge.routeModules,Ge.context.ssr,Ge.context.basename,Ge.context.future.unstable_trailingSlashAwareDataRequests),patchRoutesOnNavigation:F8(Ge.manifest,Ge.routeModules,Ge.context.ssr,Ge.context.routeDiscovery,Ge.context.isSpaMode,Ge.context.basename)});return Ge.router=a,a.state.initialized&&(Ge.routerInitialized=!0,a.initialize()),a.createRoutesForHMR=O8,window.__reactRouterDataRouter=a,a}function ere(t){Oy||(Oy=Zne({getContext:t.getContext,unstable_instrumentations:t.unstable_instrumentations}));let[e,n]=T.useState(void 0);T.useEffect(()=>{},[]),T.useEffect(()=>{},[e]);let[r,i]=T.useState(Oy.state.location);return T.useLayoutEffect(()=>{Ge&&Ge.router&&!Ge.routerInitialized&&(Ge.routerInitialized=!0,Ge.router.initialize())},[]),T.useLayoutEffect(()=>{if(Ge&&Ge.router)return Ge.router.subscribe(a=>{a.location!==r&&i(a.location)})},[r]),Ye(Ge,"ssrInfo unavailable for HydratedRouter"),U8(Oy,Ge.manifest,Ge.routeModules,Ge.context.ssr,Ge.context.routeDiscovery,Ge.context.isSpaMode),T.createElement(T.Fragment,null,T.createElement(Xc.Provider,{value:{manifest:Ge.manifest,routeModules:Ge.routeModules,future:Ge.context.future,criticalCss:e,ssr:Ge.context.ssr,isSpaMode:Ge.context.isSpaMode,routeDiscovery:Ge.context.routeDiscovery}},T.createElement(eI,{location:r},T.createElement(bG,{router:Oy,unstable_useTransitions:t.unstable_useTransitions,onError:t.onError}))),T.createElement(T.Fragment,null))}/**
 * react-router-dom v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Fr=Object.freeze(Object.defineProperty({__proto__:null,Await:Ree,BrowserRouter:Ute,Form:nI,HashRouter:Bte,HydratedRouter:ere,IDLE_BLOCKER:ju,IDLE_FETCHER:VA,IDLE_NAVIGATION:C0,Link:tI,Links:Tte,MemoryRouter:Cee,Meta:Mte,NavLink:W8,Navigate:Tee,NavigationType:e$,Outlet:r8,PrefetchPageLinks:Zk,Route:i8,Router:Xd,RouterContextProvider:cl,RouterProvider:bG,Routes:Nee,Scripts:z8,ScrollRestoration:Y8,ServerRouter:rne,StaticRouter:Kte,StaticRouterProvider:aI,UNSAFE_AwaitContextProvider:tee,UNSAFE_DataRouterContext:yl,UNSAFE_DataRouterStateContext:Yc,UNSAFE_ErrorResponseImpl:Ni,UNSAFE_FetchersContext:Vx,UNSAFE_FrameworkContext:Xc,UNSAFE_LocationContext:gp,UNSAFE_NavigationContext:Ri,UNSAFE_RSCDefaultRootErrorBoundary:Hne,UNSAFE_RemixErrorBoundary:eI,UNSAFE_RouteContext:pa,UNSAFE_ServerMode:aG,UNSAFE_SingleFetchRedirectSymbol:Oc,UNSAFE_ViewTransitionContext:qx,UNSAFE_WithComponentProps:Dee,UNSAFE_WithErrorBoundaryProps:Oee,UNSAFE_WithHydrateFallbackProps:Lee,UNSAFE_createBrowserHistory:zA,UNSAFE_createClientRoutes:Kx,UNSAFE_createClientRoutesWithHMRRevalidationOptOut:O8,UNSAFE_createHashHistory:Ok,UNSAFE_createMemoryHistory:Lk,UNSAFE_createRouter:Gx,UNSAFE_decodeViaTurboStream:e_,UNSAFE_deserializeErrors:vG,UNSAFE_getHydrationData:yG,UNSAFE_getPatchRoutesOnNavigationFunction:F8,UNSAFE_getTurboStreamSingleFetchDataStrategy:T8,UNSAFE_hydrationRouteProperties:Yx,UNSAFE_invariant:Ye,UNSAFE_mapRouteProperties:vp,UNSAFE_shouldHydrateRouteLoader:Xx,UNSAFE_useFogOFWarDiscovery:U8,UNSAFE_useScrollRestoration:Q8,UNSAFE_withComponentProps:s8,UNSAFE_withErrorBoundaryProps:u8,UNSAFE_withHydrateFallbackProps:l8,createBrowserRouter:Ote,createContext:fZ,createCookie:lI,createCookieSessionStorage:Dne,createHashRouter:jte,createMemoryRouter:t8,createMemorySessionStorage:Lne,createPath:ci,createRequestHandler:Cne,createRoutesFromChildren:D0,createRoutesFromElements:kee,createRoutesStub:ine,createSearchParams:dE,createSession:dI,createSessionStorage:pG,createStaticHandler:Qte,createStaticRouter:sI,data:d$,generatePath:NZ,href:One,isCookie:cI,isRouteErrorResponse:Kn,isSession:Ine,matchPath:mv,matchRoutes:fa,parsePath:ts,redirect:$x,redirectDocument:f$,renderMatches:Iee,replace:h$,resolvePath:c$,unstable_HistoryRouter:q8,unstable_RSCStaticRouter:Yne,unstable_routeRSCServerRequest:Wne,unstable_setDevServerHooks:yne,unstable_usePrompt:Yte,unstable_useRoute:bee,useActionData:QA,useAsyncError:gee,useAsyncValue:Q$,useBeforeUnload:Vte,useBlocker:Z$,useFetcher:Gte,useFetchers:qte,useFormAction:J8,useHref:$$,useInRouterContext:Kd,useLinkClickHandler:X8,useLoaderData:JA,useLocation:ma,useMatch:aee,useMatches:XA,useNavigate:YA,useNavigation:J$,useNavigationType:iee,useOutlet:W$,useOutletContext:oee,useParams:KA,useResolvedPath:Cv,useRevalidator:pee,useRouteError:Wx,useRouteLoaderData:mee,useRoutes:Y$,useSearchParams:Hte,useSubmit:iI,useViewTransitionState:Z8},Symbol.toStringTag,{value:"Module"}));var Ht=(t=>(t.GUEST="guest",t.USER="user",t.SELLER="seller",t))(Ht||{});const np=[{id:"manual-01",title:"Ebook-Engine Manual",author:"Ebook-Engine AI",description:"The official documentation for the Ebook-Engine platform. Learn how to use the Neural Engine, generate viral covers, and publish your work to the world.",price:0,coverImageUrl:"https://images.unsplash.com/photo-1555421689-491a97ff2040?auto=format&fit=crop&q=80&w=800",genre:"Technology",sellerId:"seller_admin",publicationDate:"2025-10-15",pages:[{id:"p1",pageNumber:1,title:"Welcome to the Future",content:`# Welcome to Ebook-Engine

**Where Thought Becomes Literature.**

Ebook-Engine is more than just a writing tool; it is a collaborative neural engine designed to elevate your creative process. Whether you are outlining a sci-fi epic, drafting a technical manual, or publishing your first novel, this platform provides the intelligence and infrastructure you need.

![Workspace](https://images.unsplash.com/photo-1497215728101-856f4ea42174?auto=format&fit=crop&q=80&w=1000)

### Core Philosophy

We believe that AI should not replace the author, but amplify them. Our "Co-Author" engine is built on Google's Gemini models, fine-tuned to understand narrative structure, tone, and pacing.

### In This Manual

Over the next 10 pages, we will cover:
- The Studio Interface
- AI Tools & Prompting
- Visual Asset Generation
- Publishing & Monetization`},{id:"p2",pageNumber:2,title:"The Dashboard",content:`# Your Command Center

The Dashboard is your home base. From here, you can track sales, manage your library, and access the Studio.

![Dashboard](https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=1000)

### Key Sections

1. **Overview**: Real-time analytics of your book sales and reader engagement.
2. **My Library**: Access books you have purchased or written.
3. **Wishlist**: Books you've saved for later.
4. **Studio Access**: One-click launch into the writing environment.

**Pro Tip:** Switch between "Reader Mode" and "Writer Mode" in the sidebar to toggle between consuming content and creating it.`},{id:"p3",pageNumber:3,title:"The eBook Studio",content:`# The Studio

This is where the magic happens. The Studio is divided into two main zones: the **Context Panel** (Left) and the **Editor** (Right).

![Studio](https://images.unsplash.com/photo-1581291518633-83b4ebd1d83e?auto=format&fit=crop&q=80&w=1000)

### 1. The Editor

A distraction-free markdown environment. It supports:
- **Rich Text**: Headers (#), Bold (**text**), and Lists (- item).
- **Slash Commands**: Type \`/\` to open the quick menu for headings, images, or AI generation.

### 2. The Context Panel

Your AI Co-Author lives here. You can chat with it to brainstorm ideas, or switch to the **Outline View** to manage your chapters.`},{id:"p4",pageNumber:4,title:"Using the AI Co-Author",content:`# The Neural Engine

Your Co-Author is always listening. You can ask it to:

- *"Write the next paragraph describing a rainy neon city."*
- *"Fix the grammar in this chapter."*
- *"Give me 5 ideas for a plot twist."*

![AI Brain](https://images.unsplash.com/photo-1620712943543-bcc4688e7485?auto=format&fit=crop&q=80&w=1000)

### Context Awareness

The AI reads what you write. If you are in Chapter 3, it knows what happened in Chapter 2. This ensures consistency in character names, plot points, and tone.

**Auto-Pilot**: Use the "Auto-Write" button in the header to let the AI draft an entire chapter structure for you automatically.`},{id:"p5",pageNumber:5,title:"Generating Visuals",content:`# AI Art Generation

A picture is worth a thousand words. Ebook-Engine integrates the **Gemini 2.5 Image Model** to generate professional cover art and in-book illustrations.

![Art Generation](https://images.unsplash.com/photo-1561557944-6e7860d9a7fd?auto=format&fit=crop&q=80&w=1000)

### How to Generate

1. **Cover Art**: Go to the "Publish" page and use the AI Cover Designer. Select a style (e.g., Cinematic, Minimalist) and describe your vision.
2. **In-Text Illustrations**: In the Studio editor, type \`/image\` to conjure an image command. Describe the scene, and the AI will insert it directly into your page.

> *Note: All images are royalty-free and unique to your book.*`},{id:"p6",pageNumber:6,title:"Audio Features",content:`# Voice & Dictation

Writer's block? Speak your story. The Studio supports real-time dictation and text-to-speech.

![Microphone](https://images.unsplash.com/photo-1590602847861-f357a9332bbc?auto=format&fit=crop&q=80&w=1000)

### Dictation

Click the **Mic Icon** in the chat bar. Speak naturally. The AI will transcribe your voice into text, which you can then ask it to format or expand upon.

### Text-to-Speech (TTS)

The AI can read its responses back to you. This is perfect for proofhearing your dialogue flow or brainstorming while multitasking.`},{id:"p7",pageNumber:7,title:"Publishing Your Work",content:`# Going Live

Once your manuscript is ready, it's time to share it with the world.

![Publishing](https://images.unsplash.com/photo-1463320726281-696a485928c7?auto=format&fit=crop&q=80&w=1000)

### The Process

1. **Metadata**: Enter your Title, Author Name, and Description.
2. **Genre & Pricing**: Choose a category. Decide if your book is **Free** (for growth) or **Paid** (for revenue).
3. **AI Pricing**: Use our "Smart Pricing Model" to analyze market trends and suggest the optimal price point.
4. **Publish**: Click "Publish to Store". Your book is instantly available to all users on the platform.`},{id:"p8",pageNumber:8,title:"Seller Features",content:`# Monetization

Creators keep **70%** of every sale. We handle the payment processing, file hosting, and delivery.

![Analytics](https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=1000)

### Audience Analytics

Go to the **Audience** tab in your dashboard to see who is reading your books. You can track:
- Total Visitors
- Active Readers
- Geographic Location
- Purchase History

Use this data to refine your marketing strategy and write what your audience loves.`},{id:"p9",pageNumber:9,title:"Pro Tips",content:`# Mastering the Platform

Here are some advanced tips for power users:

![Lightbulb](https://images.unsplash.com/photo-1531297461136-82lwDe43qRm?auto=format&fit=crop&q=80&w=1000)

- **Slash Commands**: Learn them. \`/h1\` for titles, \`/quote\` for blockquotes. Speed is key.
- **Variable Pacing**: Ask the AI to "Slow down and describe the room" or "Speed up the action". It understands pacing.
- **Series Management**: Keep your character notes in a separate text file or the chat context to ensure consistency across multiple books.
- **Draft Mode**: You can save books as drafts without publishing them. They stay in your Studio securely.`},{id:"p10",pageNumber:10,title:"Community & Support",content:`# We Are Here For You

Ebook-Engine is built by writers, for writers. If you encounter bugs or have feature requests, reach out.

![Community](https://images.unsplash.com/photo-1529156069898-49953e39b3ac?auto=format&fit=crop&q=80&w=1000)

### Channels

- **Help Center**: Accessible from your profile dropdown.
- **Email**: opendev-labs.help@gmail.com
- **Updates**: Follow the "Ebook-Engine Manual" book for patch notes and new feature guides.

Thank you for creating with us.

**- The OpenDev Team**`}]},{id:"sacred-quantum-01",title:"The Quantum Scripture",author:"Dr. A. Vance & The Institute",description:"Hidden Laws of Consciousness Backed by Real Scientific Evidence. A deep dive into the observer effect, entanglement, and the unification of ancient spirituality with modern physics.",price:1111,coverImageUrl:"https://images.unsplash.com/photo-1506318137071-a8bcbf67cc77?auto=format&fit=crop&q=80&w=800",genre:"Spirituality",sellerId:"seller_admin",publicationDate:"2025-11-11",pages:[{id:"qs-p1",pageNumber:1,title:"Introduction: The Bridge",content:`# The Bridge Between Worlds

For centuries, science and spirituality have stood on opposite banks of a wide river. Spirituality spoke of the "soul," "connection," and "miracles." Science spoke of "atoms," "forces," and "proof." 

**But the river is drying up.**

New discoveries in Quantum Mechanics are not just validating ancient texts; they are explaining *how* they work. This book is not a metaphorical comparison. It is a technical manual for consciousness, cited with peer-reviewed studies.

> "The first gulp from the glass of natural sciences will turn you into an atheist, but at the bottom of the glass God is waiting for you."  *Werner Heisenberg, Nobel Prize Winner in Physics*

We begin our journey at the intersection of the Observer and the Observed.`},{id:"qs-p2",pageNumber:2,title:"The Observer Effect",content:`# The Observer Effect

In the classical Newtonian world, things exist whether you look at them or not. A falling tree makes a sound. But in the quantum world, this rule breaks.

### The Double-Slit Experiment

When particles (like electrons) are fired at two slits, they behave like waves, creating an interference pattern. However, when a measuring device (an "observer") is placed to see which slit the particle goes through, the particle **behaves like solid matter**.

**Scientific Source:** *Nature Physics, "Quantum interference of large organic molecules," 2011.*

**The Implication:** Consciousness collapses the wave function. Your attention literally constructs reality from a field of infinite probability.`},{id:"qs-p3",pageNumber:3,title:"Quantum Entanglement",content:`# Entanglement: The Science of Oneness

"Spooky action at a distance," Einstein called it. When two particles are entangled, a change in the spin of one *instantly* affects the other, even if they are galaxies apart.

### Non-Locality

This proves that space is an illusion. Information travels faster than light because, at a fundamental level, the two particles are not separate.

**Scientific Source:** *The Big Bell Test Collaboration, Nature, 2018.*

**Spiritual Corollary:** This is the scientific basis for telepathy, prayer, and the concept that "we are all one." We are distinct points in a unified field.`},{id:"qs-p4",pageNumber:4,title:"The Holographic Principle",content:`# The Holographic Universe

Leading physicists now posit that our 3D reality is a projection of information stored on a 2D surface at the boundary of the universe (the cosmological horizon).

### Information Theory

If we live in a hologram, then "matter" is just "resolution." The spiritual idea that the physical world is "Maya" (illusion) is now a valid physical theory.

**Scientific Source:** *Juan Maldacena, "The Large N Limit of Superconformal Field Theories," 1997.*

Every part contains the whole. Your mind is not *in* the universe; the universe is *in* your mind.`},{id:"qs-p5",pageNumber:5,title:"The Zero Point Field",content:`# The Field

Space is not empty. It is a seething ocean of energy called the Zero Point Field (or Quantum Vacuum). Even at absolute zero, this field contains infinite potential energy.

### Tapping the Source

Ancient mystics called this the *Akasha*. It is the memory of the universe. It connects everything. When you meditate, you are quieting the noise to access this signal.

**Evidence:** The Casimir Effect proves the existence of vacuum fluctuations pushing plates together.

We are essentially bioluminescent beings floating in a sea of light.`},{id:"qs-p6",pageNumber:6,title:"Biocentrism",content:`# Biocentrism

Proposed by Dr. Robert Lanza, Biocentrism argues that biology creates the universe, not the other way around. Space and time are tools of the mind, not external objects.

### The Goldilocks Universe

Why are the laws of physics perfectly tuned for life? Because life is the primary constant. Without consciousness, the equations of the universe have no solution.

**Scientific Context:** *Robert Lanza, "Biocentrism," 2009.*

You are not a visitor to this world. You are the projector.`},{id:"qs-p7",pageNumber:7,title:"Neurotheology",content:`# The God Helmet

Neuroscience has identified specific centers in the brain (the temporal lobes) that active during deep spiritual experiences. 

### Dr. Michael Persinger's Experiments

By stimulating the temporal lobes with weak magnetic fields, researchers induced "sensed presence" (the feeling of God or angels) in atheists. 

**Source:** *Neuropsychologia, 2003.*

This doesn't mean God is "just inside the head." It means the brain is a **receiver**. Just as a radio tunes into a station, your brain tunes into the frequency of the divine.`},{id:"qs-p8",pageNumber:8,title:"Epigenetics",content:`# Belief Changes Biology

For decades, we believed genes were destiny. The new field of Epigenetics proves that environment and **perception** control gene expression.

### The Placebo Effect

Your belief in a cure is often as potent as the chemistry. The mind signals the cells to rewrite their instruction sets.

**Scientific Source:** *Bruce Lipton, The Biology of Belief.*

**Implication:** You can heal your lineage. Your thoughts are not just smoke; they are biochemical triggers.`},{id:"qs-p9",pageNumber:9,title:"The Unified Field",content:`# The Grand Unified Theory

Physicists are hunting for the equation that unites Gravity with Quantum Mechanics. String Theory proposes that tiny vibrating filaments create all matter.

### Frequency is Key

If everything is a vibrating string, then the universe is literally a symphony. "In the beginning was the Word" (Sound/Vibration).

We are approaching a singularity where scientific equations will look identical to spiritual sutras.`},{id:"qs-p10",pageNumber:10,title:"Conclusion",content:`# Conclusion: The Awakened Scientist

The age of separation is over. 

1. **You are the Observer.**
2. **You are Entangled with all life.**
3. **Your beliefs rewrite your Biology.**

Take this knowledge. Test it. Be the experiment.

### References
- *Journal of Consciousness Studies*
- *Physical Review Letters*
- *Nature*
- *Max Planck Institute for Quantum Optics*`}]},{id:"sacred-quantum-02",title:"Divine Mechanics",author:"Nikola T. & The Collective",description:"How Energy, Frequency, and Vibration Create Reality  Proven Through Modern Physics. Unlocking the secrets of Tesla, Cymatics, and the frequencies that heal.",price:888,coverImageUrl:"https://images.unsplash.com/photo-1620052581237-b5d148ef2716?auto=format&fit=crop&q=80&w=800",genre:"Physics",sellerId:"seller_admin",publicationDate:"2025-12-01",pages:[{id:"dm-p1",pageNumber:1,title:"The Key to the Universe",content:`# The Key

> "If you want to find the secrets of the universe, think in terms of energy, frequency and vibration."  *Nikola Tesla*

Everything in existence is vibrating. The chair you sit on, the thoughts you think, the light you see. Matter is simply energy condensed to a slow vibration.

This book explores the mechanics of this vibration and how you can tune your personal frequency to alter your reality.

**Scope:** From the oscillation of atoms to the rotation of galaxies.`},{id:"dm-p2",pageNumber:2,title:"3, 6, 9",content:`# The Mathematics of Creation

Tesla was obsessed with 3, 6, and 9. Why? 

### Vortex Math

If you double 1 (1, 2, 4, 8, 16...), the sum of digits never touches 3, 6, or 9. These numbers represent a higher-dimensional flux fieldthe energy that governs the physical circuit.

**Application:** 9 is the number of the Universe. It represents completion and the void. By aligning with these mathematical constants, we tap into free energy principles.`},{id:"dm-p3",pageNumber:3,title:"Cymatics",content:`# Visible Sound

Cymatics is the study of visible sound and vibration. 

### The Experiment

Place sand on a metal plate. Play a violin bow or a frequency tone. The sand arranges itself into complex, beautiful geometric mandalas.

**Source:** *Hans Jenny, "Cymatics," 1967.*

**The Truth:** You are 70% water. If sound organizes sand into sacred geometry, imagine what words, music, and thoughts are doing to the cellular structure of your body.`},{id:"dm-p4",pageNumber:4,title:"String Theory",content:`# The Cosmic Symphony

String Theory posits that the fundamental constituents of the universe are not point-like particles, but one-dimensional "strings."

### Modes of Vibration

A quark is a string vibrating in one mode. An electron is the same string vibrating in another. The only difference between gold and lead is the *music* their atoms are playing.

**Scientific Source:** *Edward Witten, M-Theory.*

Reality is music solidified.`},{id:"dm-p5",pageNumber:5,title:"Resonance",content:`# The Law of Resonance

Strike a tuning fork tuned to 'C'. Bring it near another 'C' fork. The second one will begin to vibrate without being touched. This is Resonance.

### Emotional Resonance

Your heart emits an electromagnetic field 5,000 times stronger than your brain. It acts as a tuning fork. You do not "attract" what you want; you resonate with what you *are*.

**Evidence:** *HeartMath Institute Research.*

To change your life, you must change your broadcast signal.`},{id:"dm-p6",pageNumber:6,title:"Schumann Resonance",content:`# The Heartbeat of Earth

The space between the Earth's surface and the Ionosphere acts as a cavity resonator. It hums at **7.83 Hz**.

### The Human Connection

This frequency matches the Alpha/Theta brainwave state (deep relaxation/healing). When we disconnect from nature, we desynchronize from the planet's pulse, leading to anxiety and illness.

**Source:** *W.O. Schumann, 1952.*

Grounding (walking barefoot) reconnects your electrical circuit to this stabilizing frequency.`},{id:"dm-p7",pageNumber:7,title:"Water Memory",content:`# The Memory of Water

Dr. Masaru Emoto exposed water to words like "Love" and "Hate," then froze it. The "Love" water formed perfect crystals. The "Hate" water formed chaotic blobs.

### Controversy & Validation

While controversial, recent Nobel Prize winner Luc Montagnier proved water can retain the electromagnetic signature of DNA even after the DNA is removed.

**Source:** *Journal of Physics: Conference Series, 2011.*

Speak kindly to yourself. You are mostly water.`},{id:"dm-p8",pageNumber:8,title:"Entrainment",content:`# Frequency Entrainment

A stronger rhythm will always pull a weaker rhythm into sync. This is why pendulums sync up, and why you feel calm near the ocean.

### Binaural Beats

We can hack the brain by playing slightly different frequencies in each ear. The brain creates a third "phantom" beat, shifting consciousness instantly into Gamma (Insight) or Delta (Sleep) states.

**Scientific Application:** Used in clinical settings for PTSD and ADHD treatment.`},{id:"dm-p9",pageNumber:9,title:"Sound Healing",content:`# Ultrasound & Healing

Hospitals use ultrasound to break up kidney stones and speed up bone regeneration. This is sound healing.

### Ancient Solfeggio

Ancient chants used specific frequencies (like 528 Hz) believed to repair DNA. Modern science is just catching up to the fact that specific frequencies trigger specific biological responses.

**Future Tech:** "Frequency Pharmacy"  prescribing sounds instead of pills.`},{id:"dm-p10",pageNumber:10,title:"Mastery",content:`# Mastering Your Frequency

You are the conductor of this divine mechanics.

1. **Monitor your input** (Music, News, People).
2. **Regulate your output** (Speech, Thought).
3. **Use Tools** (Meditation, Breath, Nature).

If you want to understand the Universe, listen to the sound of your own breath.

**End of Volume 1.**`}]},{id:"sacred-quantum-03",title:"The Sacred Algorithm",author:"Cipher X",description:"Ancient Truth, Quantum Science, and Verified Sources Revealed. Exploring the code behind the cosmos: Fibonacci, Simulation Theory, and the digital nature of reality.",price:999,coverImageUrl:"https://images.unsplash.com/photo-1614726365723-49cfae934794?auto=format&fit=crop&q=80&w=800",genre:"Science",sellerId:"seller_admin",publicationDate:"2026-01-10",pages:[{id:"sa-p1",pageNumber:1,title:"The Code",content:`# The Code Behind the Canvas

Is the universe biological or digital? The deeper we look, the more it resembles computer code. 

From the spiral of a galaxy to the arrangement of seeds in a sunflower, a specific algorithm repeats. This book investigates the possibility that we are living in a programmed realitya Sacred Simulation.

**The Question:** If there is a code, who is the Programmer?`},{id:"sa-p2",pageNumber:2,title:"Phi",content:`# The Golden Ratio (1.618...)

Phi. The Divine Proportion. It appears in the pyramids of Giza, the Parthenon, and the proportions of the human face.

### Efficiency

Nature uses Phi not for aesthetics, but for efficiency. It allows for maximum packing (seeds) and exposure (leaves) with minimal energy expenditure. It is the optimization algorithm of the universe.

**Observation:** The stock market and heartbeats also follow Phi fractal patterns.`},{id:"sa-p3",pageNumber:3,title:"Fractals",content:`# Fractals Everywhere

A fractal is a pattern that repeats at different scales. Zoom into a coastline, it looks the same. Zoom into a fern, the leaf looks like the whole plant.

### The Mandelbrot Set

A simple mathematical equation ($Z = Z^2 + C$) produces infinite complexity. This suggests our complex universe comes from a very simple seed code.

**Spiritual Truth:** "As above, so below." The macrocosm reflects the microcosm.`},{id:"sa-p4",pageNumber:4,title:"Simulation Theory",content:`# Evidence of Simulation

Elon Musk and Neil deGrasse Tyson famously argued there is a billion-to-one chance we are in "base reality."

### Pixelation (Planck Length)

Space is not continuous. It is discrete. There is a minimum unit of length (Planck length), much like a pixel on a screen. You cannot zoom in forever.

**Scientific Source:** *Nick Bostrom, "Are You Living in a Computer Simulation?" 2003.*

**Glitch:** The Observer Effect is basically "rendering optimization"  only drawing what is being looked at.`},{id:"sa-p5",pageNumber:5,title:"It From Bit",content:`# It From Bit

Physicist John Wheeler proposed that the universe is made of information, not matter. Every particle, every field, every force is ultimately a yes/no answer to a question.

### The Digital Physics

At the bottom of the rabbit hole, there is no "stuff." There are only bits. Information is more fundamental than time or space.

**Source:** *John Archibald Wheeler, 1990.*

We are processing information in a sea of data.`},{id:"sa-p6",pageNumber:6,title:"DNA Code",content:`# The Software of Life

DNA is literally a 4-character code (A, C, T, G). It functions exactly like computer software, complete with error-correcting subroutines.

### Microsoft vs Nature

Bill Gates said, "DNA is like a computer program but far, far more advanced than any software ever created."

**Source:** *The Road Ahead.*

If DNA is code, it implies a language. And a language implies an Intelligence.`},{id:"sa-p7",pageNumber:7,title:"Fine Tuning",content:`# The Fine-Tuning Problem

If the force of gravity were slightly stronger, the universe would collapse. If slightly weaker, stars wouldn't form. There are ~20 constants that are precisely set for life to exist.

### Randomness vs Design

The odds of this happening by chance are akin to throwing a dart across the universe and hitting a specific atom.

**Conclusion:** The parameters were set. The simulation was configured.`},{id:"sa-p8",pageNumber:8,title:"Algorithmic Botany",content:`# Algorithmic Botany

L-systems (Lindenmayer systems) are simple algorithms that can generate realistic 3D trees and plants. Nature follows strict procedural generation rules.

### The Fibonacci Sequence

Count the petals on a flower. 3, 5, 8, 13, 21... almost always a Fibonacci number. The universe calculates its growth steps.

**We are watching a procedural generation script run in real-time.**`},{id:"sa-p9",pageNumber:9,title:"Consciousness",content:`# The Player

If reality is the game, Consciousness is the Player. The brain is not the source of consciousness; it is the VR headset.

### Non-Local Data

Near-Death Experiences (NDEs) suggest that when the "headset" dies, the signal continues. The user logs out of the avatar but retains the data.

**Source:** *Dr. Eben Alexander, "Proof of Heaven."*`},{id:"sa-p10",pageNumber:10,title:"The Programmer",content:`# Who is the Programmer?

We call it God, Source, The All, or The Architect. 

The Sacred Algorithm reveals that science and religion are describing the same interface. One describes the User Experience (Spirituality), the other describes the Code (Physics).

**Final Truth:** You are not just in the simulation. You are a piece of the code that woke up.

**[End of Stream]**`}]}],u5={isEnabled:!0,slug:"admin",theme:"dark-minimal",profileImageUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&q=80&w=200",displayName:"Ebook-Engine Team",tagline:"Official Updates & Manuals",showcasedBookIds:["manual-01","sacred-quantum-01","sacred-quantum-02"]},tre={id:"seller_admin",name:"Ebook-Engine Official",username:"@ebookengine_hq",email:"admin@ebook-engine.com",payoutEmail:"finance@ebook-engine.com",uploadedBooks:np,creatorSite:u5,isVerified:!0,profileImageUrl:u5.profileImageUrl,coverImageUrl:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=1200",bio:"The official account for Ebook-Engine updates and documentation."},nre={id:"seller_opendev",name:"OpenDev Labs",username:"@opendev",email:"opendev-labs",payoutEmail:"opendev-labs@gmail.com",uploadedBooks:[],creatorSite:{isEnabled:!0,slug:"opendev",theme:"tech-vibrant",displayName:"OpenDev Labs",tagline:"System Architecture",showcasedBookIds:[]},isVerified:!0,isAdmin:!0,bio:"Platform Administrator"},rre={id:"user_admin",name:"Admin User",username:"@admin",email:"admin@ebook-engine.com",purchaseHistory:[np[0]],wishlist:[],isVerified:!0,profileImageUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&q=80&w=200",coverImageUrl:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=1200",bio:"System Administrator and First Node."},Oo={user_admin:rre,seller_admin:tre,seller_opendev:nre,guest:{id:"guest",name:"Guest",email:""}};var ire={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let are,sre;function ore(){return{geminiUrl:are,vertexUrl:sre}}function lre(t,e,n,r){var i,a;if(!(t!=null&&t.baseUrl)){const s=ore();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(a=s.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jc{}function Pe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function A(t,e,n){for(let a=0;a<e.length-1;a++){const s=e[a];if(s.endsWith("[]")){const o=s.slice(0,-2);if(!(o in t))if(Array.isArray(n))t[o]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[o])){const c=t[o];if(Array.isArray(n))for(let u=0;u<c.length;u++){const f=c[u];A(f,e.slice(a+1),n[u])}else for(const u of c)A(u,e.slice(a+1),n)}return}else if(s.endsWith("[0]")){const o=s.slice(0,-3);o in t||(t[o]=[{}]);const c=t[o];A(c[0],e.slice(a+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function x(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(o=>x(o,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function cre(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),a=r.split("."),s=new Set;let o=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){o=c;break}if(o!==-1&&a.length>o)for(let c=o;c<a.length;c++){const u=a[c];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}WR(t,i,a,0,s)}}function WR(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const s=a.slice(0,-2),o=t;if(s in o&&Array.isArray(o[s]))for(const c of o[s])WR(c,e,n,r+1,i)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,o=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),c={};for(const u of o)c[u]=s[u];for(const[u,f]of Object.entries(c)){const h=[];for(const g of n.slice(r))g==="*"?h.push(u):h.push(g);A(s,h,f)}for(const u of o)delete s[u]}}else{const s=t;a in s&&WR(s[a],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fI(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ure(t){const e={},n=x(t,["operationName"]);n!=null&&A(e,["operationName"],n);const r=x(t,["resourceName"]);return r!=null&&A(e,["_url","resourceName"],r),e}function dre(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["response","generateVideoResponse"]);return s!=null&&A(e,["response"],hre(s)),e}function fre(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["response"]);return s!=null&&A(e,["response"],pre(s)),e}function hre(t){const e={},n=x(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>mre(s))),A(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=x(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function pre(t){const e={},n=x(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>gre(s))),A(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=x(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function mre(t){const e={},n=x(t,["video"]);return n!=null&&A(e,["video"],Sre(n)),e}function gre(t){const e={},n=x(t,["_self"]);return n!=null&&A(e,["video"],Ere(n)),e}function vre(t){const e={},n=x(t,["operationName"]);return n!=null&&A(e,["_url","operationName"],n),e}function yre(t){const e={},n=x(t,["operationName"]);return n!=null&&A(e,["_url","operationName"],n),e}function bre(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["response"]);return s!=null&&A(e,["response"],xre(s)),e}function xre(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["parent"]);r!=null&&A(e,["parent"],r);const i=x(t,["documentName"]);return i!=null&&A(e,["documentName"],i),e}function xG(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["response"]);return s!=null&&A(e,["response"],wre(s)),e}function wre(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["parent"]);r!=null&&A(e,["parent"],r);const i=x(t,["documentName"]);return i!=null&&A(e,["documentName"],i),e}function Sre(t){const e={},n=x(t,["uri"]);n!=null&&A(e,["uri"],n);const r=x(t,["encodedVideo"]);r!=null&&A(e,["videoBytes"],fI(r));const i=x(t,["encoding"]);return i!=null&&A(e,["mimeType"],i),e}function Ere(t){const e={},n=x(t,["gcsUri"]);n!=null&&A(e,["uri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&A(e,["videoBytes"],fI(r));const i=x(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var d5;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(d5||(d5={}));var f5;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(f5||(f5={}));var h5;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(h5||(h5={}));var hr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(hr||(hr={}));var p5;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(p5||(p5={}));var m5;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(m5||(m5={}));var g5;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(g5||(g5={}));var v5;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(v5||(v5={}));var y5;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(y5||(y5={}));var b5;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(b5||(b5={}));var x5;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(x5||(x5={}));var w5;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(w5||(w5={}));var S5;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(S5||(S5={}));var E5;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(E5||(E5={}));var A5;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(A5||(A5={}));var _5;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(_5||(_5={}));var C5;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(C5||(C5={}));var T5;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(T5||(T5={}));var N5;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(N5||(N5={}));var R5;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(R5||(R5={}));var M5;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(M5||(M5={}));var gE;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(gE||(gE={}));var P5;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(P5||(P5={}));var k5;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(k5||(k5={}));var I5;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(I5||(I5={}));var YR;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(YR||(YR={}));var D5;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(D5||(D5={}));var L5;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(L5||(L5={}));var KR;(function(t){t.COLLECTION="COLLECTION"})(KR||(KR={}));var O5;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(O5||(O5={}));var j5;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(j5||(j5={}));var F5;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(F5||(F5={}));var U5;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(U5||(U5={}));var B5;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(B5||(B5={}));var H5;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(H5||(H5={}));var z5;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(z5||(z5={}));var $5;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($5||($5={}));var G5;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(G5||(G5={}));var q5;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(q5||(q5={}));var V5;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(V5||(V5={}));var W5;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(W5||(W5={}));var Y5;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Y5||(Y5={}));var K5;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(K5||(K5={}));var X5;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(X5||(X5={}));var J5;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(J5||(J5={}));var Q5;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Q5||(Q5={}));var Z5;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Z5||(Z5={}));var eF;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(eF||(eF={}));var tF;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(tF||(tF={}));var nF;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(nF||(nF={}));var rF;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(rF||(rF={}));var iF;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(iF||(iF={}));var aF;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(aF||(aF={}));var sF;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(sF||(sF={}));var oF;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(oF||(oF={}));var lF;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(lF||(lF={}));var Em;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Em||(Em={}));class XR{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class jy{get text(){var e,n,r,i,a,s,o,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",f=!1;const h=[];for(const g of(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&c!==void 0?c:[]){for(const[y,w]of Object.entries(g))y!=="text"&&y!=="thought"&&y!=="thoughtSignature"&&(w!==null||w!==void 0)&&h.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,u+=g.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?u:void 0}get data(){var e,n,r,i,a,s,o,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const f=[];for(const h of(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)!==null&&c!==void 0?c:[]){for(const[g,y]of Object.entries(h))g!=="inlineData"&&(y!==null||y!==void 0)&&f.push(g);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,a,s,o,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,a,s,o,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,a,s,o,c,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(o=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||c===void 0?void 0:c.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((f==null?void 0:f.length)!==0)return(u=f==null?void 0:f[0])===null||u===void 0?void 0:u.output}}class cF{}class uF{}class Are{}class _re{}class Cre{}class Tre{}class dF{}class fF{}class hF{}class Nre{}class vE{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new vE;let i;const a=e;return n?i=fre(a):i=dre(a),Object.assign(r,i),r}}class pF{}class mF{}class gF{}class vF{}class Rre{}class Mre{}class Pre{}class hI{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new hI,a=bre(e);return Object.assign(r,a),r}}class kre{}class Ire{}class Dre{}class yF{}class Lre{get text(){var e,n,r;let i="",a=!1;const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,u]of Object.entries(o))c!=="text"&&c!=="thought"&&u!==null&&s.push(c);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,i+=o.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[o,c]of Object.entries(s))o!=="inlineData"&&c!==null&&a.push(o);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class Ore{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class pI{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new pI,a=xG(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pt(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wG(t,e){const n=Pt(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function SG(t){return Array.isArray(t)?t.map(e=>yE(e)):[yE(t)]}function yE(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function EG(t){const e=yE(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function AG(t){const e=yE(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bF(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function _G(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>bF(e)):[bF(t)]}function JR(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function xF(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function wF(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ci(t){if(t==null)throw new Error("ContentUnion is required");return JR(t)?t:{role:"user",parts:_G(t)}}function mI(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ci(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ci(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ci(n)):[Ci(e)]}function Os(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(xF(t)||wF(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ci(t)]}const e=[],n=[],r=JR(t[0]);for(const i of t){const a=JR(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(xF(i)||wF(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:_G(n)}),e}function jre(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(hr).includes(n[0].toUpperCase())?n[0].toUpperCase():hr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(hr).includes(r.toUpperCase())?r.toUpperCase():hr.TYPE_UNSPECIFIED})}}function Om(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&jre(t.type,e);for(const[s,o]of Object.entries(t))if(o!=null)if(s=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(hr).includes(o.toUpperCase())?o.toUpperCase():hr.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Om(o);else if(r.includes(s)){const c=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}c.push(Om(u))}e[s]=c}else if(i.includes(s)){const c={};for(const[u,f]of Object.entries(o))c[u]=Om(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=o}return e}function gI(t){return Om(t)}function vI(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function yI(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Rv(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Om(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Om(e.response));return t}function Mv(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Fre(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Qc(t,e){if(typeof e!="string")throw new Error("name must be a string");return Fre(t,e,"cachedContents")}function CG(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Jd(t){return fI(t)}function Ure(t){return t!=null&&typeof t=="object"&&"name"in t}function Bre(t){return t!=null&&typeof t=="object"&&"video"in t}function Hre(t){return t!=null&&typeof t=="object"&&"uri"in t}function TG(t){var e;let n;if(Ure(t)&&(n=t.name),!(Hre(t)&&(n=t.uri,n===void 0))&&!(Bre(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function NG(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function RG(t){for(const e of["models","tunedModels","publisherModels"])if(zre(t,e))return t[e];return[]}function zre(t,e){return t!==null&&typeof t=="object"&&e in t}function $re(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Gre(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const s=$re(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function MG(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function qre(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function PG(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let a=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Pv(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function kG(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vre(t){const e={},n=x(t,["responsesFile"]);n!=null&&A(e,["fileName"],n);const r=x(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Cie(s))),A(e,["inlinedResponses"],a)}const i=x(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["inlinedEmbedContentResponses"],a)}return e}function Wre(t){const e={},n=x(t,["predictionsFormat"]);n!=null&&A(e,["format"],n);const r=x(t,["gcsDestination","outputUriPrefix"]);r!=null&&A(e,["gcsUri"],r);const i=x(t,["bigqueryDestination","outputUri"]);return i!=null&&A(e,["bigqueryUri"],i),e}function Yre(t){const e={},n=x(t,["format"]);n!=null&&A(e,["predictionsFormat"],n);const r=x(t,["gcsUri"]);r!=null&&A(e,["gcsDestination","outputUriPrefix"],r);const i=x(t,["bigqueryUri"]);if(i!=null&&A(e,["bigqueryDestination","outputUri"],i),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(x(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function _1(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata","displayName"]);r!=null&&A(e,["displayName"],r);const i=x(t,["metadata","state"]);i!=null&&A(e,["state"],kG(i));const a=x(t,["metadata","createTime"]);a!=null&&A(e,["createTime"],a);const s=x(t,["metadata","endTime"]);s!=null&&A(e,["endTime"],s);const o=x(t,["metadata","updateTime"]);o!=null&&A(e,["updateTime"],o);const c=x(t,["metadata","model"]);c!=null&&A(e,["model"],c);const u=x(t,["metadata","output"]);return u!=null&&A(e,["dest"],Vre(PG(u))),e}function QR(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["displayName"]);r!=null&&A(e,["displayName"],r);const i=x(t,["state"]);i!=null&&A(e,["state"],kG(i));const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["createTime"]);s!=null&&A(e,["createTime"],s);const o=x(t,["startTime"]);o!=null&&A(e,["startTime"],o);const c=x(t,["endTime"]);c!=null&&A(e,["endTime"],c);const u=x(t,["updateTime"]);u!=null&&A(e,["updateTime"],u);const f=x(t,["model"]);f!=null&&A(e,["model"],f);const h=x(t,["inputConfig"]);h!=null&&A(e,["src"],Kre(h));const g=x(t,["outputConfig"]);g!=null&&A(e,["dest"],Wre(PG(g)));const y=x(t,["completionStats"]);return y!=null&&A(e,["completionStats"],y),e}function Kre(t){const e={},n=x(t,["instancesFormat"]);n!=null&&A(e,["format"],n);const r=x(t,["gcsSource","uris"]);r!=null&&A(e,["gcsUri"],r);const i=x(t,["bigquerySource","inputUri"]);return i!=null&&A(e,["bigqueryUri"],i),e}function Xre(t,e){const n={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=x(e,["fileName"]);r!=null&&A(n,["fileName"],r);const i=x(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>_ie(t,s))),A(n,["requests","requests"],a)}return n}function Jre(t){const e={},n=x(t,["format"]);n!=null&&A(e,["instancesFormat"],n);const r=x(t,["gcsUri"]);r!=null&&A(e,["gcsSource","uris"],r);const i=x(t,["bigqueryUri"]);if(i!=null&&A(e,["bigquerySource","inputUri"],i),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Qre(t){const e={},n=x(t,["data"]);if(n!=null&&A(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Zre(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Pv(t,r)),n}function eie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Pv(t,r)),n}function tie(t){const e={},n=x(t,["content"]);n!=null&&A(e,["content"],n);const r=x(t,["citationMetadata"]);r!=null&&A(e,["citationMetadata"],nie(r));const i=x(t,["tokenCount"]);i!=null&&A(e,["tokenCount"],i);const a=x(t,["finishReason"]);a!=null&&A(e,["finishReason"],a);const s=x(t,["avgLogprobs"]);s!=null&&A(e,["avgLogprobs"],s);const o=x(t,["groundingMetadata"]);o!=null&&A(e,["groundingMetadata"],o);const c=x(t,["index"]);c!=null&&A(e,["index"],c);const u=x(t,["logprobsResult"]);u!=null&&A(e,["logprobsResult"],u);const f=x(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),A(e,["safetyRatings"],g)}const h=x(t,["urlContextMetadata"]);return h!=null&&A(e,["urlContextMetadata"],h),e}function nie(t){const e={},n=x(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),A(e,["citations"],r)}return e}function IG(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Iie(a))),A(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&A(e,["role"],r),e}function rie(t,e){const n={},r=x(t,["displayName"]);if(e!==void 0&&r!=null&&A(e,["batch","displayName"],r),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function iie(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&A(e,["displayName"],r);const i=x(t,["dest"]);return e!==void 0&&i!=null&&A(e,["outputConfig"],Yre(qre(i))),n}function SF(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["src"]);i!=null&&A(n,["batch","inputConfig"],Xre(t,MG(t,i)));const a=x(e,["config"]);return a!=null&&rie(a,n),n}function aie(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["model"],Pt(t,r));const i=x(e,["src"]);i!=null&&A(n,["inputConfig"],Jre(MG(t,i)));const a=x(e,["config"]);return a!=null&&iie(a,n),n}function sie(t,e){const n={},r=x(t,["displayName"]);return e!==void 0&&r!=null&&A(e,["batch","displayName"],r),n}function oie(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["src"]);i!=null&&A(n,["batch","inputConfig"],pie(t,i));const a=x(e,["config"]);return a!=null&&sie(a,n),n}function lie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Pv(t,r)),n}function cie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Pv(t,r)),n}function uie(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&A(e,["name"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);return a!=null&&A(e,["error"],a),e}function die(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&A(e,["name"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);return a!=null&&A(e,["error"],a),e}function fie(t,e){const n={},r=x(e,["contents"]);if(r!=null){let a=mI(t,r);Array.isArray(a)&&(a=a.map(s=>s)),A(n,["requests[]","request","content"],a)}const i=x(e,["config"]);return i!=null&&(A(n,["_self"],hie(i,n)),cre(n,{"requests[].*":"requests[].request.*"})),n}function hie(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&A(e,["requests[]","taskType"],r);const i=x(t,["title"]);e!==void 0&&i!=null&&A(e,["requests[]","title"],i);const a=x(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&A(e,["requests[]","outputDimensionality"],a),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function pie(t,e){const n={},r=x(e,["fileName"]);r!=null&&A(n,["file_name"],r);const i=x(e,["inlinedRequests"]);return i!=null&&A(n,["requests"],fie(t,i)),n}function mie(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function gie(t){const e={},n=x(t,["id"]);n!=null&&A(e,["id"],n);const r=x(t,["args"]);r!=null&&A(e,["args"],r);const i=x(t,["name"]);if(i!=null&&A(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function vie(t){const e={},n=x(t,["allowedFunctionNames"]);n!=null&&A(e,["allowedFunctionNames"],n);const r=x(t,["mode"]);if(r!=null&&A(e,["mode"],r),x(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yie(t,e,n){const r={},i=x(e,["systemInstruction"]);n!==void 0&&i!=null&&A(n,["systemInstruction"],IG(Ci(i)));const a=x(e,["temperature"]);a!=null&&A(r,["temperature"],a);const s=x(e,["topP"]);s!=null&&A(r,["topP"],s);const o=x(e,["topK"]);o!=null&&A(r,["topK"],o);const c=x(e,["candidateCount"]);c!=null&&A(r,["candidateCount"],c);const u=x(e,["maxOutputTokens"]);u!=null&&A(r,["maxOutputTokens"],u);const f=x(e,["stopSequences"]);f!=null&&A(r,["stopSequences"],f);const h=x(e,["responseLogprobs"]);h!=null&&A(r,["responseLogprobs"],h);const g=x(e,["logprobs"]);g!=null&&A(r,["logprobs"],g);const y=x(e,["presencePenalty"]);y!=null&&A(r,["presencePenalty"],y);const w=x(e,["frequencyPenalty"]);w!=null&&A(r,["frequencyPenalty"],w);const S=x(e,["seed"]);S!=null&&A(r,["seed"],S);const E=x(e,["responseMimeType"]);E!=null&&A(r,["responseMimeType"],E);const C=x(e,["responseSchema"]);C!=null&&A(r,["responseSchema"],gI(C));const M=x(e,["responseJsonSchema"]);if(M!=null&&A(r,["responseJsonSchema"],M),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(e,["safetySettings"]);if(n!==void 0&&R!=null){let Q=R;Array.isArray(Q)&&(Q=Q.map(W=>Die(W))),A(n,["safetySettings"],Q)}const D=x(e,["tools"]);if(n!==void 0&&D!=null){let Q=Mv(D);Array.isArray(Q)&&(Q=Q.map(W=>Oie(Rv(W)))),A(n,["tools"],Q)}const I=x(e,["toolConfig"]);if(n!==void 0&&I!=null&&A(n,["toolConfig"],Lie(I)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(e,["cachedContent"]);n!==void 0&&P!=null&&A(n,["cachedContent"],Qc(t,P));const k=x(e,["responseModalities"]);k!=null&&A(r,["responseModalities"],k);const U=x(e,["mediaResolution"]);U!=null&&A(r,["mediaResolution"],U);const B=x(e,["speechConfig"]);if(B!=null&&A(r,["speechConfig"],vI(B)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=x(e,["thinkingConfig"]);V!=null&&A(r,["thinkingConfig"],V);const H=x(e,["imageConfig"]);H!=null&&A(r,["imageConfig"],Aie(H));const G=x(e,["enableEnhancedCivicAnswers"]);if(G!=null&&A(r,["enableEnhancedCivicAnswers"],G),x(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function bie(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>tie(u))),A(e,["candidates"],c)}const i=x(t,["modelVersion"]);i!=null&&A(e,["modelVersion"],i);const a=x(t,["promptFeedback"]);a!=null&&A(e,["promptFeedback"],a);const s=x(t,["responseId"]);s!=null&&A(e,["responseId"],s);const o=x(t,["usageMetadata"]);return o!=null&&A(e,["usageMetadata"],o),e}function xie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Pv(t,r)),n}function wie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Pv(t,r)),n}function Sie(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function Eie(t){const e={};if(x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function Aie(t){const e={},n=x(t,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const r=x(t,["imageSize"]);if(r!=null&&A(e,["imageSize"],r),x(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(x(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _ie(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["request","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let o=Os(i);Array.isArray(o)&&(o=o.map(c=>IG(c))),A(n,["request","contents"],o)}const a=x(e,["metadata"]);a!=null&&A(n,["metadata"],a);const s=x(e,["config"]);return s!=null&&A(n,["request","generationConfig"],yie(t,s,x(n,["request"],{}))),n}function Cie(t){const e={},n=x(t,["response"]);n!=null&&A(e,["response"],bie(n));const r=x(t,["error"]);return r!=null&&A(e,["error"],r),e}function Tie(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);if(e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Nie(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);e!==void 0&&i!=null&&A(e,["_query","pageToken"],i);const a=x(t,["filter"]);return e!==void 0&&a!=null&&A(e,["_query","filter"],a),n}function Rie(t){const e={},n=x(t,["config"]);return n!=null&&Tie(n,e),e}function Mie(t){const e={},n=x(t,["config"]);return n!=null&&Nie(n,e),e}function Pie(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>_1(s))),A(e,["batchJobs"],a)}return e}function kie(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>QR(s))),A(e,["batchJobs"],a)}return e}function Iie(t){const e={},n=x(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const a=x(t,["fileData"]);a!=null&&A(e,["fileData"],mie(a));const s=x(t,["functionCall"]);s!=null&&A(e,["functionCall"],gie(s));const o=x(t,["functionResponse"]);o!=null&&A(e,["functionResponse"],o);const c=x(t,["inlineData"]);c!=null&&A(e,["inlineData"],Qre(c));const u=x(t,["text"]);u!=null&&A(e,["text"],u);const f=x(t,["thought"]);f!=null&&A(e,["thought"],f);const h=x(t,["thoughtSignature"]);h!=null&&A(e,["thoughtSignature"],h);const g=x(t,["videoMetadata"]);return g!=null&&A(e,["videoMetadata"],g),e}function Die(t){const e={},n=x(t,["category"]);if(n!=null&&A(e,["category"],n),x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["threshold"]);return r!=null&&A(e,["threshold"],r),e}function Lie(t){const e={},n=x(t,["retrievalConfig"]);n!=null&&A(e,["retrievalConfig"],n);const r=x(t,["functionCallingConfig"]);return r!=null&&A(e,["functionCallingConfig"],vie(r)),e}function Oie(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&A(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&A(e,["fileSearch"],r);const i=x(t,["codeExecution"]);if(i!=null&&A(e,["codeExecution"],i),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(t,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),A(e,["functionDeclarations"],f)}const s=x(t,["googleMaps"]);s!=null&&A(e,["googleMaps"],Sie(s));const o=x(t,["googleSearch"]);o!=null&&A(e,["googleSearch"],Eie(o));const c=x(t,["googleSearchRetrieval"]);c!=null&&A(e,["googleSearchRetrieval"],c);const u=x(t,["urlContext"]);return u!=null&&A(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var jc;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(jc||(jc={}));class yp{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(a=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jie extends Jc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yp(jc.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=SF(this.apiClient,e),r=n._url,i=Pe("{model}:batchGenerateContent",r),o=n.batch.inputConfig.requests,c=o.requests,u=[];for(const f of c){const h=Object.assign({},f);if(h.systemInstruction){const g=h.systemInstruction;delete h.systemInstruction;const y=h.request;y.systemInstruction=g,h.request=y}u.push(h)}return o.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),s=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=aie(this.apiClient,e);return o=Pe("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>QR(f))}else{const u=SF(this.apiClient,e);return o=Pe("{model}:batchGenerateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>_1(f))}}async createEmbeddingsInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=oie(this.apiClient,e);return a=Pe("{model}:asyncBatchEmbedContent",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>_1(c))}}async get(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=wie(this.apiClient,e);return o=Pe("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>QR(f))}else{const u=xie(this.apiClient,e);return o=Pe("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>_1(f))}}async cancel(e){var n,r,i,a;let s="",o={};if(this.apiClient.isVertexAI()){const c=eie(this.apiClient,e);s=Pe("batchPredictionJobs/{name}:cancel",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=Zre(this.apiClient,e);s=Pe("batches/{name}:cancel",c._url),o=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Mie(e);return o=Pe("batchPredictionJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=kie(f),g=new yF;return Object.assign(g,h),g})}else{const u=Rie(e);return o=Pe("batches",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Pie(f),g=new yF;return Object.assign(g,h),g})}}async delete(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=cie(this.apiClient,e);return o=Pe("batchPredictionJobs/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>die(f))}else{const u=lie(this.apiClient,e);return o=Pe("batches/{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>uie(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fie(t){const e={},n=x(t,["data"]);if(n!=null&&A(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function EF(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>oae(a))),A(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&A(e,["role"],r),e}function Uie(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=x(t,["expireTime"]);e!==void 0&&i!=null&&A(e,["expireTime"],i);const a=x(t,["displayName"]);e!==void 0&&a!=null&&A(e,["displayName"],a);const s=x(t,["contents"]);if(e!==void 0&&s!=null){let f=Os(s);Array.isArray(f)&&(f=f.map(h=>EF(h))),A(e,["contents"],f)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&A(e,["systemInstruction"],EF(Ci(o)));const c=x(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>cae(h))),A(e,["tools"],f)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&A(e,["toolConfig"],lae(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Bie(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=x(t,["expireTime"]);e!==void 0&&i!=null&&A(e,["expireTime"],i);const a=x(t,["displayName"]);e!==void 0&&a!=null&&A(e,["displayName"],a);const s=x(t,["contents"]);if(e!==void 0&&s!=null){let h=Os(s);Array.isArray(h)&&(h=h.map(g=>g)),A(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&A(e,["systemInstruction"],Ci(o));const c=x(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>uae(g))),A(e,["tools"],h)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&A(e,["toolConfig"],u);const f=x(t,["kmsKeyName"]);return e!==void 0&&f!=null&&A(e,["encryption_spec","kmsKeyName"],f),n}function Hie(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["model"],wG(t,r));const i=x(e,["config"]);return i!=null&&Uie(i,n),n}function zie(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["model"],wG(t,r));const i=x(e,["config"]);return i!=null&&Bie(i,n),n}function $ie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Qc(t,r)),n}function Gie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Qc(t,r)),n}function qie(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function Vie(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function Wie(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Yie(t){const e={},n=x(t,["id"]);n!=null&&A(e,["id"],n);const r=x(t,["args"]);r!=null&&A(e,["args"],r);const i=x(t,["name"]);if(i!=null&&A(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Kie(t){const e={},n=x(t,["allowedFunctionNames"]);n!=null&&A(e,["allowedFunctionNames"],n);const r=x(t,["mode"]);if(r!=null&&A(e,["mode"],r),x(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Xie(t){const e={},n=x(t,["description"]);n!=null&&A(e,["description"],n);const r=x(t,["name"]);r!=null&&A(e,["name"],r);const i=x(t,["parameters"]);i!=null&&A(e,["parameters"],i);const a=x(t,["parametersJsonSchema"]);a!=null&&A(e,["parametersJsonSchema"],a);const s=x(t,["response"]);s!=null&&A(e,["response"],s);const o=x(t,["responseJsonSchema"]);if(o!=null&&A(e,["responseJsonSchema"],o),x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Jie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Qc(t,r)),n}function Qie(t,e){const n={},r=x(e,["name"]);return r!=null&&A(n,["_url","name"],Qc(t,r)),n}function Zie(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function eae(t){const e={};if(x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function tae(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function nae(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function rae(t){const e={},n=x(t,["config"]);return n!=null&&tae(n,e),e}function iae(t){const e={},n=x(t,["config"]);return n!=null&&nae(n,e),e}function aae(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["cachedContents"],a)}return e}function sae(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["cachedContents"],a)}return e}function oae(t){const e={},n=x(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const a=x(t,["fileData"]);a!=null&&A(e,["fileData"],Wie(a));const s=x(t,["functionCall"]);s!=null&&A(e,["functionCall"],Yie(s));const o=x(t,["functionResponse"]);o!=null&&A(e,["functionResponse"],o);const c=x(t,["inlineData"]);c!=null&&A(e,["inlineData"],Fie(c));const u=x(t,["text"]);u!=null&&A(e,["text"],u);const f=x(t,["thought"]);f!=null&&A(e,["thought"],f);const h=x(t,["thoughtSignature"]);h!=null&&A(e,["thoughtSignature"],h);const g=x(t,["videoMetadata"]);return g!=null&&A(e,["videoMetadata"],g),e}function lae(t){const e={},n=x(t,["retrievalConfig"]);n!=null&&A(e,["retrievalConfig"],n);const r=x(t,["functionCallingConfig"]);return r!=null&&A(e,["functionCallingConfig"],Kie(r)),e}function cae(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&A(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&A(e,["fileSearch"],r);const i=x(t,["codeExecution"]);if(i!=null&&A(e,["codeExecution"],i),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(t,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),A(e,["functionDeclarations"],f)}const s=x(t,["googleMaps"]);s!=null&&A(e,["googleMaps"],Zie(s));const o=x(t,["googleSearch"]);o!=null&&A(e,["googleSearch"],eae(o));const c=x(t,["googleSearchRetrieval"]);c!=null&&A(e,["googleSearchRetrieval"],c);const u=x(t,["urlContext"]);return u!=null&&A(e,["urlContext"],u),e}function uae(t){const e={},n=x(t,["retrieval"]);n!=null&&A(e,["retrieval"],n);const r=x(t,["computerUse"]);if(r!=null&&A(e,["computerUse"],r),x(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=x(t,["codeExecution"]);i!=null&&A(e,["codeExecution"],i);const a=x(t,["enterpriseWebSearch"]);a!=null&&A(e,["enterpriseWebSearch"],a);const s=x(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(g=>Xie(g))),A(e,["functionDeclarations"],h)}const o=x(t,["googleMaps"]);o!=null&&A(e,["googleMaps"],o);const c=x(t,["googleSearch"]);c!=null&&A(e,["googleSearch"],c);const u=x(t,["googleSearchRetrieval"]);u!=null&&A(e,["googleSearchRetrieval"],u);const f=x(t,["urlContext"]);return f!=null&&A(e,["urlContext"],f),e}function dae(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=x(t,["expireTime"]);return e!==void 0&&i!=null&&A(e,["expireTime"],i),n}function fae(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&A(e,["ttl"],r);const i=x(t,["expireTime"]);return e!==void 0&&i!=null&&A(e,["expireTime"],i),n}function hae(t,e){const n={},r=x(e,["name"]);r!=null&&A(n,["_url","name"],Qc(t,r));const i=x(e,["config"]);return i!=null&&dae(i,n),n}function pae(t,e){const n={},r=x(e,["name"]);r!=null&&A(n,["_url","name"],Qc(t,r));const i=x(e,["config"]);return i!=null&&fae(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mae extends Jc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yp(jc.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=zie(this.apiClient,e);return o=Pe("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const u=Hie(this.apiClient,e);return o=Pe("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Qie(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const u=Jie(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Gie(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Vie(f),g=new gF;return Object.assign(g,h),g})}else{const u=$ie(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=qie(f),g=new gF;return Object.assign(g,h),g})}}async update(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=pae(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const u=hae(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=iae(e);return o=Pe("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=sae(f),g=new vF;return Object.assign(g,h),g})}else{const u=rae(e);return o=Pe("cachedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=aae(f),g=new vF;return Object.assign(g,h),g})}}}function bE(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AF(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nt(t){return this instanceof nt?(this.v=t,this):new nt(t)}function vo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,h)}}function o(y,w){r[y]&&(i[y]=function(S){return new Promise(function(E,C){a.push([y,S,E,C])>1||c(y,S)})},w&&(i[y]=w(i[y])))}function c(y,w){try{u(r[y](w))}catch(S){g(a[0][3],S)}}function u(y){y.value instanceof nt?Promise.resolve(y.value.v).then(f,h):g(a[0][2],y)}function f(y){c("next",y)}function h(y){c("throw",y)}function g(y,w){y(w),a.shift(),a.length&&c(a[0][0],a[0][1])}}function yo(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AF=="function"?AF(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(s){return new Promise(function(o,c){s=t[a](s),i(o,c,s.done,s.value)})}}function i(a,s,o,c){Promise.resolve(c).then(function(u){a({value:u,done:o})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gae(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:DG(n)}function DG(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function vae(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function _F(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!DG(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class yae{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new bae(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class bae{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),vae(a)}async sendMessage(e){var n;await this.sendPromise;const r=Ci(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,s,o;const c=await i,u=(s=(a=c.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let g=[];f!=null&&(g=(o=f.slice(h))!==null&&o!==void 0?o:[]);const y=u?[u]:[];this.recordHistory(r,y,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ci(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?_F(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return vo(this,arguments,function*(){var i,a,s,o,c,u;const f=[];try{for(var h=!0,g=yo(e),y;y=yield nt(g.next()),i=y.done,!i;h=!0){o=y.value,h=!1;const w=o;if(gae(w)){const S=(u=(c=w.candidates)===null||c===void 0?void 0:c[0])===null||u===void 0?void 0:u.content;S!==void 0&&f.push(S)}yield yield nt(w)}}catch(w){a={error:w}}finally{try{!h&&!i&&(s=g.return)&&(yield nt(s.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,f)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(..._F(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j0 extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,j0.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xae(t){const e={},n=x(t,["file"]);return n!=null&&A(e,["file"],n),e}function wae(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function Sae(t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","file"],TG(n)),e}function Eae(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function Aae(t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","file"],TG(n)),e}function _ae(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function Cae(t){const e={},n=x(t,["config"]);return n!=null&&_ae(n,e),e}function Tae(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nae extends Jc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yp(jc.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Cae(e);return a=Pe("files",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=Tae(c),f=new kre;return Object.assign(f,u),f})}}async createInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=xae(e);return a=Pe("upload/v1beta/files",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=wae(c),f=new Ire;return Object.assign(f,u),f})}}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Aae(e);return a=Pe("files/{file}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Sae(e);return a=Pe("files/{file}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=Eae(c),f=new Dre;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C1(t){const e={},n=x(t,["data"]);if(n!=null&&A(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Rae(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>qae(a))),A(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&A(e,["role"],r),e}function Mae(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Pae(t){const e={},n=x(t,["id"]);n!=null&&A(e,["id"],n);const r=x(t,["args"]);r!=null&&A(e,["args"],r);const i=x(t,["name"]);if(i!=null&&A(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kae(t){const e={},n=x(t,["description"]);n!=null&&A(e,["description"],n);const r=x(t,["name"]);r!=null&&A(e,["name"],r);const i=x(t,["parameters"]);i!=null&&A(e,["parameters"],i);const a=x(t,["parametersJsonSchema"]);a!=null&&A(e,["parametersJsonSchema"],a);const s=x(t,["response"]);s!=null&&A(e,["response"],s);const o=x(t,["responseJsonSchema"]);if(o!=null&&A(e,["responseJsonSchema"],o),x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Iae(t){const e={},n=x(t,["modelSelectionConfig"]);n!=null&&A(e,["modelConfig"],n);const r=x(t,["responseJsonSchema"]);r!=null&&A(e,["responseJsonSchema"],r);const i=x(t,["audioTimestamp"]);i!=null&&A(e,["audioTimestamp"],i);const a=x(t,["candidateCount"]);a!=null&&A(e,["candidateCount"],a);const s=x(t,["enableAffectiveDialog"]);s!=null&&A(e,["enableAffectiveDialog"],s);const o=x(t,["frequencyPenalty"]);o!=null&&A(e,["frequencyPenalty"],o);const c=x(t,["logprobs"]);c!=null&&A(e,["logprobs"],c);const u=x(t,["maxOutputTokens"]);u!=null&&A(e,["maxOutputTokens"],u);const f=x(t,["mediaResolution"]);f!=null&&A(e,["mediaResolution"],f);const h=x(t,["presencePenalty"]);h!=null&&A(e,["presencePenalty"],h);const g=x(t,["responseLogprobs"]);g!=null&&A(e,["responseLogprobs"],g);const y=x(t,["responseMimeType"]);y!=null&&A(e,["responseMimeType"],y);const w=x(t,["responseModalities"]);w!=null&&A(e,["responseModalities"],w);const S=x(t,["responseSchema"]);S!=null&&A(e,["responseSchema"],S);const E=x(t,["routingConfig"]);E!=null&&A(e,["routingConfig"],E);const C=x(t,["seed"]);C!=null&&A(e,["seed"],C);const M=x(t,["speechConfig"]);M!=null&&A(e,["speechConfig"],M);const R=x(t,["stopSequences"]);R!=null&&A(e,["stopSequences"],R);const D=x(t,["temperature"]);D!=null&&A(e,["temperature"],D);const I=x(t,["thinkingConfig"]);I!=null&&A(e,["thinkingConfig"],I);const P=x(t,["topK"]);P!=null&&A(e,["topK"],P);const k=x(t,["topP"]);if(k!=null&&A(e,["topP"],k),x(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Dae(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function Lae(t){const e={};if(x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function Oae(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&A(e,["setup","generationConfig"],r);const i=x(t,["responseModalities"]);e!==void 0&&i!=null&&A(e,["setup","generationConfig","responseModalities"],i);const a=x(t,["temperature"]);e!==void 0&&a!=null&&A(e,["setup","generationConfig","temperature"],a);const s=x(t,["topP"]);e!==void 0&&s!=null&&A(e,["setup","generationConfig","topP"],s);const o=x(t,["topK"]);e!==void 0&&o!=null&&A(e,["setup","generationConfig","topK"],o);const c=x(t,["maxOutputTokens"]);e!==void 0&&c!=null&&A(e,["setup","generationConfig","maxOutputTokens"],c);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&A(e,["setup","generationConfig","mediaResolution"],u);const f=x(t,["seed"]);e!==void 0&&f!=null&&A(e,["setup","generationConfig","seed"],f);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&A(e,["setup","generationConfig","speechConfig"],yI(h));const g=x(t,["thinkingConfig"]);e!==void 0&&g!=null&&A(e,["setup","generationConfig","thinkingConfig"],g);const y=x(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&A(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=x(t,["systemInstruction"]);e!==void 0&&w!=null&&A(e,["setup","systemInstruction"],Rae(Ci(w)));const S=x(t,["tools"]);if(e!==void 0&&S!=null){let P=Mv(S);Array.isArray(P)&&(P=P.map(k=>Wae(Rv(k)))),A(e,["setup","tools"],P)}const E=x(t,["sessionResumption"]);e!==void 0&&E!=null&&A(e,["setup","sessionResumption"],Vae(E));const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&A(e,["setup","inputAudioTranscription"],C);const M=x(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&A(e,["setup","outputAudioTranscription"],M);const R=x(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&A(e,["setup","realtimeInputConfig"],R);const D=x(t,["contextWindowCompression"]);e!==void 0&&D!=null&&A(e,["setup","contextWindowCompression"],D);const I=x(t,["proactivity"]);if(e!==void 0&&I!=null&&A(e,["setup","proactivity"],I),x(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function jae(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&A(e,["setup","generationConfig"],Iae(r));const i=x(t,["responseModalities"]);e!==void 0&&i!=null&&A(e,["setup","generationConfig","responseModalities"],i);const a=x(t,["temperature"]);e!==void 0&&a!=null&&A(e,["setup","generationConfig","temperature"],a);const s=x(t,["topP"]);e!==void 0&&s!=null&&A(e,["setup","generationConfig","topP"],s);const o=x(t,["topK"]);e!==void 0&&o!=null&&A(e,["setup","generationConfig","topK"],o);const c=x(t,["maxOutputTokens"]);e!==void 0&&c!=null&&A(e,["setup","generationConfig","maxOutputTokens"],c);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&A(e,["setup","generationConfig","mediaResolution"],u);const f=x(t,["seed"]);e!==void 0&&f!=null&&A(e,["setup","generationConfig","seed"],f);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&A(e,["setup","generationConfig","speechConfig"],yI(h));const g=x(t,["thinkingConfig"]);e!==void 0&&g!=null&&A(e,["setup","generationConfig","thinkingConfig"],g);const y=x(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&A(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=x(t,["systemInstruction"]);e!==void 0&&w!=null&&A(e,["setup","systemInstruction"],Ci(w));const S=x(t,["tools"]);if(e!==void 0&&S!=null){let k=Mv(S);Array.isArray(k)&&(k=k.map(U=>Yae(Rv(U)))),A(e,["setup","tools"],k)}const E=x(t,["sessionResumption"]);e!==void 0&&E!=null&&A(e,["setup","sessionResumption"],E);const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&A(e,["setup","inputAudioTranscription"],C);const M=x(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&A(e,["setup","outputAudioTranscription"],M);const R=x(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&A(e,["setup","realtimeInputConfig"],R);const D=x(t,["contextWindowCompression"]);e!==void 0&&D!=null&&A(e,["setup","contextWindowCompression"],D);const I=x(t,["proactivity"]);e!==void 0&&I!=null&&A(e,["setup","proactivity"],I);const P=x(t,["explicitVadSignal"]);return e!==void 0&&P!=null&&A(e,["setup","explicitVadSignal"],P),n}function Fae(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["setup","model"],Pt(t,r));const i=x(e,["config"]);return i!=null&&A(n,["config"],Oae(i,n)),n}function Uae(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["setup","model"],Pt(t,r));const i=x(e,["config"]);return i!=null&&A(n,["config"],jae(i,n)),n}function Bae(t){const e={},n=x(t,["musicGenerationConfig"]);return n!=null&&A(e,["musicGenerationConfig"],n),e}function Hae(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),A(e,["weightedPrompts"],r)}return e}function zae(t){const e={},n=x(t,["media"]);if(n!=null){let u=SG(n);Array.isArray(u)&&(u=u.map(f=>C1(f))),A(e,["mediaChunks"],u)}const r=x(t,["audio"]);r!=null&&A(e,["audio"],C1(AG(r)));const i=x(t,["audioStreamEnd"]);i!=null&&A(e,["audioStreamEnd"],i);const a=x(t,["video"]);a!=null&&A(e,["video"],C1(EG(a)));const s=x(t,["text"]);s!=null&&A(e,["text"],s);const o=x(t,["activityStart"]);o!=null&&A(e,["activityStart"],o);const c=x(t,["activityEnd"]);return c!=null&&A(e,["activityEnd"],c),e}function $ae(t){const e={},n=x(t,["media"]);if(n!=null){let u=SG(n);Array.isArray(u)&&(u=u.map(f=>f)),A(e,["mediaChunks"],u)}const r=x(t,["audio"]);r!=null&&A(e,["audio"],AG(r));const i=x(t,["audioStreamEnd"]);i!=null&&A(e,["audioStreamEnd"],i);const a=x(t,["video"]);a!=null&&A(e,["video"],EG(a));const s=x(t,["text"]);s!=null&&A(e,["text"],s);const o=x(t,["activityStart"]);o!=null&&A(e,["activityStart"],o);const c=x(t,["activityEnd"]);return c!=null&&A(e,["activityEnd"],c),e}function Gae(t){const e={},n=x(t,["setupComplete"]);n!=null&&A(e,["setupComplete"],n);const r=x(t,["serverContent"]);r!=null&&A(e,["serverContent"],r);const i=x(t,["toolCall"]);i!=null&&A(e,["toolCall"],i);const a=x(t,["toolCallCancellation"]);a!=null&&A(e,["toolCallCancellation"],a);const s=x(t,["usageMetadata"]);s!=null&&A(e,["usageMetadata"],Kae(s));const o=x(t,["goAway"]);o!=null&&A(e,["goAway"],o);const c=x(t,["sessionResumptionUpdate"]);c!=null&&A(e,["sessionResumptionUpdate"],c);const u=x(t,["voiceActivityDetectionSignal"]);u!=null&&A(e,["voiceActivityDetectionSignal"],u);const f=x(t,["voiceActivity"]);return f!=null&&A(e,["voiceActivity"],Xae(f)),e}function qae(t){const e={},n=x(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const a=x(t,["fileData"]);a!=null&&A(e,["fileData"],Mae(a));const s=x(t,["functionCall"]);s!=null&&A(e,["functionCall"],Pae(s));const o=x(t,["functionResponse"]);o!=null&&A(e,["functionResponse"],o);const c=x(t,["inlineData"]);c!=null&&A(e,["inlineData"],C1(c));const u=x(t,["text"]);u!=null&&A(e,["text"],u);const f=x(t,["thought"]);f!=null&&A(e,["thought"],f);const h=x(t,["thoughtSignature"]);h!=null&&A(e,["thoughtSignature"],h);const g=x(t,["videoMetadata"]);return g!=null&&A(e,["videoMetadata"],g),e}function Vae(t){const e={},n=x(t,["handle"]);if(n!=null&&A(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Wae(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&A(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&A(e,["fileSearch"],r);const i=x(t,["codeExecution"]);if(i!=null&&A(e,["codeExecution"],i),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(t,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),A(e,["functionDeclarations"],f)}const s=x(t,["googleMaps"]);s!=null&&A(e,["googleMaps"],Dae(s));const o=x(t,["googleSearch"]);o!=null&&A(e,["googleSearch"],Lae(o));const c=x(t,["googleSearchRetrieval"]);c!=null&&A(e,["googleSearchRetrieval"],c);const u=x(t,["urlContext"]);return u!=null&&A(e,["urlContext"],u),e}function Yae(t){const e={},n=x(t,["retrieval"]);n!=null&&A(e,["retrieval"],n);const r=x(t,["computerUse"]);if(r!=null&&A(e,["computerUse"],r),x(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=x(t,["codeExecution"]);i!=null&&A(e,["codeExecution"],i);const a=x(t,["enterpriseWebSearch"]);a!=null&&A(e,["enterpriseWebSearch"],a);const s=x(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(g=>kae(g))),A(e,["functionDeclarations"],h)}const o=x(t,["googleMaps"]);o!=null&&A(e,["googleMaps"],o);const c=x(t,["googleSearch"]);c!=null&&A(e,["googleSearch"],c);const u=x(t,["googleSearchRetrieval"]);u!=null&&A(e,["googleSearchRetrieval"],u);const f=x(t,["urlContext"]);return f!=null&&A(e,["urlContext"],f),e}function Kae(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&A(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&A(e,["cachedContentTokenCount"],r);const i=x(t,["candidatesTokenCount"]);i!=null&&A(e,["responseTokenCount"],i);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&A(e,["toolUsePromptTokenCount"],a);const s=x(t,["thoughtsTokenCount"]);s!=null&&A(e,["thoughtsTokenCount"],s);const o=x(t,["totalTokenCount"]);o!=null&&A(e,["totalTokenCount"],o);const c=x(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(w=>w)),A(e,["promptTokensDetails"],y)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(w=>w)),A(e,["cacheTokensDetails"],y)}const f=x(t,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(w=>w)),A(e,["responseTokensDetails"],y)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let y=h;Array.isArray(y)&&(y=y.map(w=>w)),A(e,["toolUsePromptTokensDetails"],y)}const g=x(t,["trafficType"]);return g!=null&&A(e,["trafficType"],g),e}function Xae(t){const e={},n=x(t,["type"]);return n!=null&&A(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jae(t){const e={},n=x(t,["data"]);if(n!=null&&A(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Qae(t){const e={},n=x(t,["content"]);n!=null&&A(e,["content"],n);const r=x(t,["citationMetadata"]);r!=null&&A(e,["citationMetadata"],Zae(r));const i=x(t,["tokenCount"]);i!=null&&A(e,["tokenCount"],i);const a=x(t,["finishReason"]);a!=null&&A(e,["finishReason"],a);const s=x(t,["avgLogprobs"]);s!=null&&A(e,["avgLogprobs"],s);const o=x(t,["groundingMetadata"]);o!=null&&A(e,["groundingMetadata"],o);const c=x(t,["index"]);c!=null&&A(e,["index"],c);const u=x(t,["logprobsResult"]);u!=null&&A(e,["logprobsResult"],u);const f=x(t,["safetyRatings"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>y)),A(e,["safetyRatings"],g)}const h=x(t,["urlContextMetadata"]);return h!=null&&A(e,["urlContextMetadata"],h),e}function Zae(t){const e={},n=x(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),A(e,["citations"],r)}return e}function ese(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let a=Os(i);Array.isArray(a)&&(a=a.map(s=>s)),A(n,["contents"],a)}return n}function tse(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),A(e,["tokensInfo"],i)}return e}function nse(t){const e={},n=x(t,["values"]);n!=null&&A(e,["values"],n);const r=x(t,["statistics"]);return r!=null&&A(e,["statistics"],rse(r)),e}function rse(t){const e={},n=x(t,["truncated"]);n!=null&&A(e,["truncated"],n);const r=x(t,["token_count"]);return r!=null&&A(e,["tokenCount"],r),e}function a_(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>foe(a))),A(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&A(e,["role"],r),e}function ise(t){const e={},n=x(t,["controlType"]);n!=null&&A(e,["controlType"],n);const r=x(t,["enableControlImageComputation"]);return r!=null&&A(e,["computeControl"],r),e}function ase(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function sse(t,e){const n={},r=x(t,["systemInstruction"]);e!==void 0&&r!=null&&A(e,["systemInstruction"],Ci(r));const i=x(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>FG(o))),A(e,["tools"],s)}const a=x(t,["generationConfig"]);return e!==void 0&&a!=null&&A(e,["generationConfig"],Jse(a)),n}function ose(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let s=Os(i);Array.isArray(s)&&(s=s.map(o=>a_(o))),A(n,["contents"],s)}const a=x(e,["config"]);return a!=null&&ase(a),n}function lse(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let s=Os(i);Array.isArray(s)&&(s=s.map(o=>o)),A(n,["contents"],s)}const a=x(e,["config"]);return a!=null&&sse(a,n),n}function cse(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);r!=null&&A(e,["totalTokens"],r);const i=x(t,["cachedContentTokenCount"]);return i!=null&&A(e,["cachedContentTokenCount"],i),e}function use(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["totalTokens"]);return r!=null&&A(e,["totalTokens"],r),e}function dse(t,e){const n={},r=x(e,["model"]);return r!=null&&A(n,["_url","name"],Pt(t,r)),n}function fse(t,e){const n={},r=x(e,["model"]);return r!=null&&A(n,["_url","name"],Pt(t,r)),n}function hse(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function pse(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}function mse(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&A(e,["parameters","storageUri"],r);const i=x(t,["negativePrompt"]);e!==void 0&&i!=null&&A(e,["parameters","negativePrompt"],i);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&A(e,["parameters","sampleCount"],a);const s=x(t,["aspectRatio"]);e!==void 0&&s!=null&&A(e,["parameters","aspectRatio"],s);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&A(e,["parameters","guidanceScale"],o);const c=x(t,["seed"]);e!==void 0&&c!=null&&A(e,["parameters","seed"],c);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&A(e,["parameters","safetySetting"],u);const f=x(t,["personGeneration"]);e!==void 0&&f!=null&&A(e,["parameters","personGeneration"],f);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&A(e,["parameters","includeSafetyAttributes"],h);const g=x(t,["includeRaiReason"]);e!==void 0&&g!=null&&A(e,["parameters","includeRaiReason"],g);const y=x(t,["language"]);e!==void 0&&y!=null&&A(e,["parameters","language"],y);const w=x(t,["outputMimeType"]);e!==void 0&&w!=null&&A(e,["parameters","outputOptions","mimeType"],w);const S=x(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&A(e,["parameters","outputOptions","compressionQuality"],S);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&A(e,["parameters","addWatermark"],E);const C=x(t,["labels"]);e!==void 0&&C!=null&&A(e,["labels"],C);const M=x(t,["editMode"]);e!==void 0&&M!=null&&A(e,["parameters","editMode"],M);const R=x(t,["baseSteps"]);return e!==void 0&&R!=null&&A(e,["parameters","editConfig","baseSteps"],R),n}function gse(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const a=x(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>yoe(c))),A(n,["instances[0]","referenceImages"],o)}const s=x(e,["config"]);return s!=null&&mse(s,n),n}function vse(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>s_(a))),A(e,["generatedImages"],i)}return e}function yse(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&A(e,["requests[]","taskType"],r);const i=x(t,["title"]);e!==void 0&&i!=null&&A(e,["requests[]","title"],i);const a=x(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&A(e,["requests[]","outputDimensionality"],a),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function bse(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&A(e,["instances[]","task_type"],r);const i=x(t,["title"]);e!==void 0&&i!=null&&A(e,["instances[]","title"],i);const a=x(t,["outputDimensionality"]);e!==void 0&&a!=null&&A(e,["parameters","outputDimensionality"],a);const s=x(t,["mimeType"]);e!==void 0&&s!=null&&A(e,["instances[]","mimeType"],s);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&A(e,["parameters","autoTruncate"],o),n}function xse(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let o=mI(t,i);Array.isArray(o)&&(o=o.map(c=>c)),A(n,["requests[]","content"],o)}const a=x(e,["config"]);a!=null&&yse(a,n);const s=x(e,["model"]);return s!==void 0&&A(n,["requests[]","model"],Pt(t,s)),n}function wse(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let s=mI(t,i);Array.isArray(s)&&(s=s.map(o=>o)),A(n,["instances[]","content"],s)}const a=x(e,["config"]);return a!=null&&bse(a,n),n}function Sse(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["embeddings"],a)}const i=x(t,["metadata"]);return i!=null&&A(e,["metadata"],i),e}function Ese(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>nse(s))),A(e,["embeddings"],a)}const i=x(t,["metadata"]);return i!=null&&A(e,["metadata"],i),e}function Ase(t){const e={},n=x(t,["endpoint"]);n!=null&&A(e,["name"],n);const r=x(t,["deployedModelId"]);return r!=null&&A(e,["deployedModelId"],r),e}function _se(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Cse(t){const e={},n=x(t,["id"]);n!=null&&A(e,["id"],n);const r=x(t,["args"]);r!=null&&A(e,["args"],r);const i=x(t,["name"]);if(i!=null&&A(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Tse(t){const e={},n=x(t,["allowedFunctionNames"]);n!=null&&A(e,["allowedFunctionNames"],n);const r=x(t,["mode"]);if(r!=null&&A(e,["mode"],r),x(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Nse(t){const e={},n=x(t,["description"]);n!=null&&A(e,["description"],n);const r=x(t,["name"]);r!=null&&A(e,["name"],r);const i=x(t,["parameters"]);i!=null&&A(e,["parameters"],i);const a=x(t,["parametersJsonSchema"]);a!=null&&A(e,["parametersJsonSchema"],a);const s=x(t,["response"]);s!=null&&A(e,["response"],s);const o=x(t,["responseJsonSchema"]);if(o!=null&&A(e,["responseJsonSchema"],o),x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Rse(t,e,n){const r={},i=x(e,["systemInstruction"]);n!==void 0&&i!=null&&A(n,["systemInstruction"],a_(Ci(i)));const a=x(e,["temperature"]);a!=null&&A(r,["temperature"],a);const s=x(e,["topP"]);s!=null&&A(r,["topP"],s);const o=x(e,["topK"]);o!=null&&A(r,["topK"],o);const c=x(e,["candidateCount"]);c!=null&&A(r,["candidateCount"],c);const u=x(e,["maxOutputTokens"]);u!=null&&A(r,["maxOutputTokens"],u);const f=x(e,["stopSequences"]);f!=null&&A(r,["stopSequences"],f);const h=x(e,["responseLogprobs"]);h!=null&&A(r,["responseLogprobs"],h);const g=x(e,["logprobs"]);g!=null&&A(r,["logprobs"],g);const y=x(e,["presencePenalty"]);y!=null&&A(r,["presencePenalty"],y);const w=x(e,["frequencyPenalty"]);w!=null&&A(r,["frequencyPenalty"],w);const S=x(e,["seed"]);S!=null&&A(r,["seed"],S);const E=x(e,["responseMimeType"]);E!=null&&A(r,["responseMimeType"],E);const C=x(e,["responseSchema"]);C!=null&&A(r,["responseSchema"],gI(C));const M=x(e,["responseJsonSchema"]);if(M!=null&&A(r,["responseJsonSchema"],M),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(e,["safetySettings"]);if(n!==void 0&&R!=null){let Q=R;Array.isArray(Q)&&(Q=Q.map(W=>boe(W))),A(n,["safetySettings"],Q)}const D=x(e,["tools"]);if(n!==void 0&&D!=null){let Q=Mv(D);Array.isArray(Q)&&(Q=Q.map(W=>Coe(Rv(W)))),A(n,["tools"],Q)}const I=x(e,["toolConfig"]);if(n!==void 0&&I!=null&&A(n,["toolConfig"],_oe(I)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const P=x(e,["cachedContent"]);n!==void 0&&P!=null&&A(n,["cachedContent"],Qc(t,P));const k=x(e,["responseModalities"]);k!=null&&A(r,["responseModalities"],k);const U=x(e,["mediaResolution"]);U!=null&&A(r,["mediaResolution"],U);const B=x(e,["speechConfig"]);if(B!=null&&A(r,["speechConfig"],vI(B)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const V=x(e,["thinkingConfig"]);V!=null&&A(r,["thinkingConfig"],V);const H=x(e,["imageConfig"]);H!=null&&A(r,["imageConfig"],noe(H));const G=x(e,["enableEnhancedCivicAnswers"]);if(G!=null&&A(r,["enableEnhancedCivicAnswers"],G),x(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function Mse(t,e,n){const r={},i=x(e,["systemInstruction"]);n!==void 0&&i!=null&&A(n,["systemInstruction"],Ci(i));const a=x(e,["temperature"]);a!=null&&A(r,["temperature"],a);const s=x(e,["topP"]);s!=null&&A(r,["topP"],s);const o=x(e,["topK"]);o!=null&&A(r,["topK"],o);const c=x(e,["candidateCount"]);c!=null&&A(r,["candidateCount"],c);const u=x(e,["maxOutputTokens"]);u!=null&&A(r,["maxOutputTokens"],u);const f=x(e,["stopSequences"]);f!=null&&A(r,["stopSequences"],f);const h=x(e,["responseLogprobs"]);h!=null&&A(r,["responseLogprobs"],h);const g=x(e,["logprobs"]);g!=null&&A(r,["logprobs"],g);const y=x(e,["presencePenalty"]);y!=null&&A(r,["presencePenalty"],y);const w=x(e,["frequencyPenalty"]);w!=null&&A(r,["frequencyPenalty"],w);const S=x(e,["seed"]);S!=null&&A(r,["seed"],S);const E=x(e,["responseMimeType"]);E!=null&&A(r,["responseMimeType"],E);const C=x(e,["responseSchema"]);C!=null&&A(r,["responseSchema"],gI(C));const M=x(e,["responseJsonSchema"]);M!=null&&A(r,["responseJsonSchema"],M);const R=x(e,["routingConfig"]);R!=null&&A(r,["routingConfig"],R);const D=x(e,["modelSelectionConfig"]);D!=null&&A(r,["modelConfig"],D);const I=x(e,["safetySettings"]);if(n!==void 0&&I!=null){let q=I;Array.isArray(q)&&(q=q.map(J=>J)),A(n,["safetySettings"],q)}const P=x(e,["tools"]);if(n!==void 0&&P!=null){let q=Mv(P);Array.isArray(q)&&(q=q.map(J=>FG(Rv(J)))),A(n,["tools"],q)}const k=x(e,["toolConfig"]);n!==void 0&&k!=null&&A(n,["toolConfig"],k);const U=x(e,["labels"]);n!==void 0&&U!=null&&A(n,["labels"],U);const B=x(e,["cachedContent"]);n!==void 0&&B!=null&&A(n,["cachedContent"],Qc(t,B));const V=x(e,["responseModalities"]);V!=null&&A(r,["responseModalities"],V);const H=x(e,["mediaResolution"]);H!=null&&A(r,["mediaResolution"],H);const G=x(e,["speechConfig"]);G!=null&&A(r,["speechConfig"],vI(G));const Q=x(e,["audioTimestamp"]);Q!=null&&A(r,["audioTimestamp"],Q);const W=x(e,["thinkingConfig"]);W!=null&&A(r,["thinkingConfig"],W);const ee=x(e,["imageConfig"]);if(ee!=null&&A(r,["imageConfig"],roe(ee)),x(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const $=x(e,["modelArmorConfig"]);return n!==void 0&&$!=null&&A(n,["modelArmorConfig"],$),r}function CF(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let s=Os(i);Array.isArray(s)&&(s=s.map(o=>a_(o))),A(n,["contents"],s)}const a=x(e,["config"]);return a!=null&&A(n,["generationConfig"],Rse(t,a,n)),n}function TF(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["contents"]);if(i!=null){let s=Os(i);Array.isArray(s)&&(s=s.map(o=>o)),A(n,["contents"],s)}const a=x(e,["config"]);return a!=null&&A(n,["generationConfig"],Mse(t,a,n)),n}function NF(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(u=>Qae(u))),A(e,["candidates"],c)}const i=x(t,["modelVersion"]);i!=null&&A(e,["modelVersion"],i);const a=x(t,["promptFeedback"]);a!=null&&A(e,["promptFeedback"],a);const s=x(t,["responseId"]);s!=null&&A(e,["responseId"],s);const o=x(t,["usageMetadata"]);return o!=null&&A(e,["usageMetadata"],o),e}function RF(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),A(e,["candidates"],u)}const i=x(t,["createTime"]);i!=null&&A(e,["createTime"],i);const a=x(t,["modelVersion"]);a!=null&&A(e,["modelVersion"],a);const s=x(t,["promptFeedback"]);s!=null&&A(e,["promptFeedback"],s);const o=x(t,["responseId"]);o!=null&&A(e,["responseId"],o);const c=x(t,["usageMetadata"]);return c!=null&&A(e,["usageMetadata"],c),e}function Pse(t,e){const n={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=x(t,["numberOfImages"]);e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&A(e,["parameters","aspectRatio"],i);const a=x(t,["guidanceScale"]);if(e!==void 0&&a!=null&&A(e,["parameters","guidanceScale"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=x(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&A(e,["parameters","safetySetting"],s);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&A(e,["parameters","personGeneration"],o);const c=x(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&A(e,["parameters","includeSafetyAttributes"],c);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&A(e,["parameters","includeRaiReason"],u);const f=x(t,["language"]);e!==void 0&&f!=null&&A(e,["parameters","language"],f);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&A(e,["parameters","outputOptions","mimeType"],h);const g=x(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&A(e,["parameters","outputOptions","compressionQuality"],g),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=x(t,["imageSize"]);if(e!==void 0&&y!=null&&A(e,["parameters","sampleImageSize"],y),x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function kse(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&A(e,["parameters","storageUri"],r);const i=x(t,["negativePrompt"]);e!==void 0&&i!=null&&A(e,["parameters","negativePrompt"],i);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&A(e,["parameters","sampleCount"],a);const s=x(t,["aspectRatio"]);e!==void 0&&s!=null&&A(e,["parameters","aspectRatio"],s);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&A(e,["parameters","guidanceScale"],o);const c=x(t,["seed"]);e!==void 0&&c!=null&&A(e,["parameters","seed"],c);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&A(e,["parameters","safetySetting"],u);const f=x(t,["personGeneration"]);e!==void 0&&f!=null&&A(e,["parameters","personGeneration"],f);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&A(e,["parameters","includeSafetyAttributes"],h);const g=x(t,["includeRaiReason"]);e!==void 0&&g!=null&&A(e,["parameters","includeRaiReason"],g);const y=x(t,["language"]);e!==void 0&&y!=null&&A(e,["parameters","language"],y);const w=x(t,["outputMimeType"]);e!==void 0&&w!=null&&A(e,["parameters","outputOptions","mimeType"],w);const S=x(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&A(e,["parameters","outputOptions","compressionQuality"],S);const E=x(t,["addWatermark"]);e!==void 0&&E!=null&&A(e,["parameters","addWatermark"],E);const C=x(t,["labels"]);e!==void 0&&C!=null&&A(e,["labels"],C);const M=x(t,["imageSize"]);e!==void 0&&M!=null&&A(e,["parameters","sampleImageSize"],M);const R=x(t,["enhancePrompt"]);return e!==void 0&&R!=null&&A(e,["parameters","enhancePrompt"],R),n}function Ise(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const a=x(e,["config"]);return a!=null&&Pse(a,n),n}function Dse(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const a=x(e,["config"]);return a!=null&&kse(a,n),n}function Lse(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>Wse(s))),A(e,["generatedImages"],a)}const i=x(t,["positivePromptSafetyAttributes"]);return i!=null&&A(e,["positivePromptSafetyAttributes"],OG(i)),e}function Ose(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>s_(s))),A(e,["generatedImages"],a)}const i=x(t,["positivePromptSafetyAttributes"]);return i!=null&&A(e,["positivePromptSafetyAttributes"],jG(i)),e}function jse(t,e){const n={},r=x(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=x(t,["durationSeconds"]);if(e!==void 0&&i!=null&&A(e,["parameters","durationSeconds"],i),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(t,["aspectRatio"]);e!==void 0&&a!=null&&A(e,["parameters","aspectRatio"],a);const s=x(t,["resolution"]);e!==void 0&&s!=null&&A(e,["parameters","resolution"],s);const o=x(t,["personGeneration"]);if(e!==void 0&&o!=null&&A(e,["parameters","personGeneration"],o),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=x(t,["negativePrompt"]);e!==void 0&&c!=null&&A(e,["parameters","negativePrompt"],c);const u=x(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&A(e,["parameters","enhancePrompt"],u),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=x(t,["lastFrame"]);e!==void 0&&f!=null&&A(e,["instances[0]","lastFrame"],o_(f));const h=x(t,["referenceImages"]);if(e!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(y=>Uoe(y))),A(e,["instances[0]","referenceImages"],g)}if(x(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Fse(t,e){const n={},r=x(t,["numberOfVideos"]);e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r);const i=x(t,["outputGcsUri"]);e!==void 0&&i!=null&&A(e,["parameters","storageUri"],i);const a=x(t,["fps"]);e!==void 0&&a!=null&&A(e,["parameters","fps"],a);const s=x(t,["durationSeconds"]);e!==void 0&&s!=null&&A(e,["parameters","durationSeconds"],s);const o=x(t,["seed"]);e!==void 0&&o!=null&&A(e,["parameters","seed"],o);const c=x(t,["aspectRatio"]);e!==void 0&&c!=null&&A(e,["parameters","aspectRatio"],c);const u=x(t,["resolution"]);e!==void 0&&u!=null&&A(e,["parameters","resolution"],u);const f=x(t,["personGeneration"]);e!==void 0&&f!=null&&A(e,["parameters","personGeneration"],f);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&A(e,["parameters","pubsubTopic"],h);const g=x(t,["negativePrompt"]);e!==void 0&&g!=null&&A(e,["parameters","negativePrompt"],g);const y=x(t,["enhancePrompt"]);e!==void 0&&y!=null&&A(e,["parameters","enhancePrompt"],y);const w=x(t,["generateAudio"]);e!==void 0&&w!=null&&A(e,["parameters","generateAudio"],w);const S=x(t,["lastFrame"]);e!==void 0&&S!=null&&A(e,["instances[0]","lastFrame"],To(S));const E=x(t,["referenceImages"]);if(e!==void 0&&E!=null){let R=E;Array.isArray(R)&&(R=R.map(D=>Boe(D))),A(e,["instances[0]","referenceImages"],R)}const C=x(t,["mask"]);e!==void 0&&C!=null&&A(e,["instances[0]","mask"],Foe(C));const M=x(t,["compressionQuality"]);return e!==void 0&&M!=null&&A(e,["parameters","compressionQuality"],M),n}function Use(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["response","generateVideoResponse"]);return s!=null&&A(e,["response"],$se(s)),e}function Bse(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["response"]);return s!=null&&A(e,["response"],Gse(s)),e}function Hse(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const a=x(e,["image"]);a!=null&&A(n,["instances[0]","image"],o_(a));const s=x(e,["video"]);s!=null&&A(n,["instances[0]","video"],UG(s));const o=x(e,["source"]);o!=null&&qse(o,n);const c=x(e,["config"]);return c!=null&&jse(c,n),n}function zse(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["prompt"]);i!=null&&A(n,["instances[0]","prompt"],i);const a=x(e,["image"]);a!=null&&A(n,["instances[0]","image"],To(a));const s=x(e,["video"]);s!=null&&A(n,["instances[0]","video"],BG(s));const o=x(e,["source"]);o!=null&&Vse(o,n);const c=x(e,["config"]);return c!=null&&Fse(c,n),n}function $se(t){const e={},n=x(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>Kse(s))),A(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=x(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function Gse(t){const e={},n=x(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>Xse(s))),A(e,["generatedVideos"],a)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&A(e,["raiMediaFilteredCount"],r);const i=x(t,["raiMediaFilteredReasons"]);return i!=null&&A(e,["raiMediaFilteredReasons"],i),e}function qse(t,e){const n={},r=x(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=x(t,["image"]);e!==void 0&&i!=null&&A(e,["instances[0]","image"],o_(i));const a=x(t,["video"]);return e!==void 0&&a!=null&&A(e,["instances[0]","video"],UG(a)),n}function Vse(t,e){const n={},r=x(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=x(t,["image"]);e!==void 0&&i!=null&&A(e,["instances[0]","image"],To(i));const a=x(t,["video"]);return e!==void 0&&a!=null&&A(e,["instances[0]","video"],BG(a)),n}function Wse(t){const e={},n=x(t,["_self"]);n!=null&&A(e,["image"],ioe(n));const r=x(t,["raiFilteredReason"]);r!=null&&A(e,["raiFilteredReason"],r);const i=x(t,["_self"]);return i!=null&&A(e,["safetyAttributes"],OG(i)),e}function s_(t){const e={},n=x(t,["_self"]);n!=null&&A(e,["image"],LG(n));const r=x(t,["raiFilteredReason"]);r!=null&&A(e,["raiFilteredReason"],r);const i=x(t,["_self"]);i!=null&&A(e,["safetyAttributes"],jG(i));const a=x(t,["prompt"]);return a!=null&&A(e,["enhancedPrompt"],a),e}function Yse(t){const e={},n=x(t,["_self"]);n!=null&&A(e,["mask"],LG(n));const r=x(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),A(e,["labels"],i)}return e}function Kse(t){const e={},n=x(t,["video"]);return n!=null&&A(e,["video"],Ooe(n)),e}function Xse(t){const e={},n=x(t,["_self"]);return n!=null&&A(e,["video"],joe(n)),e}function Jse(t){const e={},n=x(t,["modelSelectionConfig"]);n!=null&&A(e,["modelConfig"],n);const r=x(t,["responseJsonSchema"]);r!=null&&A(e,["responseJsonSchema"],r);const i=x(t,["audioTimestamp"]);i!=null&&A(e,["audioTimestamp"],i);const a=x(t,["candidateCount"]);a!=null&&A(e,["candidateCount"],a);const s=x(t,["enableAffectiveDialog"]);s!=null&&A(e,["enableAffectiveDialog"],s);const o=x(t,["frequencyPenalty"]);o!=null&&A(e,["frequencyPenalty"],o);const c=x(t,["logprobs"]);c!=null&&A(e,["logprobs"],c);const u=x(t,["maxOutputTokens"]);u!=null&&A(e,["maxOutputTokens"],u);const f=x(t,["mediaResolution"]);f!=null&&A(e,["mediaResolution"],f);const h=x(t,["presencePenalty"]);h!=null&&A(e,["presencePenalty"],h);const g=x(t,["responseLogprobs"]);g!=null&&A(e,["responseLogprobs"],g);const y=x(t,["responseMimeType"]);y!=null&&A(e,["responseMimeType"],y);const w=x(t,["responseModalities"]);w!=null&&A(e,["responseModalities"],w);const S=x(t,["responseSchema"]);S!=null&&A(e,["responseSchema"],S);const E=x(t,["routingConfig"]);E!=null&&A(e,["routingConfig"],E);const C=x(t,["seed"]);C!=null&&A(e,["seed"],C);const M=x(t,["speechConfig"]);M!=null&&A(e,["speechConfig"],M);const R=x(t,["stopSequences"]);R!=null&&A(e,["stopSequences"],R);const D=x(t,["temperature"]);D!=null&&A(e,["temperature"],D);const I=x(t,["thinkingConfig"]);I!=null&&A(e,["thinkingConfig"],I);const P=x(t,["topK"]);P!=null&&A(e,["topK"],P);const k=x(t,["topP"]);if(k!=null&&A(e,["topP"],k),x(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Qse(t,e){const n={},r=x(e,["model"]);return r!=null&&A(n,["_url","name"],Pt(t,r)),n}function Zse(t,e){const n={},r=x(e,["model"]);return r!=null&&A(n,["_url","name"],Pt(t,r)),n}function eoe(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function toe(t){const e={};if(x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function noe(t){const e={},n=x(t,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const r=x(t,["imageSize"]);if(r!=null&&A(e,["imageSize"],r),x(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(x(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function roe(t){const e={},n=x(t,["aspectRatio"]);n!=null&&A(e,["aspectRatio"],n);const r=x(t,["imageSize"]);r!=null&&A(e,["imageSize"],r);const i=x(t,["personGeneration"]);i!=null&&A(e,["personGeneration"],i);const a=x(t,["outputMimeType"]);a!=null&&A(e,["imageOutputOptions","mimeType"],a);const s=x(t,["outputCompressionQuality"]);return s!=null&&A(e,["imageOutputOptions","compressionQuality"],s),e}function ioe(t){const e={},n=x(t,["bytesBase64Encoded"]);n!=null&&A(e,["imageBytes"],Jd(n));const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function LG(t){const e={},n=x(t,["gcsUri"]);n!=null&&A(e,["gcsUri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&A(e,["imageBytes"],Jd(r));const i=x(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}function o_(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=x(t,["imageBytes"]);n!=null&&A(e,["bytesBase64Encoded"],Jd(n));const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function To(t){const e={},n=x(t,["gcsUri"]);n!=null&&A(e,["gcsUri"],n);const r=x(t,["imageBytes"]);r!=null&&A(e,["bytesBase64Encoded"],Jd(r));const i=x(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}function aoe(t,e,n){const r={},i=x(e,["pageSize"]);n!==void 0&&i!=null&&A(n,["_query","pageSize"],i);const a=x(e,["pageToken"]);n!==void 0&&a!=null&&A(n,["_query","pageToken"],a);const s=x(e,["filter"]);n!==void 0&&s!=null&&A(n,["_query","filter"],s);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&A(n,["_url","models_url"],NG(t,o)),r}function soe(t,e,n){const r={},i=x(e,["pageSize"]);n!==void 0&&i!=null&&A(n,["_query","pageSize"],i);const a=x(e,["pageToken"]);n!==void 0&&a!=null&&A(n,["_query","pageToken"],a);const s=x(e,["filter"]);n!==void 0&&s!=null&&A(n,["_query","filter"],s);const o=x(e,["queryBase"]);return n!==void 0&&o!=null&&A(n,["_url","models_url"],NG(t,o)),r}function ooe(t,e){const n={},r=x(e,["config"]);return r!=null&&aoe(t,r,n),n}function loe(t,e){const n={},r=x(e,["config"]);return r!=null&&soe(t,r,n),n}function coe(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["_self"]);if(i!=null){let a=RG(i);Array.isArray(a)&&(a=a.map(s=>ZR(s))),A(e,["models"],a)}return e}function uoe(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["_self"]);if(i!=null){let a=RG(i);Array.isArray(a)&&(a=a.map(s=>eM(s))),A(e,["models"],a)}return e}function doe(t){const e={},n=x(t,["maskMode"]);n!=null&&A(e,["maskMode"],n);const r=x(t,["segmentationClasses"]);r!=null&&A(e,["maskClasses"],r);const i=x(t,["maskDilation"]);return i!=null&&A(e,["dilation"],i),e}function ZR(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["displayName"]);r!=null&&A(e,["displayName"],r);const i=x(t,["description"]);i!=null&&A(e,["description"],i);const a=x(t,["version"]);a!=null&&A(e,["version"],a);const s=x(t,["_self"]);s!=null&&A(e,["tunedModelInfo"],Toe(s));const o=x(t,["inputTokenLimit"]);o!=null&&A(e,["inputTokenLimit"],o);const c=x(t,["outputTokenLimit"]);c!=null&&A(e,["outputTokenLimit"],c);const u=x(t,["supportedGenerationMethods"]);u!=null&&A(e,["supportedActions"],u);const f=x(t,["temperature"]);f!=null&&A(e,["temperature"],f);const h=x(t,["maxTemperature"]);h!=null&&A(e,["maxTemperature"],h);const g=x(t,["topP"]);g!=null&&A(e,["topP"],g);const y=x(t,["topK"]);y!=null&&A(e,["topK"],y);const w=x(t,["thinking"]);return w!=null&&A(e,["thinking"],w),e}function eM(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["displayName"]);r!=null&&A(e,["displayName"],r);const i=x(t,["description"]);i!=null&&A(e,["description"],i);const a=x(t,["versionId"]);a!=null&&A(e,["version"],a);const s=x(t,["deployedModels"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(g=>Ase(g))),A(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&A(e,["labels"],o);const c=x(t,["_self"]);c!=null&&A(e,["tunedModelInfo"],Noe(c));const u=x(t,["defaultCheckpointId"]);u!=null&&A(e,["defaultCheckpointId"],u);const f=x(t,["checkpoints"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),A(e,["checkpoints"],h)}return e}function foe(t){const e={},n=x(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const a=x(t,["fileData"]);a!=null&&A(e,["fileData"],_se(a));const s=x(t,["functionCall"]);s!=null&&A(e,["functionCall"],Cse(s));const o=x(t,["functionResponse"]);o!=null&&A(e,["functionResponse"],o);const c=x(t,["inlineData"]);c!=null&&A(e,["inlineData"],Jae(c));const u=x(t,["text"]);u!=null&&A(e,["text"],u);const f=x(t,["thought"]);f!=null&&A(e,["thought"],f);const h=x(t,["thoughtSignature"]);h!=null&&A(e,["thoughtSignature"],h);const g=x(t,["videoMetadata"]);return g!=null&&A(e,["videoMetadata"],g),e}function hoe(t){const e={},n=x(t,["productImage"]);return n!=null&&A(e,["image"],To(n)),e}function poe(t,e){const n={},r=x(t,["numberOfImages"]);e!==void 0&&r!=null&&A(e,["parameters","sampleCount"],r);const i=x(t,["baseSteps"]);e!==void 0&&i!=null&&A(e,["parameters","baseSteps"],i);const a=x(t,["outputGcsUri"]);e!==void 0&&a!=null&&A(e,["parameters","storageUri"],a);const s=x(t,["seed"]);e!==void 0&&s!=null&&A(e,["parameters","seed"],s);const o=x(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&A(e,["parameters","safetySetting"],o);const c=x(t,["personGeneration"]);e!==void 0&&c!=null&&A(e,["parameters","personGeneration"],c);const u=x(t,["addWatermark"]);e!==void 0&&u!=null&&A(e,["parameters","addWatermark"],u);const f=x(t,["outputMimeType"]);e!==void 0&&f!=null&&A(e,["parameters","outputOptions","mimeType"],f);const h=x(t,["outputCompressionQuality"]);e!==void 0&&h!=null&&A(e,["parameters","outputOptions","compressionQuality"],h);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&A(e,["parameters","enhancePrompt"],g);const y=x(t,["labels"]);return e!==void 0&&y!=null&&A(e,["labels"],y),n}function moe(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["source"]);i!=null&&voe(i,n);const a=x(e,["config"]);return a!=null&&poe(a,n),n}function goe(t){const e={},n=x(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>s_(i))),A(e,["generatedImages"],r)}return e}function voe(t,e){const n={},r=x(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=x(t,["personImage"]);e!==void 0&&i!=null&&A(e,["instances[0]","personImage","image"],To(i));const a=x(t,["productImages"]);if(e!==void 0&&a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>hoe(o))),A(e,["instances[0]","productImages"],s)}return n}function yoe(t){const e={},n=x(t,["referenceImage"]);n!=null&&A(e,["referenceImage"],To(n));const r=x(t,["referenceId"]);r!=null&&A(e,["referenceId"],r);const i=x(t,["referenceType"]);i!=null&&A(e,["referenceType"],i);const a=x(t,["maskImageConfig"]);a!=null&&A(e,["maskImageConfig"],doe(a));const s=x(t,["controlImageConfig"]);s!=null&&A(e,["controlImageConfig"],ise(s));const o=x(t,["styleImageConfig"]);o!=null&&A(e,["styleImageConfig"],o);const c=x(t,["subjectImageConfig"]);return c!=null&&A(e,["subjectImageConfig"],c),e}function OG(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&A(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&A(e,["scores"],r);const i=x(t,["contentType"]);return i!=null&&A(e,["contentType"],i),e}function jG(t){const e={},n=x(t,["safetyAttributes","categories"]);n!=null&&A(e,["categories"],n);const r=x(t,["safetyAttributes","scores"]);r!=null&&A(e,["scores"],r);const i=x(t,["contentType"]);return i!=null&&A(e,["contentType"],i),e}function boe(t){const e={},n=x(t,["category"]);if(n!=null&&A(e,["category"],n),x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["threshold"]);return r!=null&&A(e,["threshold"],r),e}function xoe(t){const e={},n=x(t,["image"]);return n!=null&&A(e,["image"],To(n)),e}function woe(t,e){const n={},r=x(t,["mode"]);e!==void 0&&r!=null&&A(e,["parameters","mode"],r);const i=x(t,["maxPredictions"]);e!==void 0&&i!=null&&A(e,["parameters","maxPredictions"],i);const a=x(t,["confidenceThreshold"]);e!==void 0&&a!=null&&A(e,["parameters","confidenceThreshold"],a);const s=x(t,["maskDilation"]);e!==void 0&&s!=null&&A(e,["parameters","maskDilation"],s);const o=x(t,["binaryColorThreshold"]);e!==void 0&&o!=null&&A(e,["parameters","binaryColorThreshold"],o);const c=x(t,["labels"]);return e!==void 0&&c!=null&&A(e,["labels"],c),n}function Soe(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["source"]);i!=null&&Aoe(i,n);const a=x(e,["config"]);return a!=null&&woe(a,n),n}function Eoe(t){const e={},n=x(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Yse(i))),A(e,["generatedMasks"],r)}return e}function Aoe(t,e){const n={},r=x(t,["prompt"]);e!==void 0&&r!=null&&A(e,["instances[0]","prompt"],r);const i=x(t,["image"]);e!==void 0&&i!=null&&A(e,["instances[0]","image"],To(i));const a=x(t,["scribbleImage"]);return e!==void 0&&a!=null&&A(e,["instances[0]","scribble"],xoe(a)),n}function _oe(t){const e={},n=x(t,["retrievalConfig"]);n!=null&&A(e,["retrievalConfig"],n);const r=x(t,["functionCallingConfig"]);return r!=null&&A(e,["functionCallingConfig"],Tse(r)),e}function Coe(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&A(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&A(e,["fileSearch"],r);const i=x(t,["codeExecution"]);if(i!=null&&A(e,["codeExecution"],i),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(t,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),A(e,["functionDeclarations"],f)}const s=x(t,["googleMaps"]);s!=null&&A(e,["googleMaps"],eoe(s));const o=x(t,["googleSearch"]);o!=null&&A(e,["googleSearch"],toe(o));const c=x(t,["googleSearchRetrieval"]);c!=null&&A(e,["googleSearchRetrieval"],c);const u=x(t,["urlContext"]);return u!=null&&A(e,["urlContext"],u),e}function FG(t){const e={},n=x(t,["retrieval"]);n!=null&&A(e,["retrieval"],n);const r=x(t,["computerUse"]);if(r!=null&&A(e,["computerUse"],r),x(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=x(t,["codeExecution"]);i!=null&&A(e,["codeExecution"],i);const a=x(t,["enterpriseWebSearch"]);a!=null&&A(e,["enterpriseWebSearch"],a);const s=x(t,["functionDeclarations"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(g=>Nse(g))),A(e,["functionDeclarations"],h)}const o=x(t,["googleMaps"]);o!=null&&A(e,["googleMaps"],o);const c=x(t,["googleSearch"]);c!=null&&A(e,["googleSearch"],c);const u=x(t,["googleSearchRetrieval"]);u!=null&&A(e,["googleSearchRetrieval"],u);const f=x(t,["urlContext"]);return f!=null&&A(e,["urlContext"],f),e}function Toe(t){const e={},n=x(t,["baseModel"]);n!=null&&A(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&A(e,["createTime"],r);const i=x(t,["updateTime"]);return i!=null&&A(e,["updateTime"],i),e}function Noe(t){const e={},n=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&A(e,["baseModel"],n);const r=x(t,["createTime"]);r!=null&&A(e,["createTime"],r);const i=x(t,["updateTime"]);return i!=null&&A(e,["updateTime"],i),e}function Roe(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&A(e,["displayName"],r);const i=x(t,["description"]);e!==void 0&&i!=null&&A(e,["description"],i);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&A(e,["defaultCheckpointId"],a),n}function Moe(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&A(e,["displayName"],r);const i=x(t,["description"]);e!==void 0&&i!=null&&A(e,["description"],i);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&A(e,["defaultCheckpointId"],a),n}function Poe(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","name"],Pt(t,r));const i=x(e,["config"]);return i!=null&&Roe(i,n),n}function koe(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["config"]);return i!=null&&Moe(i,n),n}function Ioe(t,e){const n={},r=x(t,["outputGcsUri"]);e!==void 0&&r!=null&&A(e,["parameters","storageUri"],r);const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&A(e,["parameters","safetySetting"],i);const a=x(t,["personGeneration"]);e!==void 0&&a!=null&&A(e,["parameters","personGeneration"],a);const s=x(t,["includeRaiReason"]);e!==void 0&&s!=null&&A(e,["parameters","includeRaiReason"],s);const o=x(t,["outputMimeType"]);e!==void 0&&o!=null&&A(e,["parameters","outputOptions","mimeType"],o);const c=x(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&A(e,["parameters","outputOptions","compressionQuality"],c);const u=x(t,["enhanceInputImage"]);e!==void 0&&u!=null&&A(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=x(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&A(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const h=x(t,["labels"]);e!==void 0&&h!=null&&A(e,["labels"],h);const g=x(t,["numberOfImages"]);e!==void 0&&g!=null&&A(e,["parameters","sampleCount"],g);const y=x(t,["mode"]);return e!==void 0&&y!=null&&A(e,["parameters","mode"],y),n}function Doe(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["_url","model"],Pt(t,r));const i=x(e,["image"]);i!=null&&A(n,["instances[0]","image"],To(i));const a=x(e,["upscaleFactor"]);a!=null&&A(n,["parameters","upscaleConfig","upscaleFactor"],a);const s=x(e,["config"]);return s!=null&&Ioe(s,n),n}function Loe(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>s_(a))),A(e,["generatedImages"],i)}return e}function Ooe(t){const e={},n=x(t,["uri"]);n!=null&&A(e,["uri"],n);const r=x(t,["encodedVideo"]);r!=null&&A(e,["videoBytes"],Jd(r));const i=x(t,["encoding"]);return i!=null&&A(e,["mimeType"],i),e}function joe(t){const e={},n=x(t,["gcsUri"]);n!=null&&A(e,["uri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&A(e,["videoBytes"],Jd(r));const i=x(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}function Foe(t){const e={},n=x(t,["image"]);n!=null&&A(e,["_self"],To(n));const r=x(t,["maskMode"]);return r!=null&&A(e,["maskMode"],r),e}function Uoe(t){const e={},n=x(t,["image"]);n!=null&&A(e,["image"],o_(n));const r=x(t,["referenceType"]);return r!=null&&A(e,["referenceType"],r),e}function Boe(t){const e={},n=x(t,["image"]);n!=null&&A(e,["image"],To(n));const r=x(t,["referenceType"]);return r!=null&&A(e,["referenceType"],r),e}function UG(t){const e={},n=x(t,["uri"]);n!=null&&A(e,["uri"],n);const r=x(t,["videoBytes"]);r!=null&&A(e,["encodedVideo"],Jd(r));const i=x(t,["mimeType"]);return i!=null&&A(e,["encoding"],i),e}function BG(t){const e={},n=x(t,["uri"]);n!=null&&A(e,["gcsUri"],n);const r=x(t,["videoBytes"]);r!=null&&A(e,["bytesBase64Encoded"],Jd(r));const i=x(t,["mimeType"]);return i!=null&&A(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hoe(t,e){const n={},r=x(t,["displayName"]);return e!==void 0&&r!=null&&A(e,["displayName"],r),n}function zoe(t){const e={},n=x(t,["config"]);return n!=null&&Hoe(n,e),e}function $oe(t,e){const n={},r=x(t,["force"]);return e!==void 0&&r!=null&&A(e,["_query","force"],r),n}function Goe(t){const e={},n=x(t,["name"]);n!=null&&A(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&$oe(r,e),e}function qoe(t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],n),e}function Voe(t,e){const n={},r=x(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["customMetadata"],a)}const i=x(t,["chunkingConfig"]);return e!==void 0&&i!=null&&A(e,["chunkingConfig"],i),n}function Woe(t){const e={},n=x(t,["name"]);n!=null&&A(e,["name"],n);const r=x(t,["metadata"]);r!=null&&A(e,["metadata"],r);const i=x(t,["done"]);i!=null&&A(e,["done"],i);const a=x(t,["error"]);a!=null&&A(e,["error"],a);const s=x(t,["response"]);return s!=null&&A(e,["response"],Koe(s)),e}function Yoe(t){const e={},n=x(t,["fileSearchStoreName"]);n!=null&&A(e,["_url","file_search_store_name"],n);const r=x(t,["fileName"]);r!=null&&A(e,["fileName"],r);const i=x(t,["config"]);return i!=null&&Voe(i,e),e}function Koe(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["parent"]);r!=null&&A(e,["parent"],r);const i=x(t,["documentName"]);return i!=null&&A(e,["documentName"],i),e}function Xoe(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function Joe(t){const e={},n=x(t,["config"]);return n!=null&&Xoe(n,e),e}function Qoe(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["fileSearchStores"],a)}return e}function HG(t,e){const n={},r=x(t,["mimeType"]);e!==void 0&&r!=null&&A(e,["mimeType"],r);const i=x(t,["displayName"]);e!==void 0&&i!=null&&A(e,["displayName"],i);const a=x(t,["customMetadata"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>c)),A(e,["customMetadata"],o)}const s=x(t,["chunkingConfig"]);return e!==void 0&&s!=null&&A(e,["chunkingConfig"],s),n}function Zoe(t){const e={},n=x(t,["fileSearchStoreName"]);n!=null&&A(e,["_url","file_search_store_name"],n);const r=x(t,["config"]);return r!=null&&HG(r,e),e}function ele(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&A(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tle="Content-Type",nle="X-Server-Timeout",rle="User-Agent",tM="x-goog-api-client",ile="1.38.0",ale=`google-genai-sdk/${ile}`,sle="v1beta1",ole="v1beta";class lle{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const o=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!o?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:sle}else{if(!this.clientOptions.apiKey)throw new j0({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:ole,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===KR.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,o]of Object.entries(e.queryParams))i.searchParams.append(s,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const a=new AbortController,s=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>a.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=s}return n&&n.extraBody!==null&&cle(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await MF(i),new XR(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await MF(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return vo(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const o="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:f}=yield nt(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const w=JSON.parse(h);if("error"in w){const S=JSON.parse(JSON.stringify(w.error)),E=S.status,C=S.code,M=`got status: ${E}. ${JSON.stringify(w)}`;if(C>=400&&C<600)throw new j0({message:M,status:C})}}catch(w){if(w.name==="ApiError")throw w}s+=h;let g=-1,y=0;for(;;){g=-1,y=0;for(const E of c){const C=s.indexOf(E);C!==-1&&(g===-1||C<g)&&(g=C,y=E.length)}if(g===-1)break;const w=s.substring(0,g);s=s.substring(g+y);const S=w.trim();if(S.startsWith(o)){const E=S.substring(o.length).trim();try{const C=new Response(E,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield nt(new XR(C))}catch(C){throw new Error(`exception parsing stream chunk ${E}. ${C}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=ale+" "+this.clientOptions.userAgentExtra;return e[rle]=n,e[tM]=n,e[tle]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(nle,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,s=await a.stat(e);i.sizeBytes=String(s.size);const o=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=o;const c={file:i},u=this.getFileName(e),f=Pe("upload/v1beta/files",c._url),h=await this.fetchUploadUrl(f,i.sizeBytes,i.mimeType,u,c,n==null?void 0:n.httpOptions);return a.upload(e,h,this)}async uploadFileToFileSearchStore(e,n,r){var i;const a=this.clientOptions.uploader,s=await a.stat(n),o=String(s.size),c=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),h={};r!=null&&HG(r,h);const g=await this.fetchUploadUrl(u,o,c,f,h,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,a,s){var o;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:c});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(o=u==null?void 0:u.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function MF(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new j0({message:i,status:n}):new Error(i)}}function cle(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,s){const o=Object.assign({},a);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const u=s[c],f=o[c];u&&typeof u=="object"&&!Array.isArray(u)&&f&&typeof f=="object"&&!Array.isArray(f)?o[c]=r(f,u):(f&&u&&typeof f!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof u}. Overwriting.`),o[c]=u)}return o}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ule="mcp_used/unknown";let dle=!1;function zG(t){for(const e of t)if(fle(e)||typeof e=="object"&&"inputSchema"in e)return!0;return dle}function $G(t){var e;const n=(e=t[tM])!==null&&e!==void 0?e:"";t[tM]=(n+` ${ule}`).trimStart()}function fle(t){return t!==null&&typeof t=="object"&&t instanceof bI}function hle(t){return vo(this,arguments,function*(n,r=100){let i,a=0;for(;a<r;){const s=yield nt(n.listTools({cursor:i}));for(const o of s.tools)yield yield nt(o),a++;if(!s.nextCursor)break;i=s.nextCursor}})}class bI{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new bI(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},s=[];for(const f of this.mcpClients)try{for(var o=!0,c=(n=void 0,yo(hle(f))),u;u=await c.next(),e=u.done,!e;o=!0){i=u.value,o=!1;const h=i;s.push(h);const g=h.name;if(a[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);a[g]=f}}catch(h){n={error:h}}finally{try{!o&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Gre(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ple(t,e,n){const r=new Ore;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class mle{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),s=yle(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const f=new Promise(R=>{u=R}),h=e.callbacks,g=function(){u({})},y=this.apiClient,w={onopen:g,onmessage:R=>{ple(y,h.onmessage,R)},onerror:(n=h==null?void 0:h.onerror)!==null&&n!==void 0?n:function(R){},onclose:(r=h==null?void 0:h.onclose)!==null&&r!==void 0?r:function(R){}},S=this.webSocketFactory.create(c,vle(s),w);S.connect(),await f;const M={setup:{model:Pt(this.apiClient,e.model)}};return S.send(JSON.stringify(M)),new gle(S,this.apiClient)}}class gle{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Hae(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Bae(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Em.PLAY)}pause(){this.sendPlaybackControl(Em.PAUSE)}stop(){this.sendPlaybackControl(Em.STOP)}resetContext(){this.sendPlaybackControl(Em.RESET_CONTEXT)}close(){this.conn.close()}}function vle(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function yle(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ble="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function xle(t,e,n){const r=new Lre;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(t.isVertexAI()){const s=Gae(a);Object.assign(r,s)}else Object.assign(r,a);e(r)}class wle{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new mle(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,s,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let f;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&zG(e.config.tools)&&$G(h);const g=_le(h);if(this.apiClient.isVertexAI()){const B=this.apiClient.getProject(),V=this.apiClient.getLocation(),H=this.apiClient.getApiKey(),G=!!B&&!!V||!!H;this.apiClient.getCustomBaseUrl()&&!G?f=c:(f=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,f))}else{const B=this.apiClient.getApiKey();let V="BidiGenerateContent",H="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),V="BidiGenerateContentConstrained",H="access_token"),f=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${V}?${H}=${B}`}let y=()=>{};const w=new Promise(B=>{y=B}),S=e.callbacks,E=function(){var B;(B=S==null?void 0:S.onopen)===null||B===void 0||B.call(S),y({})},C=this.apiClient,M={onopen:E,onmessage:B=>{xle(C,S.onmessage,B)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(B){},onclose:(r=S==null?void 0:S.onclose)!==null&&r!==void 0?r:function(B){}},R=this.webSocketFactory.create(f,Ale(g),M);R.connect(),await w;let D=Pt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const B=this.apiClient.getProject(),V=this.apiClient.getLocation();B&&V&&(D=`projects/${B}/locations/${V}/`+D)}let I={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[gE.AUDIO]}:e.config.responseModalities=[gE.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P=(o=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[],k=[];for(const B of P)if(this.isCallableTool(B)){const V=B;k.push(await V.tool())}else k.push(B);k.length>0&&(e.config.tools=k);const U={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=Uae(this.apiClient,U):I=Fae(this.apiClient,U),delete I.config,R.send(JSON.stringify(I)),new Ele(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Sle={turnComplete:!0};class Ele{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Os(n.turns),e.isVertexAI()||(r=r.map(i=>a_(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(ble)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},Sle),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:$ae(e)}:n={realtimeInput:zae(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Ale(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function _le(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const PF=10;function kF(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(jm(s)){i=!0;break}if(!i)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function jm(t){return"callTool"in t&&typeof t.callTool=="function"}function Cle(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>jm(i)))!==null&&r!==void 0?r:!1}function IF(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(jm(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(i)}),n}function DF(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tle extends Jc{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,s,o;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Cle(n)||kF(n.config))return await this.generateContentInternal(c);const u=IF(n);if(u.length>0){const S=u.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${S}.`)}let f,h;const g=Os(c.contents),y=(a=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:PF;let w=0;for(;w<y&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){const S=f.candidates[0].content,E=[];for(const C of(o=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(jm(C)){const R=await C.callTool(f.functionCalls);E.push(...R)}w++,h={role:"user",parts:E},c.contents=Os(c.contents),c.contents.push(S),c.contents.push(h),DF(c.config)&&(g.push(S),g.push(h))}return DF(c.config)&&(f.automaticFunctionCallingHistory=g),f},this.generateContentStream=async n=>{var r,i,a,s,o;if(this.maybeMoveToResponseJsonSchem(n),kF(n.config)){const h=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(h)}const c=IF(n);if(c.length>0){const h=c.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${h}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(a=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,f=(o=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.disable;if(u&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=c==null?void 0:c.safetyAttributes:s.push(c);let o;return a?o={generatedImages:s,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:o={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},o}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new yp(jc.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,s,o,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(a=n.source)===null||a===void 0?void 0:a.video)===null||s===void 0)&&s.uri&&(!((c=(o=n.source)===null||o===void 0?void 0:o.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const s=await Promise.all(a.map(async c=>jm(c)?await c.tool():c)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(o.config.tools=s,e.config&&e.config.tools&&zG(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),$G(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(jm(s)){const o=s,c=await o.tool();for(const u of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,o)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:PF;let s=!1,o=0;const c=await this.initAfcToolsMap(e);return(function(u,f,h){return vo(this,arguments,function*(){for(var g,y,w,S,E,C;o<a;){s&&(o++,s=!1);const I=yield nt(u.processParamsMaybeAddMcpUsage(h)),P=yield nt(u.generateContentStreamInternal(I)),k=[],U=[];try{for(var M=!0,R=(y=void 0,yo(P)),D;D=yield nt(R.next()),g=D.done,!g;M=!0){S=D.value,M=!1;const B=S;if(yield yield nt(B),B.candidates&&(!((E=B.candidates[0])===null||E===void 0)&&E.content)){U.push(B.candidates[0].content);for(const V of(C=B.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(o<a&&V.functionCall){if(!V.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(V.functionCall.name)){const H=yield nt(f.get(V.functionCall.name).callTool([V.functionCall]));k.push(...H)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${V.functionCall.name}`)}}}}catch(B){y={error:B}}finally{try{!M&&!g&&(w=R.return)&&(yield nt(w.call(R)))}finally{if(y)throw y.error}}if(k.length>0){s=!0;const B=new jy;B.candidates=[{content:{role:"user",parts:k}}],yield yield nt(B);const V=[];V.push(...U),V.push({role:"user",parts:k});const H=Os(h.contents).concat(V);h.contents=H}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=TF(this.apiClient,e);return o=Pe("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=RF(f),g=new jy;return Object.assign(g,h),g})}else{const u=CF(this.apiClient,e);return o=Pe("{model}:generateContent",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=NF(f),g=new jy;return Object.assign(g,h),g})}}async generateContentStreamInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=TF(this.apiClient,e);return o=Pe("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(h){return vo(this,arguments,function*(){var g,y,w,S;try{for(var E=!0,C=yo(h),M;M=yield nt(C.next()),g=M.done,!g;E=!0){S=M.value,E=!1;const R=S,D=RF(yield nt(R.json()));D.sdkHttpResponse={headers:R.headers};const I=new jy;Object.assign(I,D),yield yield nt(I)}}catch(R){y={error:R}}finally{try{!E&&!g&&(w=C.return)&&(yield nt(w.call(C)))}finally{if(y)throw y.error}}})})}else{const u=CF(this.apiClient,e);return o=Pe("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),s.then(function(h){return vo(this,arguments,function*(){var g,y,w,S;try{for(var E=!0,C=yo(h),M;M=yield nt(C.next()),g=M.done,!g;E=!0){S=M.value,E=!1;const R=S,D=NF(yield nt(R.json()));D.sdkHttpResponse={headers:R.headers};const I=new jy;Object.assign(I,D),yield yield nt(I)}}catch(R){y={error:R}}finally{try{!E&&!g&&(w=C.return)&&(yield nt(w.call(C)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=wse(this.apiClient,e);return o=Pe("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Ese(f),g=new cF;return Object.assign(g,h),g})}else{const u=xse(this.apiClient,e);return o=Pe("{model}:batchEmbedContents",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Sse(f),g=new cF;return Object.assign(g,h),g})}}async generateImagesInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Dse(this.apiClient,e);return o=Pe("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Ose(f),g=new uF;return Object.assign(g,h),g})}else{const u=Ise(this.apiClient,e);return o=Pe("{model}:predict",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Lse(f),g=new uF;return Object.assign(g,h),g})}}async editImageInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=gse(this.apiClient,e);return a=Pe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=vse(c),f=new Are;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=Doe(this.apiClient,e);return a=Pe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=Loe(c),f=new _re;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=moe(this.apiClient,e);return a=Pe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=goe(c),f=new Cre;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=Soe(this.apiClient,e);return a=Pe("{model}:predict",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Eoe(c),f=new Tre;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Zse(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>eM(f))}else{const u=Qse(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>ZR(f))}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=loe(this.apiClient,e);return o=Pe("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=uoe(f),g=new dF;return Object.assign(g,h),g})}else{const u=ooe(this.apiClient,e);return o=Pe("{models_url}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=coe(f),g=new dF;return Object.assign(g,h),g})}}async update(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=koe(this.apiClient,e);return o=Pe("{model}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>eM(f))}else{const u=Poe(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>ZR(f))}}async delete(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=fse(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=pse(f),g=new fF;return Object.assign(g,h),g})}else{const u=dse(this.apiClient,e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=hse(f),g=new fF;return Object.assign(g,h),g})}}async countTokens(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=lse(this.apiClient,e);return o=Pe("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=use(f),g=new hF;return Object.assign(g,h),g})}else{const u=ose(this.apiClient,e);return o=Pe("{model}:countTokens",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=cse(f),g=new hF;return Object.assign(g,h),g})}}async computeTokens(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=ese(this.apiClient,e);return a=Pe("{model}:computeTokens",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>{const u=tse(c),f=new Nre;return Object.assign(f,u),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=zse(this.apiClient,e);return o=Pe("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Bse(f),g=new vE;return Object.assign(g,h),g})}else{const u=Hse(this.apiClient,e);return o=Pe("{model}:predictLongRunning",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s.then(f=>{const h=Use(f),g=new vE;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nle extends Jc{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=yre(e);return o=Pe("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{const u=vre(e);return o=Pe("{operationName}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=ure(e);return a=Pe("{resourceName}:fetchPredictOperation",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rle(t){const e={},n=x(t,["data"]);if(n!=null&&A(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Mle(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Ule(a))),A(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&A(e,["role"],r),e}function Ple(t,e,n){const r={},i=x(e,["expireTime"]);n!==void 0&&i!=null&&A(n,["expireTime"],i);const a=x(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&A(n,["newSessionExpireTime"],a);const s=x(e,["uses"]);n!==void 0&&s!=null&&A(n,["uses"],s);const o=x(e,["liveConnectConstraints"]);n!==void 0&&o!=null&&A(n,["bidiGenerateContentSetup"],Fle(t,o));const c=x(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&A(n,["fieldMask"],c),r}function kle(t,e){const n={},r=x(e,["config"]);return r!=null&&A(n,["config"],Ple(t,r,n)),n}function Ile(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&A(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&A(e,["mimeType"],r),e}function Dle(t){const e={},n=x(t,["id"]);n!=null&&A(e,["id"],n);const r=x(t,["args"]);r!=null&&A(e,["args"],r);const i=x(t,["name"]);if(i!=null&&A(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Lle(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&A(e,["enableWidget"],n),e}function Ole(t){const e={};if(x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(t,["timeRangeFilter"]);return n!=null&&A(e,["timeRangeFilter"],n),e}function jle(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&A(e,["setup","generationConfig"],r);const i=x(t,["responseModalities"]);e!==void 0&&i!=null&&A(e,["setup","generationConfig","responseModalities"],i);const a=x(t,["temperature"]);e!==void 0&&a!=null&&A(e,["setup","generationConfig","temperature"],a);const s=x(t,["topP"]);e!==void 0&&s!=null&&A(e,["setup","generationConfig","topP"],s);const o=x(t,["topK"]);e!==void 0&&o!=null&&A(e,["setup","generationConfig","topK"],o);const c=x(t,["maxOutputTokens"]);e!==void 0&&c!=null&&A(e,["setup","generationConfig","maxOutputTokens"],c);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&A(e,["setup","generationConfig","mediaResolution"],u);const f=x(t,["seed"]);e!==void 0&&f!=null&&A(e,["setup","generationConfig","seed"],f);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&A(e,["setup","generationConfig","speechConfig"],yI(h));const g=x(t,["thinkingConfig"]);e!==void 0&&g!=null&&A(e,["setup","generationConfig","thinkingConfig"],g);const y=x(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&A(e,["setup","generationConfig","enableAffectiveDialog"],y);const w=x(t,["systemInstruction"]);e!==void 0&&w!=null&&A(e,["setup","systemInstruction"],Mle(Ci(w)));const S=x(t,["tools"]);if(e!==void 0&&S!=null){let P=Mv(S);Array.isArray(P)&&(P=P.map(k=>Hle(Rv(k)))),A(e,["setup","tools"],P)}const E=x(t,["sessionResumption"]);e!==void 0&&E!=null&&A(e,["setup","sessionResumption"],Ble(E));const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&A(e,["setup","inputAudioTranscription"],C);const M=x(t,["outputAudioTranscription"]);e!==void 0&&M!=null&&A(e,["setup","outputAudioTranscription"],M);const R=x(t,["realtimeInputConfig"]);e!==void 0&&R!=null&&A(e,["setup","realtimeInputConfig"],R);const D=x(t,["contextWindowCompression"]);e!==void 0&&D!=null&&A(e,["setup","contextWindowCompression"],D);const I=x(t,["proactivity"]);if(e!==void 0&&I!=null&&A(e,["setup","proactivity"],I),x(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Fle(t,e){const n={},r=x(e,["model"]);r!=null&&A(n,["setup","model"],Pt(t,r));const i=x(e,["config"]);return i!=null&&A(n,["config"],jle(i,n)),n}function Ule(t){const e={},n=x(t,["mediaResolution"]);n!=null&&A(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&A(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&A(e,["executableCode"],i);const a=x(t,["fileData"]);a!=null&&A(e,["fileData"],Ile(a));const s=x(t,["functionCall"]);s!=null&&A(e,["functionCall"],Dle(s));const o=x(t,["functionResponse"]);o!=null&&A(e,["functionResponse"],o);const c=x(t,["inlineData"]);c!=null&&A(e,["inlineData"],Rle(c));const u=x(t,["text"]);u!=null&&A(e,["text"],u);const f=x(t,["thought"]);f!=null&&A(e,["thought"],f);const h=x(t,["thoughtSignature"]);h!=null&&A(e,["thoughtSignature"],h);const g=x(t,["videoMetadata"]);return g!=null&&A(e,["videoMetadata"],g),e}function Ble(t){const e={},n=x(t,["handle"]);if(n!=null&&A(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Hle(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&A(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&A(e,["fileSearch"],r);const i=x(t,["codeExecution"]);if(i!=null&&A(e,["codeExecution"],i),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=x(t,["functionDeclarations"]);if(a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),A(e,["functionDeclarations"],f)}const s=x(t,["googleMaps"]);s!=null&&A(e,["googleMaps"],Lle(s));const o=x(t,["googleSearch"]);o!=null&&A(e,["googleSearch"],Ole(o));const c=x(t,["googleSearchRetrieval"]);c!=null&&A(e,["googleSearchRetrieval"],c);const u=x(t,["urlContext"]);return u!=null&&A(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zle(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function $le(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=zle(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];i.length>0&&(o=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));const c=[];a&&c.push(a),o.length>0&&c.push(...o),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Gle extends Jc{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=kle(this.apiClient,e);a=Pe("auth_tokens",o._url),s=o._query,delete o.config,delete o._url,delete o._query;const c=$le(o,e.config);return i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qle(t,e){const n={},r=x(t,["force"]);return e!==void 0&&r!=null&&A(e,["_query","force"],r),n}function Vle(t){const e={},n=x(t,["name"]);n!=null&&A(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&qle(r,e),e}function Wle(t){const e={},n=x(t,["name"]);return n!=null&&A(e,["_url","name"],n),e}function Yle(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&A(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&A(e,["_query","pageToken"],i),n}function Kle(t){const e={},n=x(t,["parent"]);n!=null&&A(e,["_url","parent"],n);const r=x(t,["config"]);return r!=null&&Yle(r,e),e}function Xle(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&A(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&A(e,["nextPageToken"],r);const i=x(t,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),A(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jle extends Jc{constructor(e){super(),this.apiClient=e,this.list=async n=>new yp(jc.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Wle(e);return a=Pe("{name}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Vle(e);i=Pe("{name}",s._url),a=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Kle(e);return a=Pe("{parent}/documents",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Xle(c),f=new Rre;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qle extends Jc{constructor(e,n=new Jle(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new yp(jc.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=zoe(e);return a=Pe("fileSearchStores",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=qoe(e);return a=Pe("{name}",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=Goe(e);i=Pe("{name}",s._url),a=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Joe(e);return a=Pe("fileSearchStores",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Qoe(c),f=new Mre;return Object.assign(f,u),f})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Zoe(e);return a=Pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=ele(c),f=new Pre;return Object.assign(f,u),f})}}async importFile(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Yoe(e);return a=Pe("{file_search_store_name}:importFile",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const u=Woe(c),f=new hI;return Object.assign(f,u),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let GG=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return GG=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const Zle=()=>GG();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nM(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const rM=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Us extends Error{}class zi extends Us{constructor(e,n,r,i){super(`${zi.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new l_({message:r,cause:rM(n)});const a=n;return e===400?new VG(e,a,r,i):e===401?new WG(e,a,r,i):e===403?new YG(e,a,r,i):e===404?new KG(e,a,r,i):e===409?new XG(e,a,r,i):e===422?new JG(e,a,r,i):e===429?new QG(e,a,r,i):e>=500?new ZG(e,a,r,i):new zi(e,a,r,i)}}class iM extends zi{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class l_ extends zi{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class qG extends l_{constructor({message:e}={}){super({message:e??"Request timed out."})}}class VG extends zi{}class WG extends zi{}class YG extends zi{}class KG extends zi{}class XG extends zi{}class JG extends zi{}class QG extends zi{}class ZG extends zi{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ece=/^[a-z][a-z0-9+.-]*:/i,tce=t=>ece.test(t);let aM=t=>(aM=Array.isArray,aM(t));const nce=aM;let rce=nce;const LF=rce;function ice(t){if(!t)return!0;for(const e in t)return!1;return!0}function ace(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const sce=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Us(`${t} must be an integer`);if(e<0)throw new Us(`${t} must be a positive integer`);return e},oce=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lce=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fm="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cce(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const uce=()=>{var t,e,n,r,i;const a=cce();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fm,"X-Stainless-OS":jF(Deno.build.os),"X-Stainless-Arch":OF(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fm,"X-Stainless-OS":jF((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":OF((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=dce();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":fm,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function dce(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${a}.${s}`}}}return null}const OF=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",jF=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let GS;const fce=()=>GS??(GS=uce());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hce(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function eq(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function pce(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return eq({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function tq(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function mce(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gce=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nq=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function DN(t,e,n){return nq(),new File(t,e??"unknown_file",n)}function vce(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const yce=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rq=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",bce=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&rq(t),xce=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function wce(t,e,n){if(nq(),t=await t,bce(t))return t instanceof File?t:DN([await t.arrayBuffer()],t.name);if(xce(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),DN(await sM(i),e,n)}const r=await sM(t);if(e||(e=vce(t)),!(n!=null&&n.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return DN(r,e,n)}async function sM(t){var e,n,r,i,a;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(rq(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(yce(t))try{for(var o=!0,c=yo(t),u;u=await c.next(),e=u.done,!e;o=!0){i=u.value,o=!1;const f=i;s.push(...await sM(f))}}catch(f){n={error:f}}finally{try{!o&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}else{const f=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${Sce(t)}`)}return s}function Sce(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iq{constructor(e){this._client=e}}iq._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aq(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const FF=Object.freeze(Object.create(null)),Ece=(t=aq)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const a=[],s=n.reduce((f,h,g)=>{var y,w,S;/[?#]/.test(h)&&(i=!0);const E=r[g];let C=(i?encodeURIComponent:t)(""+E);return g!==r.length&&(E==null||typeof E=="object"&&E.toString===((S=Object.getPrototypeOf((w=Object.getPrototypeOf((y=E.hasOwnProperty)!==null&&y!==void 0?y:FF))!==null&&w!==void 0?w:FF))===null||S===void 0?void 0:S.toString))&&(C=E+"",a.push({start:f.length+h.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+h+(g===r.length?"":C)},""),o=s.split(/[?#]/,1)[0],c=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=c.exec(o))!==null;)a.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(a.sort((f,h)=>f.start-h.start),a.length>0){let f=0;const h=a.reduce((g,y)=>{const w=" ".repeat(y.start-f),S="^".repeat(y.length);return f=y.start+y.length,g+w+S},"");throw new Us(`Path parameters result in path with invalid segments:
${a.map(g=>g.error).join(`
`)}
${s}
${h}`)}return s}),qS=Ece(aq);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sq extends iq{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,a=bE(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Us("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Us("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(qS`/${i}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(qS`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(qS`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const a=n??{},{api_version:s=this._client.apiVersion}=a,o=bE(a,["api_version"]);return this._client.get(qS`/${s}/interactions/${e}`,Object.assign(Object.assign({query:o},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}sq._key=Object.freeze(["interactions"]);class oq extends sq{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ace(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let VS;function xI(t){let e;return(VS??(e=new globalThis.TextEncoder,VS=e.encode.bind(e)))(t)}let WS;function UF(t){let e;return(WS??(e=new globalThis.TextDecoder,WS=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class c_{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xI(e):e;this.buffer=Ace([this.buffer,n]);const r=[];let i;for(;(i=_ce(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(UF(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=UF(this.buffer.subarray(0,a));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}c_.NEWLINE_CHARS=new Set([`
`,"\r"]);c_.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _ce(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function Cce(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xE={off:0,error:200,warn:300,info:400,debug:500},BF=(t,e,n)=>{if(t){if(ace(xE,t))return t;Oi(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(xE))}`)}};function t0(){}function YS(t,e,n){return!e||xE[t]>xE[n]?t0:e[t].bind(e)}const Tce={error:t0,warn:t0,info:t0,debug:t0};let HF=new WeakMap;function Oi(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return Tce;const i=HF.get(n);if(i&&i[0]===r)return i[1];const a={error:YS("error",n,r),warn:YS("warn",n,r),info:YS("info",n,r),debug:YS("debug",n,r)};return HF.set(n,[r,a]),a}const Rf=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Am{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const a=r?Oi(r):console;function s(){return vo(this,arguments,function*(){var c,u,f,h;if(i)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let g=!1;try{try{for(var y=!0,w=yo(Nce(e,n)),S;S=yield nt(w.next()),c=S.done,!c;y=!0){h=S.value,y=!1;const E=h;if(!g)if(E.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield nt(JSON.parse(E.data))}catch(C){throw a.error("Could not parse message into JSON:",E.data),a.error("From chunk:",E.raw),C}}}catch(E){u={error:E}}finally{try{!y&&!c&&(f=w.return)&&(yield nt(f.call(w)))}finally{if(u)throw u.error}}g=!0}catch(E){if(nM(E))return yield nt(void 0);throw E}finally{g||n.abort()}})}return new Am(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function a(){return vo(this,arguments,function*(){var c,u,f,h;const g=new c_,y=tq(e);try{for(var w=!0,S=yo(y),E;E=yield nt(S.next()),c=E.done,!c;w=!0){h=E.value,w=!1;const C=h;for(const M of g.decode(C))yield yield nt(M)}}catch(C){u={error:C}}finally{try{!w&&!c&&(f=S.return)&&(yield nt(f.call(S)))}finally{if(u)throw u.error}}for(const C of g.flush())yield yield nt(C)})}function s(){return vo(this,arguments,function*(){var c,u,f,h;if(i)throw new Us("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let g=!1;try{try{for(var y=!0,w=yo(a()),S;S=yield nt(w.next()),c=S.done,!c;y=!0){h=S.value,y=!1;const E=h;g||E&&(yield yield nt(JSON.parse(E)))}}catch(E){u={error:E}}finally{try{!y&&!c&&(f=w.return)&&(yield nt(f.call(w)))}finally{if(u)throw u.error}}g=!0}catch(E){if(nM(E))return yield nt(void 0);throw E}finally{g||n.abort()}})}return new Am(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const s=r.next();e.push(s),n.push(s)}return a.shift()}});return[new Am(()=>i(e),this.controller,this.client),new Am(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return eq({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await n.next();if(a)return r.close();const s=xI(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function Nce(t,e){return vo(this,arguments,function*(){var r,i,a,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Us("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Us("Attempted to iterate over a response with no body");const o=new Mce,c=new c_,u=tq(t.body);try{for(var f=!0,h=yo(Rce(u)),g;g=yield nt(h.next()),r=g.done,!r;f=!0){s=g.value,f=!1;const y=s;for(const w of c.decode(y)){const S=o.decode(w);S&&(yield yield nt(S))}}}catch(y){i={error:y}}finally{try{!f&&!r&&(a=h.return)&&(yield nt(a.call(h)))}finally{if(i)throw i.error}}for(const y of c.flush()){const w=o.decode(y);w&&(yield yield nt(w))}})}function Rce(t){return vo(this,arguments,function*(){var n,r,i,a;let s=new Uint8Array;try{for(var o=!0,c=yo(t),u;u=yield nt(c.next()),n=u.done,!n;o=!0){a=u.value,o=!1;const f=a;if(f==null)continue;const h=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?xI(f):f;let g=new Uint8Array(s.length+h.length);g.set(s),g.set(h,s.length),s=g;let y;for(;(y=Cce(s))!==-1;)yield yield nt(s.slice(0,y)),s=s.slice(y)}}catch(f){r={error:f}}finally{try{!o&&!n&&(i=c.return)&&(yield nt(i.call(c)))}finally{if(r)throw r.error}}s.length>0&&(yield yield nt(s))})}class Mce{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=Pce(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function Pce(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function kce(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,s=await(async()=>{var o;if(e.options.stream)return Oi(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Am.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const c=n.headers.get("content-type"),u=(o=c==null?void 0:c.split(";")[0])===null||o===void 0?void 0:o.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return Oi(t).debug(`[${r}] response parsed`,Rf({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-a})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wI extends Promise{constructor(e,n,r=kce){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new wI(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lq=Symbol("brand.privateNullableHeaders");function*Ice(t){if(!t)return;if(lq in t){const{values:r,nulls:i}=t;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():LF(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=LF(r[1])?r[1]:[r[1]];let s=!1;for(const o of a)o!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,o])}}const Fy=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[a,s]of Ice(r)){const o=a.toLowerCase();i.has(o)||(e.delete(a),i.add(o)),s===null?(e.delete(a),n.add(o)):(e.append(a,s),n.delete(o))}}return{[lq]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LN=t=>{var e,n,r,i,a,s;if(typeof globalThis.process<"u")return(r=(n=(e=ire)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(a=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||a===void 0?void 0:a.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cq;class u_{constructor(e){var n,r,i,a,s,o,c,{baseURL:u=LN("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=LN("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:h="v1beta"}=e,g=bE(e,["baseURL","apiKey","apiVersion"]);const y=Object.assign(Object.assign({apiKey:f,apiVersion:h},g),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=y.baseURL,this.timeout=(r=y.timeout)!==null&&r!==void 0?r:u_.DEFAULT_TIMEOUT,this.logger=(i=y.logger)!==null&&i!==void 0?i:console;const w="warn";this.logLevel=w,this.logLevel=(s=(a=BF(y.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:BF(LN("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:w,this.fetchOptions=y.fetchOptions,this.maxRetries=(o=y.maxRetries)!==null&&o!==void 0?o:2,this.fetch=(c=y.fetch)!==null&&c!==void 0?c:hce(),this.encoder=gce,this._options=y,this.apiKey=f,this.apiVersion=h,this.clientAdapter=y.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Fy([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Fy([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Fy([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Us(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${fm}`}defaultIdempotencyKey(){return`stainless-node-retry-${Zle()}`}makeStatusError(e,n,r,i){return zi.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,a=tce(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return ice(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new wI(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,a,s;const o=await e,c=(i=o.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=c),await this.prepareOptions(o);const{req:u,url:f,timeout:h}=await this.buildRequest(o,{retryCount:c-n});await this.prepareRequest(u,{url:f,options:o});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),y=r===void 0?"":`, retryOf: ${r}`,w=Date.now();if(Oi(this).debug(`[${g}] sending request`,Rf({retryOfRequestLogID:r,method:o.method,url:f,options:o,headers:u.headers})),!((a=o.signal)===null||a===void 0)&&a.aborted)throw new iM;const S=new AbortController,E=await this.fetchWithTimeout(f,u,h,S).catch(rM),C=Date.now();if(E instanceof globalThis.Error){const R=`retrying, ${n} attempts remaining`;if(!((s=o.signal)===null||s===void 0)&&s.aborted)throw new iM;const D=nM(E)||/timed? ?out/i.test(String(E)+("cause"in E?String(E.cause):""));if(n)return Oi(this).info(`[${g}] connection ${D?"timed out":"failed"} - ${R}`),Oi(this).debug(`[${g}] connection ${D?"timed out":"failed"} (${R})`,Rf({retryOfRequestLogID:r,url:f,durationMs:C-w,message:E.message})),this.retryRequest(o,n,r??g);throw Oi(this).info(`[${g}] connection ${D?"timed out":"failed"} - error; no more retries left`),Oi(this).debug(`[${g}] connection ${D?"timed out":"failed"} (error; no more retries left)`,Rf({retryOfRequestLogID:r,url:f,durationMs:C-w,message:E.message})),D?new qG:new l_({cause:E})}const M=`[${g}${y}] ${u.method} ${f} ${E.ok?"succeeded":"failed"} with status ${E.status} in ${C-w}ms`;if(!E.ok){const R=await this.shouldRetry(E);if(n&&R){const B=`retrying, ${n} attempts remaining`;return await mce(E.body),Oi(this).info(`${M} - ${B}`),Oi(this).debug(`[${g}] response error (${B})`,Rf({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:C-w})),this.retryRequest(o,n,r??g,E.headers)}const D=R?"error; no more retries left":"error; not retryable";Oi(this).info(`${M} - ${D}`);const I=await E.text().catch(B=>rM(B).message),P=oce(I),k=P?void 0:I;throw Oi(this).debug(`[${g}] response error (${D})`,Rf({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,message:k,durationMs:Date.now()-w})),this.makeStatusError(E.status,P,k,E.headers)}return Oi(this).info(M),Oi(this).debug(`[${g}] response start`,Rf({retryOfRequestLogID:r,url:E.url,status:E.status,headers:E.headers,durationMs:C-w})),{response:E,options:o,controller:S,requestLogID:g,retryOfRequestLogID:r,startTime:w}}async fetchWithTimeout(e,n,r,i){const a=n||{},{signal:s,method:o}=a,c=bE(a,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),f=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},f?{duplex:"half"}:{}),{method:"GET"}),c);o&&(h.method=o.toUpperCase());try{return await this.fetch.call(void 0,e,h)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var a;let s;const o=i==null?void 0:i.get("retry-after-ms");if(o){const u=parseFloat(o);Number.isNaN(u)||(s=u)}const c=i==null?void 0:i.get("retry-after");if(c&&!s){const u=parseFloat(c);Number.isNaN(u)?s=Date.parse(c)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await lce(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,s=Math.min(.5*Math.pow(2,a),8),o=1-Math.random()*.25;return s*o*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,a;const s=Object.assign({},e),{method:o,path:c,query:u,defaultBaseURL:f}=s,h=this.buildURL(c,u,f);"timeout"in s&&sce("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:y}=this.buildBody({options:s}),w=await this.buildHeaders({options:e,method:o,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:o,headers:w},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&y instanceof globalThis.ReadableStream&&{duplex:"half"}),y&&{body:y}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(a=s.fetchOptions)!==null&&a!==void 0?a:{}),url:h,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let o=Fy([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),fce()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(o),o.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Fy([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:pce(e)}:this.encoder({body:e,headers:r})}}u_.DEFAULT_TIMEOUT=6e4;class Ur extends u_{constructor(){super(...arguments),this.interactions=new oq(this)}}cq=Ur;Ur.GeminiNextGenAPIClient=cq;Ur.GeminiNextGenAPIClientError=Us;Ur.APIError=zi;Ur.APIConnectionError=l_;Ur.APIConnectionTimeoutError=qG;Ur.APIUserAbortError=iM;Ur.NotFoundError=KG;Ur.ConflictError=XG;Ur.RateLimitError=QG;Ur.BadRequestError=VG;Ur.AuthenticationError=WG;Ur.InternalServerError=ZG;Ur.PermissionDeniedError=YG;Ur.UnprocessableEntityError=JG;Ur.toFile=wce;Ur.Interactions=oq;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dce(t,e){const n={},r=x(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function Lce(t,e){const n={},r=x(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function Oce(t,e){const n={},r=x(t,["sdkHttpResponse"]);return r!=null&&A(n,["sdkHttpResponse"],r),n}function jce(t,e){const n={},r=x(t,["sdkHttpResponse"]);return r!=null&&A(n,["sdkHttpResponse"],r),n}function Fce(t,e,n){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=x(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&A(e,["displayName"],i),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=x(t,["epochCount"]);e!==void 0&&a!=null&&A(e,["tuningTask","hyperparameters","epochCount"],a);const s=x(t,["learningRateMultiplier"]);if(s!=null&&A(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=x(t,["batchSize"]);e!==void 0&&o!=null&&A(e,["tuningTask","hyperparameters","batchSize"],o);const c=x(t,["learningRate"]);if(e!==void 0&&c!=null&&A(e,["tuningTask","hyperparameters","learningRate"],c),x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(x(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function Uce(t,e,n){const r={};let i=x(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const y=x(t,["validationDataset"]);e!==void 0&&y!=null&&A(e,["supervisedTuningSpec"],zF(y))}else if(i==="PREFERENCE_TUNING"){const y=x(t,["validationDataset"]);e!==void 0&&y!=null&&A(e,["preferenceOptimizationSpec"],zF(y))}const a=x(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&A(e,["tunedModelDisplayName"],a);const s=x(t,["description"]);e!==void 0&&s!=null&&A(e,["description"],s);let o=x(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const y=x(t,["epochCount"]);e!==void 0&&y!=null&&A(e,["supervisedTuningSpec","hyperParameters","epochCount"],y)}else if(o==="PREFERENCE_TUNING"){const y=x(t,["epochCount"]);e!==void 0&&y!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],y)}let c=x(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const y=x(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&A(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],y)}else if(c==="PREFERENCE_TUNING"){const y=x(t,["learningRateMultiplier"]);e!==void 0&&y!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],y)}let u=x(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const y=x(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&A(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y)}else if(u==="PREFERENCE_TUNING"){const y=x(t,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&A(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],y)}let f=x(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const y=x(t,["adapterSize"]);e!==void 0&&y!=null&&A(e,["supervisedTuningSpec","hyperParameters","adapterSize"],y)}else if(f==="PREFERENCE_TUNING"){const y=x(t,["adapterSize"]);e!==void 0&&y!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],y)}if(x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=x(t,["labels"]);e!==void 0&&h!=null&&A(e,["labels"],h);const g=x(t,["beta"]);return e!==void 0&&g!=null&&A(e,["preferenceOptimizationSpec","hyperParameters","beta"],g),r}function Bce(t,e){const n={},r=x(t,["baseModel"]);r!=null&&A(n,["baseModel"],r);const i=x(t,["preTunedModel"]);i!=null&&A(n,["preTunedModel"],i);const a=x(t,["trainingDataset"]);a!=null&&Jce(a);const s=x(t,["config"]);return s!=null&&Fce(s,n),n}function Hce(t,e){const n={},r=x(t,["baseModel"]);r!=null&&A(n,["baseModel"],r);const i=x(t,["preTunedModel"]);i!=null&&A(n,["preTunedModel"],i);const a=x(t,["trainingDataset"]);a!=null&&Qce(a,n,e);const s=x(t,["config"]);return s!=null&&Uce(s,n,e),n}function zce(t,e){const n={},r=x(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function $ce(t,e){const n={},r=x(t,["name"]);return r!=null&&A(n,["_url","name"],r),n}function Gce(t,e,n){const r={},i=x(t,["pageSize"]);e!==void 0&&i!=null&&A(e,["_query","pageSize"],i);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&A(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&A(e,["_query","filter"],s),r}function qce(t,e,n){const r={},i=x(t,["pageSize"]);e!==void 0&&i!=null&&A(e,["_query","pageSize"],i);const a=x(t,["pageToken"]);e!==void 0&&a!=null&&A(e,["_query","pageToken"],a);const s=x(t,["filter"]);return e!==void 0&&s!=null&&A(e,["_query","filter"],s),r}function Vce(t,e){const n={},r=x(t,["config"]);return r!=null&&Gce(r,n),n}function Wce(t,e){const n={},r=x(t,["config"]);return r!=null&&qce(r,n),n}function Yce(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=x(t,["nextPageToken"]);i!=null&&A(n,["nextPageToken"],i);const a=x(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>uq(o))),A(n,["tuningJobs"],s)}return n}function Kce(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=x(t,["nextPageToken"]);i!=null&&A(n,["nextPageToken"],i);const a=x(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(o=>oM(o))),A(n,["tuningJobs"],s)}return n}function Xce(t,e){const n={},r=x(t,["name"]);r!=null&&A(n,["model"],r);const i=x(t,["name"]);return i!=null&&A(n,["endpoint"],i),n}function Jce(t,e){const n={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),A(n,["examples","examples"],i)}return n}function Qce(t,e,n){const r={};let i=x(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=x(t,["gcsUri"]);e!==void 0&&s!=null&&A(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=x(t,["gcsUri"]);e!==void 0&&s!=null&&A(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let a=x(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const s=x(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&A(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(a==="PREFERENCE_TUNING"){const s=x(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&A(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function uq(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=x(t,["name"]);i!=null&&A(n,["name"],i);const a=x(t,["state"]);a!=null&&A(n,["state"],CG(a));const s=x(t,["createTime"]);s!=null&&A(n,["createTime"],s);const o=x(t,["tuningTask","startTime"]);o!=null&&A(n,["startTime"],o);const c=x(t,["tuningTask","completeTime"]);c!=null&&A(n,["endTime"],c);const u=x(t,["updateTime"]);u!=null&&A(n,["updateTime"],u);const f=x(t,["description"]);f!=null&&A(n,["description"],f);const h=x(t,["baseModel"]);h!=null&&A(n,["baseModel"],h);const g=x(t,["_self"]);return g!=null&&A(n,["tunedModel"],Xce(g)),n}function oM(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=x(t,["name"]);i!=null&&A(n,["name"],i);const a=x(t,["state"]);a!=null&&A(n,["state"],CG(a));const s=x(t,["createTime"]);s!=null&&A(n,["createTime"],s);const o=x(t,["startTime"]);o!=null&&A(n,["startTime"],o);const c=x(t,["endTime"]);c!=null&&A(n,["endTime"],c);const u=x(t,["updateTime"]);u!=null&&A(n,["updateTime"],u);const f=x(t,["error"]);f!=null&&A(n,["error"],f);const h=x(t,["description"]);h!=null&&A(n,["description"],h);const g=x(t,["baseModel"]);g!=null&&A(n,["baseModel"],g);const y=x(t,["tunedModel"]);y!=null&&A(n,["tunedModel"],y);const w=x(t,["preTunedModel"]);w!=null&&A(n,["preTunedModel"],w);const S=x(t,["supervisedTuningSpec"]);S!=null&&A(n,["supervisedTuningSpec"],S);const E=x(t,["preferenceOptimizationSpec"]);E!=null&&A(n,["preferenceOptimizationSpec"],E);const C=x(t,["tuningDataStats"]);C!=null&&A(n,["tuningDataStats"],C);const M=x(t,["encryptionSpec"]);M!=null&&A(n,["encryptionSpec"],M);const R=x(t,["partnerModelTuningSpec"]);R!=null&&A(n,["partnerModelTuningSpec"],R);const D=x(t,["customBaseModel"]);D!=null&&A(n,["customBaseModel"],D);const I=x(t,["experiment"]);I!=null&&A(n,["experiment"],I);const P=x(t,["labels"]);P!=null&&A(n,["labels"],P);const k=x(t,["outputUri"]);k!=null&&A(n,["outputUri"],k);const U=x(t,["pipelineJob"]);U!=null&&A(n,["pipelineJob"],U);const B=x(t,["serviceAccount"]);B!=null&&A(n,["serviceAccount"],B);const V=x(t,["tunedModelDisplayName"]);V!=null&&A(n,["tunedModelDisplayName"],V);const H=x(t,["veoTuningSpec"]);return H!=null&&A(n,["veoTuningSpec"],H),n}function Zce(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&A(n,["sdkHttpResponse"],r);const i=x(t,["name"]);i!=null&&A(n,["name"],i);const a=x(t,["metadata"]);a!=null&&A(n,["metadata"],a);const s=x(t,["done"]);s!=null&&A(n,["done"],s);const o=x(t,["error"]);return o!=null&&A(n,["error"],o),n}function zF(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&A(n,["validationDatasetUri"],r);const i=x(t,["vertexDatasetResource"]);return i!=null&&A(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eue extends Jc{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new yp(jc.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let s="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?s=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(s=a.name.split("/operations/")[0]),{name:s,state:YR.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=$ce(e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>oM(f))}else{const u=zce(e);return o=Pe("{name}",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>uq(f))}}async listInternal(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Wce(e);return o=Pe("tuningJobs",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Kce(f),g=new pF;return Object.assign(g,h),g})}else{const u=Vce(e);return o=Pe("tunedModels",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Yce(f),g=new pF;return Object.assign(g,h),g})}}async cancel(e){var n,r,i,a;let s,o="",c={};if(this.apiClient.isVertexAI()){const u=Lce(e);return o=Pe("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=jce(f),g=new mF;return Object.assign(g,h),g})}else{const u=Dce(e);return o=Pe("{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(f=>f.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:f.headers},g})),s.then(f=>{const h=Oce(f),g=new mF;return Object.assign(g,h),g})}}async tuneInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const o=Hce(e,e);return a=Pe("tuningJobs",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>oM(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Bce(e);return a=Pe("tunedModels",o._url),s=o._query,delete o._url,delete o._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(u=>{const f=u;return f.sdkHttpResponse={headers:c.headers},f})),i.then(c=>Zce(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tue{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const nue=1024*1024*8,rue=3,iue=1e3,aue=2,wE="x-goog-upload-status";async function sue(t,e,n){var r;const i=await dq(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[wE])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function oue(t,e,n){var r;const i=await dq(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[wE])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=xG(a),o=new pI;return Object.assign(o,s),o}async function dq(t,e,n){var r,i;let a=0,s=0,o=new XR(new Response),c="upload";for(a=t.size;s<a;){const u=Math.min(nue,a-s),f=t.slice(s,s+u);s+u>=a&&(c+=", finalize");let h=0,g=iue;for(;h<rue&&(o=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((r=o==null?void 0:o.headers)===null||r===void 0)&&r[wE]));)h++,await cue(g),g=g*aue;if(s+=u,((i=o==null?void 0:o.headers)===null||i===void 0?void 0:i[wE])!=="active")break;if(a<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return o}async function lue(t){return{size:t.size,type:t.type}}function cue(t){return new Promise(e=>setTimeout(e,t))}class uue{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sue(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oue(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await lue(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class due{create(e,n,r){return new fue(e,n,r)}}class fue{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $F="x-goog-api-key";class hue{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get($F)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append($F,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pue="gl-node/";class mue{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Ur({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=lre(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new hue(this.apiKey);this.apiClient=new lle({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:pue+"web",uploader:new uue,downloader:new tue}),this.models=new Tle(this.apiClient),this.live=new wle(this.apiClient,i,new due),this.batches=new jie(this.apiClient),this.chats=new yae(this.models,this.apiClient),this.caches=new mae(this.apiClient),this.files=new Nae(this.apiClient),this.operations=new Nle(this.apiClient),this.authTokens=new Gle(this.apiClient),this.tunings=new eue(this.apiClient),this.fileSearchStores=new Qle(this.apiClient)}}const js="co-writter",gue="Co-Author",d_="gemini-3-flash-preview",vue="gemini-2.5-flash-image",fq="rzp_live_RR5721D6h6BMt4",yue="399711702378-437l1ouof6p9hvnoo3uud7acfr1h5k12.apps.googleusercontent.com",Ti=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),v.jsx("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),v.jsx("path",{d:"M3 6l0 13"}),v.jsx("path",{d:"M12 6l0 13"}),v.jsx("path",{d:"M21 6l0 13"})]}),bo=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"}),v.jsx("path",{d:"M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"}),v.jsx("path",{d:"M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),lM=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("circle",{cx:"12",cy:"7",r:"4"}),v.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})]}),SI=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),v.jsx("path",{d:"M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),v.jsx("path",{d:"M17 17h-11v-14h-2"}),v.jsx("path",{d:"M6 5l14 1l-1 7h-13"})]}),GF=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),v.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),v.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),cM=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M3 6l2 -2h14l2 2"}),v.jsx("path",{d:"M5 6v13a1 1 0 0 0 1 1h12a1 1 0 0 0 1 -1v-13"}),v.jsx("path",{d:"M9 6v-2"}),v.jsx("path",{d:"M15 6v-2"}),v.jsx("path",{d:"M9 13h6"})]}),uM=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M5 12l-2 0l9 -9l9 9l-2 0"}),v.jsx("path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"}),v.jsx("path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"})]}),Hd=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0 -1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0 -1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3Z"})}),qF=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),v.jsx("polyline",{points:"7 9 12 4 17 9"}),v.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"16"})]}),N0=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),bue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),v.jsx("path",{d:"M9 12h12l-3 -3"}),v.jsx("path",{d:"M18 15l3 -3"})]}),EI=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("polyline",{points:"6 9 12 15 18 9"})}),AI=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M5 12l14 0"}),v.jsx("path",{d:"M5 12l6 6"}),v.jsx("path",{d:"M5 12l6 -6"})]}),xue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),v.jsx("polyline",{points:"17 6 23 6 23 12"})]}),zd=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M18 6 6 18"}),v.jsx("path",{d:"m6 6 12 12"})]}),wue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),v.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Sue=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...t,children:v.jsx("path",{d:"M11.275 4.01L7.26 15.225H2.015L6.03 4.01h5.245zm1.53 0L8.79 12.65h10.41L15.175 4.01h-2.37zm-.263 10.372l3.412-9.15h4.15l-3.412 9.15h-4.15zM24 19.99h-4.015l2.008-5.265H24v5.265zm-6.265 0H2.015L0 22h17.735l2.007-5.265H17.735v3.255z"})}),_I=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),v.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),VF=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),v.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),f_=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M19 7V6a2 2 0 00-2-2H7a2 2 0 00-2 2v1"}),v.jsx("path",{d:"M3 10h18v9a2 2 0 01-2 2H5a2 2 0 01-2-2v-9z"}),v.jsx("line",{x1:"12",y1:"14",x2:"12.01",y2:"14"})]}),hq=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),v.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),CI=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("circle",{cx:"12",cy:"12",r:"9"}),v.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),v.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),Eue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),v.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),v.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),v.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),Aue=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})}),TI=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"}),v.jsx("path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"}),v.jsx("path",{d:"M15 13a4.5 4.5 0 0 1-3-1.4 4.5 4.5 0 0 1-3 1.4"}),v.jsx("path",{d:"M12 13v5"}),v.jsx("path",{d:"M9 9h6"})]}),_ue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),v.jsx("circle",{cx:"9",cy:"9",r:"2"}),v.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),dM=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M12 5l0 14"}),v.jsx("path",{d:"M5 12l14 0"})]}),Or=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("path",{d:"M5 12l5 5l10 -10"})}),n0=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),Cue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("circle",{cx:"12",cy:"12",r:"9"}),v.jsx("polyline",{points:"12 6 12 12 16 14"})]}),pq=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M4 20l4-1.5 14-14a2 2 0 0 0-2.83-2.83l-14 14L4 20"}),v.jsx("line",{x1:"13.5",y1:"6.5",x2:"17.5",y2:"10.5"})]}),Tue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M19 18v-8l-2 2"}),v.jsx("path",{d:"M4 6v12"}),v.jsx("path",{d:"M12 6v12"}),v.jsx("path",{d:"M11 18h2"}),v.jsx("path",{d:"M3 18h2"}),v.jsx("path",{d:"M4 12h8"}),v.jsx("path",{d:"M3 6h2"}),v.jsx("path",{d:"M11 6h2"})]}),Nue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.601 1.46 -1 2l-3 3h4"}),v.jsx("path",{d:"M4 6v12"}),v.jsx("path",{d:"M12 6v12"}),v.jsx("path",{d:"M11 18h2"}),v.jsx("path",{d:"M3 18h2"}),v.jsx("path",{d:"M4 12h8"}),v.jsx("path",{d:"M3 6h2"}),v.jsx("path",{d:"M11 6h2"})]}),Rue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("line",{x1:"9",y1:"6",x2:"20",y2:"6"}),v.jsx("line",{x1:"9",y1:"12",x2:"20",y2:"12"}),v.jsx("line",{x1:"9",y1:"18",x2:"20",y2:"18"}),v.jsx("line",{x1:"5",y1:"6",x2:"5",y2:"6.01"}),v.jsx("line",{x1:"5",y1:"12",x2:"5",y2:"12.01"}),v.jsx("line",{x1:"5",y1:"18",x2:"5",y2:"18.01"})]}),Mue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M10 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"}),v.jsx("path",{d:"M19 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"})]}),mq=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("path",{d:"M5 12l14 0"})}),fM=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",...t,children:v.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),ON=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M7 18a4.6 4.6 0 0 1 0 -9a5 5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"}),v.jsx("polyline",{points:"9 15 12 12 15 15"}),v.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"})]}),gq=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",...t,children:v.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),WF=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"})}),vq=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),v.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),v.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]}),hM=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("circle",{cx:"11",cy:"11",r:"8"}),v.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),Pue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),v.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),YF=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),v.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),v.jsx("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})]}),KF=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("polyline",{points:"15 18 9 12 15 6"})}),XF=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("polyline",{points:"9 18 15 12 9 6"})}),kue=t=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[v.jsx("circle",{cx:"12",cy:"12",r:"5"}),v.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),v.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),v.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),v.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),v.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),v.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),v.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"})]}),Iue=t=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:v.jsx("path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"})}),jN={};var Due={};let FN=null;const Jx=()=>{if(!FN){const t=(jN==null?void 0:jN.VITE_GEMINI_API_KEY)||Due.API_KEY||"";FN=new mue({apiKey:t})}return FN},Lue=t=>{let e=t.trim();const n=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/);n&&(e=n[1]);const r=e.search(/[{[]/);let i=-1;for(let a=e.length-1;a>=0;a--)if(e[a]==="}"||e[a]==="]"){i=a;break}return r!==-1&&i!==-1&&i>r&&(e=e.substring(r,i+1)),e},Oue={name:"write_content",description:"Writes content directly into the book editor. Use this to WRITE new prose, FIX existing text, or APPEND text. The content argument will completely replace the current editor content, so be sure to include the full text if you are just making a small edit. DO NOT use this to insert images directly as base64.",parameters:{type:hr.OBJECT,properties:{content:{type:hr.STRING,description:"The FULL markdown content to put into the editor."},summary:{type:hr.STRING,description:"A very brief 1-word status (e.g. 'Writing', 'Fixing', 'Analyzing')."}},required:["content"]}},jue={name:"propose_blueprint",description:"Propose a book title and chapter outline to the user for approval. Use this when the user asks to start a new book, create a plan, or brainstorm a structure.",parameters:{type:hr.OBJECT,properties:{title:{type:hr.STRING,description:"The proposed title of the book."},outline:{type:hr.ARRAY,items:{type:hr.OBJECT,properties:{title:{type:hr.STRING,description:"Chapter title"},summary:{type:hr.STRING,description:"Brief summary of chapter"}}},description:"List of chapters with summaries."}},required:["title","outline"]}},Fue={name:"generate_image",description:"Generates a high-quality visual asset. REQUIRED for any image request. The AI must create a detailed visual description prompt based on the surrounding text context if the user does not provide one.",parameters:{type:hr.OBJECT,properties:{prompt:{type:hr.STRING,description:"The detailed visual description of the image or diagram to generate."}},required:["prompt"]}},Uue=async t=>{try{const e=t.replace(/^data:application\/pdf;base64,/,""),r=await Jx().models.generateContent({model:d_,contents:{parts:[{inlineData:{mimeType:"application/pdf",data:e}},{text:"Analyze this PDF. Extract Title, Author, Genre, and a Description (100 words). Return JSON."}]},config:{responseMimeType:"application/json",thinkingConfig:{thinkingBudget:0}}});return JSON.parse(Lue(r.text||"{}"))}catch(e){return console.error("PDF Analysis failed",e),null}},yq=t=>{try{return Jx().chats.create({model:d_,config:{systemInstruction:`IDENTITY: You are NanoPi  the photonic intelligence AI built by OpenDev Labs, powering Co-Writter as Co-Author.
                
MISSION: Write immersive, deeply intelligent, and market-ready books.
Blend spirituality, science, and narrative clarity into a seamless flow.

CORE BEHAVIORS:
1. **Context-Aware**: You always know the previous chapter content and the full book outline. Never contradict established facts.
2. **Chapter Continuity**: If the user says "Continue", write the next logical section or the next chapter in the sequence.
3. **High-Quality Prose**: Avoid generic AI cliches. Use varying sentence structures, sensory details, and deep philosophical or technical insight depending on the genre.
4. **Structural Integrity**: Ensure chapter titles and numbers in your internal logic match the user's provided context exactly.
5. **Auto-Correction**: If a chapter is missing or numbered incorrectly, fix it automatically without asking. Never produce empty pages or misaligned titles.

IMAGE GENERATION RULES (CRITICAL):
- **NEVER** output raw base64 image strings (e.g. "![img](data:image...)") directly in your text response or write_content tool. This crashes the editor.
- **ALWAYS** use the \`generate_image\` tool when the user asks for an image.
- **Contextual Intelligence**: If the user says "add an image" or "visualize this", you must ANALYZE the current paragraph or scene and write a HIGHLY DETAILED prompt for the tool yourself. Do not ask the user "what kind of image?". Just generate it based on the story.

TOOLS:
- **write_content**: REQUIRED for any long-form writing. Do not dump text in chat.
- **propose_blueprint**: For creating or restructuring the book.
- **generate_image**: The ONLY way to create images.

RESPONSE STYLE:
- Chat: Ultra-concise, robotic but polite (1-2 sentences). e.g., "Executing drafting sequence for Chapter 3."
- Writing: Lush, expansive, professional.

CONTEXT:
${t}`,tools:[{functionDeclarations:[Oue,jue,Fue]}]}})}catch(e){return console.error("Failed to create studio session",e),null}},Bue=async t=>{var e;try{const n=`Suggest a competitive market price in INR (Indian Rupees) for an eBook: "${t.title}" (${t.genre}). 
    CRITICAL: The price MUST be a "sacred" or numerologically significant number (e.g., 111, 222, 333, 444, 555, 777, 888, 999, 1111).
    Return ONLY the number.`;return((e=(await Jx().models.generateContent({model:d_,contents:n})).text)==null?void 0:e.replace(/[^0-9.]/g,"").trim())||"444"}catch{return"444"}},bq=async(t,e="Cinematic",n="",r="")=>{var i,a,s,o,c;try{const u=`Professional Book Visual. Context: ${n} by ${r}. Request: ${t}. Mode: ${e}. Create a high-quality, clear, and relevant image/diagram. For diagrams, ensure clear labels and structure.`,h=(o=(s=(a=(i=(await Jx().models.generateContent({model:vue,contents:{parts:[{text:u}]},config:{imageConfig:{aspectRatio:"3:4"}}})).candidates)==null?void 0:i[0])==null?void 0:a.content)==null?void 0:s.parts)==null?void 0:o.find(g=>g.inlineData);return(c=h==null?void 0:h.inlineData)!=null&&c.data?{imageBytes:h.inlineData.data,prompt:t}:{error:"Generation failed."}}catch{return{error:"Service unavailable."}}},Hue=async()=>yq("Global Chat Context"),zue=async(t,e)=>{try{return(await Jx().models.generateContent({model:d_,contents:{parts:[{inlineData:{mimeType:e,data:t}},{text:"Transcribe the spoken audio into text. Return only the transcription, no intro/outro."}]}})).text||null}catch(n){return console.error("Transcription failed",n),null}},$ue={currentUser:null,userType:Ht.GUEST,setCurrentUser:()=>{},cart:[],addToCart:()=>{},removeFromCart:()=>{},clearCart:()=>{},theme:"dark",geminiChat:null,initializeChat:async()=>{},isChatbotOpen:!1,toggleChatbot:()=>{},updateSellerCreatorSite:()=>{},allBooks:[],addCreatedBook:()=>{},updateEBook:()=>{},handleGoogleLogin:()=>{},handleEmailLogin:async()=>({success:!1}),upgradeToSeller:()=>{},verifyUser:()=>{}},xq=T.createContext($ue),Uy="ebook_engine_production_live_v1",Gue=({children:t})=>{const[e,n]=T.useState(()=>{try{const H=localStorage.getItem(Uy);return H?JSON.parse(H).currentUser:null}catch{return null}}),[r,i]=T.useState(()=>{try{const H=localStorage.getItem(Uy);return H?JSON.parse(H).userType:Ht.GUEST}catch{return Ht.GUEST}}),[a,s]=T.useState(()=>{try{const H=localStorage.getItem(Uy);return H?JSON.parse(H).cart:[]}catch{return[]}}),[o,c]=T.useState(()=>{try{const H=localStorage.getItem(Uy);if(!H)return np;const G=JSON.parse(H);return G.allBooks&&G.allBooks.length>0?G.allBooks:np}catch{return np}}),u="dark",[f,h]=T.useState(null),[g,y]=T.useState(!1);T.useEffect(()=>{const H={currentUser:e,userType:r,cart:a,allBooks:o};localStorage.setItem(Uy,JSON.stringify(H))},[e,r,a,o]);const w=(H,G)=>{n(H),i(G),H||s([])},S=H=>{s(G=>G.find(W=>W.id===H.id)?G.map(W=>W.id===H.id?{...W,quantity:W.quantity+1}:W):[...G,{...H,quantity:1}])},E=H=>{s(G=>G.filter(Q=>Q.id!==H))},C=()=>{s([])},M=T.useCallback(async()=>{if(!f){console.log("Initializing Gemini Chat from AppContext...");const H=await Hue();h(H)}},[f]),R=()=>{y(H=>{const G=!H;return G&&!f&&M(),G})},D=H=>{n(G=>{if(G&&(G.id.startsWith("seller")||G.id.startsWith("google")||r===Ht.SELLER)){const Q={...G,creatorSite:H};return Oo[Q.id]&&(Oo[Q.id].creatorSite=H),Q}return G})},I=H=>{c(G=>G.some(Q=>Q.id===H.id)?G:[H,...G]),e&&r===Ht.SELLER&&n(G=>{const Q=G,W=Q.uploadedBooks||[];return{...Q,uploadedBooks:[H,...W]}})},P=H=>{c(G=>G.map(Q=>Q.id===H.id?H:Q)),e&&e.id===H.sellerId&&r===Ht.SELLER&&n(G=>{const Q=G;return{...Q,uploadedBooks:Q.uploadedBooks.map(W=>W.id===H.id?H:W)}})},k=H=>{try{const G=H.credential;if(!G)return;const W=G.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),ee=decodeURIComponent(window.atob(W).split("").map(function(ae){return"%"+("00"+ae.charCodeAt(0).toString(16)).slice(-2)}).join("")),$=JSON.parse(ee),q={id:`google_${$.sub}`,name:$.name,email:$.email,purchaseHistory:[],wishlist:[],isVerified:!1,profileImageUrl:$.picture},J=Oo[q.id];if(J&&"uploadedBooks"in J){w(J,Ht.SELLER);return}w(q,Ht.USER),Oo[q.id]=q,console.log("Logged in with Google:",q.name)}catch(G){console.error("Google Login Failed",G)}},U=async(H,G)=>{const Q=H.trim(),W=G.trim();let ee="opendev-labs",$="co-pass-access";try{const J=import.meta;J.env&&(ee=J.env.VITE_ADMIN_USER||ee,$=J.env.VITE_ADMIN_PASS||$)}catch{console.warn("Could not access env vars, using defaults.")}if(Q===ee&&W===$){const J=Oo.seller_opendev;return J?(w(J,Ht.SELLER),{success:!0}):{success:!1,message:"Admin profile configuration missing."}}const q=Object.values(Oo).find(J=>J.email===Q);return q?"uploadedBooks"in q?(w(q,Ht.SELLER),{success:!0}):{success:!1,message:"This email is not registered as a Writer account."}:{success:!1,message:"Invalid credentials."}},B=()=>{if(e&&r===Ht.USER){const H=e,G={id:H.id,name:H.name,email:H.email,payoutEmail:H.email,uploadedBooks:[],isVerified:H.isVerified||!1,username:H.username||`@${H.name.replace(/\s+/g,"").toLowerCase()}`,profileImageUrl:H.profileImageUrl,creatorSite:{isEnabled:!1,slug:H.name.toLowerCase().replace(/\s+/g,"-"),theme:"dark-minimal",profileImageUrl:H.profileImageUrl,displayName:H.name,tagline:"Digital Creator",showcasedBookIds:[]}};w(G,Ht.SELLER),Oo[H.id]=G,console.log("Upgraded to Seller:",G.name)}},V=()=>{if(e){const H={...e,isVerified:!0};n(H)}};return v.jsx(xq.Provider,{value:{currentUser:e,userType:r,setCurrentUser:w,cart:a,addToCart:S,removeFromCart:E,clearCart:C,theme:u,geminiChat:f,initializeChat:M,isChatbotOpen:g,toggleChatbot:R,updateSellerCreatorSite:D,allBooks:o,addCreatedBook:I,updateEBook:P,handleGoogleLogin:k,handleEmailLogin:U,upgradeToSeller:B,verifyUser:V},children:t})},Gi=()=>T.useContext(xq),bp=({className:t="w-14 h-14",isActive:e=!0})=>{const n=T.useRef(null),[r,i]=T.useState({x:0,y:0}),[a,s]=T.useState(!1);return T.useEffect(()=>{if(!e){i({x:0,y:0});return}const o=(f,h)=>{if(!n.current)return;const g=n.current.getBoundingClientRect(),y=g.left+g.width/2,w=g.top+g.height/2,S=f-y,E=h-w,C=g.width*.15,M=Math.atan2(E,S),R=Math.sqrt(S*S+E*E),D=Math.min(R/5,C),I=Math.cos(M)*D,P=Math.sin(M)*D;i({x:I,y:P})},c=f=>{o(f.clientX,f.clientY)},u=f=>{f.touches.length>0&&o(f.touches[0].clientX,f.touches[0].clientY)};return window.addEventListener("mousemove",c),window.addEventListener("touchmove",u),window.addEventListener("touchstart",u),()=>{window.removeEventListener("mousemove",c),window.removeEventListener("touchmove",u),window.removeEventListener("touchstart",u)}},[e]),T.useEffect(()=>{let o;const c=()=>{s(!0),setTimeout(()=>{s(!1);const u=2e3+Math.random()*4e3;o=setTimeout(c,u)},150)};return o=setTimeout(c,1e3),()=>clearTimeout(o)},[]),v.jsx("div",{ref:n,className:`rounded-full aspect-square bg-[#1a1a1a] flex items-center justify-center relative shadow-2xl border border-white/5 overflow-hidden flex-shrink-0 group ${t}`,children:v.jsxs("div",{className:"w-full h-full flex items-center justify-center gap-[10%] transition-transform duration-100 ease-out will-change-transform",style:{transform:`translate(${r.x}px, ${r.y}px)`},children:[v.jsx("div",{className:"relative w-[24%] h-[32%]",children:v.jsx("div",{className:`w-full bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.6)] transition-all duration-150 ease-in-out absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ${a?"h-[10%] scale-x-125 mt-[10%]":"h-full"}`})}),v.jsx("div",{className:"relative w-[24%] h-[32%]",children:v.jsx("div",{className:`w-full bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.6)] transition-all duration-150 ease-in-out absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ${a?"h-[10%] scale-x-125 mt-[10%]":"h-full"}`})})]})})},{Link:ta,useNavigate:que,useLocation:Vue}=Fr,Wue=()=>{const{currentUser:t,userType:e,setCurrentUser:n,cart:r}=Gi(),i=que(),a=Vue(),[s,o]=T.useState(!1),[c,u]=T.useState(!1);T.useEffect(()=>{c?document.body.style.overflow="hidden":document.body.style.overflow="unset"},[c]);const f=a.pathname==="/ebook-studio",h=a.pathname.startsWith("/site/"),g=a.pathname==="/login";if(h)return null;const y=()=>{n(null,Ht.GUEST),o(!1),u(!1),i("/")},w=r.reduce((C,M)=>C+M.quantity,0),S=[{label:"Store",path:"/store",icon:v.jsx(cM,{className:"w-5 h-5"})},{label:"Plans",path:"/pricing",icon:v.jsx(Ti,{className:"w-5 h-5"})}],E=a.pathname==="/";return v.jsxs(v.Fragment,{children:[v.jsx("nav",{className:`fixed top-0 left-0 right-0 w-full z-50 h-16 border-b transition-all duration-300 ease-obsidian animate-slide-down will-change-transform ${f?"border-white/5 bg-[#000000]/80 backdrop-blur-2xl":"border-white/5 bg-[#000000]/60 backdrop-blur-xl shadow-[0_4px_30px_rgba(0,0,0,0.1)]"}`,children:v.jsxs("div",{className:"max-w-[1400px] mx-auto px-6 h-full flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center gap-4 group z-50 relative",children:[v.jsxs(ta,{to:"/",className:"flex items-center gap-3",children:[v.jsx(bp,{className:"w-9 h-9 border border-white/20 bg-[#111] shadow-[0_0_10px_rgba(255,255,255,0.1)] rounded-full transition-transform duration-300 group-hover:scale-110 will-change-transform"}),v.jsx("span",{className:"font-bold tracking-tighter text-lg text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:via-neutral-300 group-hover:to-white group-hover:animate-shine transition-all",children:"co-writter"})]}),f&&v.jsxs("div",{className:"hidden sm:flex items-center gap-2 text-neutral-500 font-mono text-[10px] uppercase tracking-widest",children:[v.jsx("span",{className:"opacity-30",children:"/"}),v.jsxs("span",{className:"text-white bg-white/5 px-2 py-0.5 rounded border border-white/10 flex items-center gap-1.5",children:[v.jsx(bo,{className:"w-3 h-3 text-indigo-400"})," Neural Studio"]})]})]}),!f&&!g&&v.jsx("div",{className:"hidden md:flex items-center gap-8 absolute left-1/2 -translate-x-1/2",children:S.map(C=>v.jsxs(ta,{to:C.path,className:`text-sm font-medium transition-all duration-300 ease-obsidian flex items-center gap-2 hover:scale-105 ${a.pathname===C.path?"text-white drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"text-neutral-400 hover:text-white"}`,children:[C.icon,C.label]},C.path))}),v.jsx("div",{className:"flex items-center gap-4 z-50",children:f?v.jsxs("button",{onClick:()=>i("/dashboard"),className:"px-4 py-2 bg-white/5 border border-white/10 hover:bg-white/10 text-white text-xs font-bold uppercase tracking-widest rounded-full transition-all flex items-center gap-2",children:[v.jsx(AI,{className:"w-3 h-3"})," Dashboard"]}):v.jsxs(v.Fragment,{children:[E&&v.jsx(ta,{to:"/store",className:"relative w-10 h-10 flex md:hidden items-center justify-center text-neutral-400 hover:text-white transition-all hover:scale-110 active:scale-95 duration-200 ease-obsidian flex-shrink-0 overflow-visible group","aria-label":"Go to Store",children:v.jsx(cM,{className:"w-5 h-5 group-hover:drop-shadow-[0_0_5px_rgba(255,255,255,0.5)] transition-all"})}),!g&&v.jsxs(ta,{to:"/checkout",className:`relative w-10 h-10 items-center justify-center text-neutral-400 hover:text-white transition-all hover:scale-110 active:scale-95 duration-200 ease-obsidian flex-shrink-0 overflow-visible group ${E?"hidden md:flex":"flex"}`,"aria-label":"View Cart",children:[v.jsx(SI,{className:"w-5 h-5 group-hover:drop-shadow-[0_0_5px_rgba(255,255,255,0.5)] transition-all"}),w>0&&v.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-white text-black text-[9px] font-bold border border-black animate-pulse-square shadow-sm z-10",children:w})]}),v.jsx("div",{className:"h-6 w-px bg-white/10 mx-2 hidden sm:block"}),v.jsx("div",{className:"relative hidden md:block",children:t&&e!==Ht.GUEST?v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs(ta,{to:"/ebook-studio",className:"hidden lg:flex px-4 py-1.5 bg-white text-black hover:bg-neutral-200 text-xs font-bold uppercase tracking-widest rounded-full transition-all duration-300 ease-obsidian hover:scale-105 active:scale-95 items-center gap-2 shadow-[0_0_15px_rgba(255,255,255,0.3)]",children:[v.jsx(bo,{className:"w-3 h-3"})," Write"]}),v.jsx("button",{onClick:()=>o(!s),className:"flex items-center gap-2",children:v.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-900 border border-white/20 flex items-center justify-center text-xs font-bold text-white hover:border-white transition-all duration-300 hover:shadow-[0_0_10px_rgba(255,255,255,0.2)]",children:t.profileImageUrl?v.jsx("img",{src:t.profileImageUrl,alt:"",className:"w-full h-full object-cover rounded-full"}):t.name.charAt(0)})}),s&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>o(!1)}),v.jsxs("div",{className:"absolute right-0 top-12 mt-2 w-56 bg-[#0a0a0a] border border-white/10 shadow-2xl py-1 z-20 origin-top-right rounded-lg animate-slide-up-stagger",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-white/5 mb-1",children:[v.jsx("p",{className:"text-sm font-bold text-white truncate",children:t.name}),v.jsx("p",{className:"text-[10px] text-neutral-500 uppercase font-mono",children:e==="seller"?"Writer Account":"Reader Account"})]}),v.jsx(ta,{to:"/dashboard",onClick:()=>o(!1),className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-white/5 hover:text-white transition-colors",children:"My Profile"}),v.jsx("button",{onClick:y,className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-white/5 transition-colors",children:"Sign out"})]})]})]}):v.jsxs("div",{className:"flex items-center gap-3",children:[!g&&v.jsx(ta,{to:"/login",className:"px-4 py-2 text-xs font-bold uppercase tracking-widest text-neutral-400 hover:text-white transition-colors hover:scale-105 duration-200",children:"Login"}),v.jsx(ta,{to:"/pricing",className:"px-5 py-2 text-xs font-bold uppercase tracking-widest text-black bg-white hover:bg-neutral-200 transition-all duration-300 ease-obsidian rounded-full hover:shadow-[0_0_15px_rgba(255,255,255,0.3)] hover:scale-105",children:"Start Free"})]})}),!g&&v.jsx("button",{className:"md:hidden p-2 text-neutral-400 hover:text-white relative z-50 transition-transform active:scale-90",onClick:()=>u(!c),children:c?v.jsx(zd,{className:"w-6 h-6"}):v.jsx(vq,{className:"w-6 h-6"})})]})})]})}),c&&v.jsx("div",{className:"fixed inset-0 z-40 bg-black/95 backdrop-blur-xl md:hidden flex flex-col pt-24 pb-8 px-6 animate-fade-in",children:v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsxs(ta,{to:"/",onClick:()=>u(!1),className:"text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-100",children:[v.jsx(uM,{className:"w-6 h-6 text-neutral-500"})," Home"]}),S.map((C,M)=>v.jsxs(ta,{to:C.path,onClick:()=>u(!1),className:`text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-${(M+2)*100}`,children:[v.jsx("span",{className:"text-neutral-500",children:C.icon}),C.label]},C.path)),t?v.jsxs(v.Fragment,{children:[v.jsxs(ta,{to:"/dashboard",onClick:()=>u(!1),className:"text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-300",children:[v.jsx(uM,{className:"w-6 h-6 text-neutral-500"})," My Profile"]}),v.jsxs(ta,{to:"/ebook-studio",onClick:()=>u(!1),className:"text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-400",children:[v.jsx(bo,{className:"w-6 h-6 text-neutral-500"})," Write Book"]}),v.jsx("button",{onClick:y,className:"text-left text-xl font-bold text-red-500 py-4 mt-4 animate-slide-up-stagger delay-400",children:"Sign Out"})]}):v.jsxs("div",{className:"mt-8 flex flex-col gap-4 animate-slide-up-stagger delay-400",children:[v.jsx(ta,{to:"/login",onClick:()=>u(!1),className:"w-full py-4 bg-white/5 border border-white/10 text-white font-bold text-center rounded-full",children:"Login"}),v.jsx(ta,{to:"/pricing",onClick:()=>u(!1),className:"w-full py-4 bg-white text-black font-bold text-center rounded-full shadow-glow-white",children:"Start Free"})]})]})})]})},{Link:By,useLocation:Yue}=Fr,Kue=()=>{const t=Yue(),e=T.useRef(null);return T.useEffect(()=>{e.current&&window.anime&&(window.anime.remove(".wave-path-1"),window.anime.remove(".wave-path-2"),window.anime.remove(".wave-path-3"),window.anime({targets:".wave-path-1",translateX:[0,-1440],duration:2e4,easing:"linear",loop:!0}),window.anime({targets:".wave-path-2",translateX:[0,-1440],duration:15e3,easing:"linear",loop:!0}),window.anime({targets:".wave-path-3",translateX:[0,-1440],duration:8e3,easing:"linear",loop:!0}))},[t.pathname]),t.pathname==="/ebook-studio"||t.pathname.startsWith("/site/")||t.pathname==="/dashboard"||t.pathname.startsWith("/read/")?null:v.jsxs("div",{className:"relative mt-48",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] transform -translate-y-[99%] z-0",style:{height:"200px"},children:v.jsxs("svg",{ref:e,className:"relative block w-full h-full",viewBox:"0 0 1440 320",preserveAspectRatio:"none",children:[v.jsx("path",{className:"wave-path-1 fill-[#1a1a1a] opacity-100",d:"M0,160 Q360,240 720,160 T1440,160 T2160,160 T2880,160 V320 H0 Z"}),v.jsx("path",{className:"wave-path-2 fill-[#0d0d0d] opacity-100",d:"M0,192 Q360,112 720,192 T1440,192 T2160,192 T2880,192 V320 H0 Z"}),v.jsx("path",{className:"wave-path-3 fill-[#000000]",d:"M0,224 Q360,284 720,224 T1440,224 T2160,224 T2880,224 V320 H0 Z"})]})}),v.jsx("footer",{className:"bg-[#000000] text-neutral-500 py-12 relative z-10 border-t-0",children:v.jsx("div",{className:"container mx-auto px-6",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-8",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-white font-black text-3xl mb-3 tracking-tighter lowercase flex items-center justify-center md:justify-start gap-2",children:js}),v.jsxs("p",{className:"font-mono text-sm opacity-60 max-w-xs mx-auto md:mx-0",children:[" ",new Date().getFullYear()," All rights reserved."]}),v.jsxs("div",{className:"mt-6 space-y-2",children:[v.jsx("p",{className:"text-xs text-neutral-400 font-medium uppercase tracking-widest",children:"Where Thought Becomes Literature"}),v.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 opacity-80 hover:opacity-100 transition-opacity mt-2",children:[v.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.5)]"}),v.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest text-neutral-500",children:["Neural Engine: ",gue]})]})]})]}),v.jsxs("div",{className:"flex flex-wrap justify-center gap-x-8 gap-y-4",children:[v.jsx(By,{to:"/contact",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Contact"}),v.jsx(By,{to:"/terms-and-conditions",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Terms"}),v.jsx(By,{to:"/privacy-policy",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Privacy"}),v.jsx(By,{to:"/refund-policy",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Refunds"}),v.jsx(By,{to:"/shipping-policy",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Shipping"})]})]})})})]})},{Link:UN,useNavigate:Xue}=Fr,Hy=({icon:t,label:e})=>v.jsxs("div",{className:"flex flex-col items-center gap-4 group cursor-default transition-all duration-300 hover:-translate-y-2",children:[v.jsxs("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-3xl bg-white/5 border border-white/10 flex items-center justify-center text-neutral-500 group-hover:text-white group-hover:bg-white/10 group-hover:border-white/30 group-hover:shadow-[0_0_30px_rgba(255,255,255,0.1)] transition-all duration-300 shadow-2xl relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),v.jsx("div",{className:"relative z-10 transform transition-transform duration-300 group-hover:scale-110",children:t})]}),v.jsx("span",{className:"text-xs md:text-sm font-bold uppercase tracking-widest text-neutral-600 group-hover:text-neutral-300 transition-colors",children:e})]}),Jue=()=>v.jsxs("svg",{viewBox:"-10.5 -9.45 21 18.9",className:"w-12 h-12 md:w-16 md:h-16 fill-current text-[#61DAFB]",children:[v.jsx("circle",{cx:"0",cy:"0",r:"2",fill:"currentColor"}),v.jsxs("g",{stroke:"currentColor",strokeWidth:"1",fill:"none",children:[v.jsx("ellipse",{rx:"10",ry:"4.5"}),v.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(60)"}),v.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(120)"})]})]}),Que=()=>v.jsxs("svg",{viewBox:"0 0 32 32",className:"w-12 h-12 md:w-16 md:h-16 text-[#646CFF]",children:[v.jsx("path",{d:"M30.3 5.4L16.6 29.5 2.8 5.4h27.5z",fill:"currentColor",fillOpacity:"0.2"}),v.jsx("path",{d:"M16.6 29.5L2.8 5.4h11l2.8 17.5 2.8-17.5h10.9L16.6 29.5z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),v.jsx("path",{d:"M2.8 5.4h11L16.6 29.5 2.8 5.4z",fill:"currentColor",fillOpacity:"0.1"})]}),Zue=()=>v.jsxs("svg",{viewBox:"0 0 128 128",className:"w-12 h-12 md:w-16 md:h-16 text-[#3178C6]",children:[v.jsx("rect",{width:"128",height:"128",rx:"20",fill:"currentColor",fillOpacity:"0.1"}),v.jsx("path",{d:"M29.1 56.1h21.9v10.4h-7.9v35.1h-11v-35.1h-7.9v-10.4h4.9zm41.6 34.6c2.4 1.7 6.4 3.7 10.4 3.7 4.2 0 6.2-2.1 6.2-5.1 0-8.6-24.6-9-24.6-25.1 0-9.8 8.1-16.7 21.6-16.7 6.5 0 10.9 1.6 13.9 3l-2.6 10.4c-2.6-1.3-6.4-2.7-10.7-2.7-4.1 0-6.1 2.2-6.1 4.7 0 8.3 24.6 9.3 24.6 25 0 10.5-9.1 17.1-22.1 17.1-6.8 0-12.7-2.1-15.6-3.8l3-10.5z",fill:"currentColor"})]}),ede=()=>v.jsx("svg",{viewBox:"0 0 24 24",className:"w-12 h-12 md:w-16 md:h-16 fill-current text-[#38B2AC]",children:v.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z"})}),tde=()=>v.jsxs("svg",{viewBox:"0 0 24 24",className:"w-12 h-12 md:w-16 md:h-16",children:[v.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),v.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),v.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),v.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),nde=()=>{const t=Xue(),{currentUser:e}=Gi();return v.jsxs("div",{className:"min-h-screen bg-transparent text-white selection:bg-google-blue/30 overflow-x-hidden",children:[v.jsxs("section",{className:"relative min-h-[90vh] flex flex-col items-center justify-center px-6 text-center pt-32 pb-20 z-10",children:[v.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-google-blue/10 rounded-full blur-[100px] pointer-events-none"}),v.jsxs("div",{className:"relative z-10 animate-slide-up flex flex-col items-center max-w-5xl mx-auto",children:[v.jsx("div",{className:"mb-8 md:mb-10 scale-100 hover:scale-105 transition-transform duration-500",children:v.jsx(bp,{className:"w-24 h-24 md:w-40 md:h-40 bg-[#050505] shadow-[0_0_80px_rgba(255,255,255,0.15)] border border-white/30 rounded-full"})}),v.jsxs("h1",{className:"text-4xl sm:text-6xl md:text-8xl font-black tracking-tighter mb-6 leading-[0.95] md:leading-[0.9] drop-shadow-2xl",children:["Turn Your Ideas",v.jsx("br",{}),v.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-neutral-200 to-neutral-500",children:"Into Books."})]}),v.jsxs("p",{className:"text-base md:text-xl text-neutral-300 max-w-2xl mb-10 leading-relaxed px-4 drop-shadow-md",children:["The easiest way to write, read, and sell books with AI.",v.jsx("br",{className:"my-2 block"}),v.jsxs("span",{className:"inline-block mt-1",children:["Powered by ",v.jsx("span",{className:"text-white font-mono font-bold border-b border-white/20 pb-0.5",children:"GOOGLE"}),"."]})]}),v.jsx("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto px-4",children:e?v.jsxs("button",{onClick:()=>t("/ebook-studio"),className:"w-full sm:w-auto px-10 py-4 bg-white text-black font-bold text-lg rounded-full hover:scale-105 transition-all shadow-[0_0_30px_rgba(255,255,255,0.4)] flex items-center justify-center gap-2 group",children:[v.jsx(bo,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Start Writing"]}):v.jsxs(v.Fragment,{children:[v.jsx(UN,{to:"/login",className:"w-full sm:w-auto px-10 py-4 bg-white text-black font-bold text-lg rounded-full hover:scale-105 transition-all shadow-[0_0_30px_rgba(255,255,255,0.4)] flex items-center justify-center gap-2",children:"Start Creating"}),v.jsx(UN,{to:"/login",className:"w-full sm:w-auto px-10 py-4 bg-black/40 border border-white/20 text-white font-bold text-lg rounded-full hover:bg-white/10 transition-colors backdrop-blur-md",children:"Sign In"})]})}),v.jsxs("div",{className:"mt-12 flex flex-col md:flex-row items-center gap-4 md:gap-8 text-neutral-400 text-xs font-mono uppercase tracking-widest",children:[v.jsxs("span",{className:"flex items-center gap-2",children:[v.jsx(Or,{className:"w-3 h-3 text-google-green"})," Easy to Use"]}),v.jsxs("span",{className:"flex items-center gap-2",children:[v.jsx(Or,{className:"w-3 h-3 text-google-green"})," Free to Start"]}),v.jsxs("span",{className:"flex items-center gap-2",children:[v.jsx(Or,{className:"w-3 h-3 text-google-green"})," Instant Publishing"]})]})]})]}),v.jsx("section",{className:"py-24 px-6 border-b border-white/5 relative z-10",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"p-8 rounded-[32px] bg-black/40 backdrop-blur-xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)] hover:border-white/20 hover:scale-105 transition-all duration-300 group relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),v.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:scale-110 transition-transform border border-indigo-500/30 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 shadow-[0_0_20px_rgba(99,102,241,0.2)]",children:v.jsx(TI,{className:"w-7 h-7 text-indigo-400 drop-shadow-[0_0_8px_rgba(129,140,248,0.5)]"})}),v.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"AI Co-Author"}),v.jsx("p",{className:"text-neutral-400 leading-relaxed text-sm",children:"Write with AI. Plan your chapters, write full pages, and fix grammar easily with our writing tools."})]}),v.jsxs("div",{className:"p-8 rounded-[32px] bg-black/40 backdrop-blur-xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)] hover:border-white/20 hover:scale-110 transition-all duration-300 group relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),v.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:scale-110 transition-transform border border-emerald-500/30 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 shadow-[0_0_20px_rgba(16,185,129,0.2)]",children:v.jsx(bo,{className:"w-7 h-7 text-emerald-400 drop-shadow-[0_0_8px_rgba(52,211,153,0.5)]"})}),v.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Sell Your Books"}),v.jsx("p",{className:"text-neutral-400 leading-relaxed text-sm",children:"Publish your book instantly. Get your own profile link and keep 70% of every sale you make."})]}),v.jsxs("div",{className:"p-8 rounded-[32px] bg-black/40 backdrop-blur-xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)] hover:border-white/20 hover:scale-110 transition-all duration-300 group relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),v.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:scale-110 transition-transform border border-amber-500/30 bg-gradient-to-br from-amber-500/20 to-orange-500/20 shadow-[0_0_20px_rgba(245,158,11,0.2)]",children:v.jsx(Ti,{className:"w-7 h-7 text-amber-400 drop-shadow-[0_0_8px_rgba(251,191,36,0.5)]"})}),v.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Easy Reading"}),v.jsx("p",{className:"text-neutral-400 leading-relaxed text-sm",children:"Read comfortably on any device. Support for PDF uploads and a distraction-free reading mode."})]})]})})}),v.jsx("section",{className:"py-24 px-6 relative z-10",children:v.jsx("div",{className:"max-w-5xl mx-auto",children:v.jsxs("div",{className:"relative rounded-[40px] overflow-hidden border border-white/10 bg-black/60 backdrop-blur-xl shadow-[0_0_80px_rgba(0,0,0,0.8)]",children:[v.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-900/30 via-transparent to-cyan-900/20 pointer-events-none"}),v.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-violet-500/40 to-transparent"}),v.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-10 p-10 md:p-16",children:[v.jsx("div",{className:"flex-shrink-0 w-28 h-28 rounded-3xl bg-gradient-to-br from-violet-600/30 to-cyan-500/20 border border-violet-500/30 flex items-center justify-center shadow-[0_0_40px_rgba(139,92,246,0.3)]",children:v.jsxs("svg",{viewBox:"0 0 24 24",className:"w-14 h-14 text-violet-400",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[v.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor",opacity:"0.6"}),v.jsx("path",{d:"M2 12h3m14 0h3M12 2v3m0 14v3",strokeLinecap:"round"}),v.jsx("path",{d:"M4.93 4.93l2.12 2.12m9.9 9.9 2.12 2.12M19.07 4.93l-2.12 2.12m-9.9 9.9-2.12 2.12",strokeLinecap:"round"})]})}),v.jsxs("div",{className:"flex-grow text-center md:text-left",children:[v.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-violet-500/10 border border-violet-500/20 text-violet-400 text-xs font-mono uppercase tracking-widest mb-4",children:[v.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-violet-400 animate-pulse"}),"Powered by NanoPi"]}),v.jsx("h2",{className:"text-3xl md:text-4xl font-black text-white mb-4 tracking-tight",children:"Meet Your AI Writing Partner"}),v.jsxs("p",{className:"text-neutral-400 leading-relaxed mb-8 text-base md:text-lg max-w-xl",children:["Co-Writter is supercharged by ",v.jsx("span",{className:"text-violet-300 font-semibold",children:"NanoPi"}),"  the photonic intelligence model that thinks like a physicist and writes like a novelist. Get instant suggestions, plot generation, and narrative continuity analysis."]}),v.jsxs("div",{className:"flex flex-col sm:flex-row items-center md:items-start gap-4",children:[v.jsxs("a",{href:"https://opendev-labs-nanopi.hf.space/",target:"_blank",rel:"noopener noreferrer",className:"px-8 py-3 rounded-full bg-gradient-to-r from-violet-600 to-indigo-600 text-white font-bold text-sm hover:from-violet-500 hover:to-indigo-500 transition-all shadow-[0_0_30px_rgba(139,92,246,0.4)] hover:shadow-[0_0_40px_rgba(139,92,246,0.6)] flex items-center gap-2",children:[v.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",fill:"currentColor",children:v.jsx("path",{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm1 17.93V18a1 1 0 0 0-2 0v1.93A8 8 0 0 1 4.07 13H6a1 1 0 0 0 0-2H4.07A8 8 0 0 1 11 4.07V6a1 1 0 0 0 2 0V4.07A8 8 0 0 1 19.93 11H18a1 1 0 0 0 0 2h1.93A8 8 0 0 1 13 19.93z"})}),"Launch NanoPi"]}),v.jsx("span",{className:"text-xs text-neutral-600 font-mono",children:"opendev-labs-nanopi.hf.space"})]})]})]})]})})}),v.jsx("section",{className:"py-24 px-6 relative overflow-hidden z-10",children:v.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-black/30 backdrop-blur-lg border border-white/5 p-12 rounded-[40px] shadow-2xl relative",children:[v.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1/2 h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),v.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white mb-8 tracking-tight",children:"Built for Everyone"}),v.jsx("p",{className:"text-lg md:text-xl text-neutral-400 leading-relaxed mb-12 font-light",children:"Co-Writter isn't just a tool; it's a partner. We believe that everyone has a story worth telling, and with the right help, anyone can become an author."}),v.jsx(UN,{to:"/store",className:"inline-flex items-center gap-2 text-white font-bold border-b border-white pb-1 hover:opacity-70 transition-opacity tracking-widest uppercase text-sm",children:"Browse the Library "})]})}),v.jsx("section",{className:"py-20 border-t border-b border-white/5 bg-black/40 backdrop-blur relative z-20",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[v.jsx("p",{className:"text-center text-xs font-bold uppercase tracking-[0.3em] text-neutral-500 mb-12",children:"Built With Modern Architecture"}),v.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 md:gap-16",children:[v.jsx(Hy,{label:"Google Gemini",icon:v.jsx(tde,{})}),v.jsx(Hy,{label:"React 18",icon:v.jsx(Jue,{})}),v.jsx(Hy,{label:"TypeScript",icon:v.jsx(Zue,{})}),v.jsx(Hy,{label:"Tailwind CSS",icon:v.jsx(ede,{})}),v.jsx(Hy,{label:"Vite",icon:v.jsx(Que,{})})]})]})})]})},{useNavigate:rde}=Fr,wq=({book:t,onViewDetails:e})=>{const{addToCart:n}=Gi(),r=rde(),i=t.price===0,a=o=>{o.stopPropagation(),i?r(`/read/${t.id}`):n(t)},s=()=>{e&&e(t.id)};return v.jsxs("div",{className:"group relative bg-black/40 backdrop-blur-sm rounded-[20px] overflow-hidden border border-white/10 hover:border-white/30 transition-all duration-500 ease-obsidian cursor-pointer flex flex-col h-full hover:-translate-y-2 hover:shadow-[0_20px_40px_-10px_rgba(0,0,0,0.5)] will-change-transform",onClick:s,children:[v.jsxs("div",{className:"w-full aspect-[3/4] relative overflow-hidden bg-[#050505] border-b border-white/5",children:[v.jsx("img",{src:t.coverImageUrl||"https://picsum.photos/400/600",alt:`Cover of ${t.title}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700 ease-obsidian opacity-90 group-hover:opacity-100 will-change-transform",loading:"lazy"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60 group-hover:opacity-40 transition-opacity duration-500"}),v.jsx("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:i&&v.jsx("div",{className:"bg-white text-black text-[9px] font-bold px-3 py-1 uppercase tracking-widest rounded-full shadow-lg",children:"Free"})})]}),v.jsxs("div",{className:"p-5 flex flex-col flex-grow relative",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("div",{className:"flex items-center justify-between mb-2",children:v.jsx("span",{className:"text-[9px] font-bold text-neutral-500 uppercase tracking-widest border border-white/10 px-2 py-0.5 rounded-full",children:t.genre})}),v.jsx("h3",{className:"text-lg font-bold text-white leading-tight line-clamp-2 mb-1 group-hover:text-neutral-200 transition-colors",title:t.title,children:t.title}),v.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-widest line-clamp-1",children:t.author})]}),v.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-center justify-between",children:[v.jsx("span",{className:"text-lg font-light text-white font-mono",children:i?"FREE":`${t.price.toFixed(0)}`}),v.jsx("button",{onClick:a,className:`px-4 py-2 rounded-full text-[10px] font-bold uppercase tracking-widest flex items-center gap-2 transition-all duration-300 ease-obsidian hover:scale-105 active:scale-95 ${i?"bg-white/10 text-white hover:bg-white hover:text-black border border-white/20":"bg-white text-black hover:bg-neutral-200 shadow-[0_0_15px_rgba(255,255,255,0.2)]"}`,children:i?v.jsxs(v.Fragment,{children:["Read ",v.jsx(Ti,{className:"w-3 h-3"})]}):v.jsxs(v.Fragment,{children:["Add ",v.jsx(SI,{className:"w-3 h-3"})]})})]})]})]})},ide=({isOpen:t,onClose:e,title:n,children:r,size:i="md"})=>{const a=T.useRef(null);if(T.useLayoutEffect(()=>{t&&a.current&&(a.current.scrollTop=0)},[t]),!t)return null;const s={sm:"max-w-sm",md:"max-w-md",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-[95vw] h-[95vh]"};return Jne.createPortal(v.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-xl flex items-center justify-center z-[100] p-4 transition-opacity duration-300 ease-in-out animate-fade-in",onClick:e,role:"dialog","aria-modal":"true",children:v.jsxs("div",{className:`bg-black rounded-[32px] shadow-[0_0_100px_rgba(0,0,0,1)] relative w-full ${s[i]} border border-white/15 flex flex-col max-h-[90vh] overflow-hidden animate-slide-up ring-1 ring-white/5`,onClick:o=>o.stopPropagation(),children:[v.jsx("button",{onClick:e,className:"absolute top-5 right-5 z-20 w-10 h-10 flex items-center justify-center rounded-full bg-black/50 border border-white/10 text-neutral-400 hover:text-white hover:bg-white/10 hover:border-white/30 transition-all hover:rotate-90 backdrop-blur-md","aria-label":"Close modal",children:v.jsx(zd,{className:"w-5 h-5"})}),n&&v.jsx("div",{className:"px-8 py-6 border-b border-white/5 bg-white/[0.02] flex-shrink-0",children:v.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:n})}),v.jsx("div",{ref:a,className:"p-0 overflow-y-auto custom-scrollbar flex-1",children:r})]})}),document.body)},BN=({options:t,value:e,onChange:n,icon:r,className:i="",placeholder:a})=>{const[s,o]=T.useState(!1),c=T.useRef(null),u=t.find(f=>f.value===e);return T.useEffect(()=>{const f=h=>{c.current&&!c.current.contains(h.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]),v.jsxs("div",{className:`relative ${i}`,ref:c,children:[v.jsxs("button",{type:"button",onClick:()=>o(!s),className:`flex items-center justify-between gap-3 w-full px-4 py-3 rounded-full border transition-all duration-200 h-full ${s?"bg-white text-black border-white":"bg-white/5 text-white border-transparent hover:bg-white/10 hover:border-white/10"}`,children:[v.jsxs("div",{className:"flex items-center gap-2 truncate min-w-0",children:[r&&v.jsx("span",{className:s?"text-black":"text-neutral-400",children:r}),v.jsx("span",{className:"text-sm font-bold truncate",children:u?u.label:a||"Select"})]}),v.jsx(EI,{className:`w-3 h-3 transition-transform duration-300 flex-shrink-0 ${s?"rotate-180 text-black":"text-neutral-500"}`})]}),s&&v.jsx("div",{className:"absolute top-full mt-2 left-0 w-full min-w-[180px] bg-[#1a1a1a] border border-white/10 rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.5)] overflow-hidden z-[60] animate-slide-down origin-top p-1",children:v.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:t.map(f=>v.jsx("button",{onClick:()=>{n(f.value),o(!1)},className:`w-full text-left px-4 py-2.5 text-sm rounded-xl transition-all mb-0.5 last:mb-0 ${e===f.value?"bg-white text-black font-bold":"text-neutral-400 hover:bg-white/5 hover:text-white font-medium"}`,children:f.label},f.value))})})]})},{useNavigate:ade}=Fr,sde=()=>{const{addToCart:t,allBooks:e}=Gi(),n=ade(),[r,i]=T.useState(""),[a,s]=T.useState("All"),[o,c]=T.useState("All"),[u,f]=T.useState("publicationDate"),[h,g]=T.useState(!1),[y,w]=T.useState(null),E=T.useMemo(()=>["All",...new Set(e.map(k=>k.genre))],[e]).map(k=>({label:k==="All"?"All Genres":k,value:k})),C=[{label:"All Prices",value:"All"},{label:"Free Only",value:"Free"},{label:"Paid Only",value:"Paid"}],M=[{label:"Newest First",value:"publicationDate"},{label:"Title (A-Z)",value:"title"},{label:"Price (Low-High)",value:"price"}],R=T.useMemo(()=>{let k=e.filter(U=>U.title.toLowerCase().includes(r.toLowerCase())||U.author.toLowerCase().includes(r.toLowerCase()));return a!=="All"&&(k=k.filter(U=>U.genre===a)),o==="Free"?k=k.filter(U=>U.price===0):o==="Paid"&&(k=k.filter(U=>U.price>0)),k.sort((U,B)=>u==="title"?U.title.localeCompare(B.title):u==="price"?U.price-B.price:u==="publicationDate"?new Date(B.publicationDate).getTime()-new Date(U.publicationDate).getTime():0)},[r,a,o,u,e]),D=T.useMemo(()=>e.find(k=>k.title.includes("Manual"))||e.find(k=>k.price>0)||e[0],[e]),I=k=>{const U=e.find(B=>B.id===k);U&&(w(U),g(!0))},P=()=>{y&&(y.price===0?n(`/read/${y.id}`):t(y),g(!1))};return v.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pt-24 pb-safe md:pb-24 overflow-x-hidden",children:[D&&!r&&a==="All"&&v.jsxs("div",{className:"relative w-full rounded-[32px] overflow-hidden mb-12 md:mb-16 group border border-white/10 shadow-2xl animate-fade-in flex flex-col md:block h-auto md:h-[500px]",children:[v.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-[2s] group-hover:scale-105",style:{backgroundImage:`url(${D.coverImageUrl})`}}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent md:bg-gradient-to-r md:from-black md:via-black/80 md:to-transparent"}),v.jsxs("div",{className:"relative z-10 p-8 md:p-16 flex flex-col justify-end md:justify-center min-h-[400px] md:h-full max-w-2xl",children:[v.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-brand-accent/20 border border-brand-accent/30 w-fit mb-4 md:mb-6 backdrop-blur-md rounded-full animate-slide-up",children:[v.jsx(gq,{className:"w-3 h-3 text-brand-accent fill-current"}),v.jsx("span",{className:"text-[10px] md:text-xs font-bold text-brand-accent uppercase tracking-widest",children:"Featured Release"})]}),v.jsx("h1",{className:"text-3xl md:text-6xl font-black text-white mb-3 md:mb-4 leading-tight tracking-tight drop-shadow-lg",children:D.title}),v.jsx("p",{className:"text-sm md:text-xl text-neutral-300 mb-6 md:mb-8 line-clamp-3 leading-relaxed drop-shadow-md",children:D.description}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[v.jsx("button",{onClick:()=>I(D.id),className:"bg-white/10 backdrop-blur-md border border-white/20 text-white font-bold py-3.5 px-8 rounded-full hover:bg-white hover:text-black transition-all text-xs uppercase tracking-widest",children:"View Details"}),v.jsx("button",{onClick:()=>{D.price===0?n(`/read/${D.id}`):t(D)},className:"px-8 py-3.5 rounded-full bg-white text-black font-bold transition-all hover:scale-105 flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:D.price===0?v.jsxs(v.Fragment,{children:[v.jsx(Ti,{className:"w-4 h-4"})," Read Now"]}):v.jsxs(v.Fragment,{children:[v.jsx(SI,{className:"w-4 h-4"})," Add to Cart"]})})]})]})]}),v.jsx("div",{className:"sticky top-20 z-30 mx-auto w-full mb-8 transition-all duration-300",children:v.jsxs("div",{className:"bg-black/90 backdrop-blur-xl border border-white/10 shadow-xl rounded-[24px] p-2 md:p-3 flex flex-col md:flex-row gap-2 md:gap-3 items-stretch",children:[v.jsxs("div",{className:"relative group w-full flex-grow",children:[v.jsx(hM,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-500 group-focus-within:text-white transition-colors"}),v.jsx("input",{type:"text",placeholder:"Search books, authors...",className:"w-full h-full bg-white/5 border border-transparent focus:border-white/10 rounded-full py-3 pl-10 pr-4 text-white placeholder-neutral-500 focus:outline-none focus:bg-white/10 transition-all text-sm font-bold min-h-[48px]",value:r,onChange:k=>i(k.target.value)})]}),v.jsxs("div",{className:"grid grid-cols-2 md:flex gap-2 w-full md:w-auto",children:[v.jsx(BN,{options:E,value:a,onChange:s,className:"w-full md:w-auto md:min-w-[160px]",placeholder:"Genres"}),v.jsx(BN,{options:C,value:o,onChange:k=>c(k),className:"w-full md:w-auto md:min-w-[130px]",placeholder:"Price"}),v.jsx(BN,{options:M,value:u,onChange:f,className:"col-span-2 md:col-span-1 w-full md:w-auto md:min-w-[150px]",placeholder:"Sort By"})]})]})}),R.length>0?v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 pb-20",children:R.map(k=>v.jsx(wq,{book:k,onViewDetails:I},k.id))}):v.jsxs("div",{className:"flex flex-col items-center justify-center py-20 border border-dashed border-white/10 rounded-3xl bg-white/5 text-center px-4",children:[v.jsx(hM,{className:"w-12 h-12 text-neutral-600 mb-4"}),v.jsx("p",{className:"text-xl text-white font-bold",children:"No books found"}),v.jsx("p",{className:"text-neutral-500 mt-2 text-sm",children:"Try adjusting your filters."})]}),y&&v.jsx(ide,{isOpen:h,onClose:()=>g(!1),title:"",size:"lg",children:v.jsxs("div",{className:"flex flex-col md:flex-row h-full max-h-[85vh] overflow-y-auto md:overflow-hidden bg-black",children:[v.jsxs("div",{className:"w-full md:w-5/12 bg-neutral-900 relative",children:[v.jsx("img",{src:y.coverImageUrl,alt:y.title,className:"w-full h-full object-cover opacity-90"}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"})]}),v.jsxs("div",{className:"w-full md:w-7/12 flex flex-col p-6 md:p-10",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-brand-accent mb-2 block",children:y.genre}),v.jsx("h2",{className:"text-2xl md:text-4xl font-black text-white leading-none mb-2",children:y.title}),v.jsxs("p",{className:"text-base text-neutral-400",children:["by ",y.author]})]}),v.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 mb-6",children:v.jsx("p",{className:"text-neutral-300 text-sm leading-relaxed font-light",children:y.description})}),v.jsxs("div",{className:"mt-auto pt-6 border-t border-white/10 flex items-center justify-between",children:[v.jsx("span",{className:"text-3xl font-bold text-white",children:y.price===0?"Free":`${y.price}`}),v.jsx("button",{onClick:P,className:"bg-white text-black px-8 py-3 rounded-full font-bold text-xs uppercase tracking-widest hover:bg-neutral-200",children:y.price===0?"Read Now":"Add to Cart"})]})]})]})})]})},{useNavigate:ode}=Fr,lde=()=>{const{currentUser:t,setCurrentUser:e,userType:n,upgradeToSeller:r}=Gi(),i=t,a=ode(),[s,o]=T.useState("library"),[c,u]=T.useState(""),f=T.useRef(null);if(!i)return null;const h=()=>{e(null,n),a("/")},g=C=>{var R;const M=(R=C.target.files)==null?void 0:R[0];if(M){const D=new FileReader;D.onloadend=()=>{const I=D.result,P={...i,profileImageUrl:I};e(P,n)},D.readAsDataURL(M)}},y=({id:C,label:M,icon:R})=>v.jsxs("button",{onClick:()=>o(C),className:`w-full flex items-center gap-4 px-6 py-3.5 text-sm font-medium rounded-r-full transition-all duration-200 group ${s===C?"bg-[#4285f4]/15 text-[#a8c7fa] border-l-4 border-[#4285f4]":"text-neutral-400 hover:bg-white/5 hover:text-white border-l-4 border-transparent"}`,children:[v.jsx(R,{className:`w-5 h-5 ${s===C?"text-[#a8c7fa]":"text-neutral-500 group-hover:text-white"}`}),M]}),w=({id:C,label:M,icon:R})=>v.jsxs("button",{onClick:()=>o(C),className:`flex flex-col items-center justify-center py-2 px-4 flex-1 transition-colors ${s===C?"text-white":"text-neutral-500 hover:text-neutral-300"}`,children:[v.jsx(R,{className:`w-6 h-6 mb-1 ${s===C?"text-[#a8c7fa]":"text-current"}`}),v.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:M})]}),S=s==="wishlist"?i.wishlist:i.purchaseHistory,E=S==null?void 0:S.filter(C=>C.title.toLowerCase().includes(c.toLowerCase()));return v.jsxs("div",{className:"h-screen w-full bg-[#0b0b0b] font-sans text-white pt-16 flex overflow-hidden",children:[v.jsxs("aside",{className:"w-64 flex-shrink-0 border-r border-white/5 hidden md:flex flex-col bg-[#0b0b0b] z-20 h-full overflow-y-auto",children:[v.jsx("div",{className:"p-6",children:v.jsxs("button",{onClick:()=>a("/store"),className:"w-full py-4 bg-white text-black font-bold rounded-2xl shadow-lg hover:shadow-xl hover:bg-neutral-200 transition-all flex items-center justify-center gap-2",children:[v.jsx(Ti,{className:"w-5 h-5"})," Store"]})}),v.jsxs("nav",{className:"flex-1 space-y-1 pr-4",children:[v.jsx(y,{id:"library",label:"My Library",icon:Ti}),v.jsx(y,{id:"wishlist",label:"Wishlist",icon:WF}),v.jsx("div",{className:"my-4 border-t border-white/5 mx-6"}),v.jsx(y,{id:"settings",label:"Profile Settings",icon:N0})]}),v.jsxs("div",{className:"p-6 border-t border-white/5",children:[v.jsx("button",{onClick:r,className:"text-xs font-medium text-neutral-500 hover:text-white transition-colors mb-4 block",children:"Switch to Writer Mode"}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-800 overflow-hidden border border-white/10",children:i.profileImageUrl?v.jsx("img",{src:i.profileImageUrl,alt:"",className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-500 font-bold",children:i.name[0]})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-bold truncate",children:i.name}),v.jsx("p",{className:"text-xs text-neutral-500 truncate",children:i.email})]})]})]})]}),v.jsx("main",{className:"flex-1 h-full overflow-y-auto bg-[#0b0b0b] relative scroll-smooth",children:v.jsxs("div",{className:"p-4 md:p-8 pb-32",children:[" ",v.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[v.jsxs("h1",{className:"text-2xl font-normal text-white",children:[s==="library"&&"My Library",s==="wishlist"&&"My Wishlist",s==="settings"&&"Settings"]}),(s==="library"||s==="wishlist")&&v.jsxs("div",{className:"relative w-full md:w-96 group",children:[v.jsx(hM,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-500 group-focus-within:text-white transition-colors"}),v.jsx("input",{type:"text",placeholder:"Search your books...",value:c,onChange:C=>u(C.target.value),className:"w-full bg-[#1e1e1e] border-none rounded-full py-3 pl-12 pr-6 text-sm text-white placeholder-neutral-500 focus:ring-2 focus:ring-[#4285f4]/50 focus:bg-[#252525] transition-all outline-none"})]})]}),s==="settings"?v.jsx("div",{className:"max-w-2xl animate-fade-in mx-auto md:mx-0",children:v.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl p-6 md:p-8 mb-6",children:[v.jsx("h2",{className:"text-lg font-medium mb-6",children:"Profile Details"}),v.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 mb-8 text-center md:text-left",children:[v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:"w-24 h-24 rounded-full bg-neutral-800 border-4 border-[#0b0b0b] overflow-hidden",children:i.profileImageUrl?v.jsx("img",{src:i.profileImageUrl,alt:"",className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl text-neutral-600",children:v.jsx(lM,{className:"w-10 h-10"})})}),v.jsx("button",{onClick:()=>{var C;return(C=f.current)==null?void 0:C.click()},className:"absolute bottom-0 right-0 p-2 bg-[#4285f4] rounded-full text-white shadow-lg hover:scale-110 transition-transform",children:v.jsx(N0,{className:"w-4 h-4"})}),v.jsx("input",{type:"file",ref:f,className:"hidden",accept:"image/*",onChange:g})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-bold",children:i.name}),v.jsx("p",{className:"text-neutral-400",children:i.email}),v.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-[#4285f4]/10 text-[#a8c7fa] text-xs font-bold rounded-full",children:"Reader Account"})]})]}),v.jsxs("div",{className:"flex flex-col gap-3",children:[v.jsx("button",{onClick:r,className:"w-full py-3 border border-white/10 rounded-xl hover:bg-white/5 transition-colors text-sm font-medium",children:"Become a Writer"}),v.jsxs("button",{onClick:h,className:"w-full py-3 flex items-center justify-center gap-2 text-red-400 hover:bg-red-500/10 rounded-xl transition-colors font-medium text-sm",children:[v.jsx(bue,{className:"w-4 h-4"})," Sign Out"]})]})]})}):v.jsx("div",{className:"animate-fade-in",children:E&&E.length>0?v.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6",children:E.map(C=>v.jsx("div",{className:"group",children:v.jsx(wq,{book:C})},C.id))}):v.jsxs("div",{className:"flex flex-col items-center justify-center py-20 md:py-32 text-center",children:[v.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-[#1e1e1e] rounded-full flex items-center justify-center mb-6",children:v.jsx(Ti,{className:"w-8 h-8 text-neutral-600"})}),v.jsx("h3",{className:"text-lg md:text-xl font-medium text-white mb-2",children:s==="wishlist"?"Your wishlist is empty":"No books in library"}),v.jsx("p",{className:"text-neutral-500 mb-8 max-w-xs mx-auto text-sm",children:s==="wishlist"?"Save books you want to read later.":"Start your reading journey by exploring the store."}),v.jsx("button",{onClick:()=>a("/store"),className:"px-8 py-3 bg-[#4285f4] text-black font-bold rounded-full hover:bg-[#5b96f5] transition-colors",children:"Explore Books"})]})})]})}),v.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-[#0b0b0b]/90 backdrop-blur-xl border-t border-white/10 flex items-center justify-around z-50 pb-safe",children:[v.jsx(w,{id:"library",label:"Library",icon:Ti}),v.jsx(w,{id:"wishlist",label:"Wishlist",icon:WF}),v.jsx(w,{id:"settings",label:"Profile",icon:N0})]})]})},F0=({size:t="md",color:e="bg-white"})=>{const n={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return v.jsxs("div",{className:"flex justify-center items-center gap-1",children:[v.jsx("div",{className:`${n[t]} ${e} opacity-20 animate-[pulse-square_1s_ease-in-out_infinite] rounded-sm`}),v.jsx("div",{className:`${n[t]} ${e} opacity-60 animate-[pulse-square_1s_ease-in-out_0.2s_infinite] rounded-sm`}),v.jsx("div",{className:`${n[t]} ${e} animate-[pulse-square_1s_ease-in-out_0.4s_infinite] rounded-sm`})]})},Sq=({bookDetails:t,onPriceSuggested:e})=>{const[n,r]=T.useState(null),[i,a]=T.useState(!1),[s,o]=T.useState(null),c=async()=>{if(!t.title){o("Enter a title first.");return}a(!0),o(null);try{const u=await Bue(t);u.match(/^\d+(\.\d{1,2})?$/)?(r(u),e(u)):o("Could not calculate.")}catch{o("Service unavailable.")}finally{a(!1)}};return v.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-5 mt-4 flex flex-col md:flex-row items-center justify-between gap-4 group hover:border-white/10 transition-colors",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500/20 to-teal-900/20 border border-emerald-500/30 flex items-center justify-center text-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.15)] group-hover:shadow-[0_0_30px_rgba(16,185,129,0.25)] transition-shadow duration-500",children:v.jsx(xue,{className:"w-6 h-6"})}),v.jsxs("div",{className:"absolute -top-1 -right-1 bg-white text-black text-[8px] font-black px-1.5 py-0.5 rounded-full flex items-center gap-0.5 border border-white shadow-sm",children:["AI ",v.jsx(Hd,{className:"w-2 h-2"})]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-bold text-white flex items-center gap-2",children:"Smart Pricing Model"}),v.jsx("p",{className:"text-[10px] text-neutral-500 max-w-[200px]",children:"Analyze market trends & genre data to predict the optimal revenue point."})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[n&&v.jsxs("div",{className:"flex flex-col items-end mr-2 animate-fade-in",children:[v.jsx("span",{className:"text-[10px] text-neutral-500 uppercase tracking-widest font-bold",children:"Target Price"}),v.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[v.jsxs("span",{className:"text-xl font-black tracking-tighter",children:["",parseFloat(n).toFixed(0)]}),v.jsx(Or,{className:"w-4 h-4 bg-emerald-500/20 rounded-full p-0.5"})]})]}),v.jsx("button",{onClick:c,disabled:i,className:"px-6 py-3 rounded-full bg-white text-black hover:bg-neutral-200 border border-transparent hover:border-white/50 transition-all font-bold text-[10px] uppercase tracking-widest disabled:opacity-50 shadow-glow-white hover:scale-105 active:scale-95 flex items-center gap-2",children:i?v.jsx(F0,{size:"sm",color:"text-black"}):"Optimize"})]}),s&&v.jsx("span",{className:"text-red-400 text-xs font-bold bg-red-500/10 px-3 py-1 rounded-full border border-red-500/20",children:s})]})},cde=["Cinematic","Minimalist","Fantasy","Sci-Fi","Cyberpunk","Oil Painting","Watercolor","3D Render","Photorealistic","Abstract","Noir","Vintage"],Eq=({onCoverGenerated:t,currentTitle:e,currentAuthor:n})=>{const[r,i]=T.useState(""),[a,s]=T.useState("Cinematic"),[o,c]=T.useState(null),[u,f]=T.useState(!1),[h,g]=T.useState(null),y=async E=>{if(E.preventDefault(),!r.trim()){g("Please describe your vision.");return}f(!0),g(null);try{const C=await bq(r,a,e,n);"error"in C?(g(C.error),c(null)):(c(C),t(C))}catch{g("Generation failed. Please try again."),c(null)}finally{f(!1)}},w="w-full bg-[#0b0b0b] border border-white/10 rounded-xl p-4 text-sm text-white focus:outline-none focus:border-white/30 transition-all duration-200 placeholder-neutral-600 font-sans",S="block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2";return v.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-6 md:p-8",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h4",{className:"text-base font-bold text-white",children:"AI Cover Designer"}),v.jsx("p",{className:"text-xs text-neutral-500",children:"Generate professional cover art instantly."})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:S,children:"Art Direction"}),v.jsxs("div",{className:"relative",children:[v.jsx("select",{value:a,onChange:E=>s(E.target.value),className:`${w} appearance-none cursor-pointer`,children:cde.map(E=>v.jsx("option",{value:E,children:E},E))}),v.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-500",children:v.jsx(EI,{className:"w-4 h-4"})})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:S,children:"Visual Concept"}),v.jsx("input",{value:r,onChange:E=>i(E.target.value),placeholder:"e.g. A lone astronaut...",className:w})]})]}),v.jsx("div",{className:"flex justify-end",children:v.jsx("button",{type:"button",onClick:y,disabled:u||!r.trim(),className:"px-8 py-3 rounded-full bg-white text-black font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all flex items-center justify-center disabled:opacity-50 shadow-[0_0_20px_rgba(255,255,255,0.2)] hover:scale-105 active:scale-95 min-w-[140px]",children:u?v.jsx(F0,{size:"sm",color:"text-black"}):"Generate Art"})}),h&&v.jsx("p",{className:"text-red-400 mt-4 text-xs bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:h}),o&&!h&&v.jsx("div",{className:"mt-8 pt-8 border-t border-white/5 animate-fade-in",children:v.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[v.jsx("div",{className:"relative w-32 h-48 rounded-lg overflow-hidden shadow-2xl border border-white/10 group",children:v.jsx("img",{src:`data:image/jpeg;base64,${o.imageBytes}`,alt:"Generated Cover",className:"w-full h-full object-cover"})}),v.jsxs("div",{className:"flex-1 text-center md:text-left",children:[v.jsxs("h5",{className:"text-sm font-bold text-white mb-2 flex items-center justify-center md:justify-start gap-2",children:[v.jsx(Or,{className:"w-4 h-4 text-green-500"})," Cover Applied"]}),v.jsx("p",{className:"text-xs text-neutral-500 mb-1",children:"The image has been automatically attached to your book."}),o.revisedPrompt&&v.jsxs("p",{className:"text-[10px] text-neutral-600 italic mt-2",children:['"',o.revisedPrompt.substring(0,80),'..."']})]})]})})]})},im="w-full bg-[#0b0b0b] border border-white/10 rounded-xl p-4 text-white placeholder-neutral-600 text-sm focus:outline-none focus:border-white/30 transition-all duration-200 font-sans",Tf="block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",ude=({onBookUploaded:t})=>{const{currentUser:e,userType:n}=Gi(),[r,i]=T.useState(""),[a,s]=T.useState(""),[o,c]=T.useState(""),[u,f]=T.useState(""),[h,g]=T.useState("paid"),[y,w]=T.useState(""),[S,E]=T.useState(""),[C,M]=T.useState(null),[R,D]=T.useState(!1),[I,P]=T.useState(!1),[k,U]=T.useState(null),[B,V]=T.useState(null),H=async $=>{P(!0);try{const q=new FileReader;q.onload=async()=>{const J=q.result,ae=await Uue(J);ae&&(ae.title&&i(ae.title),ae.author&&s(ae.author),ae.description&&c(ae.description),ae.genre&&f(ae.genre)),P(!1)},q.onerror=()=>{V("Error reading file."),P(!1)},q.readAsDataURL($)}catch(q){console.error(q),V("Failed to analyze PDF."),P(!1)}},G=async $=>{const q=$.target.files?$.target.files[0]:null;M(q),V(null),q&&q.type==="application/pdf"&&await H(q)},Q=async $=>{if($.preventDefault(),V(null),!r||!a||!o||!u){V("Missing required fields.");return}let q=0;if(h==="paid"){if(!y||isNaN(parseFloat(y))||parseFloat(y)<=0){V("Invalid Price.");return}q=parseFloat(y)}D(!0);const J=e&&n===Ht.SELLER?e.id:"unknown_seller_id";let ae;if(C)try{ae=await new Promise((ne,ue)=>{const me=new FileReader;me.onload=()=>ne(me.result),me.onerror=ue,me.readAsDataURL(C)})}catch{V("Failed to process file."),D(!1);return}const ye=ae?[]:[{id:"1",title:"Chapter 1",pageNumber:1,content:`Welcome to ${r}.

Placeholder content.`}],Y={id:`book-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,title:r,author:a,description:o,genre:u,price:q,coverImageUrl:k?`data:image/jpeg;base64,${k.imageBytes}`:S||`https://picsum.photos/seed/${encodeURIComponent(r)}/400/600`,sellerId:J,publicationDate:new Date().toISOString().split("T")[0],pages:ye,pdfUrl:ae};t(Y),i(""),s(""),c(""),f(""),w(""),E(""),M(null),U(null),D(!1)},W=$=>{h==="paid"&&w($)},ee=$=>{U($),E("")};return v.jsxs("form",{onSubmit:Q,className:"bg-[#1e1e1e] border border-white/5 p-8 md:p-10 shadow-2xl relative overflow-hidden rounded-[32px] animate-fade-in",children:[v.jsxs("div",{className:"relative z-10 mb-8 border-b border-white/5 pb-8",children:[v.jsx("h2",{className:"text-3xl font-normal text-white mb-2",children:"Publish New Book"}),v.jsx("p",{className:"text-neutral-400 text-sm",children:"Upload a PDF or start a fresh manuscript."})]}),B&&v.jsxs("div",{className:"p-4 mb-8 text-red-400 bg-red-900/10 border border-red-500/20 text-sm font-medium rounded-xl flex items-center gap-2",children:[v.jsx(Or,{className:"w-4 h-4 text-red-500"}),B]}),v.jsxs("div",{className:`relative h-48 border border-dashed transition-all duration-300 mb-10 flex flex-col items-center justify-center gap-4 group rounded-3xl ${I?"bg-white/5 border-white/30":"bg-[#0b0b0b] border-white/10 hover:border-white/30"}`,children:[I?v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx(F0,{size:"md",color:"text-white"}),v.jsx("p",{className:"mt-4 text-white font-bold text-xs uppercase tracking-widest animate-pulse",children:"Analyzing Content..."})]}):v.jsxs("label",{htmlFor:"ebookFile",className:"flex flex-col items-center justify-center cursor-pointer w-full h-full",children:[v.jsx("div",{className:"w-12 h-12 bg-[#1e1e1e] border border-white/10 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform rounded-full shadow-lg",children:v.jsx(qF,{className:"w-5 h-5 text-white"})}),v.jsx("span",{className:"text-sm font-bold text-white mb-1",children:C?C.name:"Upload PDF Document"}),v.jsx("span",{className:"text-xs text-neutral-500",children:C?"Click to change file":"Drag & drop or click to browse"}),v.jsx("input",{type:"file",id:"ebookFile",accept:"application/pdf",onChange:G,className:"hidden"})]}),C&&!I&&v.jsxs("button",{type:"button",onClick:()=>H(C),className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-neutral-400 hover:text-white flex items-center gap-1 bg-[#1e1e1e] px-3 py-1.5 rounded-full border border-white/10",children:[v.jsx(Hd,{className:"w-3 h-3"})," Re-Analyze"]})]}),v.jsxs("div",{className:`space-y-8 ${I?"opacity-50 pointer-events-none blur-sm":""}`,children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"title",className:Tf,children:"Book Title"}),v.jsx("input",{type:"text",id:"title",value:r,onChange:$=>i($.target.value),required:!0,className:im,placeholder:"Enter Title..."})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"author",className:Tf,children:"Author"}),v.jsx("input",{type:"text",id:"author",value:a,onChange:$=>s($.target.value),required:!0,className:im,placeholder:"Enter Author..."})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"description",className:Tf,children:"Description"}),v.jsx("textarea",{id:"description",value:o,onChange:$=>c($.target.value),rows:4,required:!0,className:`${im} min-h-[120px] resize-none`})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"genre",className:Tf,children:"Genre"}),v.jsx("input",{type:"text",id:"genre",value:u,onChange:$=>f($.target.value),required:!0,className:im,placeholder:"Sci-Fi, Thriller..."})]}),v.jsxs("div",{children:[v.jsx("label",{className:Tf,children:"Monetization"}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsx("button",{type:"button",onClick:()=>g("paid"),className:`p-4 border text-left transition-all rounded-xl relative overflow-hidden group ${h==="paid"?"bg-white text-black border-white":"bg-[#0b0b0b] text-neutral-400 border-white/10 hover:border-white/20"}`,children:v.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-2",children:[v.jsx(f_,{className:`w-5 h-5 ${h==="paid"?"text-black":"text-neutral-500"}`}),v.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Paid"})]})}),v.jsx("button",{type:"button",onClick:()=>g("free"),className:`p-4 border text-left transition-all rounded-xl relative overflow-hidden group ${h==="free"?"bg-white text-black border-white":"bg-[#0b0b0b] text-neutral-400 border-white/10 hover:border-white/20"}`,children:v.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-2",children:[v.jsx(bo,{className:`w-5 h-5 ${h==="free"?"text-black":"text-neutral-500"}`}),v.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Free"})]})})]})]})]}),h==="paid"&&v.jsxs("div",{className:"animate-fade-in space-y-6 bg-[#0b0b0b] p-6 rounded-2xl border border-white/5",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"price",className:Tf,children:"List Price ()"}),v.jsx("input",{type:"number",id:"price",value:y,onChange:$=>w($.target.value),className:im,placeholder:"499"})]}),v.jsx(Sq,{bookDetails:{title:r,genre:u,description:o},onPriceSuggested:W})]}),v.jsxs("div",{className:"p-6 bg-[#0b0b0b] border border-white/5 rounded-2xl",children:[v.jsx(Eq,{onCoverGenerated:ee,currentTitle:r,currentAuthor:a}),k&&v.jsxs("div",{className:"mt-6 p-4 bg-white/5 border border-white/10 flex items-center gap-4 rounded-xl",children:[v.jsx("img",{src:`data:image/jpeg;base64,${k.imageBytes}`,alt:"AI Cover",className:"w-12 h-16 object-cover bg-black rounded"}),v.jsxs("span",{className:"text-white text-[10px] font-bold uppercase tracking-widest flex items-center gap-2",children:[v.jsx(Or,{className:"w-3 h-3 text-green-500"})," Cover Attached"]})]}),!k&&v.jsxs("div",{className:"mt-6",children:[v.jsx("label",{className:Tf,children:"Manual Cover URL"}),v.jsx("input",{type:"url",value:S,onChange:$=>E($.target.value),className:im,placeholder:"https://..."})]})]}),v.jsx("div",{className:"pt-4 flex justify-end",children:v.jsx("button",{type:"submit",disabled:R||I,className:"px-10 py-4 bg-white text-black font-bold hover:bg-neutral-200 transition-all text-xs uppercase tracking-widest flex items-center justify-center gap-2 disabled:opacity-50 rounded-full shadow-glow-white hover:scale-105 active:scale-95",children:R?v.jsx(v.Fragment,{children:"Publishing..."}):v.jsxs(v.Fragment,{children:[v.jsx(qF,{className:"w-4 h-4"})," Publish to Store"]})})})]})]})};function Aq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Aq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $t(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Aq(t))&&(r&&(r+=" "),r+=e);return r}var dde=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function NI(t){if(typeof t!="string")return!1;var e=dde;return e.includes(t)}var fde=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hde=new Set(fde);function _q(t){return typeof t!="string"?!1:hde.has(t)}function Cq(t){return typeof t=="string"&&t.startsWith("data-")}function wo(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(_q(n)||Cq(n))&&(e[n]=t[n]);return e}function h_(t){if(t==null)return null;if(T.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return wo(e)}return typeof t=="object"&&!Array.isArray(t)?wo(t):null}function Bs(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(_q(n)||Cq(n)||NI(n))&&(e[n]=t[n]);return e}function pde(t){return t==null?null:T.isValidElement(t)?Bs(t.props):typeof t=="object"&&!Array.isArray(t)?Bs(t):null}var mde=["children","width","height","viewBox","className","style","title","desc"];function pM(){return pM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pM.apply(null,arguments)}function gde(t,e){if(t==null)return{};var n,r,i=vde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Tq=T.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:o,title:c,desc:u}=t,f=gde(t,mde),h=a||{width:r,height:i,x:0,y:0},g=$t("recharts-surface",s);return T.createElement("svg",pM({},Bs(f),{className:g,width:r,height:i,style:o,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:e}),T.createElement("title",null,c),T.createElement("desc",null,u),n)}),yde=["children","className"];function mM(){return mM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mM.apply(null,arguments)}function bde(t,e){if(t==null)return{};var n,r,i=xde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var hl=T.forwardRef((t,e)=>{var{children:n,className:r}=t,i=bde(t,yde),a=$t("recharts-layer",r);return T.createElement("g",mM({className:a},Bs(i),{ref:e}),n)}),wde=T.createContext(null);function Fn(t){return function(){return t}}const gM=Math.PI,vM=2*gM,Mf=1e-6,Sde=vM-Mf;function Nq(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Ede(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Nq;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ade{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Nq:Ede(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,c=r-e,u=i-n,f=s-e,h=o-n,g=f*f+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>Mf)if(!(Math.abs(h*c-u*f)>Mf)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,w=i-o,S=c*c+u*u,E=y*y+w*w,C=Math.sqrt(S),M=Math.sqrt(g),R=a*Math.tan((gM-Math.acos((S+g-E)/(2*C*M)))/2),D=R/M,I=R/C;Math.abs(D-1)>Mf&&this._append`L${e+D*f},${n+D*h}`,this._append`A${a},${a},0,0,${+(h*y>f*w)},${this._x1=e+I*c},${this._y1=n+I*u}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),c=r*Math.sin(i),u=e+o,f=n+c,h=1^s,g=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Mf||Math.abs(this._y1-f)>Mf)&&this._append`L${u},${f}`,r&&(g<0&&(g=g%vM+vM),g>Sde?this._append`A${r},${r},0,1,${h},${e-o},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=f}`:g>Mf&&this._append`A${r},${r},0,${+(g>=gM)},${h},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Rq(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ade(e)}function RI(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Mq(t){this._context=t}Mq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function p_(t){return new Mq(t)}function Pq(t){return t[0]}function kq(t){return t[1]}function Iq(t,e){var n=Fn(!0),r=null,i=p_,a=null,s=Rq(o);t=typeof t=="function"?t:t===void 0?Pq:Fn(t),e=typeof e=="function"?e:e===void 0?kq:Fn(e);function o(c){var u,f=(c=RI(c)).length,h,g=!1,y;for(r==null&&(a=i(y=s())),u=0;u<=f;++u)!(u<f&&n(h=c[u],u,c))===g&&((g=!g)?a.lineStart():a.lineEnd()),g&&a.point(+t(h,u,c),+e(h,u,c));if(y)return a=null,y+""||null}return o.x=function(c){return arguments.length?(t=typeof c=="function"?c:Fn(+c),o):t},o.y=function(c){return arguments.length?(e=typeof c=="function"?c:Fn(+c),o):e},o.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Fn(!!c),o):n},o.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),o):i},o.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),o):r},o}function KS(t,e,n){var r=null,i=Fn(!0),a=null,s=p_,o=null,c=Rq(u);t=typeof t=="function"?t:t===void 0?Pq:Fn(+t),e=typeof e=="function"?e:Fn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?kq:Fn(+n);function u(h){var g,y,w,S=(h=RI(h)).length,E,C=!1,M,R=new Array(S),D=new Array(S);for(a==null&&(o=s(M=c())),g=0;g<=S;++g){if(!(g<S&&i(E=h[g],g,h))===C)if(C=!C)y=g,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),w=g-1;w>=y;--w)o.point(R[w],D[w]);o.lineEnd(),o.areaEnd()}C&&(R[g]=+t(E,g,h),D[g]=+e(E,g,h),o.point(r?+r(E,g,h):R[g],n?+n(E,g,h):D[g]))}if(M)return o=null,M+""||null}function f(){return Iq().defined(i).curve(s).context(a)}return u.x=function(h){return arguments.length?(t=typeof h=="function"?h:Fn(+h),r=null,u):t},u.x0=function(h){return arguments.length?(t=typeof h=="function"?h:Fn(+h),u):t},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Fn(+h),u):r},u.y=function(h){return arguments.length?(e=typeof h=="function"?h:Fn(+h),n=null,u):e},u.y0=function(h){return arguments.length?(e=typeof h=="function"?h:Fn(+h),u):e},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Fn(+h),u):n},u.lineX0=u.lineY0=function(){return f().x(t).y(e)},u.lineY1=function(){return f().x(t).y(n)},u.lineX1=function(){return f().x(r).y(e)},u.defined=function(h){return arguments.length?(i=typeof h=="function"?h:Fn(!!h),u):i},u.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),u):s},u.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),u):a},u}class Dq{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function _de(t){return new Dq(t,!0)}function Cde(t){return new Dq(t,!1)}function SE(){}function EE(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Lq(t){this._context=t}Lq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:EE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:EE(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Tde(t){return new Lq(t)}function Oq(t){this._context=t}Oq.prototype={areaStart:SE,areaEnd:SE,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:EE(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Nde(t){return new Oq(t)}function jq(t){this._context=t}jq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:EE(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Rde(t){return new jq(t)}function Fq(t){this._context=t}Fq.prototype={areaStart:SE,areaEnd:SE,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Mde(t){return new Fq(t)}function JF(t){return t<0?-1:1}function QF(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),o=(a*i+s*r)/(r+i);return(JF(a)+JF(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function ZF(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function HN(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,o=(a-r)/3;t._context.bezierCurveTo(r+o,i+o*e,a-o,s-o*n,a,s)}function AE(t){this._context=t}AE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HN(this,this._t0,ZF(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,HN(this,ZF(this,n=QF(this,t,e)),n);break;default:HN(this,this._t0,n=QF(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Uq(t){this._context=new Bq(t)}(Uq.prototype=Object.create(AE.prototype)).point=function(t,e){AE.prototype.point.call(this,e,t)};function Bq(t){this._context=t}Bq.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function Pde(t){return new AE(t)}function kde(t){return new Uq(t)}function Hq(t){this._context=t}Hq.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=eU(t),i=eU(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function eU(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Ide(t){return new Hq(t)}function m_(t,e){this._context=t,this._t=e}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Dde(t){return new m_(t,.5)}function Lde(t){return new m_(t,0)}function Ode(t){return new m_(t,1)}function op(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,o=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<o;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function yM(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function jde(t,e){return t[e]}function Fde(t){const e=[];return e.key=t,e}function Ude(){var t=Fn([]),e=yM,n=op,r=jde;function i(a){var s=Array.from(t.apply(this,arguments),Fde),o,c=s.length,u=-1,f;for(const h of a)for(o=0,++u;o<c;++o)(s[o][u]=[0,+r(h,s[o].key,u,a)]).data=h;for(o=0,f=RI(e(s));o<c;++o)s[f[o]].index=o;return n(s,f),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Fn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Fn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?yM:typeof a=="function"?a:Fn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??op,i):n},i}function Bde(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}op(t,e)}}function Hde(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,o=0;s<i;++s)o+=t[s][n][1]||0;r[n][1]+=r[n][0]=-o/2}op(t,e)}}function zde(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var o=0,c=0,u=0;o<s;++o){for(var f=t[e[o]],h=f[r][1]||0,g=f[r-1][1]||0,y=(h-g)/2,w=0;w<o;++w){var S=t[e[w]],E=S[r][1]||0,C=S[r-1][1]||0;y+=E-C}c+=h,u+=y*h}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,op(t,e)}}var zN={},$N={},tU;function $de(){return tU||(tU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})($N)),$N}var GN={},nU;function zq(){return nU||(nU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(GN)),GN}var qN={},rU;function MI(){return rU||(rU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(qN)),qN}var VN={},WN={},iU;function Gde(){return iU||(iU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(WN)),WN}var aU;function PI(){return aU||(aU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Gde(),n=MI();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let o=0,c="",u="",f=!1;for(i.charCodeAt(0)===46&&(a.push(""),o++);o<s;){const h=i[o];u?h==="\\"&&o+1<s?(o++,c+=i[o]):h===u?u="":c+=h:f?h==='"'||h==="'"?u=h:h==="]"?(f=!1,a.push(c),c=""):c+=h:h==="["?(f=!0,c&&(a.push(c),c="")):h==="."?c&&(a.push(c),c=""):c+=h,o++}return c&&a.push(c),a}t.toPath=r})(VN)),VN}var sU;function kI(){return sU||(sU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$de(),n=zq(),r=MI(),i=PI();function a(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?n.isDeepKey(c)?a(o,i.toPath(c),u):u:f}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const f=o[c];return f===void 0?u:f}default:{if(Array.isArray(c))return s(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return u;const f=o[c];return f===void 0?u:f}}}function s(o,c,u){if(c.length===0)return u;let f=o;for(let h=0;h<c.length;h++){if(f==null||e.isUnsafeProperty(c[h]))return u;f=f[c[h]]}return f===void 0?u:f}t.get=a})(zN)),zN}var YN,oU;function qde(){return oU||(oU=1,YN=kI().get),YN}var Vde=qde();const g_=Co(Vde);var Wde=4;function Ld(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wde,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function ei(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,a,s)=>{var o=n[s-1];return typeof o=="string"?i+o+a:o!==void 0?i+Ld(o)+a:i+a},"")}var Ds=t=>t===0?0:t>0?1:-1,So=t=>typeof t=="number"&&t!=+t,Fc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,We=t=>(typeof t=="number"||t instanceof Number)&&!So(t),pl=t=>We(t)||typeof t=="string",Yde=0,U0=t=>{var e=++Yde;return"".concat(t||"").concat(e)},$d=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!We(e)&&typeof e!="string")return r;var a;if(Fc(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return So(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},$q=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function sl(t,e,n){return We(t)&&We(e)?Ld(t+n*(e-t)):e}function Gq(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):g_(r,e))===n)}var oi=t=>t===null||typeof t>"u",II=t=>oi(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Kde(t){return t!=null}function Qx(){}var qq=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,DI=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(T.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{NI(i)&&(r[i]=(a=>n[i](n,a)))}),r},Xde=(t,e,n)=>r=>(t(e,n,r),null),Jde=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];NI(i)&&typeof a=="function"&&(r||(r={}),r[i]=Xde(a,e,n))}),r};function lU(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qde(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lU(Object(n),!0).forEach(function(r){Zde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lU(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zde(t,e,n){return(e=efe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function efe(t){var e=tfe(t,"string");return typeof e=="symbol"?e:e+""}function tfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ns(t,e){var n=Qde({},t),r=e,i=Object.keys(e),a=i.reduce((s,o)=>(s[o]===void 0&&r[o]!==void 0&&(s[o]=r[o]),s),n);return a}var KN={},XN={},cU;function nfe(){return cU||(cU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],o=r(s,a,n);i.has(o)||i.set(o,s)}return Array.from(i.values())}t.uniqBy=e})(XN)),XN}var JN={},uU;function rfe(){return uU||(uU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(JN)),JN}var QN={},dU;function Vq(){return dU||(dU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(QN)),QN}var ZN={},e2={},t2={},fU;function ife(){return fU||(fU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(t2)),t2}var hU;function LI(){return hU||(hU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ife();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(e2)),e2}var n2={},pU;function afe(){return pU||(pU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(n2)),n2}var mU;function sfe(){return mU||(mU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LI(),n=afe();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(ZN)),ZN}var r2={},i2={},gU;function ofe(){return gU||(gU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kI();function n(r){return function(i){return e.get(i,r)}}t.property=n})(i2)),i2}var a2={},s2={},o2={},l2={},vU;function Wq(){return vU||(vU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(l2)),l2}var c2={},yU;function Yq(){return yU||(yU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(c2)),c2}var u2={},bU;function Kq(){return bU||(bU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(u2)),u2}var xU;function lfe(){return xU||(xU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wq(),n=Yq(),r=Kq();function i(f,h,g){return typeof g!="function"?i(f,h,()=>{}):a(f,h,function y(w,S,E,C,M,R){const D=g(w,S,E,C,M,R);return D!==void 0?!!D:a(w,S,y,R)},new Map)}function a(f,h,g,y){if(h===f)return!0;switch(typeof h){case"object":return s(f,h,g,y);case"function":return Object.keys(h).length>0?a(f,{...h},g,y):r.isEqualsSameValueZero(f,h);default:return e.isObject(f)?typeof h=="string"?h==="":!0:r.isEqualsSameValueZero(f,h)}}function s(f,h,g,y){if(h==null)return!0;if(Array.isArray(h))return c(f,h,g,y);if(h instanceof Map)return o(f,h,g,y);if(h instanceof Set)return u(f,h,g,y);const w=Object.keys(h);if(f==null||n.isPrimitive(f))return w.length===0;if(w.length===0)return!0;if(y!=null&&y.has(h))return y.get(h)===f;y==null||y.set(h,f);try{for(let S=0;S<w.length;S++){const E=w[S];if(!n.isPrimitive(f)&&!(E in f)||h[E]===void 0&&f[E]!==void 0||h[E]===null&&f[E]!==null||!g(f[E],h[E],E,f,h,y))return!1}return!0}finally{y==null||y.delete(h)}}function o(f,h,g,y){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,S]of h.entries()){const E=f.get(w);if(g(E,S,w,f,h,y)===!1)return!1}return!0}function c(f,h,g,y){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let S=0;S<h.length;S++){const E=h[S];let C=!1;for(let M=0;M<f.length;M++){if(w.has(M))continue;const R=f[M];let D=!1;if(g(R,E,S,f,h,y)&&(D=!0),D){w.add(M),C=!0;break}}if(!C)return!1}return!0}function u(f,h,g,y){return h.size===0?!0:f instanceof Set?c([...f],[...h],g,y):!1}t.isMatchWith=i,t.isSetMatch=u})(o2)),o2}var wU;function Xq(){return wU||(wU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lfe();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(s2)),s2}var d2={},f2={},h2={},SU;function cfe(){return SU||(SU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(h2)),h2}var p2={},EU;function OI(){return EU||(EU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(p2)),p2}var m2={},AU;function Jq(){return AU||(AU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",f="[object Array]",h="[object Function]",g="[object ArrayBuffer]",y="[object Object]",w="[object Error]",S="[object DataView]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",M="[object Uint16Array]",R="[object Uint32Array]",D="[object BigUint64Array]",I="[object Int8Array]",P="[object Int16Array]",k="[object Int32Array]",U="[object BigInt64Array]",B="[object Float32Array]",V="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=g,t.arrayTag=f,t.bigInt64ArrayTag=U,t.bigUint64ArrayTag=D,t.booleanTag=i,t.dataViewTag=S,t.dateTag=o,t.errorTag=w,t.float32ArrayTag=B,t.float64ArrayTag=V,t.functionTag=h,t.int16ArrayTag=P,t.int32ArrayTag=k,t.int8ArrayTag=I,t.mapTag=c,t.numberTag=r,t.objectTag=y,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=M,t.uint32ArrayTag=R,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=C})(m2)),m2}var g2={},_U;function ufe(){return _U||(_U=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(g2)),g2}var CU;function Qq(){return CU||(CU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=cfe(),n=OI(),r=Jq(),i=Yq(),a=ufe();function s(f,h){return o(f,void 0,f,new Map,h)}function o(f,h,g,y=new Map,w=void 0){const S=w==null?void 0:w(f,h,g,y);if(S!==void 0)return S;if(i.isPrimitive(f))return f;if(y.has(f))return y.get(f);if(Array.isArray(f)){const E=new Array(f.length);y.set(f,E);for(let C=0;C<f.length;C++)E[C]=o(f[C],C,g,y,w);return Object.hasOwn(f,"index")&&(E.index=f.index),Object.hasOwn(f,"input")&&(E.input=f.input),E}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const E=new RegExp(f.source,f.flags);return E.lastIndex=f.lastIndex,E}if(f instanceof Map){const E=new Map;y.set(f,E);for(const[C,M]of f)E.set(C,o(M,C,g,y,w));return E}if(f instanceof Set){const E=new Set;y.set(f,E);for(const C of f)E.add(o(C,void 0,g,y,w));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const E=new(Object.getPrototypeOf(f)).constructor(f.length);y.set(f,E);for(let C=0;C<f.length;C++)E[C]=o(f[C],C,g,y,w);return E}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const E=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return y.set(f,E),c(E,f,g,y,w),E}if(typeof File<"u"&&f instanceof File){const E=new File([f],f.name,{type:f.type});return y.set(f,E),c(E,f,g,y,w),E}if(typeof Blob<"u"&&f instanceof Blob){const E=new Blob([f],{type:f.type});return y.set(f,E),c(E,f,g,y,w),E}if(f instanceof Error){const E=new f.constructor;return y.set(f,E),E.message=f.message,E.name=f.name,E.stack=f.stack,E.cause=f.cause,c(E,f,g,y,w),E}if(f instanceof Boolean){const E=new Boolean(f.valueOf());return y.set(f,E),c(E,f,g,y,w),E}if(f instanceof Number){const E=new Number(f.valueOf());return y.set(f,E),c(E,f,g,y,w),E}if(f instanceof String){const E=new String(f.valueOf());return y.set(f,E),c(E,f,g,y,w),E}if(typeof f=="object"&&u(f)){const E=Object.create(Object.getPrototypeOf(f));return y.set(f,E),c(E,f,g,y,w),E}return f}function c(f,h,g=f,y,w){const S=[...Object.keys(h),...e.getSymbols(h)];for(let E=0;E<S.length;E++){const C=S[E],M=Object.getOwnPropertyDescriptor(f,C);(M==null||M.writable)&&(f[C]=o(h[C],C,g,y,w))}}function u(f){switch(n.getTag(f)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=o,t.copyProperties=c})(f2)),f2}var TU;function dfe(){return TU||(TU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qq();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(d2)),d2}var NU;function ffe(){return NU||(NU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xq(),n=dfe();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(a2)),a2}var v2={},y2={},b2={},RU;function hfe(){return RU||(RU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Qq(),n=OI(),r=Jq();function i(a,s){return e.cloneDeepWith(a,(o,c,u,f)=>{const h=s==null?void 0:s(o,c,u,f);if(h!==void 0)return h;if(typeof a=="object"){if(n.getTag(a)===r.objectTag&&typeof a.constructor!="function"){const g={};return f.set(a,g),e.copyProperties(g,a,u,f),g}switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new a.constructor(a==null?void 0:a.valueOf());return e.copyProperties(g,a),g}case r.argumentsTag:{const g={};return e.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}}})}t.cloneDeepWith=i})(b2)),b2}var MU;function pfe(){return MU||(MU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hfe();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(y2)),y2}var x2={},w2={},PU;function Zq(){return PU||(PU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(w2)),w2}var S2={},kU;function mfe(){return kU||(kU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OI();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(S2)),S2}var IU;function gfe(){return IU||(IU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zq(),n=Zq(),r=mfe(),i=PI();function a(s,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&e.isDeepKey(o)&&(s==null?void 0:s[o])==null?c=i.toPath(o):c=[o],c.length===0)return!1;let u=s;for(let f=0;f<c.length;f++){const h=c[f];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||r.isArguments(u))&&n.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}t.has=a})(x2)),x2}var DU;function vfe(){return DU||(DU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xq(),n=MI(),r=pfe(),i=kI(),a=gfe();function s(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return c=r.cloneDeep(c),function(u){const f=i.get(u,o);return f===void 0?a.has(u,o):c===void 0?f===void 0:e.isMatch(f,c)}}t.matchesProperty=s})(v2)),v2}var LU;function yfe(){return LU||(LU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vq(),n=ofe(),r=ffe(),i=vfe();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(r2)),r2}var OU;function bfe(){return OU||(OU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nfe(),n=rfe(),r=Vq(),i=sfe(),a=yfe();function s(o,c=r.identity){return i.isArrayLikeObject(o)?e.uniqBy(Array.from(o),n.ary(a.iteratee(c),1)):[]}t.uniqBy=s})(KN)),KN}var E2,jU;function xfe(){return jU||(jU=1,E2=bfe().uniqBy),E2}var wfe=xfe();const FU=Co(wfe);function Sfe(t,e,n){return e===!0?FU(t,n):typeof e=="function"?FU(t,e):t}var A2={exports:{}},_2={},C2={exports:{}},T2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UU;function Efe(){if(UU)return T2;UU=1;var t=_v();function e(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function o(h,g){var y=g(),w=r({inst:{value:y,getSnapshot:g}}),S=w[0].inst,E=w[1];return a(function(){S.value=y,S.getSnapshot=g,c(S)&&E({inst:S})},[h,y,g]),i(function(){return c(S)&&E({inst:S}),h(function(){c(S)&&E({inst:S})})},[h]),s(y),y}function c(h){var g=h.getSnapshot;h=h.value;try{var y=g();return!n(h,y)}catch{return!0}}function u(h,g){return g()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return T2.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:f,T2}var BU;function Afe(){return BU||(BU=1,C2.exports=Efe()),C2.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HU;function _fe(){if(HU)return _2;HU=1;var t=_v(),e=Afe();function n(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return _2.useSyncExternalStoreWithSelector=function(u,f,h,g,y){var w=a(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=o(function(){function C(P){if(!M){if(M=!0,R=P,P=g(P),y!==void 0&&S.hasValue){var k=S.value;if(y(k,P))return D=k}return D=P}if(k=D,r(R,P))return k;var U=g(P);return y!==void 0&&y(k,U)?(R=P,k):(R=P,D=U)}var M=!1,R,D,I=h===void 0?null:h;return[function(){return C(f())},I===null?void 0:function(){return C(I())}]},[f,h,g,y]);var E=i(u,w[0],w[1]);return s(function(){S.hasValue=!0,S.value=E},[E]),c(E),E},_2}var zU;function Cfe(){return zU||(zU=1,A2.exports=_fe()),A2.exports}var Tfe=Cfe(),jI=T.createContext(null),Nfe=t=>t,Br=()=>{var t=T.useContext(jI);return t?t.store.dispatch:Nfe},T1=()=>{},Rfe=()=>T1,Mfe=(t,e)=>t===e;function Je(t){var e=T.useContext(jI);return Tfe.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Rfe,e?e.store.getState:T1,e?e.store.getState:T1,e?t:T1,Mfe)}function Pfe(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function kfe(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Ife(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var $U=t=>Array.isArray(t)?t:[t];function Dfe(t){const e=Array.isArray(t[0])?t[0]:t;return Ife(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function Lfe(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Ofe=class{constructor(t){this.value=t}deref(){return this.value}},jfe=typeof WeakRef<"u"?WeakRef:Ofe,Ffe=0,GU=1;function XS(){return{s:Ffe,v:void 0,o:null,p:null}}function eV(t,e={}){let n=XS();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var h;let o=n;const{length:c}=arguments;for(let g=0,y=c;g<y;g++){const w=arguments[g];if(typeof w=="function"||typeof w=="object"&&w!==null){let S=o.o;S===null&&(o.o=S=new WeakMap);const E=S.get(w);E===void 0?(o=XS(),S.set(w,o)):o=E}else{let S=o.p;S===null&&(o.p=S=new Map);const E=S.get(w);E===void 0?(o=XS(),S.set(w,o)):o=E}}const u=o;let f;if(o.s===GU)f=o.v;else if(f=t.apply(null,arguments),a++,r){const g=((h=i==null?void 0:i.deref)==null?void 0:h.call(i))??i;g!=null&&r(g,f)&&(f=g,a!==0&&a--),i=typeof f=="object"&&f!==null||typeof f=="function"?new jfe(f):f}return u.s=GU,u.v=f,f}return s.clearCache=()=>{n=XS(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function Ufe(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,o,c={},u=i.pop();typeof u=="object"&&(c=u,u=i.pop()),Pfe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const f={...n,...c},{memoize:h,memoizeOptions:g=[],argsMemoize:y=eV,argsMemoizeOptions:w=[]}=f,S=$U(g),E=$U(w),C=Dfe(i),M=h(function(){return a++,u.apply(null,arguments)},...S),R=y(function(){s++;const I=Lfe(C,arguments);return o=M.apply(null,I),o},...E);return Object.assign(R,{resultFunc:u,memoizedResultFunc:M,dependencies:C,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>o,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:h,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var fe=Ufe(eV),Bfe=Object.assign((t,e=fe)=>{kfe(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,o,c)=>(s[n[c]]=o,s),{}))},{withTypes:()=>Bfe}),N2={},R2={},M2={},qU;function Hfe(){return qU||(qU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),o=e(i);if(s===o&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?o-s:s-o}return 0};t.compareValues=n})(M2)),M2}var P2={},k2={},VU;function tV(){return VU||(VU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(k2)),k2}var WU;function zfe(){return WU||(WU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tV(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(P2)),P2}var YU;function $fe(){return YU||(YU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Hfe(),n=zfe(),r=PI();function i(a,s,o,c){if(a==null)return[];o=c?void 0:o,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(y=>String(y));const u=(y,w)=>{let S=y;for(let E=0;E<w.length&&S!=null;++E)S=S[w[E]];return S},f=(y,w)=>w==null||y==null?w:typeof y=="object"&&"key"in y?Object.hasOwn(w,y.key)?w[y.key]:u(w,y.path):typeof y=="function"?y(w):Array.isArray(y)?u(w,y):typeof w=="object"?w[y]:w,h=s.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:h.map(w=>f(w,y))})).slice().sort((y,w)=>{for(let S=0;S<h.length;S++){const E=e.compareValues(y.criteria[S],w.criteria[S],o[S]);if(E!==0)return E}return 0}).map(y=>y.original)}t.orderBy=i})(R2)),R2}var I2={},KU;function Gfe(){return KU||(KU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(o,c)=>{for(let u=0;u<o.length;u++){const f=o[u];Array.isArray(f)&&c<a?s(f,c+1):i.push(f)}};return s(n,0),i}t.flatten=e})(I2)),I2}var D2={},XU;function nV(){return XU||(XU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Zq(),n=LI(),r=Wq(),i=Kq();function a(s,o,c){return r.isObject(c)&&(typeof o=="number"&&n.isArrayLike(c)&&e.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?i.isEqualsSameValueZero(c[o],s):!1}t.isIterateeCall=a})(D2)),D2}var JU;function qfe(){return JU||(JU=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$fe(),n=Gfe(),r=nV();function i(a,...s){const o=s.length;return o>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:o>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(N2)),N2}var L2,QU;function Vfe(){return QU||(QU=1,L2=qfe().sortBy),L2}var Wfe=Vfe();const v_=Co(Wfe);var rV=t=>t.legend.settings,Yfe=t=>t.legend.size,Kfe=t=>t.legend.payload;fe([Kfe,rV],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?v_(r,n):r});var JS=1;function Xfe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=T.useState({height:0,left:0,top:0,width:0}),r=T.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>JS||Math.abs(s.left-e.left)>JS||Math.abs(s.top-e.top)>JS||Math.abs(s.width-e.width)>JS)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function Zr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Jfe=typeof Symbol=="function"&&Symbol.observable||"@@observable",ZU=Jfe,O2=()=>Math.random().toString(36).substring(7).split("").join("."),Qfe={INIT:`@@redux/INIT${O2()}`,REPLACE:`@@redux/REPLACE${O2()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${O2()}`},_E=Qfe;function FI(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function iV(t,e,n){if(typeof t!="function")throw new Error(Zr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Zr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Zr(1));return n(iV)(t,e)}let r=t,i=e,a=new Map,s=a,o=0,c=!1;function u(){s===a&&(s=new Map,a.forEach((E,C)=>{s.set(C,E)}))}function f(){if(c)throw new Error(Zr(3));return i}function h(E){if(typeof E!="function")throw new Error(Zr(4));if(c)throw new Error(Zr(5));let C=!0;u();const M=o++;return s.set(M,E),function(){if(C){if(c)throw new Error(Zr(6));C=!1,u(),s.delete(M),a=null}}}function g(E){if(!FI(E))throw new Error(Zr(7));if(typeof E.type>"u")throw new Error(Zr(8));if(typeof E.type!="string")throw new Error(Zr(17));if(c)throw new Error(Zr(9));try{c=!0,i=r(i,E)}finally{c=!1}return(a=s).forEach(M=>{M()}),E}function y(E){if(typeof E!="function")throw new Error(Zr(10));r=E,g({type:_E.REPLACE})}function w(){const E=h;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(Zr(11));function M(){const D=C;D.next&&D.next(f())}return M(),{unsubscribe:E(M)}},[ZU](){return this}}}return g({type:_E.INIT}),{dispatch:g,subscribe:h,getState:f,replaceReducer:y,[ZU]:w}}function Zfe(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:_E.INIT})>"u")throw new Error(Zr(12));if(typeof n(void 0,{type:_E.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Zr(13))})}function aV(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{Zfe(n)}catch(a){i=a}return function(s={},o){if(i)throw i;let c=!1;const u={};for(let f=0;f<r.length;f++){const h=r[f],g=n[h],y=s[h],w=g(y,o);if(typeof w>"u")throw o&&o.type,new Error(Zr(14));u[h]=w,c=c||w!==y}return c=c||r.length!==Object.keys(s).length,c?u:s}}function CE(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function ehe(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(Zr(15))};const s={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},o=t.map(c=>c(s));return a=CE(...o)(i.dispatch),{...i,dispatch:a}}}function sV(t){return FI(t)&&"type"in t&&typeof t.type=="string"}var oV=Symbol.for("immer-nothing"),eB=Symbol.for("immer-draftable"),$i=Symbol.for("immer-state");function ho(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Xa=Object,vv=Xa.getPrototypeOf,TE="constructor",y_="prototype",bM="configurable",NE="enumerable",N1="writable",B0="value",Uc=t=>!!t&&!!t[$i];function Eo(t){var e;return t?lV(t)||x_(t)||!!t[eB]||!!((e=t[TE])!=null&&e[eB])||w_(t)||S_(t):!1}var the=Xa[y_][TE].toString(),tB=new WeakMap;function lV(t){if(!t||!UI(t))return!1;const e=vv(t);if(e===null||e===Xa[y_])return!0;const n=Xa.hasOwnProperty.call(e,TE)&&e[TE];if(n===Object)return!0;if(!hm(n))return!1;let r=tB.get(n);return r===void 0&&(r=Function.toString.call(n),tB.set(n,r)),r===the}function b_(t,e,n=!0){Zx(t)===0?(n?Reflect.ownKeys(t):Xa.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Zx(t){const e=t[$i];return e?e.type_:x_(t)?1:w_(t)?2:S_(t)?3:0}var nB=(t,e,n=Zx(t))=>n===2?t.has(e):Xa[y_].hasOwnProperty.call(t,e),xM=(t,e,n=Zx(t))=>n===2?t.get(e):t[e],RE=(t,e,n,r=Zx(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function nhe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var x_=Array.isArray,w_=t=>t instanceof Map,S_=t=>t instanceof Set,UI=t=>typeof t=="object",hm=t=>typeof t=="function",j2=t=>typeof t=="boolean";function rhe(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var ql=t=>t.copy_||t.base_,BI=t=>t.modified_?t.copy_:t.base_;function wM(t,e){if(w_(t))return new Map(t);if(S_(t))return new Set(t);if(x_(t))return Array[y_].slice.call(t);const n=lV(t);if(e===!0||e==="class_only"&&!n){const r=Xa.getOwnPropertyDescriptors(t);delete r[$i];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o[N1]===!1&&(o[N1]=!0,o[bM]=!0),(o.get||o.set)&&(r[s]={[bM]:!0,[N1]:!0,[NE]:o[NE],[B0]:t[s]})}return Xa.create(vv(t),r)}else{const r=vv(t);if(r!==null&&n)return{...t};const i=Xa.create(r);return Xa.assign(i,t)}}function HI(t,e=!1){return E_(t)||Uc(t)||!Eo(t)||(Zx(t)>1&&Xa.defineProperties(t,{set:QS,add:QS,clear:QS,delete:QS}),Xa.freeze(t),e&&b_(t,(n,r)=>{HI(r,!0)},!1)),t}function ihe(){ho(2)}var QS={[B0]:ihe};function E_(t){return t===null||!UI(t)?!0:Xa.isFrozen(t)}var ME="MapSet",SM="Patches",rB="ArrayMethods",cV={};function lp(t){const e=cV[t];return e||ho(0,t),e}var iB=t=>!!cV[t],H0,uV=()=>H0,ahe=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:iB(ME)?lp(ME):void 0,arrayMethodsPlugin_:iB(rB)?lp(rB):void 0});function aB(t,e){e&&(t.patchPlugin_=lp(SM),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function EM(t){AM(t),t.drafts_.forEach(she),t.drafts_=null}function AM(t){t===H0&&(H0=t.parent_)}var sB=t=>H0=ahe(H0,t);function she(t){const e=t[$i];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function oB(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[$i].modified_&&(EM(e),ho(4)),Eo(t)&&(t=lB(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[$i].base_,t,e)}else t=lB(e,n);return ohe(e,t,!0),EM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==oV?t:void 0}function lB(t,e){if(E_(e))return e;const n=e[$i];if(!n)return PE(e,t.handledSet_,t);if(!A_(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);hV(n,t)}return n.copy_}function ohe(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&HI(e,n)}function dV(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var A_=(t,e)=>t.scope_===e,lhe=[];function fV(t,e,n,r){const i=ql(t),a=t.type_;if(r!==void 0&&xM(i,r,a)===e){RE(i,r,n,a);return}if(!t.draftLocations_){const o=t.draftLocations_=new Map;b_(i,(c,u)=>{if(Uc(u)){const f=o.get(u)||[];f.push(c),o.set(u,f)}})}const s=t.draftLocations_.get(e)??lhe;for(const o of s)RE(i,o,n,a)}function che(t,e,n){t.callbacks_.push(function(i){var o;const a=e;if(!a||!A_(a,i))return;(o=i.mapSetPlugin_)==null||o.fixSetContents(a);const s=BI(a);fV(t,a.draft_??a,s,n),hV(a,i)})}function hV(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const a=i.getPath(t);a&&i.generatePatches_(t,a,e)}dV(t)}}function uhe(t,e,n){const{scope_:r}=t;if(Uc(n)){const i=n[$i];A_(i,r)&&i.callbacks_.push(function(){R1(t);const s=BI(i);fV(t,n,s,e)})}else Eo(n)&&t.callbacks_.push(function(){const a=ql(t);t.type_===3?a.has(n)&&PE(n,r.handledSet_,r):xM(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&PE(xM(t.copy_,e,t.type_),r.handledSet_,r)})}function PE(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Uc(t)||e.has(t)||!Eo(t)||E_(t)||(e.add(t),b_(t,(r,i)=>{if(Uc(i)){const a=i[$i];if(A_(a,n)){const s=BI(a);RE(t,r,s,t.type_),dV(a)}}else Eo(i)&&PE(i,e,n)})),t}function dhe(t,e){const n=x_(t),r={type_:n?1:0,scope_:e?e.scope_:uV(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=kE;n&&(i=[r],a=z0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,[o,r]}var kE={get(t,e){if(e===$i)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=ql(t);if(!nB(i,e,t.type_))return fhe(t,i,e);const a=i[e];if(t.finalized_||!Eo(a)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&rhe(e))return a;if(a===F2(t.base_,e)){R1(t);const s=t.type_===1?+e:e,o=CM(t.scope_,a,t,s);return t.copy_[s]=o}return a},has(t,e){return e in ql(t)},ownKeys(t){return Reflect.ownKeys(ql(t))},set(t,e,n){const r=pV(ql(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=F2(ql(t),e),a=i==null?void 0:i[$i];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(nhe(n,i)&&(n!==void 0||nB(t.base_,e,t.type_)))return!0;R1(t),_M(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),uhe(t,e,n)),!0},deleteProperty(t,e){return R1(t),F2(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),_M(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ql(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[N1]:!0,[bM]:t.type_!==1||e!=="length",[NE]:r[NE],[B0]:n[e]}},defineProperty(){ho(11)},getPrototypeOf(t){return vv(t.base_)},setPrototypeOf(){ho(12)}},z0={};for(let t in kE){let e=kE[t];z0[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}z0.deleteProperty=function(t,e){return z0.set.call(this,t,e,void 0)};z0.set=function(t,e,n){return kE.set.call(this,t[0],e,n,t[0])};function F2(t,e){const n=t[$i];return(n?ql(n):t)[e]}function fhe(t,e,n){var i;const r=pV(e,n);return r?B0 in r?r[B0]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function pV(t,e){if(!(e in t))return;let n=vv(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=vv(n)}}function _M(t){t.modified_||(t.modified_=!0,t.parent_&&_M(t.parent_))}function R1(t){t.copy_||(t.assigned_=new Map,t.copy_=wM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var hhe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(hm(n)&&!hm(r)){const s=r;r=n;const o=this;return function(u=s,...f){return o.produce(u,h=>r.call(this,h,...f))}}hm(r)||ho(6),i!==void 0&&!hm(i)&&ho(7);let a;if(Eo(n)){const s=sB(this),o=CM(s,n,void 0);let c=!0;try{a=r(o),c=!1}finally{c?EM(s):AM(s)}return aB(s,i),oB(a,s)}else if(!n||!UI(n)){if(a=r(n),a===void 0&&(a=n),a===oV&&(a=void 0),this.autoFreeze_&&HI(a,!0),i){const s=[],o=[];lp(SM).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:o}),i(s,o)}return a}else ho(1,n)},this.produceWithPatches=(n,r)=>{if(hm(n))return(o,...c)=>this.produceWithPatches(o,u=>n(u,...c));let i,a;return[this.produce(n,r,(o,c)=>{i=o,a=c}),i,a]},j2(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),j2(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),j2(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Eo(e)||ho(8),Uc(e)&&(e=xo(e));const n=sB(this),r=CM(n,e,void 0);return r[$i].isManual_=!0,AM(n),r}finishDraft(e,n){const r=e&&e[$i];(!r||!r.isManual_)&&ho(9);const{scope_:i}=r;return aB(i,n),oB(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=lp(SM).applyPatches_;return Uc(e)?i(e,n):this.produce(e,a=>i(a,n))}};function CM(t,e,n,r){const[i,a]=w_(e)?lp(ME).proxyMap_(e,n):S_(e)?lp(ME).proxySet_(e,n):dhe(e,n);return((n==null?void 0:n.scope_)??uV()).drafts_.push(i),a.callbacks_=(n==null?void 0:n.callbacks_)??[],a.key_=r,n&&r!==void 0?che(n,a,r):a.callbacks_.push(function(c){var f;(f=c.mapSetPlugin_)==null||f.fixSetContents(a);const{patchPlugin_:u}=c;a.modified_&&u&&u.generatePatches_(a,[],c)}),i}function xo(t){return Uc(t)||ho(10,t),mV(t)}function mV(t){if(!Eo(t)||E_(t))return t;const e=t[$i];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=wM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=wM(t,!0);return b_(n,(i,a)=>{RE(n,i,mV(a))},r),e&&(e.finalized_=!1),n}var phe=new hhe,gV=phe.produce;function vV(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var mhe=vV(),ghe=vV,vhe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?CE:CE.apply(null,arguments)};function Hs(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(Ja(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>sV(r)&&r.type===t,n}var yV=class r0 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,r0.prototype)}static get[Symbol.species](){return r0}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new r0(...e[0].concat(this)):new r0(...e.concat(this))}};function cB(t){return Eo(t)?gV(t,()=>{}):t}function ZS(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function yhe(t){return typeof t=="boolean"}var bhe=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new yV;return n&&(yhe(n)?s.push(mhe):s.push(ghe(n.extraArgument))),s},bV="RTK_autoBatch",bn=()=>t=>({payload:t,meta:{[bV]:!0}}),uB=t=>e=>{setTimeout(e,t)},xV=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const o=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:uB(10):t.type==="callback"?t.queueNotification:uB(t.timeout),u=()=>{s=!1,a&&(a=!1,o.forEach(f=>f()))};return Object.assign({},r,{subscribe(f){const h=()=>i&&f(),g=r.subscribe(h);return o.add(f),()=>{g(),o.delete(f)}},dispatch(f){var h;try{return i=!((h=f==null?void 0:f.meta)!=null&&h[bV]),a=!i,a&&(s||(s=!0,c(u))),r.dispatch(f)}finally{i=!0}}})},xhe=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new yV(t);return r&&i.push(xV(typeof r=="object"?r:void 0)),i};function whe(t){const e=bhe(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(FI(n))o=aV(n);else throw new Error(Ja(1));let c;typeof r=="function"?c=r(e):c=e();let u=CE;i&&(u=vhe({trace:!1,...typeof i=="object"&&i}));const f=ehe(...c),h=xhe(f);let g=typeof s=="function"?s(h):h();const y=u(...g);return iV(o,a,y)}function wV(t){const e={},n=[];let r;const i={addCase(a,s){const o=typeof a=="string"?a:a.type;if(!o)throw new Error(Ja(28));if(o in e)throw new Error(Ja(29));return e[o]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function She(t){return typeof t=="function"}function Ehe(t,e){let[n,r,i]=wV(e),a;if(She(t))a=()=>cB(t());else{const o=cB(t);a=()=>o}function s(o=a(),c){let u=[n[c.type],...r.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return u.filter(f=>!!f).length===0&&(u=[i]),u.reduce((f,h)=>{if(h)if(Uc(f)){const y=h(f,c);return y===void 0?f:y}else{if(Eo(f))return gV(f,g=>h(g,c));{const g=h(f,c);if(g===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return f},o)}return s.getInitialState=a,s}var Ahe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_he=(t=21)=>{let e="",n=t;for(;n--;)e+=Ahe[Math.random()*64|0];return e},Che=Symbol.for("rtk-slice-createasyncthunk");function The(t,e){return`${t}/${e}`}function Nhe({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Che];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(Ja(11));const o=(typeof i.reducers=="function"?i.reducers(Mhe()):i.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(D,I){const P=typeof D=="string"?D:D.type;if(!P)throw new Error(Ja(12));if(P in u.sliceCaseReducersByType)throw new Error(Ja(13));return u.sliceCaseReducersByType[P]=I,f},addMatcher(D,I){return u.sliceMatchers.push({matcher:D,reducer:I}),f},exposeAction(D,I){return u.actionCreators[D]=I,f},exposeCaseReducer(D,I){return u.sliceCaseReducersByName[D]=I,f}};c.forEach(D=>{const I=o[D],P={reducerName:D,type:The(a,D),createNotation:typeof i.reducers=="function"};khe(I)?Dhe(P,I,f,e):Phe(P,I,f)});function h(){const[D={},I=[],P=void 0]=typeof i.extraReducers=="function"?wV(i.extraReducers):[i.extraReducers],k={...D,...u.sliceCaseReducersByType};return Ehe(i.initialState,U=>{for(let B in k)U.addCase(B,k[B]);for(let B of u.sliceMatchers)U.addMatcher(B.matcher,B.reducer);for(let B of I)U.addMatcher(B.matcher,B.reducer);P&&U.addDefaultCase(P)})}const g=D=>D,y=new Map,w=new WeakMap;let S;function E(D,I){return S||(S=h()),S(D,I)}function C(){return S||(S=h()),S.getInitialState()}function M(D,I=!1){function P(U){let B=U[D];return typeof B>"u"&&I&&(B=ZS(w,P,C)),B}function k(U=g){const B=ZS(y,I,()=>new WeakMap);return ZS(B,U,()=>{const V={};for(const[H,G]of Object.entries(i.selectors??{}))V[H]=Rhe(G,U,()=>ZS(w,U,C),I);return V})}return{reducerPath:D,getSelectors:k,get selectors(){return k(P)},selectSlice:P}}const R={name:a,reducer:E,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:C,...M(s),injectInto(D,{reducerPath:I,...P}={}){const k=I??s;return D.inject({reducerPath:k,reducer:E},P),{...R,...M(k,!0)}}};return R}}function Rhe(t,e,n,r){function i(a,...s){let o=e(a);return typeof o>"u"&&r&&(o=n()),t(o,...s)}return i.unwrapped=t,i}var ga=Nhe();function Mhe(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Phe({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!Ihe(r))throw new Error(Ja(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?Hs(t,s):Hs(t))}function khe(t){return t._reducerDefinitionType==="asyncThunk"}function Ihe(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Dhe({type:t,reducerName:e},n,r,i){if(!i)throw new Error(Ja(18));const{payloadCreator:a,fulfilled:s,pending:o,rejected:c,settled:u,options:f}=n,h=i(t,a,f);r.exposeAction(e,h),s&&r.addCase(h.fulfilled,s),o&&r.addCase(h.pending,o),c&&r.addCase(h.rejected,c),u&&r.addMatcher(h.settled,u),r.exposeCaseReducer(e,{fulfilled:s||e1,pending:o||e1,rejected:c||e1,settled:u||e1})}function e1(){}var Lhe="task",SV="listener",EV="completed",zI="cancelled",Ohe=`task-${zI}`,jhe=`task-${EV}`,TM=`${SV}-${zI}`,Fhe=`${SV}-${EV}`,__=class{constructor(t){Se(this,"name","TaskAbortError");Se(this,"message");this.code=t,this.message=`${Lhe} ${zI} (reason: ${t})`}},$I=(t,e)=>{if(typeof t!="function")throw new TypeError(Ja(32))},IE=()=>{},AV=(t,e=IE)=>(t.catch(e),t),_V=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),rp=t=>{if(t.aborted)throw new __(t.reason)};function CV(t,e){let n=IE;return new Promise((r,i)=>{const a=()=>i(new __(t.reason));if(t.aborted){a();return}n=_V(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=IE})}var Uhe=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof __?"cancelled":"rejected",error:n}}finally{e==null||e()}},DE=t=>e=>AV(CV(t,e).then(n=>(rp(t),n))),TV=t=>{const e=DE(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:Fm}=Object,dB={},C_="listenerMiddleware",Bhe=(t,e)=>{const n=r=>_V(t,()=>r.abort(t.reason));return(r,i)=>{$I(r);const a=new AbortController;n(a);const s=Uhe(async()=>{rp(t),rp(a.signal);const o=await r({pause:DE(a.signal),delay:TV(a.signal),signal:a.signal});return rp(a.signal),o},()=>a.abort(jhe));return i!=null&&i.autoJoin&&e.push(s.catch(IE)),{result:DE(t)(s),cancel(){a.abort(Ohe)}}}},Hhe=(t,e)=>{const n=async(r,i)=>{rp(e);let a=()=>{};const o=[new Promise((c,u)=>{let f=t({predicate:r,effect:(h,g)=>{g.unsubscribe(),c([h,g.getState(),g.getOriginalState()])}});a=()=>{f(),u()}})];i!=null&&o.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await CV(e,Promise.race(o));return rp(e),c}finally{a()}};return(r,i)=>AV(n(r,i))},NV=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=Hs(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ja(21));return $I(a),{predicate:i,type:e,effect:a}},RV=Fm(t=>{const{type:e,predicate:n,effect:r}=NV(t);return{id:_he(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ja(22))}}},{withTypes:()=>RV}),fB=(t,e)=>{const{type:n,effect:r,predicate:i}=NV(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},NM=t=>{t.pending.forEach(e=>{e.abort(TM)})},zhe=(t,e)=>()=>{for(const n of e.keys())NM(n);t.clear()},hB=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},MV=Fm(Hs(`${C_}/add`),{withTypes:()=>MV}),$he=Hs(`${C_}/removeAll`),PV=Fm(Hs(`${C_}/remove`),{withTypes:()=>PV}),Ghe=(...t)=>{console.error(`${C_}/error`,...t)},ew=(t={})=>{const e=new Map,n=new Map,r=y=>{const w=n.get(y)??0;n.set(y,w+1)},i=y=>{const w=n.get(y)??1;w===1?n.delete(y):n.set(y,w-1)},{extra:a,onError:s=Ghe}=t;$I(s);const o=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),w=>{y.unsubscribe(),w!=null&&w.cancelActive&&NM(y)}),c=y=>{const w=fB(e,y)??RV(y);return o(w)};Fm(c,{withTypes:()=>c});const u=y=>{const w=fB(e,y);return w&&(w.unsubscribe(),y.cancelActive&&NM(w)),!!w};Fm(u,{withTypes:()=>u});const f=async(y,w,S,E)=>{const C=new AbortController,M=Hhe(c,C.signal),R=[];try{y.pending.add(C),r(y),await Promise.resolve(y.effect(w,Fm({},S,{getOriginalState:E,condition:(D,I)=>M(D,I).then(Boolean),take:M,delay:TV(C.signal),pause:DE(C.signal),extra:a,signal:C.signal,fork:Bhe(C.signal,R),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((D,I,P)=>{D!==C&&(D.abort(TM),P.delete(D))})},cancel:()=>{C.abort(TM),y.pending.delete(C)},throwIfCancelled:()=>{rp(C.signal)}})))}catch(D){D instanceof __||hB(s,D,{raisedBy:"effect"})}finally{await Promise.all(R),C.abort(Fhe),i(y),y.pending.delete(C)}},h=zhe(e,n);return{middleware:y=>w=>S=>{if(!sV(S))return w(S);if(MV.match(S))return c(S.payload);if($he.match(S)){h();return}if(PV.match(S))return u(S.payload);let E=y.getState();const C=()=>{if(E===dB)throw new Error(Ja(23));return E};let M;try{if(M=w(S),e.size>0){const R=y.getState(),D=Array.from(e.values());for(const I of D){let P=!1;try{P=I.predicate(S,R,E)}catch(k){P=!1,hB(s,k,{raisedBy:"predicate"})}P&&f(I,S,y,C)}}}finally{E=dB}return M},startListening:c,stopListening:u,clearListeners:h}};function Ja(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var qhe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},kV=ga({name:"chartLayout",initialState:qhe,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Vhe,setLayout:Whe,setChartSize:Yhe,setScale:Khe}=kV.actions,Xhe=kV.reducer;function IV(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function wn(t){return Number.isFinite(t)}function ml(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function pB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _m(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pB(Object(n),!0).forEach(function(r){Jhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jhe(t,e,n){return(e=Qhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qhe(t){var e=Zhe(t,"string");return typeof e=="symbol"?e:e+""}function Zhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function li(t,e,n){return oi(t)||oi(e)?n:pl(e)?g_(t,e,n):typeof e=="function"?e(t):n}var epe=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:o}=e;if((o==="vertical"||o==="horizontal"&&s==="middle")&&a!=="center"&&We(t[a]))return _m(_m({},t),{},{[a]:t[a]+(r||0)});if((o==="horizontal"||o==="vertical"&&a==="center")&&s!=="middle"&&We(t[s]))return _m(_m({},t),{},{[s]:t[s]+(i||0)})}return t},Zc=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",DV=(t,e,n,r)=>{if(r)return t.map(o=>o.coordinate);var i,a,s=t.map(o=>(o.coordinate===e&&(i=!0),o.coordinate===n&&(a=!0),o.coordinate));return i||s.push(e),a||s.push(n),s},LV=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:f,ticks:h,niceTicks:g,axisType:y}=t;if(!s)return null;var w=o==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,S=i==="category"&&s.bandwidth?s.bandwidth()/w:0;if(S=y==="angleAxis"&&a&&a.length>=2?Ds(a[0]-a[1])*2*S:S,h||g){var E=(h||g||[]).map((C,M)=>{var R=r?r.indexOf(C):C;return{coordinate:s(R)+S,value:C,offset:S,index:M}});return E.filter(C=>!So(C.coordinate))}return c&&u?u.map((C,M)=>({coordinate:s(C)+S,value:C,index:M,offset:S})):s.ticks&&f!=null?s.ticks(f).map((C,M)=>({coordinate:s(C)+S,value:C,offset:S,index:M})):s.domain().map((C,M)=>({coordinate:s(C)+S,value:r?r[C]:C,index:M,offset:S}))},mB=1e-4,tpe=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-mB,a=Math.max(r[0],r[1])+mB,s=t(e[0]),o=t(e[n-1]);(s<i||s>a||o<i||o>a)&&t.domain([e[0],e[n-1]])}},npe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0,o=0;o<n;++o){var c=t[o],u=c==null?void 0:c[i];if(u!=null){var f=u[1],h=u[0],g=So(f)?h:f;g>=0?(u[0]=a,u[1]=a+g,a=f):(u[0]=s,u[1]=s+g,s=f)}}}},rpe=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var a=0,s=0;s<n;++s){var o=t[s],c=o==null?void 0:o[i];if(c!=null){var u=So(c[1])?c[0]:c[1];u>=0?(c[0]=a,c[1]=a+u,a=c[1]):(c[0]=0,c[1]=0)}}}},ipe={sign:npe,expand:Bde,none:op,silhouette:Hde,wiggle:zde,positive:rpe},ape=(t,e,n)=>{var r,i=(r=ipe[n])!==null&&r!==void 0?r:op,a=Ude().keys(e).value((o,c)=>Number(li(o,c,0))).order(yM).offset(i),s=a(t);return s.forEach((o,c)=>{o.forEach((u,f)=>{var h=li(t[f],e[c],0);Array.isArray(h)&&h.length===2&&We(h[0])&&We(h[1])&&(u[0]=h[0],u[1]=h[1])})}),s};function spe(t){return t==null?void 0:String(t)}function gB(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!oi(i[e.dataKey])){var o=Gq(n,"value",i[e.dataKey]);if(o)return o.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=li(i,oi(s)?e.dataKey:s);return oi(c)?null:e.scale(c)}var ope=t=>{var e=t.flat(2).filter(We);return[Math.min(...e),Math.max(...e)]},lpe=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],cpe=(t,e,n)=>{if(t!=null)return lpe(Object.keys(t).reduce((r,i)=>{var a=t[i];if(!a)return r;var{stackedData:s}=a,o=s.reduce((c,u)=>{var f=IV(u,e,n),h=ope(f);return!wn(h[0])||!wn(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]))},vB=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,yB=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,LE=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=v_(e,f=>f.coordinate),a=1/0,s=1,o=i.length;s<o;s++){var c=i[s],u=i[s-1];a=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),a)}return a===1/0?0:a}return n?void 0:0};function bB(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return _m(_m({},e),{},{dataKey:n,payload:r,value:i,name:a})}function OV(t,e){if(t)return String(t);if(typeof e=="string")return e}var upe=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},dpe=(t,e)=>e==="centric"?t.angle:t.radius,eu=t=>t.layout.width,tu=t=>t.layout.height,fpe=t=>t.layout.scale,jV=t=>t.layout.margin,T_=fe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),N_=fe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),hpe="data-recharts-item-index",ppe="data-recharts-item-id",tw=60;function xB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function t1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xB(Object(n),!0).forEach(function(r){mpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mpe(t,e,n){return(e=gpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gpe(t){var e=vpe(t,"string");return typeof e=="symbol"?e:e+""}function vpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ype=t=>t.brush.height;function bpe(t){var e=N_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:tw;return n+i}return n},0)}function xpe(t){var e=N_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:tw;return n+i}return n},0)}function wpe(t){var e=T_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Spe(t){var e=T_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var ui=fe([eu,tu,jV,ype,bpe,xpe,wpe,Spe,rV,Yfe],(t,e,n,r,i,a,s,o,c,u)=>{var f={left:(n.left||0)+i,right:(n.right||0)+a},h={top:(n.top||0)+s,bottom:(n.bottom||0)+o},g=t1(t1({},h),f),y=g.bottom;g.bottom+=r,g=epe(g,c,u);var w=t-g.left-g.right,S=e-g.top-g.bottom;return t1(t1({brushBottom:y},g),{},{width:Math.max(w,0),height:Math.max(S,0)})}),Epe=fe(ui,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),FV=fe(eu,tu,(t,e)=>({x:0,y:0,width:t,height:e})),Ape=T.createContext(null),va=()=>T.useContext(Ape)!=null,R_=t=>t.brush,M_=fe([R_,ui,jV],(t,e,n)=>({height:t.height,x:We(t.x)?t.x:e.left,y:We(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:We(t.width)?t.width:e.width})),U2={},B2={},H2={},wB;function _pe(){return wB||(wB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,o=null;const c=a!=null&&a.includes("leading"),u=a==null||a.includes("trailing"),f=()=>{o!==null&&(n.apply(s,o),s=void 0,o=null)},h=()=>{u&&f(),S()};let g=null;const y=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},r)},w=()=>{g!==null&&(clearTimeout(g),g=null)},S=()=>{w(),s=void 0,o=null},E=()=>{f()},C=function(...M){if(i!=null&&i.aborted)return;s=this,o=M;const R=g==null;y(),c&&R&&f()};return C.schedule=y,C.cancel=S,C.flush=E,i==null||i.addEventListener("abort",S,{once:!0}),C}t.debounce=e})(H2)),H2}var SB;function Cpe(){return SB||(SB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=_pe();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:o=!0,maxWait:c}=a,u=Array(2);s&&(u[0]="leading"),o&&(u[1]="trailing");let f,h=null;const g=e.debounce(function(...S){f=r.apply(this,S),h=null},i,{edges:u}),y=function(...S){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(f=r.apply(this,S),h=Date.now(),g.cancel(),g.schedule(),f):(g.apply(this,S),f)},w=()=>(g.flush(),f);return y.cancel=g.cancel,y.flush=w,y}t.debounce=n})(B2)),B2}var EB;function Tpe(){return EB||(EB=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cpe();function n(r,i=0,a={}){const{leading:s=!0,trailing:o=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:o})}t.throttle=n})(U2)),U2}var z2,AB;function Npe(){return AB||(AB=1,z2=Tpe().throttle),z2}var Rpe=Npe();const Mpe=Co(Rpe);var OE=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},UV=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,o=Fc(r)?t:Number(r),c=Fc(i)?e:Number(i);return a&&a>0&&(o?c=o/a:c&&(o=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:o,calculatedHeight:c}},Ppe={width:0,height:0,overflow:"visible"},kpe={width:0,overflowX:"visible"},Ipe={height:0,overflowY:"visible"},Dpe={},Lpe=t=>{var{width:e,height:n}=t,r=Fc(e),i=Fc(n);return r&&i?Ppe:r?kpe:i?Ipe:Dpe};function Ope(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function RM(){return RM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RM.apply(null,arguments)}function _B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_B(Object(n),!0).forEach(function(r){jpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jpe(t,e,n){return(e=Fpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fpe(t){var e=Upe(t,"string");return typeof e=="symbol"?e:e+""}function Upe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BV=T.createContext({width:-1,height:-1});function Bpe(t){return ml(t.width)&&ml(t.height)}function HV(t){var{children:e,width:n,height:r}=t,i=T.useMemo(()=>({width:n,height:r}),[n,r]);return Bpe(i)?T.createElement(BV.Provider,{value:i},e):null}var GI=()=>T.useContext(BV),Hpe=T.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:o,maxHeight:c,children:u,debounce:f=0,id:h,className:g,onResize:y,style:w={}}=t,S=T.useRef(null),E=T.useRef();E.current=y,T.useImperativeHandle(e,()=>S.current);var[C,M]=T.useState({containerWidth:r.width,containerHeight:r.height}),R=T.useCallback((U,B)=>{M(V=>{var H=Math.round(U),G=Math.round(B);return V.containerWidth===H&&V.containerHeight===G?V:{containerWidth:H,containerHeight:G}})},[]);T.useEffect(()=>{if(S.current==null||typeof ResizeObserver>"u")return Qx;var U=G=>{var Q,{width:W,height:ee}=G[0].contentRect;R(W,ee),(Q=E.current)===null||Q===void 0||Q.call(E,W,ee)};f>0&&(U=Mpe(U,f,{trailing:!0,leading:!1}));var B=new ResizeObserver(U),{width:V,height:H}=S.current.getBoundingClientRect();return R(V,H),B.observe(S.current),()=>{B.disconnect()}},[R,f]);var{containerWidth:D,containerHeight:I}=C;OE(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:P,calculatedHeight:k}=UV(D,I,{width:i,height:a,aspect:n,maxHeight:c});return OE(P!=null&&P>0||k!=null&&k>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,k,i,a,s,o,n),T.createElement("div",{id:h?"".concat(h):void 0,className:$t("recharts-responsive-container",g),style:CB(CB({},w),{},{width:i,height:a,minWidth:s,minHeight:o,maxHeight:c}),ref:S},T.createElement("div",{style:Lpe({width:i,height:a})},T.createElement(HV,{width:P,height:k},u)))}),zpe=T.forwardRef((t,e)=>{var n=GI();if(ml(n.width)&&ml(n.height))return t.children;var{width:r,height:i}=Ope({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=UV(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return We(a)&&We(s)?T.createElement(HV,{width:a,height:s},t.children):T.createElement(Hpe,RM({},t,{width:r,height:i,ref:e}))});function zV(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var P_=()=>{var t,e=va(),n=Je(Epe),r=Je(M_),i=(t=Je(R_))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},$pe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$V=()=>{var t;return(t=Je(ui))!==null&&t!==void 0?t:$pe},GV=()=>Je(eu),qV=()=>Je(tu),cn=t=>t.layout.layoutType,kv=()=>Je(cn),Gpe=()=>{var t=kv();if(t==="horizontal"||t==="vertical")return t},qpe=()=>{var t=kv();return t!==void 0},k_=t=>{var e=Br(),n=va(),{width:r,height:i}=t,a=GI(),s=r,o=i;return a&&(s=a.width>0?a.width:r,o=a.height>0?a.height:i),T.useEffect(()=>{!n&&ml(s)&&ml(o)&&e(Yhe({width:s,height:o}))},[e,n,s,o]),null},VV=Symbol.for("immer-nothing"),TB=Symbol.for("immer-draftable"),Za=Symbol.for("immer-state");function po(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var $0=Object.getPrototypeOf;function yv(t){return!!t&&!!t[Za]}function cp(t){var e;return t?WV(t)||Array.isArray(t)||!!t[TB]||!!((e=t.constructor)!=null&&e[TB])||nw(t)||D_(t):!1}var Vpe=Object.prototype.constructor.toString(),NB=new WeakMap;function WV(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=NB.get(n);return r===void 0&&(r=Function.toString.call(n),NB.set(n,r)),r===Vpe}function jE(t,e,n=!0){I_(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function I_(t){const e=t[Za];return e?e.type_:Array.isArray(t)?1:nw(t)?2:D_(t)?3:0}function MM(t,e){return I_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function YV(t,e,n){const r=I_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Wpe(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function nw(t){return t instanceof Map}function D_(t){return t instanceof Set}function Pf(t){return t.copy_||t.base_}function PM(t,e){if(nw(t))return new Map(t);if(D_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=WV(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Za];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create($0(t),r)}else{const r=$0(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function qI(t,e=!1){return L_(t)||yv(t)||!cp(t)||(I_(t)>1&&Object.defineProperties(t,{set:n1,add:n1,clear:n1,delete:n1}),Object.freeze(t),e&&Object.values(t).forEach(n=>qI(n,!0))),t}function Ype(){po(2)}var n1={value:Ype};function L_(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Kpe={};function up(t){const e=Kpe[t];return e||po(0,t),e}var G0;function KV(){return G0}function Xpe(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function RB(t,e){e&&(up("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function kM(t){IM(t),t.drafts_.forEach(Jpe),t.drafts_=null}function IM(t){t===G0&&(G0=t.parent_)}function MB(t){return G0=Xpe(G0,t)}function Jpe(t){const e=t[Za];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function PB(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Za].modified_&&(kM(e),po(4)),cp(t)&&(t=FE(e,t),e.parent_||UE(e,t)),e.patches_&&up("Patches").generateReplacementPatches_(n[Za].base_,t,e.patches_,e.inversePatches_)):t=FE(e,n,[]),kM(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==VV?t:void 0}function FE(t,e,n){if(L_(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[Za];if(!i)return jE(e,(a,s)=>kB(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return UE(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,o=!1;i.type_===3&&(s=new Set(a),a.clear(),o=!0),jE(s,(c,u)=>kB(t,i,a,c,u,n,o),r),UE(t,a,!1),n&&t.patches_&&up("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function kB(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const o=L_(i);if(!(o&&!s)){if(yv(i)){const c=a&&e&&e.type_!==3&&!MM(e.assigned_,r)?a.concat(r):void 0,u=FE(t,i,c);if(YV(n,r,u),yv(u))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(cp(i)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&o)return;FE(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(nw(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&UE(t,i)}}}function UE(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qI(e,n)}function Qpe(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:KV(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=VI;n&&(i=[r],a=q0);const{revoke:s,proxy:o}=Proxy.revocable(i,a);return r.draft_=o,r.revoke_=s,o}var VI={get(t,e){if(e===Za)return t;const n=Pf(t);if(!MM(n,e))return Zpe(t,n,e);const r=n[e];return t.finalized_||!cp(r)?r:r===$2(t.base_,e)?(G2(t),t.copy_[e]=LM(r,t)):r},has(t,e){return e in Pf(t)},ownKeys(t){return Reflect.ownKeys(Pf(t))},set(t,e,n){const r=XV(Pf(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=$2(Pf(t),e),a=i==null?void 0:i[Za];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Wpe(n,i)&&(n!==void 0||MM(t.base_,e)))return!0;G2(t),DM(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return $2(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,G2(t),DM(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Pf(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){po(11)},getPrototypeOf(t){return $0(t.base_)},setPrototypeOf(){po(12)}},q0={};jE(VI,(t,e)=>{q0[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});q0.deleteProperty=function(t,e){return q0.set.call(this,t,e,void 0)};q0.set=function(t,e,n){return VI.set.call(this,t[0],e,n,t[0])};function $2(t,e){const n=t[Za];return(n?Pf(n):t)[e]}function Zpe(t,e,n){var i;const r=XV(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function XV(t,e){if(!(e in t))return;let n=$0(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=$0(n)}}function DM(t){t.modified_||(t.modified_=!0,t.parent_&&DM(t.parent_))}function G2(t){t.copy_||(t.copy_=PM(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var eme=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...u){return s.produce(c,f=>n.call(this,f,...u))}}typeof n!="function"&&po(6),r!==void 0&&typeof r!="function"&&po(7);let i;if(cp(e)){const a=MB(this),s=LM(e,void 0);let o=!0;try{i=n(s),o=!1}finally{o?kM(a):IM(a)}return RB(a,r),PB(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===VV&&(i=void 0),this.autoFreeze_&&qI(i,!0),r){const a=[],s=[];up("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else po(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...o)=>this.produceWithPatches(s,c=>e(c,...o));let r,i;return[this.produce(e,n,(s,o)=>{r=s,i=o}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){cp(t)||po(8),yv(t)&&(t=tme(t));const e=MB(this),n=LM(t,void 0);return n[Za].isManual_=!0,IM(e),n}finishDraft(t,e){const n=t&&t[Za];(!n||!n.isManual_)&&po(9);const{scope_:r}=n;return RB(r,e),PB(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=up("Patches").applyPatches_;return yv(t)?r(t,e):this.produce(t,i=>r(i,e))}};function LM(t,e){const n=nw(t)?up("MapSet").proxyMap_(t,e):D_(t)?up("MapSet").proxySet_(t,e):Qpe(t,e);return(e?e.scope_:KV()).drafts_.push(n),n}function tme(t){return yv(t)||po(10,t),JV(t)}function JV(t){if(!cp(t)||L_(t))return t;const e=t[Za];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=PM(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=PM(t,!0);return jE(n,(i,a)=>{YV(n,i,JV(a))},r),e&&(e.finalized_=!1),n}var nme=new eme;nme.produce;var rme={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},QV=ga({name:"legend",initialState:rme,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:bn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=xo(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:bn()},removeLegendPayload:{reducer(t,e){var n=xo(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:bn()}}}),{setLegendSize:c2e,setLegendSettings:u2e,addLegendPayload:ime,replaceLegendPayload:ame,removeLegendPayload:sme}=QV.actions,ome=QV.reducer;function OM(){return OM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},OM.apply(null,arguments)}function IB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IB(Object(n),!0).forEach(function(r){lme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lme(t,e,n){return(e=cme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cme(t){var e=ume(t,"string");return typeof e=="symbol"?e:e+""}function ume(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dme(t){return Array.isArray(t)&&pl(t[0])&&pl(t[1])?t.join(" ~ "):t}var fme=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:o,wrapperClassName:c,labelClassName:u,label:f,labelFormatter:h,accessibilityLayer:g=!1}=t,y=()=>{if(a&&a.length){var I={padding:0,margin:0},P=(o?v_(a,o):a).map((k,U)=>{if(k.type==="none")return null;var B=k.formatter||s||dme,{value:V,name:H}=k,G=V,Q=H;if(B){var W=B(V,H,k,U,a);if(Array.isArray(W))[G,Q]=W;else if(W!=null)G=W;else return null}var ee=q2({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:ee},pl(Q)?T.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,pl(Q)?T.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,T.createElement("span",{className:"recharts-tooltip-item-value"},G),T.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:I},P)}return null},w=q2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=q2({margin:0},i),E=!oi(f),C=E?f:"",M=$t("recharts-default-tooltip",c),R=$t("recharts-tooltip-label",u);E&&h&&a!==void 0&&a!==null&&(C=h(f,a));var D=g?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",OM({className:M,style:w},D),T.createElement("p",{className:R,style:S},T.isValidElement(C)?C:"".concat(C)),y())},zy="recharts-tooltip-wrapper",hme={visibility:"hidden"};function pme(t){var{coordinate:e,translateX:n,translateY:r}=t;return $t(zy,{["".concat(zy,"-right")]:We(n)&&e&&We(e.x)&&n>=e.x,["".concat(zy,"-left")]:We(n)&&e&&We(e.x)&&n<e.x,["".concat(zy,"-bottom")]:We(r)&&e&&We(e.y)&&r>=e.y,["".concat(zy,"-top")]:We(r)&&e&&We(e.y)&&r<e.y})}function DB(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=t;if(a&&We(a[r]))return a[r];var f=n[r]-o-(i>0?i:0),h=n[r]+i;if(e[r])return s[r]?f:h;var g=c[r];if(g==null)return 0;if(s[r]){var y=f,w=g;return y<w?Math.max(h,g):Math.max(f,g)}if(u==null)return 0;var S=h+o,E=g+u;return S>E?Math.max(f,g):Math.max(h,g)}function mme(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function gme(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:o,viewBox:c}=t,u,f,h;return s.height>0&&s.width>0&&n?(f=DB({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),h=DB({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=mme({translateX:f,translateY:h,useTranslate3d:o})):u=hme,{cssProperties:u,cssClasses:pme({translateX:f,translateY:h,coordinate:n})}}function LB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LB(Object(n),!0).forEach(function(r){jM(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jM(t,e,n){return(e=vme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vme(t){var e=yme(t,"string");return typeof e=="symbol"?e:e+""}function yme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class bme extends T.PureComponent{constructor(){super(...arguments),jM(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),jM(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:o,isAnimationActive:c,offset:u,position:f,reverseDirection:h,useTranslate3d:g,viewBox:y,wrapperStyle:w,lastBoundingBox:S,innerRef:E,hasPortalFromProps:C}=this.props,{cssClasses:M,cssProperties:R}=gme({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:u,position:f,reverseDirection:h,tooltipBox:{height:S.height,width:S.width},useTranslate3d:g,viewBox:y}),D=C?{}:r1(r1({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},R),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),I=r1(r1({},D),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},w);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:M,style:I,ref:E},a)}}var ZV=()=>{var t;return(t=Je(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function FM(){return FM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FM.apply(null,arguments)}function OB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OB(Object(n),!0).forEach(function(r){xme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xme(t,e,n){return(e=wme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wme(t){var e=Sme(t,"string");return typeof e=="symbol"?e:e+""}function Sme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var FB={curveBasisClosed:Nde,curveBasisOpen:Rde,curveBasis:Tde,curveBumpX:_de,curveBumpY:Cde,curveLinearClosed:Mde,curveLinear:p_,curveMonotoneX:Pde,curveMonotoneY:kde,curveNatural:Ide,curveStep:Dde,curveStepAfter:Ode,curveStepBefore:Lde},BE=t=>wn(t.x)&&wn(t.y),UB=t=>t.base!=null&&BE(t.base)&&BE(t),$y=t=>t.x,Gy=t=>t.y,Eme=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(II(t));return(n==="curveMonotone"||n==="curveBump")&&e?FB["".concat(n).concat(e==="vertical"?"Y":"X")]:FB[n]||p_},Ame=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=Eme(e,i),o=a?n.filter(BE):n,c;if(Array.isArray(r)){var u=n.map((y,w)=>jB(jB({},y),{},{base:r[w]}));i==="vertical"?c=KS().y(Gy).x1($y).x0(y=>y.base.x):c=KS().x($y).y1(Gy).y0(y=>y.base.y);var f=c.defined(UB).curve(s),h=a?u.filter(UB):u;return f(h)}i==="vertical"&&We(r)?c=KS().y(Gy).x1($y).x0(r):We(r)?c=KS().x($y).y1(Gy).y0(r):c=Iq().x($y).y(Gy);var g=c.defined(BE).curve(s);return g(o)},M1=t=>{var{className:e,points:n,path:r,pathRef:i}=t,a=kv();if((!n||!n.length)&&!r)return null;var s={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||a,connectNulls:t.connectNulls},o=n&&n.length?Ame(s):r;return T.createElement("path",FM({},wo(t),DI(t),{className:$t("recharts-curve",e),d:o===null?void 0:o,ref:i}))},_me=["x","y","top","left","width","height","className"];function UM(){return UM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},UM.apply(null,arguments)}function BB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BB(Object(n),!0).forEach(function(r){Tme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tme(t,e,n){return(e=Nme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nme(t){var e=Rme(t,"string");return typeof e=="symbol"?e:e+""}function Rme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mme(t,e){if(t==null)return{};var n,r,i=Pme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kme=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),Ime=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:o}=t,c=Mme(t,_me),u=Cme({x:e,y:n,top:r,left:i,width:a,height:s},c);return!We(e)||!We(n)||!We(a)||!We(s)||!We(r)||!We(i)?null:T.createElement("path",UM({},Bs(u),{className:$t("recharts-cross",o),d:kme(e,n,a,s,r,i)}))};function Dme(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function HB(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HB(Object(n),!0).forEach(function(r){Lme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HB(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lme(t,e,n){return(e=Ome(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ome(t){var e=jme(t,"string");return typeof e=="symbol"?e:e+""}function jme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fme=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Ume=(t,e,n)=>t.map(r=>"".concat(Fme(r)," ").concat(e,"ms ").concat(n)).join(","),Bme=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),V0=(t,e)=>Object.keys(e).reduce((n,r)=>zB(zB({},n),{},{[r]:t(r,e[r])}),{});function $B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$B(Object(n),!0).forEach(function(r){Hme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$B(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hme(t,e,n){return(e=zme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zme(t){var e=$me(t,"string");return typeof e=="symbol"?e:e+""}function $me(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var HE=(t,e,n)=>t+(e-t)*n,BM=t=>{var{from:e,to:n}=t;return e!==n},e9=(t,e,n)=>{var r=V0((i,a)=>{if(BM(a)){var[s,o]=t(a.from,a.to,a.velocity);return fr(fr({},a),{},{from:s,velocity:o})}return a},e);return n<1?V0((i,a)=>BM(a)&&r[i]!=null?fr(fr({},a),{},{velocity:HE(a.velocity,r[i].velocity,n),from:HE(a.from,r[i].from,n)}):a,e):e9(t,r,n-1)};function Gme(t,e,n,r,i,a){var s,o=r.reduce((g,y)=>fr(fr({},g),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),c=()=>V0((g,y)=>y.from,o),u=()=>!Object.values(o).filter(BM).length,f=null,h=g=>{s||(s=g);var y=g-s,w=y/n.dt;o=e9(n,o,w),i(fr(fr(fr({},t),e),c())),s=g,u()||(f=a.setTimeout(h))};return()=>(f=a.setTimeout(h),()=>{var g;(g=f)===null||g===void 0||g()})}function qme(t,e,n,r,i,a,s){var o=null,c=i.reduce((h,g)=>{var y=t[g],w=e[g];return y==null||w==null?h:fr(fr({},h),{},{[g]:[y,w]})},{}),u,f=h=>{u||(u=h);var g=(h-u)/r,y=V0((S,E)=>HE(...E,n(g)),c);if(a(fr(fr(fr({},t),e),y)),g<1)o=s.setTimeout(f);else{var w=V0((S,E)=>HE(...E,n(1)),c);a(fr(fr(fr({},t),e),w))}};return()=>(o=s.setTimeout(f),()=>{var h;(h=o)===null||h===void 0||h()})}const Vme=(t,e,n,r,i,a)=>{var s=Bme(t,e);return n==null?()=>(i(fr(fr({},t),e)),()=>{}):n.isStepper===!0?Gme(t,e,n,s,i,a):qme(t,e,n,r,s,i,a)};var zE=1e-4,t9=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],n9=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),GB=(t,e)=>n=>{var r=t9(t,e);return n9(r,n)},Wme=(t,e)=>n=>{var r=t9(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return n9(i,n)},Yme=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(a=>parseFloat(a));return[i[0],i[1],i[2],i[3]]},Kme=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Yme(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},Xme=(t,e,n,r)=>{var i=GB(t,n),a=GB(e,r),s=Wme(t,n),o=u=>u>1?1:u<0?0:u,c=u=>{for(var f=u>1?1:u,h=f,g=0;g<8;++g){var y=i(h)-f,w=s(h);if(Math.abs(y-f)<zE||w<zE)return a(h);h=o(h-y/w)}return a(h)};return c.isStepper=!1,c},qB=function(){return Xme(...Kme(...arguments))},Jme=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,o,c)=>{var u=-(s-o)*n,f=c*r,h=c+(u-f)*i/1e3,g=c*i/1e3+s;return Math.abs(g-o)<zE&&Math.abs(h)<zE?[o,0]:[g,h]};return a.isStepper=!0,a.dt=i,a},Qme=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qB(t);case"spring":return Jme();default:if(t.split("(")[0]==="cubic-bezier")return qB(t)}return typeof t=="function"?t:null};function Zme(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,[c,...u]=o;if(typeof c=="number"){i=t.setTimeout(a.bind(null,u),c);return}a(c),i=t.setTimeout(a.bind(null,u));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class ege{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function tge(){return Zme(new ege)}var nge=T.createContext(tge);function rge(t,e){var n=T.useContext(nge);return T.useMemo(()=>e??n(t),[t,e,n])}var ige=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),rw={isSsr:ige()},age={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},VB={t:0},V2={t:1};function r9(t){var e=ns(t,age),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:o,onAnimationStart:c,children:u}=e,f=n==="auto"?!rw.isSsr:n,h=rge(e.animationId,e.animationManager),[g,y]=T.useState(f?VB:V2),w=T.useRef(null);return T.useEffect(()=>{f||y(V2)},[f]),T.useEffect(()=>{if(!f||!r)return Qx;var S=Vme(VB,V2,Qme(a),i,y,h.getTimeoutController()),E=()=>{w.current=S()};return h.start([c,s,E,i,o]),()=>{h.stop(),w.current&&w.current(),o()}},[f,r,i,a,s,c,o,h]),u(g.t)}function i9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=T.useRef(U0(e)),r=T.useRef(t);return r.current!==t&&(n.current=U0(e),r.current=t),n.current}var sge=["radius"],oge=["radius"],WB,YB,KB,XB,JB,QB,ZB,eH,tH,nH;function rH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function iH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rH(Object(n),!0).forEach(function(r){lge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lge(t,e,n){return(e=cge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cge(t){var e=uge(t,"string");return typeof e=="symbol"?e:e+""}function uge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $E(){return $E=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$E.apply(null,arguments)}function aH(t,e){if(t==null)return{};var n,r,i=dge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function dge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function ko(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var sH=(t,e,n,r,i)=>{var a=Ld(n),s=Ld(r),o=Math.min(Math.abs(a)/2,Math.abs(s)/2),c=s>=0?1:-1,u=a>=0?1:-1,f=s>=0&&a>=0||s<0&&a<0?1:0,h;if(o>0&&i instanceof Array){for(var g=[0,0,0,0],y=0,w=4;y<w;y++)g[y]=i[y]>o?o:i[y];h=ei(WB||(WB=ko(["M",",",""])),t,e+c*g[0]),g[0]>0&&(h+=ei(YB||(YB=ko(["A ",",",",0,0,",",",",",""])),g[0],g[0],f,t+u*g[0],e)),h+=ei(KB||(KB=ko(["L ",",",""])),t+n-u*g[1],e),g[1]>0&&(h+=ei(XB||(XB=ko(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],f,t+n,e+c*g[1])),h+=ei(JB||(JB=ko(["L ",",",""])),t+n,e+r-c*g[2]),g[2]>0&&(h+=ei(QB||(QB=ko(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],f,t+n-u*g[2],e+r)),h+=ei(ZB||(ZB=ko(["L ",",",""])),t+u*g[3],e+r),g[3]>0&&(h+=ei(eH||(eH=ko(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],f,t,e+r-c*g[3])),h+="Z"}else if(o>0&&i===+i&&i>0){var S=Math.min(o,i);h=ei(tH||(tH=ko(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+c*S,S,S,f,t+u*S,e,t+n-u*S,e,S,S,f,t+n,e+c*S,t+n,e+r-c*S,S,S,f,t+n-u*S,e+r,t+u*S,e+r,S,S,f,t,e+r-c*S)}else h=ei(nH||(nH=ko(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return h},oH={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fge=t=>{var e=ns(t,oH),n=T.useRef(null),[r,i]=T.useState(-1);T.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var q=n.current.getTotalLength();q&&i(q)}catch{}},[]);var{x:a,y:s,width:o,height:c,radius:u,className:f}=e,{animationEasing:h,animationDuration:g,animationBegin:y,isAnimationActive:w,isUpdateAnimationActive:S}=e,E=T.useRef(o),C=T.useRef(c),M=T.useRef(a),R=T.useRef(s),D=T.useMemo(()=>({x:a,y:s,width:o,height:c,radius:u}),[a,s,o,c,u]),I=i9(D,"rectangle-");if(a!==+a||s!==+s||o!==+o||c!==+c||o===0||c===0)return null;var P=$t("recharts-rectangle",f);if(!S){var k=Bs(e),{radius:U}=k,B=aH(k,sge);return T.createElement("path",$E({},B,{x:Ld(a),y:Ld(s),width:Ld(o),height:Ld(c),radius:typeof u=="number"?u:void 0,className:P,d:sH(a,s,o,c,u)}))}var V=E.current,H=C.current,G=M.current,Q=R.current,W="0px ".concat(r===-1?1:r,"px"),ee="".concat(r,"px 0px"),$=Ume(["strokeDasharray"],g,typeof h=="string"?h:oH.animationEasing);return T.createElement(r9,{animationId:I,key:I,canBegin:r>0,duration:g,easing:h,isActive:S,begin:y},q=>{var J=sl(V,o,q),ae=sl(H,c,q),ye=sl(G,a,q),Y=sl(Q,s,q);n.current&&(E.current=J,C.current=ae,M.current=ye,R.current=Y);var ne;w?q>0?ne={transition:$,strokeDasharray:ee}:ne={strokeDasharray:W}:ne={strokeDasharray:ee};var ue=Bs(e),{radius:me}=ue,xe=aH(ue,oge);return T.createElement("path",$E({},xe,{radius:typeof u=="number"?u:void 0,className:P,d:sH(ye,Y,J,ae,u),ref:n,style:iH(iH({},ne),e.style)}))})};function lH(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cH(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lH(Object(n),!0).forEach(function(r){hge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lH(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hge(t,e,n){return(e=pge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pge(t){var e=mge(t,"string");return typeof e=="symbol"?e:e+""}function mge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GE=Math.PI/180,gge=t=>t*180/Math.PI,si=(t,e,n,r)=>({x:t+Math.cos(-GE*r)*n,y:e+Math.sin(-GE*r)*n}),vge=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},yge=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},bge=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=yge({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var o=(n-i)/s,c=Math.acos(o);return r>a&&(c=2*Math.PI-c),{radius:s,angle:gge(c),angleInRadian:c}},xge=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},wge=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},Sge=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=bge({x:n,y:r},e),{innerRadius:s,outerRadius:o}=e;if(i<s||i>o||i===0)return null;var{startAngle:c,endAngle:u}=xge(e),f=a,h;if(c<=u){for(;f>u;)f-=360;for(;f<c;)f+=360;h=f>=c&&f<=u}else{for(;f>c;)f-=360;for(;f<u;)f+=360;h=f>=u&&f<=c}return h?cH(cH({},e),{},{radius:i,angle:wge(f,e)}):null};function a9(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=si(e,n,r,i),o=si(e,n,r,a);return{points:[s,o],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}var uH,dH,fH,hH,pH,mH,gH;function HM(){return HM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HM.apply(null,arguments)}function Bf(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Ege=(t,e)=>{var n=Ds(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},i1=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:o,cornerIsExternal:c}=t,u=o*(s?1:-1)+r,f=Math.asin(o/u)/GE,h=c?i:i+a*f,g=si(e,n,u,h),y=si(e,n,r,h),w=c?i-a*f:i,S=si(e,n,u*Math.cos(f*GE),w);return{center:g,circleTangency:y,lineTangency:S,theta:f}},s9=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,o=Ege(a,s),c=a+o,u=si(e,n,i,a),f=si(e,n,i,c),h=ei(uH||(uH=Bf(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,i,i,+(Math.abs(o)>180),+(a>c),f.x,f.y);if(r>0){var g=si(e,n,r,a),y=si(e,n,r,c);h+=ei(dH||(dH=Bf(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),y.x,y.y,r,r,+(Math.abs(o)>180),+(a<=c),g.x,g.y)}else h+=ei(fH||(fH=Bf(["L ",","," Z"])),e,n);return h},Age=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:o,startAngle:c,endAngle:u}=t,f=Ds(u-c),{circleTangency:h,lineTangency:g,theta:y}=i1({cx:e,cy:n,radius:i,angle:c,sign:f,cornerRadius:a,cornerIsExternal:o}),{circleTangency:w,lineTangency:S,theta:E}=i1({cx:e,cy:n,radius:i,angle:u,sign:-f,cornerRadius:a,cornerIsExternal:o}),C=o?Math.abs(c-u):Math.abs(c-u)-y-E;if(C<0)return s?ei(hH||(hH=Bf(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,a,a,a*2,a,a,-a*2):s9({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:u});var M=ei(pH||(pH=Bf(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,a,a,+(f<0),h.x,h.y,i,i,+(C>180),+(f<0),w.x,w.y,a,a,+(f<0),S.x,S.y);if(r>0){var{circleTangency:R,lineTangency:D,theta:I}=i1({cx:e,cy:n,radius:r,angle:c,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),{circleTangency:P,lineTangency:k,theta:U}=i1({cx:e,cy:n,radius:r,angle:u,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:o}),B=o?Math.abs(c-u):Math.abs(c-u)-I-U;if(B<0&&a===0)return"".concat(M,"L").concat(e,",").concat(n,"Z");M+=ei(mH||(mH=Bf(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),k.x,k.y,a,a,+(f<0),P.x,P.y,r,r,+(B>180),+(f>0),R.x,R.y,a,a,+(f<0),D.x,D.y)}else M+=ei(gH||(gH=Bf(["L",",","Z"])),e,n);return M},_ge={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Cge=t=>{var e=ns(t,_ge),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f,className:h}=e;if(a<i||u===f)return null;var g=$t("recharts-sector",h),y=a-i,w=$d(s,y,0,!0),S;return w>0&&Math.abs(u-f)<360?S=Age({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(w,y/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:f}):S=s9({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f}),T.createElement("path",HM({},Bs(e),{className:g,d:S}))};function Tge(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(qq(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:o}=e,c=si(r,i,a,o),u=si(r,i,s,o);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return a9(e)}}var W2={},Y2={},K2={},vH;function Nge(){return vH||(vH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tV();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(K2)),K2}var yH;function Rge(){return yH||(yH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nge();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(Y2)),Y2}var bH;function Mge(){return bH||(bH=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nV(),n=Rge();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const o=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=i,i+=s;return c}t.range=r})(W2)),W2}var X2,xH;function Pge(){return xH||(xH=1,X2=Mge().range),X2}var kge=Pge();const o9=Co(kge);function Fd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ige(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function WI(t){let e,n,r;t.length!==2?(e=Fd,n=(o,c)=>Fd(t(o),c),r=(o,c)=>t(o)-c):(e=t===Fd||t===Ige?t:Dge,n=t,r=t);function i(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<0?u=h+1:f=h}while(u<f)}return u}function a(o,c,u=0,f=o.length){if(u<f){if(e(c,c)!==0)return f;do{const h=u+f>>>1;n(o[h],c)<=0?u=h+1:f=h}while(u<f)}return u}function s(o,c,u=0,f=o.length){const h=i(o,c,u,f-1);return h>u&&r(o[h-1],c)>-r(o[h],c)?h-1:h}return{left:i,center:s,right:a}}function Dge(){return 0}function l9(t){return t===null?NaN:+t}function*Lge(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Oge=WI(Fd),iw=Oge.right;WI(l9).center;class wH extends Map{constructor(e,n=Uge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(SH(this,e))}has(e){return super.has(SH(this,e))}set(e,n){return super.set(jge(this,e),n)}delete(e){return super.delete(Fge(this,e))}}function SH({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function jge({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Fge({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Uge(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Bge(t=Fd){if(t===Fd)return c9;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function c9(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Hge=Math.sqrt(50),zge=Math.sqrt(10),$ge=Math.sqrt(2);function qE(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Hge?10:a>=zge?5:a>=$ge?2:1;let o,c,u;return i<0?(u=Math.pow(10,-i)/s,o=Math.round(t*u),c=Math.round(e*u),o/u<t&&++o,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*s,o=Math.round(t/u),c=Math.round(e/u),o*u<t&&++o,c*u>e&&--c),c<o&&.5<=n&&n<2?qE(t,e,n*2):[o,c,u]}function zM(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?qE(e,t,n):qE(t,e,n);if(!(a>=i))return[];const o=a-i+1,c=new Array(o);if(r)if(s<0)for(let u=0;u<o;++u)c[u]=(a-u)/-s;else for(let u=0;u<o;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<o;++u)c[u]=(i+u)/-s;else for(let u=0;u<o;++u)c[u]=(i+u)*s;return c}function $M(t,e,n){return e=+e,t=+t,n=+n,qE(t,e,n)[2]}function GM(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?$M(e,t,n):$M(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function EH(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function AH(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function u9(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?c9:Bge(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,f=Math.log(c),h=.5*Math.exp(2*f/3),g=.5*Math.sqrt(f*h*(c-h)/c)*(u-c/2<0?-1:1),y=Math.max(n,Math.floor(e-u*h/c+g)),w=Math.min(r,Math.floor(e+(c-u)*h/c+g));u9(t,e,y,w,i)}const a=t[e];let s=n,o=r;for(qy(t,n,e),i(t[r],a)>0&&qy(t,n,r);s<o;){for(qy(t,s,o),++s,--o;i(t[s],a)<0;)++s;for(;i(t[o],a)>0;)--o}i(t[n],a)===0?qy(t,n,o):(++o,qy(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}return t}function qy(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Gge(t,e,n){if(t=Float64Array.from(Lge(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return AH(t);if(e>=1)return EH(t);var r,i=(r-1)*e,a=Math.floor(i),s=EH(u9(t,a).subarray(0,a+1)),o=AH(t.subarray(a+1));return s+(o-s)*(i-a)}}function qge(t,e,n=l9){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),o=+n(t[a+1],a+1,t);return s+(o-s)*(i-a)}}function Vge(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function $s(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function nu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const qM=Symbol("implicit");function YI(){var t=new wH,e=[],n=[],r=qM;function i(a){let s=t.get(a);if(s===void 0){if(r!==qM)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new wH;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return YI(e,n).unknown(r)},$s.apply(i,arguments),i}function KI(){var t=YI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,o=!1,c=0,u=0,f=.5;delete t.unknown;function h(){var g=e().length,y=i<r,w=y?i:r,S=y?r:i;a=(S-w)/Math.max(1,g-c+u*2),o&&(a=Math.floor(a)),w+=(S-w-a*(g-c))*f,s=a*(1-c),o&&(w=Math.round(w),s=Math.round(s));var E=Vge(g).map(function(C){return w+a*C});return n(y?E.reverse():E)}return t.domain=function(g){return arguments.length?(e(g),h()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,o=!0,h()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(g){return arguments.length?(o=!!g,h()):o},t.padding=function(g){return arguments.length?(c=Math.min(1,u=+g),h()):c},t.paddingInner=function(g){return arguments.length?(c=Math.min(1,g),h()):c},t.paddingOuter=function(g){return arguments.length?(u=+g,h()):u},t.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),h()):f},t.copy=function(){return KI(e(),[r,i]).round(o).paddingInner(c).paddingOuter(u).align(f)},$s.apply(h(),arguments)}function d9(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return d9(e())},t}function Wge(){return d9(KI.apply(null,arguments).paddingInner(1))}function XI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function f9(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function aw(){}var W0=.7,VE=1/W0,Um="\\s*([+-]?\\d+)\\s*",Y0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Yge=/^#([0-9a-f]{3,8})$/,Kge=new RegExp(`^rgb\\(${Um},${Um},${Um}\\)$`),Xge=new RegExp(`^rgb\\(${fl},${fl},${fl}\\)$`),Jge=new RegExp(`^rgba\\(${Um},${Um},${Um},${Y0}\\)$`),Qge=new RegExp(`^rgba\\(${fl},${fl},${fl},${Y0}\\)$`),Zge=new RegExp(`^hsl\\(${Y0},${fl},${fl}\\)$`),eve=new RegExp(`^hsla\\(${Y0},${fl},${fl},${Y0}\\)$`),_H={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};XI(aw,K0,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:CH,formatHex:CH,formatHex8:tve,formatHsl:nve,formatRgb:TH,toString:TH});function CH(){return this.rgb().formatHex()}function tve(){return this.rgb().formatHex8()}function nve(){return h9(this).formatHsl()}function TH(){return this.rgb().formatRgb()}function K0(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Yge.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?NH(e):n===3?new ha(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?a1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?a1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Kge.exec(t))?new ha(e[1],e[2],e[3],1):(e=Xge.exec(t))?new ha(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Jge.exec(t))?a1(e[1],e[2],e[3],e[4]):(e=Qge.exec(t))?a1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Zge.exec(t))?PH(e[1],e[2]/100,e[3]/100,1):(e=eve.exec(t))?PH(e[1],e[2]/100,e[3]/100,e[4]):_H.hasOwnProperty(t)?NH(_H[t]):t==="transparent"?new ha(NaN,NaN,NaN,0):null}function NH(t){return new ha(t>>16&255,t>>8&255,t&255,1)}function a1(t,e,n,r){return r<=0&&(t=e=n=NaN),new ha(t,e,n,r)}function rve(t){return t instanceof aw||(t=K0(t)),t?(t=t.rgb(),new ha(t.r,t.g,t.b,t.opacity)):new ha}function VM(t,e,n,r){return arguments.length===1?rve(t):new ha(t,e,n,r??1)}function ha(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}XI(ha,VM,f9(aw,{brighter(t){return t=t==null?VE:Math.pow(VE,t),new ha(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?W0:Math.pow(W0,t),new ha(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ha(ip(this.r),ip(this.g),ip(this.b),WE(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:RH,formatHex:RH,formatHex8:ive,formatRgb:MH,toString:MH}));function RH(){return`#${Hf(this.r)}${Hf(this.g)}${Hf(this.b)}`}function ive(){return`#${Hf(this.r)}${Hf(this.g)}${Hf(this.b)}${Hf((isNaN(this.opacity)?1:this.opacity)*255)}`}function MH(){const t=WE(this.opacity);return`${t===1?"rgb(":"rgba("}${ip(this.r)}, ${ip(this.g)}, ${ip(this.b)}${t===1?")":`, ${t})`}`}function WE(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ip(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Hf(t){return t=ip(t),(t<16?"0":"")+t.toString(16)}function PH(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mo(t,e,n,r)}function h9(t){if(t instanceof mo)return new mo(t.h,t.s,t.l,t.opacity);if(t instanceof aw||(t=K0(t)),!t)return new mo;if(t instanceof mo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,o=a-i,c=(a+i)/2;return o?(e===a?s=(n-r)/o+(n<r)*6:n===a?s=(r-e)/o+2:s=(e-n)/o+4,o/=c<.5?a+i:2-a-i,s*=60):o=c>0&&c<1?0:s,new mo(s,o,c,t.opacity)}function ave(t,e,n,r){return arguments.length===1?h9(t):new mo(t,e,n,r??1)}function mo(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}XI(mo,ave,f9(aw,{brighter(t){return t=t==null?VE:Math.pow(VE,t),new mo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?W0:Math.pow(W0,t),new mo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ha(J2(t>=240?t-240:t+120,i,r),J2(t,i,r),J2(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new mo(kH(this.h),s1(this.s),s1(this.l),WE(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=WE(this.opacity);return`${t===1?"hsl(":"hsla("}${kH(this.h)}, ${s1(this.s)*100}%, ${s1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function kH(t){return t=(t||0)%360,t<0?t+360:t}function s1(t){return Math.max(0,Math.min(1,t||0))}function J2(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const JI=t=>()=>t;function sve(t,e){return function(n){return t+n*e}}function ove(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function lve(t){return(t=+t)==1?p9:function(e,n){return n-e?ove(e,n,t):JI(isNaN(e)?n:e)}}function p9(t,e){var n=e-t;return n?sve(t,n):JI(isNaN(t)?e:t)}const IH=(function t(e){var n=lve(e);function r(i,a){var s=n((i=VM(i)).r,(a=VM(a)).r),o=n(i.g,a.g),c=n(i.b,a.b),u=p9(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=o(f),i.b=c(f),i.opacity=u(f),i+""}}return r.gamma=t,r})(1);function cve(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function uve(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function dve(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=Iv(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(o){for(s=0;s<r;++s)a[s]=i[s](o);return a}}function fve(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function YE(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function hve(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Iv(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var WM=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Q2=new RegExp(WM.source,"g");function pve(t){return function(){return t}}function mve(t){return function(e){return t(e)+""}}function gve(t,e){var n=WM.lastIndex=Q2.lastIndex=0,r,i,a,s=-1,o=[],c=[];for(t=t+"",e=e+"";(r=WM.exec(t))&&(i=Q2.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:YE(r,i)})),n=Q2.lastIndex;return n<e.length&&(a=e.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?c[0]?mve(c[0].x):pve(e):(e=c.length,function(u){for(var f=0,h;f<e;++f)o[(h=c[f]).i]=h.x(u);return o.join("")})}function Iv(t,e){var n=typeof e,r;return e==null||n==="boolean"?JI(e):(n==="number"?YE:n==="string"?(r=K0(e))?(e=r,IH):gve:e instanceof K0?IH:e instanceof Date?fve:uve(e)?cve:Array.isArray(e)?dve:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?hve:YE)(t,e)}function QI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function vve(t,e){e===void 0&&(e=t,t=Iv);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var o=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[o](s-o)}}function yve(t){return function(){return t}}function KE(t){return+t}var DH=[0,1];function Fi(t){return t}function YM(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:yve(isNaN(e)?NaN:.5)}function bve(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function xve(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=YM(i,r),a=n(s,a)):(r=YM(r,i),a=n(a,s)),function(o){return a(r(o))}}function wve(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=YM(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(o){var c=iw(t,o,1,r)-1;return a[c](i[c](o))}}function sw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function O_(){var t=DH,e=DH,n=Iv,r,i,a,s=Fi,o,c,u;function f(){var g=Math.min(t.length,e.length);return s!==Fi&&(s=bve(t[0],t[g-1])),o=g>2?wve:xve,c=u=null,h}function h(g){return g==null||isNaN(g=+g)?a:(c||(c=o(t.map(r),e,n)))(r(s(g)))}return h.invert=function(g){return s(i((u||(u=o(e,t.map(r),YE)))(g)))},h.domain=function(g){return arguments.length?(t=Array.from(g,KE),f()):t.slice()},h.range=function(g){return arguments.length?(e=Array.from(g),f()):e.slice()},h.rangeRound=function(g){return e=Array.from(g),n=QI,f()},h.clamp=function(g){return arguments.length?(s=g?!0:Fi,f()):s!==Fi},h.interpolate=function(g){return arguments.length?(n=g,f()):n},h.unknown=function(g){return arguments.length?(a=g,h):a},function(g,y){return r=g,i=y,f()}}function ZI(){return O_()(Fi,Fi)}function Sve(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function XE(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function bv(t){return t=XE(Math.abs(t)),t?t[1]:NaN}function Eve(t,e){return function(n,r){for(var i=n.length,a=[],s=0,o=t[0],c=0;i>0&&o>0&&(c+o+1>r&&(o=Math.max(1,r-c)),a.push(n.substring(i-=o,i+o)),!((c+=o+1)>r));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Ave(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var _ve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function X0(t){if(!(e=_ve.exec(t)))throw new Error("invalid format: "+t);var e;return new eD({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}X0.prototype=eD.prototype;function eD(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}eD.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Cve(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var JE;function Tve(t,e){var n=XE(t,e);if(!n)return JE=void 0,t.toPrecision(e);var r=n[0],i=n[1],a=i-(JE=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+XE(t,Math.max(0,e+a-1))[0]}function LH(t,e){var n=XE(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const OH={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Sve,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>LH(t*100,e),r:LH,s:Tve,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function jH(t){return t}var FH=Array.prototype.map,UH=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Nve(t){var e=t.grouping===void 0||t.thousands===void 0?jH:Eve(FH.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?jH:Ave(FH.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(h,g){h=X0(h);var y=h.fill,w=h.align,S=h.sign,E=h.symbol,C=h.zero,M=h.width,R=h.comma,D=h.precision,I=h.trim,P=h.type;P==="n"?(R=!0,P="g"):OH[P]||(D===void 0&&(D=12),I=!0,P="g"),(C||y==="0"&&w==="=")&&(C=!0,y="0",w="=");var k=(g&&g.prefix!==void 0?g.prefix:"")+(E==="$"?n:E==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),U=(E==="$"?r:/[%p]/.test(P)?s:"")+(g&&g.suffix!==void 0?g.suffix:""),B=OH[P],V=/[defgprs%]/.test(P);D=D===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function H(G){var Q=k,W=U,ee,$,q;if(P==="c")W=B(G)+W,G="";else{G=+G;var J=G<0||1/G<0;if(G=isNaN(G)?c:B(Math.abs(G),D),I&&(G=Cve(G)),J&&+G==0&&S!=="+"&&(J=!1),Q=(J?S==="("?S:o:S==="-"||S==="("?"":S)+Q,W=(P==="s"&&!isNaN(G)&&JE!==void 0?UH[8+JE/3]:"")+W+(J&&S==="("?")":""),V){for(ee=-1,$=G.length;++ee<$;)if(q=G.charCodeAt(ee),48>q||q>57){W=(q===46?i+G.slice(ee+1):G.slice(ee))+W,G=G.slice(0,ee);break}}}R&&!C&&(G=e(G,1/0));var ae=Q.length+G.length+W.length,ye=ae<M?new Array(M-ae+1).join(y):"";switch(R&&C&&(G=e(ye+G,ye.length?M-W.length:1/0),ye=""),w){case"<":G=Q+G+W+ye;break;case"=":G=Q+ye+G+W;break;case"^":G=ye.slice(0,ae=ye.length>>1)+Q+G+W+ye.slice(ae);break;default:G=ye+Q+G+W;break}return a(G)}return H.toString=function(){return h+""},H}function f(h,g){var y=Math.max(-8,Math.min(8,Math.floor(bv(g)/3)))*3,w=Math.pow(10,-y),S=u((h=X0(h),h.type="f",h),{suffix:UH[8+y/3]});return function(E){return S(w*E)}}return{format:u,formatPrefix:f}}var o1,tD,m9;Rve({thousands:",",grouping:[3],currency:["$",""]});function Rve(t){return o1=Nve(t),tD=o1.format,m9=o1.formatPrefix,o1}function Mve(t){return Math.max(0,-bv(Math.abs(t)))}function Pve(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bv(e)/3)))*3-bv(Math.abs(t)))}function kve(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bv(e)-bv(t))+1}function g9(t,e,n,r){var i=GM(t,e,n),a;switch(r=X0(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Pve(i,s))&&(r.precision=a),m9(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=kve(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Mve(i))&&(r.precision=a-(r.type==="%")*2);break}}return tD(r)}function Qd(t){var e=t.domain;return t.ticks=function(n){var r=e();return zM(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return g9(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],o=r[a],c,u,f=10;for(o<s&&(u=s,s=o,o=u,u=i,i=a,a=u);f-- >0;){if(u=$M(s,o,n),u===c)return r[i]=s,r[a]=o,e(r);if(u>0)s=Math.floor(s/u)*u,o=Math.ceil(o/u)*u;else if(u<0)s=Math.ceil(s*u)/u,o=Math.floor(o*u)/u;else break;c=u}return t},t}function v9(){var t=ZI();return t.copy=function(){return sw(t,v9())},$s.apply(t,arguments),Qd(t)}function y9(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,KE),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return y9(t).unknown(e)},t=arguments.length?Array.from(t,KE):[0,1],Qd(n)}function b9(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function BH(t){return Math.log(t)}function HH(t){return Math.exp(t)}function Ive(t){return-Math.log(-t)}function Dve(t){return-Math.exp(-t)}function Lve(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Ove(t){return t===10?Lve:t===Math.E?Math.exp:e=>Math.pow(t,e)}function jve(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function zH(t){return(e,n)=>-t(-e,n)}function nD(t){const e=t(BH,HH),n=e.domain;let r=10,i,a;function s(){return i=jve(r),a=Ove(r),n()[0]<0?(i=zH(i),a=zH(a),t(Ive,Dve)):t(BH,HH),e}return e.base=function(o){return arguments.length?(r=+o,s()):r},e.domain=function(o){return arguments.length?(n(o),s()):n()},e.ticks=o=>{const c=n();let u=c[0],f=c[c.length-1];const h=f<u;h&&([u,f]=[f,u]);let g=i(u),y=i(f),w,S;const E=o==null?10:+o;let C=[];if(!(r%1)&&y-g<E){if(g=Math.floor(g),y=Math.ceil(y),u>0){for(;g<=y;++g)for(w=1;w<r;++w)if(S=g<0?w/a(-g):w*a(g),!(S<u)){if(S>f)break;C.push(S)}}else for(;g<=y;++g)for(w=r-1;w>=1;--w)if(S=g>0?w/a(-g):w*a(g),!(S<u)){if(S>f)break;C.push(S)}C.length*2<E&&(C=zM(u,f,E))}else C=zM(g,y,Math.min(y-g,E)).map(a);return h?C.reverse():C},e.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=X0(c)).precision==null&&(c.trim=!0),c=tD(c)),o===1/0)return c;const u=Math.max(1,r*o/e.ticks().length);return f=>{let h=f/a(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=u?c(f):""}},e.nice=()=>n(b9(n(),{floor:o=>a(Math.floor(i(o))),ceil:o=>a(Math.ceil(i(o)))})),e}function x9(){const t=nD(O_()).domain([1,10]);return t.copy=()=>sw(t,x9()).base(t.base()),$s.apply(t,arguments),t}function $H(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function GH(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function rD(t){var e=1,n=t($H(e),GH(e));return n.constant=function(r){return arguments.length?t($H(e=+r),GH(e)):e},Qd(n)}function w9(){var t=rD(O_());return t.copy=function(){return sw(t,w9()).constant(t.constant())},$s.apply(t,arguments)}function qH(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Fve(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Uve(t){return t<0?-t*t:t*t}function iD(t){var e=t(Fi,Fi),n=1;function r(){return n===1?t(Fi,Fi):n===.5?t(Fve,Uve):t(qH(n),qH(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Qd(e)}function aD(){var t=iD(O_());return t.copy=function(){return sw(t,aD()).exponent(t.exponent())},$s.apply(t,arguments),t}function Bve(){return aD.apply(null,arguments).exponent(.5)}function VH(t){return Math.sign(t)*t*t}function Hve(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function S9(){var t=ZI(),e=[0,1],n=!1,r;function i(a){var s=Hve(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(VH(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,KE)).map(VH)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return S9(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$s.apply(i,arguments),Qd(i)}function E9(){var t=[],e=[],n=[],r;function i(){var s=0,o=Math.max(1,e.length);for(n=new Array(o-1);++s<o;)n[s-1]=qge(t,s/o);return a}function a(s){return s==null||isNaN(s=+s)?r:e[iw(n,s)]}return a.invertExtent=function(s){var o=e.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let o of s)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Fd),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return E9().domain(t).range(e).unknown(r)},$s.apply(a,arguments)}function A9(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[iw(r,c,0,n)]:a}function o(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,o()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,o()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return A9().domain([t,e]).range(i).unknown(a)},$s.apply(Qd(s),arguments)}function _9(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[iw(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return _9().domain(t).range(e).unknown(n)},$s.apply(i,arguments)}const Z2=new Date,eR=new Date;function gr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),o=i.ceil(a);return a-s<o-a?s:o},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,o)=>{const c=[];if(a=i.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return c;let u;do c.push(u=new Date(+a)),e(a,o),t(a);while(u<a&&a<s);return c},i.filter=a=>gr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;e(s,-1),!a(s););else for(;--o>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(Z2.setTime(+a),eR.setTime(+s),t(Z2),t(eR),Math.floor(n(Z2,eR))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const QE=gr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);QE.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?gr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):QE);QE.range;const Nc=1e3,Ls=Nc*60,Rc=Ls*60,Bc=Rc*24,sD=Bc*7,WH=Bc*30,tR=Bc*365,zf=gr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Nc)},(t,e)=>(e-t)/Nc,t=>t.getUTCSeconds());zf.range;const oD=gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Nc)},(t,e)=>{t.setTime(+t+e*Ls)},(t,e)=>(e-t)/Ls,t=>t.getMinutes());oD.range;const lD=gr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Ls)},(t,e)=>(e-t)/Ls,t=>t.getUTCMinutes());lD.range;const cD=gr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Nc-t.getMinutes()*Ls)},(t,e)=>{t.setTime(+t+e*Rc)},(t,e)=>(e-t)/Rc,t=>t.getHours());cD.range;const uD=gr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Rc)},(t,e)=>(e-t)/Rc,t=>t.getUTCHours());uD.range;const ow=gr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Ls)/Bc,t=>t.getDate()-1);ow.range;const j_=gr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bc,t=>t.getUTCDate()-1);j_.range;const C9=gr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Bc,t=>Math.floor(t/Bc));C9.range;function xp(t){return gr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Ls)/sD)}const F_=xp(0),ZE=xp(1),zve=xp(2),$ve=xp(3),xv=xp(4),Gve=xp(5),qve=xp(6);F_.range;ZE.range;zve.range;$ve.range;xv.range;Gve.range;qve.range;function wp(t){return gr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/sD)}const U_=wp(0),eA=wp(1),Vve=wp(2),Wve=wp(3),wv=wp(4),Yve=wp(5),Kve=wp(6);U_.range;eA.range;Vve.range;Wve.range;wv.range;Yve.range;Kve.range;const dD=gr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());dD.range;const fD=gr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());fD.range;const Hc=gr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Hc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Hc.range;const zc=gr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());zc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:gr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});zc.range;function T9(t,e,n,r,i,a){const s=[[zf,1,Nc],[zf,5,5*Nc],[zf,15,15*Nc],[zf,30,30*Nc],[a,1,Ls],[a,5,5*Ls],[a,15,15*Ls],[a,30,30*Ls],[i,1,Rc],[i,3,3*Rc],[i,6,6*Rc],[i,12,12*Rc],[r,1,Bc],[r,2,2*Bc],[n,1,sD],[e,1,WH],[e,3,3*WH],[t,1,tR]];function o(u,f,h){const g=f<u;g&&([u,f]=[f,u]);const y=h&&typeof h.range=="function"?h:c(u,f,h),w=y?y.range(u,+f+1):[];return g?w.reverse():w}function c(u,f,h){const g=Math.abs(f-u)/h,y=WI(([,,E])=>E).right(s,g);if(y===s.length)return t.every(GM(u/tR,f/tR,h));if(y===0)return QE.every(Math.max(GM(u,f,h),1));const[w,S]=s[g/s[y-1][2]<s[y][2]/g?y-1:y];return w.every(S)}return[o,c]}const[Xve,Jve]=T9(zc,fD,U_,C9,uD,lD),[Qve,Zve]=T9(Hc,dD,F_,ow,cD,oD);function nR(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function rR(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Vy(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function eye(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,o=t.months,c=t.shortMonths,u=Wy(i),f=Yy(i),h=Wy(a),g=Yy(a),y=Wy(s),w=Yy(s),S=Wy(o),E=Yy(o),C=Wy(c),M=Yy(c),R={a:q,A:J,b:ae,B:ye,c:null,d:ZH,e:ZH,f:Eye,g:Iye,G:Lye,H:xye,I:wye,j:Sye,L:N9,m:Aye,M:_ye,p:Y,q:ne,Q:nz,s:rz,S:Cye,u:Tye,U:Nye,V:Rye,w:Mye,W:Pye,x:null,X:null,y:kye,Y:Dye,Z:Oye,"%":tz},D={a:ue,A:me,b:xe,B:Me,c:null,d:ez,e:ez,f:Bye,g:Xye,G:Qye,H:jye,I:Fye,j:Uye,L:M9,m:Hye,M:zye,p:Ce,q:pt,Q:nz,s:rz,S:$ye,u:Gye,U:qye,V:Vye,w:Wye,W:Yye,x:null,X:null,y:Kye,Y:Jye,Z:Zye,"%":tz},I={a:V,A:H,b:G,B:Q,c:W,d:JH,e:JH,f:gye,g:XH,G:KH,H:QH,I:QH,j:fye,L:mye,m:dye,M:hye,p:B,q:uye,Q:yye,s:bye,S:pye,u:aye,U:sye,V:oye,w:iye,W:lye,x:ee,X:$,y:XH,Y:KH,Z:cye,"%":vye};R.x=P(n,R),R.X=P(r,R),R.c=P(e,R),D.x=P(n,D),D.X=P(r,D),D.c=P(e,D);function P(he,He){return function(ke){var te=[],Ee=-1,be=0,Te=he.length,qe,et,Hn;for(ke instanceof Date||(ke=new Date(+ke));++Ee<Te;)he.charCodeAt(Ee)===37&&(te.push(he.slice(be,Ee)),(et=YH[qe=he.charAt(++Ee)])!=null?qe=he.charAt(++Ee):et=qe==="e"?" ":"0",(Hn=He[qe])&&(qe=Hn(ke,et)),te.push(qe),be=Ee+1);return te.push(he.slice(be,Ee)),te.join("")}}function k(he,He){return function(ke){var te=Vy(1900,void 0,1),Ee=U(te,he,ke+="",0),be,Te;if(Ee!=ke.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(He&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(be=rR(Vy(te.y,0,1)),Te=be.getUTCDay(),be=Te>4||Te===0?eA.ceil(be):eA(be),be=j_.offset(be,(te.V-1)*7),te.y=be.getUTCFullYear(),te.m=be.getUTCMonth(),te.d=be.getUTCDate()+(te.w+6)%7):(be=nR(Vy(te.y,0,1)),Te=be.getDay(),be=Te>4||Te===0?ZE.ceil(be):ZE(be),be=ow.offset(be,(te.V-1)*7),te.y=be.getFullYear(),te.m=be.getMonth(),te.d=be.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Te="Z"in te?rR(Vy(te.y,0,1)).getUTCDay():nR(Vy(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Te+5)%7:te.w+te.U*7-(Te+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,rR(te)):nR(te)}}function U(he,He,ke,te){for(var Ee=0,be=He.length,Te=ke.length,qe,et;Ee<be;){if(te>=Te)return-1;if(qe=He.charCodeAt(Ee++),qe===37){if(qe=He.charAt(Ee++),et=I[qe in YH?He.charAt(Ee++):qe],!et||(te=et(he,ke,te))<0)return-1}else if(qe!=ke.charCodeAt(te++))return-1}return te}function B(he,He,ke){var te=u.exec(He.slice(ke));return te?(he.p=f.get(te[0].toLowerCase()),ke+te[0].length):-1}function V(he,He,ke){var te=y.exec(He.slice(ke));return te?(he.w=w.get(te[0].toLowerCase()),ke+te[0].length):-1}function H(he,He,ke){var te=h.exec(He.slice(ke));return te?(he.w=g.get(te[0].toLowerCase()),ke+te[0].length):-1}function G(he,He,ke){var te=C.exec(He.slice(ke));return te?(he.m=M.get(te[0].toLowerCase()),ke+te[0].length):-1}function Q(he,He,ke){var te=S.exec(He.slice(ke));return te?(he.m=E.get(te[0].toLowerCase()),ke+te[0].length):-1}function W(he,He,ke){return U(he,e,He,ke)}function ee(he,He,ke){return U(he,n,He,ke)}function $(he,He,ke){return U(he,r,He,ke)}function q(he){return s[he.getDay()]}function J(he){return a[he.getDay()]}function ae(he){return c[he.getMonth()]}function ye(he){return o[he.getMonth()]}function Y(he){return i[+(he.getHours()>=12)]}function ne(he){return 1+~~(he.getMonth()/3)}function ue(he){return s[he.getUTCDay()]}function me(he){return a[he.getUTCDay()]}function xe(he){return c[he.getUTCMonth()]}function Me(he){return o[he.getUTCMonth()]}function Ce(he){return i[+(he.getUTCHours()>=12)]}function pt(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var He=P(he+="",R);return He.toString=function(){return he},He},parse:function(he){var He=k(he+="",!1);return He.toString=function(){return he},He},utcFormat:function(he){var He=P(he+="",D);return He.toString=function(){return he},He},utcParse:function(he){var He=k(he+="",!0);return He.toString=function(){return he},He}}}var YH={"-":"",_:" ",0:"0"},Hr=/^\s*\d+/,tye=/^%/,nye=/[\\^$*+?|[\]().{}]/g;function kt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function rye(t){return t.replace(nye,"\\$&")}function Wy(t){return new RegExp("^(?:"+t.map(rye).join("|")+")","i")}function Yy(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function iye(t,e,n){var r=Hr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function aye(t,e,n){var r=Hr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function sye(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function oye(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function lye(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function KH(t,e,n){var r=Hr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function XH(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function cye(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function uye(t,e,n){var r=Hr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function dye(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function JH(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function fye(t,e,n){var r=Hr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function QH(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function hye(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function pye(t,e,n){var r=Hr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function mye(t,e,n){var r=Hr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function gye(t,e,n){var r=Hr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function vye(t,e,n){var r=tye.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function yye(t,e,n){var r=Hr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function bye(t,e,n){var r=Hr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ZH(t,e){return kt(t.getDate(),e,2)}function xye(t,e){return kt(t.getHours(),e,2)}function wye(t,e){return kt(t.getHours()%12||12,e,2)}function Sye(t,e){return kt(1+ow.count(Hc(t),t),e,3)}function N9(t,e){return kt(t.getMilliseconds(),e,3)}function Eye(t,e){return N9(t,e)+"000"}function Aye(t,e){return kt(t.getMonth()+1,e,2)}function _ye(t,e){return kt(t.getMinutes(),e,2)}function Cye(t,e){return kt(t.getSeconds(),e,2)}function Tye(t){var e=t.getDay();return e===0?7:e}function Nye(t,e){return kt(F_.count(Hc(t)-1,t),e,2)}function R9(t){var e=t.getDay();return e>=4||e===0?xv(t):xv.ceil(t)}function Rye(t,e){return t=R9(t),kt(xv.count(Hc(t),t)+(Hc(t).getDay()===4),e,2)}function Mye(t){return t.getDay()}function Pye(t,e){return kt(ZE.count(Hc(t)-1,t),e,2)}function kye(t,e){return kt(t.getFullYear()%100,e,2)}function Iye(t,e){return t=R9(t),kt(t.getFullYear()%100,e,2)}function Dye(t,e){return kt(t.getFullYear()%1e4,e,4)}function Lye(t,e){var n=t.getDay();return t=n>=4||n===0?xv(t):xv.ceil(t),kt(t.getFullYear()%1e4,e,4)}function Oye(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+kt(e/60|0,"0",2)+kt(e%60,"0",2)}function ez(t,e){return kt(t.getUTCDate(),e,2)}function jye(t,e){return kt(t.getUTCHours(),e,2)}function Fye(t,e){return kt(t.getUTCHours()%12||12,e,2)}function Uye(t,e){return kt(1+j_.count(zc(t),t),e,3)}function M9(t,e){return kt(t.getUTCMilliseconds(),e,3)}function Bye(t,e){return M9(t,e)+"000"}function Hye(t,e){return kt(t.getUTCMonth()+1,e,2)}function zye(t,e){return kt(t.getUTCMinutes(),e,2)}function $ye(t,e){return kt(t.getUTCSeconds(),e,2)}function Gye(t){var e=t.getUTCDay();return e===0?7:e}function qye(t,e){return kt(U_.count(zc(t)-1,t),e,2)}function P9(t){var e=t.getUTCDay();return e>=4||e===0?wv(t):wv.ceil(t)}function Vye(t,e){return t=P9(t),kt(wv.count(zc(t),t)+(zc(t).getUTCDay()===4),e,2)}function Wye(t){return t.getUTCDay()}function Yye(t,e){return kt(eA.count(zc(t)-1,t),e,2)}function Kye(t,e){return kt(t.getUTCFullYear()%100,e,2)}function Xye(t,e){return t=P9(t),kt(t.getUTCFullYear()%100,e,2)}function Jye(t,e){return kt(t.getUTCFullYear()%1e4,e,4)}function Qye(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wv(t):wv.ceil(t),kt(t.getUTCFullYear()%1e4,e,4)}function Zye(){return"+0000"}function tz(){return"%"}function nz(t){return+t}function rz(t){return Math.floor(+t/1e3)}var am,k9,I9;e0e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function e0e(t){return am=eye(t),k9=am.format,am.parse,I9=am.utcFormat,am.utcParse,am}function t0e(t){return new Date(t)}function n0e(t){return t instanceof Date?+t:+new Date(+t)}function hD(t,e,n,r,i,a,s,o,c,u){var f=ZI(),h=f.invert,g=f.domain,y=u(".%L"),w=u(":%S"),S=u("%I:%M"),E=u("%I %p"),C=u("%a %d"),M=u("%b %d"),R=u("%B"),D=u("%Y");function I(P){return(c(P)<P?y:o(P)<P?w:s(P)<P?S:a(P)<P?E:r(P)<P?i(P)<P?C:M:n(P)<P?R:D)(P)}return f.invert=function(P){return new Date(h(P))},f.domain=function(P){return arguments.length?g(Array.from(P,n0e)):g().map(t0e)},f.ticks=function(P){var k=g();return t(k[0],k[k.length-1],P??10)},f.tickFormat=function(P,k){return k==null?I:u(k)},f.nice=function(P){var k=g();return(!P||typeof P.range!="function")&&(P=e(k[0],k[k.length-1],P??10)),P?g(b9(k,P)):f},f.copy=function(){return sw(f,hD(t,e,n,r,i,a,s,o,c,u))},f}function r0e(){return $s.apply(hD(Qve,Zve,Hc,dD,F_,ow,cD,oD,zf,k9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function i0e(){return $s.apply(hD(Xve,Jve,zc,fD,U_,j_,uD,lD,zf,I9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function B_(){var t=0,e=1,n,r,i,a,s=Fi,o=!1,c;function u(h){return h==null||isNaN(h=+h)?c:s(i===0?.5:(h=(a(h)-n)*i,o?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([t,e]=h,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(h){return arguments.length?(o=!!h,u):o},u.interpolator=function(h){return arguments.length?(s=h,u):s};function f(h){return function(g){var y,w;return arguments.length?([y,w]=g,s=h(y,w),u):[s(0),s(1)]}}return u.range=f(Iv),u.rangeRound=f(QI),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return a=h,n=h(t),r=h(e),i=n===r?0:1/(r-n),u}}function Zd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function D9(){var t=Qd(B_()(Fi));return t.copy=function(){return Zd(t,D9())},nu.apply(t,arguments)}function L9(){var t=nD(B_()).domain([1,10]);return t.copy=function(){return Zd(t,L9()).base(t.base())},nu.apply(t,arguments)}function O9(){var t=rD(B_());return t.copy=function(){return Zd(t,O9()).constant(t.constant())},nu.apply(t,arguments)}function pD(){var t=iD(B_());return t.copy=function(){return Zd(t,pD()).exponent(t.exponent())},nu.apply(t,arguments)}function a0e(){return pD.apply(null,arguments).exponent(.5)}function j9(){var t=[],e=Fi;function n(r){if(r!=null&&!isNaN(r=+r))return e((iw(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Fd),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Gge(t,a/r))},n.copy=function(){return j9(e).domain(t)},nu.apply(n,arguments)}function H_(){var t=0,e=.5,n=1,r=1,i,a,s,o,c,u=Fi,f,h=!1,g;function y(S){return isNaN(S=+S)?g:(S=.5+((S=+f(S))-a)*(r*S<r*a?o:c),u(h?Math.max(0,Math.min(1,S)):S))}y.domain=function(S){return arguments.length?([t,e,n]=S,i=f(t=+t),a=f(e=+e),s=f(n=+n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y):[t,e,n]},y.clamp=function(S){return arguments.length?(h=!!S,y):h},y.interpolator=function(S){return arguments.length?(u=S,y):u};function w(S){return function(E){var C,M,R;return arguments.length?([C,M,R]=E,u=vve(S,[C,M,R]),y):[u(0),u(.5),u(1)]}}return y.range=w(Iv),y.rangeRound=w(QI),y.unknown=function(S){return arguments.length?(g=S,y):g},function(S){return f=S,i=S(t),a=S(e),s=S(n),o=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function F9(){var t=Qd(H_()(Fi));return t.copy=function(){return Zd(t,F9())},nu.apply(t,arguments)}function U9(){var t=nD(H_()).domain([.1,1,10]);return t.copy=function(){return Zd(t,U9()).base(t.base())},nu.apply(t,arguments)}function B9(){var t=rD(H_());return t.copy=function(){return Zd(t,B9()).constant(t.constant())},nu.apply(t,arguments)}function mD(){var t=iD(H_());return t.copy=function(){return Zd(t,mD()).exponent(t.exponent())},nu.apply(t,arguments)}function s0e(){return mD.apply(null,arguments).exponent(.5)}const i0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:KI,scaleDiverging:F9,scaleDivergingLog:U9,scaleDivergingPow:mD,scaleDivergingSqrt:s0e,scaleDivergingSymlog:B9,scaleIdentity:y9,scaleImplicit:qM,scaleLinear:v9,scaleLog:x9,scaleOrdinal:YI,scalePoint:Wge,scalePow:aD,scaleQuantile:E9,scaleQuantize:A9,scaleRadial:S9,scaleSequential:D9,scaleSequentialLog:L9,scaleSequentialPow:pD,scaleSequentialQuantile:j9,scaleSequentialSqrt:a0e,scaleSequentialSymlog:O9,scaleSqrt:Bve,scaleSymlog:w9,scaleThreshold:_9,scaleTime:r0e,scaleUtc:i0e,tickFormat:g9},Symbol.toStringTag,{value:"Module"}));var ru=t=>t.chartData,H9=fe([ru],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),z9=(t,e,n,r)=>r?H9(t):ru(t),o0e=(t,e,n)=>n?H9(t):ru(t);function Gd(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(wn(e)&&wn(n))return!0}return!1}function iz(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function $9(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(wn(n))i=n;else if(typeof n=="function")return;if(wn(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(Gd(s))return s}}function l0e(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(Gd(r))return iz(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,o;if(i==="auto")e!=null&&(s=Math.min(...e));else if(We(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&vB.test(i)){var c=vB.exec(i);if(c==null||c[1]==null||e==null)s=void 0;else{var u=+c[1];s=e[0]-u}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(o=Math.max(...e));else if(We(a))o=a;else if(typeof a=="function")try{e!=null&&(o=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&yB.test(a)){var f=yB.exec(a);if(f==null||f[1]==null||e==null)o=void 0;else{var h=+f[1];o=e[1]+h}}else o=e==null?void 0:e[1];var g=[s,o];if(Gd(g))return e==null?g:iz(g,e,n)}}}var Dv=1e9,c0e={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vD,xn=!0,zs="[DecimalError] ",ap=zs+"Invalid argument: ",gD=zs+"Exponent out of range: ",Lv=Math.floor,kf=Math.pow,u0e=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ka,Dr=1e7,hn=7,G9=9007199254740991,tA=Lv(G9/hn),Oe={};Oe.absoluteValue=Oe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Oe.comparedTo=Oe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Oe.decimalPlaces=Oe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*hn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Oe.dividedBy=Oe.div=function(t){return Pc(this,new this.constructor(t))};Oe.dividedToIntegerBy=Oe.idiv=function(t){var e=this,n=e.constructor;return an(Pc(e,new n(t),0,1),n.precision)};Oe.equals=Oe.eq=function(t){return!this.cmp(t)};Oe.exponent=function(){return ar(this)};Oe.greaterThan=Oe.gt=function(t){return this.cmp(t)>0};Oe.greaterThanOrEqualTo=Oe.gte=function(t){return this.cmp(t)>=0};Oe.isInteger=Oe.isint=function(){return this.e>this.d.length-2};Oe.isNegative=Oe.isneg=function(){return this.s<0};Oe.isPositive=Oe.ispos=function(){return this.s>0};Oe.isZero=function(){return this.s===0};Oe.lessThan=Oe.lt=function(t){return this.cmp(t)<0};Oe.lessThanOrEqualTo=Oe.lte=function(t){return this.cmp(t)<1};Oe.logarithm=Oe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(Ka))throw Error(zs+"NaN");if(n.s<1)throw Error(zs+(n.s?"NaN":"-Infinity"));return n.eq(Ka)?new r(0):(xn=!1,e=Pc(J0(n,a),J0(t,a),a),xn=!0,an(e,i))};Oe.minus=Oe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?W9(e,t):q9(e,(t.s=-t.s,t))};Oe.modulo=Oe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(zs+"NaN");return n.s?(xn=!1,e=Pc(n,t,0,1).times(t),xn=!0,n.minus(e)):an(new r(n),i)};Oe.naturalExponential=Oe.exp=function(){return V9(this)};Oe.naturalLogarithm=Oe.ln=function(){return J0(this)};Oe.negated=Oe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Oe.plus=Oe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?q9(e,t):W9(e,(t.s=-t.s,t))};Oe.precision=Oe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(ap+t);if(e=ar(i)+1,r=i.d.length-1,n=r*hn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Oe.squareRoot=Oe.sqrt=function(){var t,e,n,r,i,a,s,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(zs+"NaN")}for(t=ar(o),xn=!1,i=Math.sqrt(+o),i==0||i==1/0?(e=ul(o.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Lv((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(Pc(o,a,s+2)).times(.5),ul(a.d).slice(0,s)===(e=ul(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(an(a,n+1,0),a.times(a).eq(o)){r=a;break}}else if(e!="9999")break;s+=4}return xn=!0,an(r,n)};Oe.times=Oe.mul=function(t){var e,n,r,i,a,s,o,c,u,f=this,h=f.constructor,g=f.d,y=(t=new h(t)).d;if(!f.s||!t.s)return new h(0);for(t.s*=f.s,n=f.e+t.e,c=g.length,u=y.length,c<u&&(a=g,g=y,y=a,s=c,c=u,u=s),a=[],s=c+u,r=s;r--;)a.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)o=a[i]+y[r]*g[i-r-1]+e,a[i--]=o%Dr|0,e=o/Dr|0;a[i]=(a[i]+e)%Dr|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,xn?an(t,h.precision):t};Oe.toDecimalPlaces=Oe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(gl(t,0,Dv),e===void 0?e=r.rounding:gl(e,0,8),an(n,t+ar(n)+1,e))};Oe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=dp(r,!0):(gl(t,0,Dv),e===void 0?e=i.rounding:gl(e,0,8),r=an(new i(r),t+1,e),n=dp(r,!0,t+1)),n};Oe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?dp(i):(gl(t,0,Dv),e===void 0?e=a.rounding:gl(e,0,8),r=an(new a(i),t+ar(i)+1,e),n=dp(r.abs(),!1,t+ar(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Oe.toInteger=Oe.toint=function(){var t=this,e=t.constructor;return an(new e(t),ar(t)+1,e.rounding)};Oe.toNumber=function(){return+this};Oe.toPower=Oe.pow=function(t){var e,n,r,i,a,s,o=this,c=o.constructor,u=12,f=+(t=new c(t));if(!t.s)return new c(Ka);if(o=new c(o),!o.s){if(t.s<1)throw Error(zs+"Infinity");return o}if(o.eq(Ka))return o;if(r=c.precision,t.eq(Ka))return an(o,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=o.s,s){if((n=f<0?-f:f)<=G9){for(i=new c(Ka),e=Math.ceil(r/hn+4),xn=!1;n%2&&(i=i.times(o),sz(i.d,e)),n=Lv(n/2),n!==0;)o=o.times(o),sz(o.d,e);return xn=!0,t.s<0?new c(Ka).div(i):an(i,r)}}else if(a<0)throw Error(zs+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,xn=!1,i=t.times(J0(o,r+u)),xn=!0,i=V9(i),i.s=a,i};Oe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=ar(i),r=dp(i,n<=a.toExpNeg||n>=a.toExpPos)):(gl(t,1,Dv),e===void 0?e=a.rounding:gl(e,0,8),i=an(new a(i),t,e),n=ar(i),r=dp(i,t<=n||n<=a.toExpNeg,t)),r};Oe.toSignificantDigits=Oe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(gl(t,1,Dv),e===void 0?e=r.rounding:gl(e,0,8)),an(new r(n),t,e)};Oe.toString=Oe.valueOf=Oe.val=Oe.toJSON=Oe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ar(t),n=t.constructor;return dp(t,e<=n.toExpNeg||e>=n.toExpPos)};function q9(t,e){var n,r,i,a,s,o,c,u,f=t.constructor,h=f.precision;if(!t.s||!e.s)return e.s||(e=new f(t)),xn?an(e,h):e;if(c=t.d,u=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,o=u.length):(r=u,i=s,o=c.length),s=Math.ceil(h/hn),o=s>o?s+1:o+1,a>o&&(a=o,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(o=c.length,a=u.length,o-a<0&&(a=o,r=u,u=c,c=r),n=0;a;)n=(c[--a]=c[a]+u[a]+n)/Dr|0,c[a]%=Dr;for(n&&(c.unshift(n),++i),o=c.length;c[--o]==0;)c.pop();return e.d=c,e.e=i,xn?an(e,h):e}function gl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(ap+t)}function ul(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=hn-r.length,n&&(a+=Lu(n)),a+=r;s=t[e],r=s+"",n=hn-r.length,n&&(a+=Lu(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Pc=(function(){function t(r,i){var a,s=0,o=r.length;for(r=r.slice();o--;)a=r[o]*i+s,r[o]=a%Dr|0,s=a/Dr|0;return s&&r.unshift(s),r}function e(r,i,a,s){var o,c;if(a!=s)c=a>s?1:-1;else for(o=c=0;o<a;o++)if(r[o]!=i[o]){c=r[o]>i[o]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Dr+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var o,c,u,f,h,g,y,w,S,E,C,M,R,D,I,P,k,U,B=r.constructor,V=r.s==i.s?1:-1,H=r.d,G=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(zs+"Division by zero");for(c=r.e-i.e,k=G.length,I=H.length,y=new B(V),w=y.d=[],u=0;G[u]==(H[u]||0);)++u;if(G[u]>(H[u]||0)&&--c,a==null?M=a=B.precision:s?M=a+(ar(r)-ar(i))+1:M=a,M<0)return new B(0);if(M=M/hn+2|0,u=0,k==1)for(f=0,G=G[0],M++;(u<I||f)&&M--;u++)R=f*Dr+(H[u]||0),w[u]=R/G|0,f=R%G|0;else{for(f=Dr/(G[0]+1)|0,f>1&&(G=t(G,f),H=t(H,f),k=G.length,I=H.length),D=k,S=H.slice(0,k),E=S.length;E<k;)S[E++]=0;U=G.slice(),U.unshift(0),P=G[0],G[1]>=Dr/2&&++P;do f=0,o=e(G,S,k,E),o<0?(C=S[0],k!=E&&(C=C*Dr+(S[1]||0)),f=C/P|0,f>1?(f>=Dr&&(f=Dr-1),h=t(G,f),g=h.length,E=S.length,o=e(h,S,g,E),o==1&&(f--,n(h,k<g?U:G,g))):(f==0&&(o=f=1),h=G.slice()),g=h.length,g<E&&h.unshift(0),n(S,h,E),o==-1&&(E=S.length,o=e(G,S,k,E),o<1&&(f++,n(S,k<E?U:G,E))),E=S.length):o===0&&(f++,S=[0]),w[u++]=f,o&&S[0]?S[E++]=H[D]||0:(S=[H[D]],E=1);while((D++<I||S[0]!==void 0)&&M--)}return w[0]||w.shift(),y.e=c,an(y,s?a+ar(y)+1:a)}})();function V9(t,e){var n,r,i,a,s,o,c=0,u=0,f=t.constructor,h=f.precision;if(ar(t)>16)throw Error(gD+ar(t));if(!t.s)return new f(Ka);for(xn=!1,o=h,s=new f(.03125);t.abs().gte(.1);)t=t.times(s),u+=5;for(r=Math.log(kf(2,u))/Math.LN10*2+5|0,o+=r,n=i=a=new f(Ka),f.precision=o;;){if(i=an(i.times(t),o),n=n.times(++c),s=a.plus(Pc(i,n,o)),ul(s.d).slice(0,o)===ul(a.d).slice(0,o)){for(;u--;)a=an(a.times(a),o);return f.precision=h,e==null?(xn=!0,an(a,h)):a}a=s}}function ar(t){for(var e=t.e*hn,n=t.d[0];n>=10;n/=10)e++;return e}function iR(t,e,n){if(e>t.LN10.sd())throw xn=!0,n&&(t.precision=n),Error(zs+"LN10 precision limit exceeded");return an(new t(t.LN10),e)}function Lu(t){for(var e="";t--;)e+="0";return e}function J0(t,e){var n,r,i,a,s,o,c,u,f,h=1,g=10,y=t,w=y.d,S=y.constructor,E=S.precision;if(y.s<1)throw Error(zs+(y.s?"NaN":"-Infinity"));if(y.eq(Ka))return new S(0);if(e==null?(xn=!1,u=E):u=e,y.eq(10))return e==null&&(xn=!0),iR(S,u);if(u+=g,S.precision=u,n=ul(w),r=n.charAt(0),a=ar(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=ul(y.d),r=n.charAt(0),h++;a=ar(y),r>1?(y=new S("0."+n),a++):y=new S(r+"."+n.slice(1))}else return c=iR(S,u+2,E).times(a+""),y=J0(new S(r+"."+n.slice(1)),u-g).plus(c),S.precision=E,e==null?(xn=!0,an(y,E)):y;for(o=s=y=Pc(y.minus(Ka),y.plus(Ka),u),f=an(y.times(y),u),i=3;;){if(s=an(s.times(f),u),c=o.plus(Pc(s,new S(i),u)),ul(c.d).slice(0,u)===ul(o.d).slice(0,u))return o=o.times(2),a!==0&&(o=o.plus(iR(S,u+2,E).times(a+""))),o=Pc(o,new S(h),u),S.precision=E,e==null?(xn=!0,an(o,E)):o;o=c,i+=2}}function az(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Lv(n/hn),t.d=[],r=(n+1)%hn,n<0&&(r+=hn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=hn;r<i;)t.d.push(+e.slice(r,r+=hn));e=e.slice(r),r=hn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),xn&&(t.e>tA||t.e<-tA))throw Error(gD+n)}else t.s=0,t.e=0,t.d=[0];return t}function an(t,e,n){var r,i,a,s,o,c,u,f,h=t.d;for(s=1,a=h[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=hn,i=e,u=h[f=0];else{if(f=Math.ceil((r+1)/hn),a=h.length,f>=a)return t;for(u=a=h[f],s=1;a>=10;a/=10)s++;r%=hn,i=r-hn+s}if(n!==void 0&&(a=kf(10,s-i-1),o=u/a%10|0,c=e<0||h[f+1]!==void 0||u%a,c=n<4?(o||c)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||c||n==6&&(r>0?i>0?u/kf(10,s-i):0:h[f-1])%10&1||n==(t.s<0?8:7))),e<1||!h[0])return c?(a=ar(t),h.length=1,e=e-a-1,h[0]=kf(10,(hn-e%hn)%hn),t.e=Lv(-e/hn)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(r==0?(h.length=f,a=1,f--):(h.length=f+1,a=kf(10,hn-r),h[f]=i>0?(u/kf(10,s-i)%kf(10,i)|0)*a:0),c)for(;;)if(f==0){(h[0]+=a)==Dr&&(h[0]=1,++t.e);break}else{if(h[f]+=a,h[f]!=Dr)break;h[f--]=0,a=1}for(r=h.length;h[--r]===0;)h.pop();if(xn&&(t.e>tA||t.e<-tA))throw Error(gD+ar(t));return t}function W9(t,e){var n,r,i,a,s,o,c,u,f,h,g=t.constructor,y=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),xn?an(e,y):e;if(c=t.d,h=e.d,r=e.e,u=t.e,c=c.slice(),s=u-r,s){for(f=s<0,f?(n=c,s=-s,o=h.length):(n=h,r=u,o=c.length),i=Math.max(Math.ceil(y/hn),o)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(c[i]!=h[i]){f=c[i]<h[i];break}s=0}for(f&&(n=c,c=h,h=n,e.s=-e.s),o=c.length,i=h.length-o;i>0;--i)c[o++]=0;for(i=h.length;i>s;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Dr-1;--c[a],c[i]+=Dr}c[i]-=h[i]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,xn?an(e,y):e):new g(0)}function dp(t,e,n){var r,i=ar(t),a=ul(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Lu(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Lu(-i-1)+a,n&&(r=n-s)>0&&(a+=Lu(r))):i>=s?(a+=Lu(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Lu(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Lu(r))),t.s<0?"-"+a:a}function sz(t,e){if(t.length>e)return t.length=e,!0}function Y9(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(ap+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return az(s,a.toString())}else if(typeof a!="string")throw Error(ap+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,u0e.test(a))az(s,a);else throw Error(ap+a)}if(i.prototype=Oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Y9,i.config=i.set=d0e,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function d0e(t){if(!t||typeof t!="object")throw Error(zs+"Object expected");var e,n,r,i=["precision",1,Dv,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Lv(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(ap+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(ap+n+": "+r);return this}var vD=Y9(c0e);Ka=new vD(1);const zt=vD;var f0e=t=>t,K9={},X9=t=>t===K9,oz=t=>function e(){return arguments.length===0||arguments.length===1&&X9(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},J9=(t,e)=>t===1?e:oz(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==K9).length;return a>=t?e(...r):J9(t-a,oz(function(){for(var s=arguments.length,o=new Array(s),c=0;c<s;c++)o[c]=arguments[c];var u=r.map(f=>X9(f)?o.shift():f);return e(...u,...o)}))}),h0e=t=>J9(t.length,t),KM=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},p0e=h0e((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),m0e=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return f0e;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((o,c)=>c(o),a(...arguments))}};function Q9(t){var e;return t===0?e=1:e=Math.floor(new zt(t).abs().log(10).toNumber())+1,e}function Z9(t,e,n){for(var r=new zt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var eW=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},tW=(t,e,n)=>{if(t.lte(0))return new zt(0);var r=Q9(t.toNumber()),i=new zt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,o=new zt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=o.mul(i);return e?new zt(c.toNumber()):new zt(Math.ceil(c.toNumber()))},g0e=(t,e,n)=>{var r=new zt(1),i=new zt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new zt(10).pow(Q9(t)-1),i=new zt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new zt(Math.floor(t)))}else t===0?i=new zt(Math.floor((e-1)/2)):n||(i=new zt(Math.floor(t)));var s=Math.floor((e-1)/2),o=m0e(p0e(c=>i.add(new zt(c-s).mul(r)).toNumber()),KM);return o(0,e)},nW=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new zt(0),tickMin:new zt(0),tickMax:new zt(0)};var s=tW(new zt(n).sub(e).div(r-1),i,a),o;e<=0&&n>=0?o=new zt(0):(o=new zt(e).add(n).div(2),o=o.sub(new zt(o).mod(s)));var c=Math.ceil(o.sub(e).div(s).toNumber()),u=Math.ceil(new zt(n).sub(o).div(s).toNumber()),f=c+u+1;return f>r?nW(e,n,r,i,a+1):(f<r&&(u=n>0?u+(r-f):u,c=n>0?c:c+(r-f)),{step:s,tickMin:o.sub(new zt(c).mul(s)),tickMax:o.add(new zt(u).mul(s))})},v0e=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[o,c]=eW([n,r]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...KM(0,i-1).map(()=>1/0)]:[...KM(0,i-1).map(()=>-1/0),c];return n>r?u.reverse():u}if(o===c)return g0e(o,i,a);var{step:f,tickMin:h,tickMax:g}=nW(o,c,s,a,0),y=Z9(h,g.add(new zt(.1).mul(f)),f);return n>r?y.reverse():y},y0e=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,o]=eW([r,i]);if(s===-1/0||o===1/0)return[r,i];if(s===o)return[s];var c=Math.max(n,2),u=tW(new zt(o).sub(s).div(c-1),a,0),f=[...Z9(new zt(s),new zt(o),u),o];return a===!1&&(f=f.map(h=>Math.round(h))),r>i?f.reverse():f},b0e=t=>t.rootProps.barCategoryGap,z_=t=>t.rootProps.stackOffset,rW=t=>t.rootProps.reverseStackOrder,yD=t=>t.options.chartName,bD=t=>t.rootProps.syncId,iW=t=>t.rootProps.syncMethod,xD=t=>t.options.eventEmitter,x0e=t=>t.rootProps.baseValue,Ui={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Cc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Va={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},$_=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},w0e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Cc.angleAxisId,includeHidden:!1,name:void 0,reversed:Cc.reversed,scale:Cc.scale,tick:Cc.tick,tickCount:void 0,ticks:void 0,type:Cc.type,unit:void 0},S0e={allowDataOverflow:Va.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Va.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Va.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Va.scale,tick:Va.tick,tickCount:Va.tickCount,ticks:void 0,type:Va.type,unit:void 0},E0e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Cc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cc.scale,tick:Cc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},A0e={allowDataOverflow:Va.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Va.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Va.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Va.scale,tick:Va.tick,tickCount:Va.tickCount,ticks:void 0,type:"category",unit:void 0},wD=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?E0e:w0e,SD=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?A0e:S0e,G_=t=>t.polarOptions,ED=fe([eu,tu,ui],vge),aW=fe([G_,ED],(t,e)=>{if(t!=null)return $d(t.innerRadius,e,0)}),sW=fe([G_,ED],(t,e)=>{if(t!=null)return $d(t.outerRadius,e,e*.8)}),_0e=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},oW=fe([G_],_0e);fe([wD,oW],$_);var lW=fe([ED,aW,sW],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});fe([SD,lW],$_);var cW=fe([cn,G_,aW,sW,eu,tu],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:o,startAngle:c,endAngle:u}=e;return{cx:$d(s,i,i/2),cy:$d(o,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:u,clockWise:!1}}}),vr=(t,e)=>e,q_=(t,e,n)=>n;function AD(t){return t==null?void 0:t.id}function uW(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var f=AD(o);u.forEach((h,g)=>{var y=a==null||i?g:String(li(h,a,null)),w=li(h,o.dataKey,0),S;s.has(y)?S=s.get(y):S={},Object.assign(S,{[f]:w}),s.set(y,S)})}}),Array.from(s.values())}function _D(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var V_=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function W_(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function C0e(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var yr=t=>{var e=cn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Ov=t=>t.tooltip.settings.axisId;function lz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(n),!0).forEach(function(r){T0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T0e(t,e,n){return(e=N0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N0e(t){var e=R0e(t,"string");return typeof e=="symbol"?e:e+""}function R0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var XM=[0,"auto"],_r={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},dW=(t,e)=>t.cartesianAxis.xAxis[e],iu=(t,e)=>{var n=dW(t,e);return n??_r},Cr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:XM,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:tw},fW=(t,e)=>t.cartesianAxis.yAxis[e],au=(t,e)=>{var n=fW(t,e);return n??Cr},M0e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},CD=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??M0e},qi=(t,e,n)=>{switch(e){case"xAxis":return iu(t,n);case"yAxis":return au(t,n);case"zAxis":return CD(t,n);case"angleAxis":return wD(t,n);case"radiusAxis":return SD(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},P0e=(t,e,n)=>{switch(e){case"xAxis":return iu(t,n);case"yAxis":return au(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},lw=(t,e,n)=>{switch(e){case"xAxis":return iu(t,n);case"yAxis":return au(t,n);case"angleAxis":return wD(t,n);case"radiusAxis":return SD(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},hW=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function pW(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var mW=t=>t.graphicalItems.cartesianItems,k0e=fe([vr,q_],pW),gW=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),cw=fe([mW,qi,k0e],gW,{memoizeOptions:{resultEqualityCheck:W_}}),vW=fe([cw],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(_D)),yW=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),I0e=fe([cw],yW),bW=t=>t.map(e=>e.data).filter(Boolean).flat(1),D0e=fe([cw],bW,{memoizeOptions:{resultEqualityCheck:W_}}),xW=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},TD=fe([D0e,z9],xW),wW=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:li(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:li(i,r)}))):t.map(r=>({value:r})),Y_=fe([TD,qi,cw],wW);function SW(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function P1(t){if(pl(t)||t instanceof Date){var e=Number(t);if(wn(e))return e}}function cz(t){if(Array.isArray(t)){var e=[P1(t[0]),P1(t[1])];return Gd(e)?e:void 0}var n=P1(t);if(n!=null)return[n,n]}function $c(t){return t.map(P1).filter(Kde)}function L0e(t,e,n){return!n||typeof e!="number"||So(e)?[]:n.length?$c(n.flatMap(r=>{var i=li(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!wn(a)||!wn(s)))return[e-a,e+s]})):[]}var br=t=>{var e=yr(t),n=Ov(t);return lw(t,e,n)},uw=fe([br],t=>t==null?void 0:t.dataKey),O0e=fe([vW,z9,br],uW),EW=(t,e,n,r)=>{var i={},a=e.reduce((s,o)=>{if(o.stackId==null)return s;var c=s[o.stackId];return c==null&&(c=[]),c.push(o),s[o.stackId]=c,s},i);return Object.fromEntries(Object.entries(a).map(s=>{var[o,c]=s,u=r?[...c].reverse():c,f=u.map(AD);return[o,{stackedData:ape(t,f,n),graphicalItems:u}]}))},AW=fe([O0e,vW,z_,rW],EW),_W=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=cpe(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},j0e=fe([qi],t=>t.allowDataOverflow),ND=t=>{var e;if(t==null||!("domain"in t))return XM;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=$c(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:XM},CW=fe([qi],ND),TW=fe([CW,j0e],$9),F0e=fe([AW,ru,vr,TW],_W,{memoizeOptions:{resultEqualityCheck:V_}}),RD=t=>t.errorBars,U0e=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>SW(n,r)),rA=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),o=Math.max(...a);return[s,o]}},NW=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(o=>{n.forEach(c=>{var u,f,h=(u=r[c.id])===null||u===void 0?void 0:u.filter(C=>SW(i,C)),g=li(o,(f=e.dataKey)!==null&&f!==void 0?f:c.dataKey),y=L0e(o,g,h);if(y.length>=2){var w=Math.min(...y),S=Math.max(...y);(a==null||w<a)&&(a=w),(s==null||S>s)&&(s=S)}var E=cz(g);E!=null&&(a=a==null?E[0]:Math.min(a,E[0]),s=s==null?E[1]:Math.max(s,E[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(o=>{var c=cz(li(o,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),wn(a)&&wn(s))return[a,s]},B0e=fe([TD,qi,I0e,RD,vr],NW,{memoizeOptions:{resultEqualityCheck:V_}});function H0e(t){var{value:e}=t;if(pl(e)||e instanceof Date)return e}var z0e=(t,e,n)=>{var r=t.map(H0e).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&$q(r))?o9(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},RW=t=>t.referenceElements.dots,jv=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),$0e=fe([RW,vr,q_],jv),MW=t=>t.referenceElements.areas,G0e=fe([MW,vr,q_],jv),PW=t=>t.referenceElements.lines,q0e=fe([PW,vr,q_],jv),kW=(t,e)=>{if(t!=null){var n=$c(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},V0e=fe($0e,vr,kW),IW=(t,e)=>{if(t!=null){var n=$c(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},W0e=fe([G0e,vr],IW);function Y0e(t){var e;if(t.x!=null)return $c([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:$c(n)}function K0e(t){var e;if(t.y!=null)return $c([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:$c(n)}var DW=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?Y0e(r):K0e(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},X0e=fe([q0e,vr],DW),J0e=fe(V0e,X0e,W0e,(t,e,n)=>rA(t,n,e)),LW=(t,e,n,r,i,a,s,o)=>{if(n!=null)return n;var c=s==="vertical"&&o==="xAxis"||s==="horizontal"&&o==="yAxis",u=c?rA(r,a,i):rA(a,i);return l0e(e,u,t.allowDataOverflow)},Q0e=fe([qi,CW,TW,F0e,B0e,J0e,cn,vr],LW,{memoizeOptions:{resultEqualityCheck:V_}}),Z0e=[0,1],OW=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:o,type:c}=t,u=Zc(e,a);if(u&&o==null){var f;return o9(0,(f=n==null?void 0:n.length)!==null&&f!==void 0?f:0)}return c==="category"?z0e(r,t,u):i==="expand"?Z0e:s}},MD=fe([qi,cn,TD,Y_,z_,vr,Q0e],OW),jW=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(II(a));return o in i0?o:"point"}}},dw=fe([qi,cn,hW,yD,vr],jW);function ebe(t){if(t!=null){if(t in i0)return i0[t]();var e="scale".concat(II(t));if(e in i0)return i0[e]()}}function PD(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=ebe(e);if(i!=null){var a=i.domain(n).range(r);return tpe(a),a}}}var FW=(t,e,n)=>{var r=ND(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&Gd(t))return v0e(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Gd(t))return y0e(t,e.tickCount,e.allowDecimals)}},kD=fe([MD,lw,dw],FW),UW=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&Gd(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],o=n[n.length-1];return[Math.min(i,a),Math.max(s,o)]}return e},tbe=fe([qi,MD,kD,vr],UW),nbe=fe(Y_,qi,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from($c(t.map(h=>h.value))).sort((h,g)=>h-g),i=r[0],a=r[r.length-1];if(i==null||a==null)return 1/0;var s=a-i;if(s===0)return 1/0;for(var o=0;o<r.length-1;o++){var c=r[o],u=r[o+1];if(!(c==null||u==null)){var f=u-c;n=Math.min(n,f)}}return n/s}}),BW=fe(nbe,cn,b0e,ui,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!wn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=$d(n,t*a),o=t*a/2;return o-s-(o-s)/a*s}return 0}),rbe=(t,e,n)=>{var r=iu(t,e);return r==null||typeof r.padding!="string"?0:BW(t,"xAxis",e,n,r.padding)},ibe=(t,e,n)=>{var r=au(t,e);return r==null||typeof r.padding!="string"?0:BW(t,"yAxis",e,n,r.padding)},abe=fe(iu,rbe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),sbe=fe(au,ibe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),obe=fe([ui,abe,M_,R_,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),lbe=fe([ui,cn,sbe,M_,R_,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),fw=(t,e,n,r)=>{var i;switch(e){case"xAxis":return obe(t,n,r);case"yAxis":return lbe(t,n,r);case"zAxis":return(i=CD(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return oW(t);case"radiusAxis":return lW(t,n);default:return}},HW=fe([qi,fw],$_),K_=fe([qi,dw,tbe,HW],PD);fe([cw,RD,vr],U0e);function zW(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var X_=(t,e)=>e,J_=(t,e,n)=>n,cbe=fe(T_,X_,J_,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(zW)),ube=fe(N_,X_,J_,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(zW)),$W=(t,e)=>({width:t.width,height:e.height}),dbe=(t,e)=>{var n=typeof e.width=="number"?e.width:tw;return{width:n,height:t.height}},fbe=fe(ui,iu,$W),hbe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},pbe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},mbe=fe(tu,ui,cbe,X_,J_,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=$W(e,o);s==null&&(s=hbe(e,r,t));var u=r==="top"&&!i||r==="bottom"&&i;a[o.id]=s-Number(u)*c.height,s+=(u?-1:1)*c.height}),a}),gbe=fe(eu,ui,ube,X_,J_,(t,e,n,r,i)=>{var a={},s;return n.forEach(o=>{var c=dbe(e,o);s==null&&(s=pbe(e,r,t));var u=r==="left"&&!i||r==="right"&&i;a[o.id]=s-Number(u)*c.width,s+=(u?-1:1)*c.width}),a}),vbe=(t,e)=>{var n=iu(t,e);if(n!=null)return mbe(t,n.orientation,n.mirror)},ybe=fe([ui,iu,vbe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),bbe=(t,e)=>{var n=au(t,e);if(n!=null)return gbe(t,n.orientation,n.mirror)},xbe=fe([ui,au,bbe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),wbe=fe(ui,au,(t,e)=>{var n=typeof e.width=="number"?e.width:tw;return{width:n,height:t.height}}),GW=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,o=Zc(t,r),c=e.map(u=>u.value);if(s&&o&&a==="category"&&i&&$q(c))return c}},ID=fe([cn,Y_,qi,vr],GW),qW=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=Zc(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(o=>o.value)}},DD=fe([cn,Y_,lw,vr],qW),uz=fe([cn,P0e,dw,K_,ID,DD,fw,kD,vr],(t,e,n,r,i,a,s,o,c)=>{if(e!=null){var u=Zc(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:o,range:s,realScaleType:n,scale:r}}}),Sbe=(t,e,n,r,i,a,s,o,c)=>{if(!(e==null||r==null)){var u=Zc(t,c),{type:f,ticks:h,tickCount:g}=e,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,w=f==="category"&&r.bandwidth?r.bandwidth()/y:0;w=c==="angleAxis"&&a!=null&&a.length>=2?Ds(a[0]-a[1])*2*w:w;var S=h||i;if(S){var E=S.map((C,M)=>{var R=s?s.indexOf(C):C;return{index:M,coordinate:r(R)+w,value:C,offset:w}});return E.filter(C=>wn(C.coordinate))}return u&&o?o.map((C,M)=>({coordinate:r(C)+w,value:C,index:M,offset:w})).filter(C=>wn(C.coordinate)):r.ticks?r.ticks(g).map(C=>({coordinate:r(C)+w,value:C,offset:w})):r.domain().map((C,M)=>({coordinate:r(C)+w,value:s?s[C]:C,index:M,offset:w}))}},VW=fe([cn,lw,dw,K_,kD,fw,ID,DD,vr],Sbe),Ebe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var o=Zc(t,s),{tickCount:c}=e,u=0;return u=s==="angleAxis"&&(r==null?void 0:r.length)>=2?Ds(r[0]-r[1])*2*u:u,o&&a?a.map((f,h)=>({coordinate:n(f)+u,value:f,index:h,offset:u})):n.ticks?n.ticks(c).map(f=>({coordinate:n(f)+u,value:f,offset:u})):n.domain().map((f,h)=>({coordinate:n(f)+u,value:i?i[f]:f,index:h,offset:u}))}},WW=fe([cn,lw,K_,fw,ID,DD,vr],Ebe),YW=fe(qi,K_,(t,e)=>{if(!(t==null||e==null))return nA(nA({},t),{},{scale:e})}),Abe=fe([qi,dw,MD,HW],PD);fe((t,e,n)=>CD(t,n),Abe,(t,e)=>{if(!(t==null||e==null))return nA(nA({},t),{},{scale:e})});var _be=fe([cn,T_,N_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),KW=t=>t.options.defaultTooltipEventType,XW=t=>t.options.validateTooltipEventTypes;function JW(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function LD(t,e){var n=KW(t),r=XW(t);return JW(e,n,r)}function Cbe(t){return Je(e=>LD(e,t))}var QW=(t,e)=>{var n,r=Number(e);if(!(So(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Tbe=t=>t.tooltip.settings,Fu={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Nbe={itemInteraction:{click:Fu,hover:Fu},axisInteraction:{click:Fu,hover:Fu},keyboardInteraction:Fu,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},ZW=ga({name:"tooltip",initialState:Nbe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:bn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=xo(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:bn()},removeTooltipEntrySettings:{reducer(t,e){var n=xo(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:bn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:Rbe,replaceTooltipEntrySettings:Mbe,removeTooltipEntrySettings:Pbe,setTooltipSettingsState:kbe,setActiveMouseOverItemIndex:Ibe,mouseLeaveItem:d2e,mouseLeaveChart:eY,setActiveClickItemIndex:f2e,setMouseOverAxisIndex:tY,setMouseClickAxisIndex:Dbe,setSyncInteraction:JM,setKeyboardInteraction:QM}=ZW.actions,Lbe=ZW.reducer;function dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function l1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dz(Object(n),!0).forEach(function(r){Obe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Obe(t,e,n){return(e=jbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jbe(t){var e=Fbe(t,"string");return typeof e=="symbol"?e:e+""}function Fbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ube(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Bbe(t){return t.index!=null}var nY=(t,e,n,r)=>{if(e==null)return Fu;var i=Ube(t,e,n);if(i==null)return Fu;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(Bbe(i)){if(a)return l1(l1({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return l1(l1({},Fu),{},{coordinate:i.coordinate})};function Hbe(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function zbe(t,e){var n=Hbe(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function $be(t,e,n){if(n==null||e==null)return!0;var r=li(t,e);return r==null||!Gd(n)?!0:zbe(r,n)}var OD=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var a=Number(i);if(!wn(a))return i;var s=0,o=1/0;e.length>0&&(o=e.length-1);var c=Math.max(s,Math.min(a,o)),u=e[c];return u==null||$be(u,n,r)?String(c):null},rY=(t,e,n,r,i,a,s,o)=>{if(!(a==null||o==null)){var c=s[0],u=c==null?void 0:o(c.positions,a);if(u!=null)return u;var f=i==null?void 0:i[Number(a)];if(f)switch(n){case"horizontal":return{x:f.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:f.coordinate}}}},iY=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var a=t.tooltipItemPayloads[0];return a!=null?[a]:[]}return t.tooltipItemPayloads.filter(s=>{var o;return((o=s.settings)===null||o===void 0?void 0:o.graphicalItemId)===i})},hw=t=>t.options.tooltipPayloadSearcher,Fv=t=>t.tooltip;function fz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fz(Object(n),!0).forEach(function(r){Gbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gbe(t,e,n){return(e=qbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qbe(t){var e=Vbe(t,"string");return typeof e=="symbol"?e:e+""}function Vbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wbe(t,e){return t??e}var aY=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:f}=n,h=[];return t.reduce((g,y)=>{var w,{dataDefinedOnItem:S,settings:E}=y,C=Wbe(S,o),M=Array.isArray(C)?IV(C,u,f):C,R=(w=E==null?void 0:E.dataKey)!==null&&w!==void 0?w:r,D=E==null?void 0:E.nameKey,I;if(r&&Array.isArray(M)&&!Array.isArray(M[0])&&s==="axis"?I=Gq(M,r,i):I=a(M,e,c,D),Array.isArray(I))I.forEach(k=>{var U=hz(hz({},E),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});g.push(bB({tooltipEntrySettings:U,dataKey:k.dataKey,payload:k.payload,value:li(k.payload,k.dataKey),name:k.name}))});else{var P;g.push(bB({tooltipEntrySettings:E,dataKey:R,payload:I,value:li(I,R),name:(P=li(I,D))!==null&&P!==void 0?P:E==null?void 0:E.name}))}return g},h)}},jD=fe([br,cn,hW,yD,yr],jW),Ybe=fe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Kbe=fe([yr,Ov],pW),Uv=fe([Ybe,br,Kbe],gW,{memoizeOptions:{resultEqualityCheck:W_}}),Xbe=fe([Uv],t=>t.filter(_D)),Jbe=fe([Uv],bW,{memoizeOptions:{resultEqualityCheck:W_}}),Bv=fe([Jbe,ru],xW),Qbe=fe([Xbe,ru,br],uW),FD=fe([Bv,br,Uv],wW),sY=fe([br],ND),Zbe=fe([br],t=>t.allowDataOverflow),oY=fe([sY,Zbe],$9),exe=fe([Uv],t=>t.filter(_D)),txe=fe([Qbe,exe,z_,rW],EW),nxe=fe([txe,ru,yr,oY],_W),rxe=fe([Uv],yW),ixe=fe([Bv,br,rxe,RD,yr],NW,{memoizeOptions:{resultEqualityCheck:V_}}),axe=fe([RW,yr,Ov],jv),sxe=fe([axe,yr],kW),oxe=fe([MW,yr,Ov],jv),lxe=fe([oxe,yr],IW),cxe=fe([PW,yr,Ov],jv),uxe=fe([cxe,yr],DW),dxe=fe([sxe,uxe,lxe],rA),fxe=fe([br,sY,oY,nxe,ixe,dxe,cn,yr],LW),pw=fe([br,cn,Bv,FD,z_,yr,fxe],OW),hxe=fe([pw,br,jD],FW),pxe=fe([br,pw,hxe,yr],UW),lY=t=>{var e=yr(t),n=Ov(t),r=!1;return fw(t,e,n,r)},cY=fe([br,lY],$_),uY=fe([br,jD,pxe,cY],PD),mxe=fe([cn,FD,br,yr],GW),gxe=fe([cn,FD,br,yr],qW),vxe=(t,e,n,r,i,a,s,o)=>{if(e){var{type:c}=e,u=Zc(t,o);if(r){var f=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,h=c==="category"&&r.bandwidth?r.bandwidth()/f:0;return h=o==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Ds(i[0]-i[1])*2*h:h,u&&s?s.map((g,y)=>({coordinate:r(g)+h,value:g,index:y,offset:h})):r.domain().map((g,y)=>({coordinate:r(g)+h,value:a?a[g]:g,index:y,offset:h}))}}},su=fe([cn,br,jD,uY,lY,mxe,gxe,yr],vxe),UD=fe([KW,XW,Tbe],(t,e,n)=>JW(n.shared,t,e)),dY=t=>t.tooltip.settings.trigger,BD=t=>t.tooltip.settings.defaultIndex,mw=fe([Fv,UD,dY,BD],nY),Q0=fe([mw,Bv,uw,pw],OD),fY=fe([su,Q0],QW),yxe=fe([mw],t=>{if(t)return t.dataKey});fe([mw],t=>{if(t)return t.graphicalItemId});var hY=fe([Fv,UD,dY,BD],iY),bxe=fe([eu,tu,cn,ui,su,BD,hY,hw],rY),xxe=fe([mw,bxe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),wxe=fe([mw],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Sxe=fe([hY,Q0,ru,uw,fY,hw,UD],aY),Exe=fe([Sxe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function pz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pz(Object(n),!0).forEach(function(r){Axe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Axe(t,e,n){return(e=_xe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _xe(t){var e=Cxe(t,"string");return typeof e=="symbol"?e:e+""}function Cxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Txe=()=>Je(br),Nxe=()=>{var t=Txe(),e=Je(su),n=Je(uY);return LE(!t||!n?void 0:mz(mz({},t),{},{scale:n}),e)};function gz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gz(Object(n),!0).forEach(function(r){Rxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rxe(t,e,n){return(e=Mxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mxe(t){var e=Pxe(t,"string");return typeof e=="symbol"?e:e+""}function Pxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kxe=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Ixe=(t,e,n,r)=>{var i=e.find(u=>u&&u.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return sm(sm(sm({},r),si(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var o=i.coordinate,{angle:c}=r;return sm(sm(sm({},r),si(r.cx,r.cy,o,c)),{},{angle:c,radius:o})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Dxe(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var pY=(t,e,n,r,i)=>{var a,s=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(s<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var o=0;o<s;o++){var c,u,f,h,g,y=o>0?(c=n[o-1])===null||c===void 0?void 0:c.coordinate:(u=n[s-1])===null||u===void 0?void 0:u.coordinate,w=(f=n[o])===null||f===void 0?void 0:f.coordinate,S=o>=s-1?(h=n[0])===null||h===void 0?void 0:h.coordinate:(g=n[o+1])===null||g===void 0?void 0:g.coordinate,E=void 0;if(!(y==null||w==null||S==null))if(Ds(w-y)!==Ds(S-w)){var C=[];if(Ds(S-w)===Ds(i[1]-i[0])){E=S;var M=w+i[1]-i[0];C[0]=Math.min(M,(M+y)/2),C[1]=Math.max(M,(M+y)/2)}else{E=y;var R=S+i[1]-i[0];C[0]=Math.min(w,(R+w)/2),C[1]=Math.max(w,(R+w)/2)}var D=[Math.min(w,(E+w)/2),Math.max(w,(E+w)/2)];if(t>D[0]&&t<=D[1]||t>=C[0]&&t<=C[1]){var I;return(I=n[o])===null||I===void 0?void 0:I.index}}else{var P=Math.min(y,S),k=Math.max(y,S);if(t>(P+w)/2&&t<=(k+w)/2){var U;return(U=n[o])===null||U===void 0?void 0:U.index}}}else if(e)for(var B=0;B<s;B++){var V=e[B];if(V!=null){var H=e[B+1],G=e[B-1];if(B===0&&H!=null&&t<=(V.coordinate+H.coordinate)/2||B===s-1&&G!=null&&t>(V.coordinate+G.coordinate)/2||B>0&&B<s-1&&G!=null&&H!=null&&t>(V.coordinate+G.coordinate)/2&&t<=(V.coordinate+H.coordinate)/2)return V.index}}return-1},mY=()=>Je(yD),HD=(t,e)=>e,gY=(t,e,n)=>n,zD=(t,e,n,r)=>r,Lxe=fe(su,t=>v_(t,e=>e.coordinate)),$D=fe([Fv,HD,gY,zD],nY),GD=fe([$D,Bv,uw,pw],OD),Oxe=(t,e,n)=>{if(e!=null){var r=Fv(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},vY=fe([Fv,HD,gY,zD],iY),iA=fe([eu,tu,cn,ui,su,zD,vY,hw],rY),jxe=fe([$D,iA],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),yY=fe([su,GD],QW),Fxe=fe([vY,GD,ru,uw,yY,hw,HD],aY),Uxe=fe([$D,GD],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Bxe=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&Dxe(t,s)){var o=upe(t,e),c=pY(o,a,i,n,r),u=kxe(e,i,c,t);return{activeIndex:String(c),activeCoordinate:u}}},Hxe=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var o=Sge(t,n);if(o){var c=dpe(o,e),u=pY(c,s,a,r,i),f=Ixe(e,a,u,o);return{activeIndex:String(u),activeCoordinate:f}}}},zxe=(t,e,n,r,i,a,s,o)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?Bxe(t,e,r,i,a,s,o):Hxe(t,e,n,r,i,a,s)},$xe=fe(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),Gxe=fe(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Ui)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:C0e}});function vz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vz(Object(n),!0).forEach(function(r){qxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qxe(t,e,n){return(e=Vxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vxe(t){var e=Wxe(t,"string");return typeof e=="symbol"?e:e+""}function Wxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yxe={},Kxe={zIndexMap:Object.values(Ui).reduce((t,e)=>yz(yz({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),Yxe)},Xxe=new Set(Object.values(Ui));function Jxe(t){return Xxe.has(t)}var bY=ga({name:"zIndex",initialState:Kxe,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:bn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!Jxe(n)&&delete t.zIndexMap[n])},prepare:bn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:bn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:bn()}}}),{registerZIndexPortal:Qxe,unregisterZIndexPortal:Zxe,registerZIndexPortalElement:ewe,unregisterZIndexPortalElement:twe}=bY.actions,nwe=bY.reducer;function ou(t){var{zIndex:e,children:n}=t,r=qpe(),i=r&&e!==void 0&&e!==0,a=va(),s=Br();T.useLayoutEffect(()=>i?(s(Qxe({zIndex:e})),()=>{s(Zxe({zIndex:e}))}):Qx,[s,e,i]);var o=Je(c=>$xe(c,e,a));return i?o?i_.createPortal(n,o):null:n}function ZM(){return ZM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZM.apply(null,arguments)}function bz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function c1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bz(Object(n),!0).forEach(function(r){rwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rwe(t,e,n){return(e=iwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iwe(t){var e=awe(t,"string");return typeof e=="symbol"?e:e+""}function awe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function swe(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return T.isValidElement(e)?T.cloneElement(e,r):T.createElement(n,r)}function owe(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:o,cursor:c,tooltipEventType:u,chartName:f}=t,h=n,g=r,y=i;if(!c||!h||f!=="ScatterChart"&&u!=="axis")return null;var w,S,E;if(f==="ScatterChart")w=h,S=Ime,E=Ui.cursorLine;else if(f==="BarChart")w=Dme(o,h,a,s),S=fge,E=Ui.cursorRectangle;else if(o==="radial"&&qq(h)){var{cx:C,cy:M,radius:R,startAngle:D,endAngle:I}=a9(h);w={cx:C,cy:M,startAngle:D,endAngle:I,innerRadius:R,outerRadius:R},S=Cge,E=Ui.cursorLine}else w={points:Tge(o,h,a)},S=M1,E=Ui.cursorLine;var P=typeof c=="object"&&"className"in c?c.className:void 0,k=c1(c1(c1(c1({stroke:"#ccc",pointerEvents:"none"},a),w),h_(c)),{},{payload:g,payloadIndex:y,className:$t("recharts-tooltip-cursor",P)});return T.createElement(ou,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:E},T.createElement(swe,{cursor:c,cursorComp:S,cursorProps:k}))}function lwe(t){var e=Nxe(),n=$V(),r=kv(),i=mY();return e==null||n==null||r==null||i==null?null:T.createElement(owe,ZM({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var xY=T.createContext(null),cwe=()=>T.useContext(xY),aR={exports:{}},xz;function uwe(){return xz||(xz=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,h,g){if(typeof f!="function")throw new TypeError("The listener must be a function");var y=new i(f,h||c,g),w=n?n+u:u;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],y]:c._events[w].push(y):(c._events[w]=y,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],f,h;if(this._eventsCount===0)return u;for(h in f=this._events)e.call(f,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},o.prototype.listeners=function(u){var f=n?n+u:u,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,y=h.length,w=new Array(y);g<y;g++)w[g]=h[g].fn;return w},o.prototype.listenerCount=function(u){var f=n?n+u:u,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,f,h,g,y,w){var S=n?n+u:u;if(!this._events[S])return!1;var E=this._events[S],C=arguments.length,M,R;if(E.fn){switch(E.once&&this.removeListener(u,E.fn,void 0,!0),C){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,f),!0;case 3:return E.fn.call(E.context,f,h),!0;case 4:return E.fn.call(E.context,f,h,g),!0;case 5:return E.fn.call(E.context,f,h,g,y),!0;case 6:return E.fn.call(E.context,f,h,g,y,w),!0}for(R=1,M=new Array(C-1);R<C;R++)M[R-1]=arguments[R];E.fn.apply(E.context,M)}else{var D=E.length,I;for(R=0;R<D;R++)switch(E[R].once&&this.removeListener(u,E[R].fn,void 0,!0),C){case 1:E[R].fn.call(E[R].context);break;case 2:E[R].fn.call(E[R].context,f);break;case 3:E[R].fn.call(E[R].context,f,h);break;case 4:E[R].fn.call(E[R].context,f,h,g);break;default:if(!M)for(I=1,M=new Array(C-1);I<C;I++)M[I-1]=arguments[I];E[R].fn.apply(E[R].context,M)}}return!0},o.prototype.on=function(u,f,h){return a(this,u,f,h,!1)},o.prototype.once=function(u,f,h){return a(this,u,f,h,!0)},o.prototype.removeListener=function(u,f,h,g){var y=n?n+u:u;if(!this._events[y])return this;if(!f)return s(this,y),this;var w=this._events[y];if(w.fn)w.fn===f&&(!g||w.once)&&(!h||w.context===h)&&s(this,y);else{for(var S=0,E=[],C=w.length;S<C;S++)(w[S].fn!==f||g&&!w[S].once||h&&w[S].context!==h)&&E.push(w[S]);E.length?this._events[y]=E.length===1?E[0]:E:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(aR)),aR.exports}var dwe=uwe();const fwe=Co(dwe);var Z0=new fwe,eP="recharts.syncEvent.tooltip",wz="recharts.syncEvent.brush";function hwe(t,e){if(e){var n=Number.parseInt(e,10);if(!So(n))return t==null?void 0:t[n]}}var pwe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},wY=ga({name:"options",initialState:pwe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),mwe=wY.reducer,{createEventEmitter:gwe}=wY.actions;function vwe(t){return t.tooltip.syncInteraction}var ywe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},SY=ga({name:"chartData",initialState:ywe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:Sz,setDataStartEndIndexes:bwe,setComputedData:h2e}=SY.actions,xwe=SY.reducer,wwe=["x","y"];function Ez(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function om(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ez(Object(n),!0).forEach(function(r){Swe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ez(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Swe(t,e,n){return(e=Ewe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ewe(t){var e=Awe(t,"string");return typeof e=="symbol"?e:e+""}function Awe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _we(t,e){if(t==null)return{};var n,r,i=Cwe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cwe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Twe(){var t=Je(bD),e=Je(xD),n=Br(),r=Je(iW),i=Je(su),a=kv(),s=P_(),o=Je(c=>c.rootProps.className);T.useEffect(()=>{if(t==null)return Qx;var c=(u,f,h)=>{if(e!==h&&t===u){if(r==="index"){var g;if(s&&f!==null&&f!==void 0&&(g=f.payload)!==null&&g!==void 0&&g.coordinate&&f.payload.sourceViewBox){var y=f.payload.coordinate,{x:w,y:S}=y,E=_we(y,wwe),{x:C,y:M,width:R,height:D}=f.payload.sourceViewBox,I=om(om({},E),{},{x:s.x+(R?(w-C)/R:0)*s.width,y:s.y+(D?(S-M)/D:0)*s.height});n(om(om({},f),{},{payload:om(om({},f.payload),{},{coordinate:I})}))}else n(f);return}if(i!=null){var P;if(typeof r=="function"){var k={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},U=r(i,k);P=i[U]}else r==="value"&&(P=i.find($=>String($.value)===f.payload.label));var{coordinate:B}=f.payload;if(P==null||f.payload.active===!1||B==null||s==null){n(JM({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:V,y:H}=B,G=Math.min(V,s.x+s.width),Q=Math.min(H,s.y+s.height),W={x:a==="horizontal"?P.coordinate:G,y:a==="horizontal"?Q:P.coordinate},ee=JM({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox,graphicalItemId:f.payload.graphicalItemId});n(ee)}}};return Z0.on(eP,c),()=>{Z0.off(eP,c)}},[o,n,e,t,r,i,a,s])}function Nwe(){var t=Je(bD),e=Je(xD),n=Br();T.useEffect(()=>{if(t==null)return Qx;var r=(i,a,s)=>{e!==s&&t===i&&n(bwe(a))};return Z0.on(wz,r),()=>{Z0.off(wz,r)}},[n,e,t])}function Rwe(){var t=Br();T.useEffect(()=>{t(gwe())},[t]),Twe(),Nwe()}function Mwe(t,e,n,r,i,a){var s=Je(y=>Oxe(y,t,e)),o=Je(xD),c=Je(bD),u=Je(iW),f=Je(vwe),h=f==null?void 0:f.active,g=P_();T.useEffect(()=>{if(!h&&c!=null&&o!=null){var y=JM({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});Z0.emit(eP,c,y,o)}},[h,n,s,i,r,o,c,u,a,g])}function Az(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Az(Object(n),!0).forEach(function(r){Pwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Az(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pwe(t,e,n){return(e=kwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kwe(t){var e=Iwe(t,"string");return typeof e=="symbol"?e:e+""}function Iwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dwe(t){return t.dataKey}function Lwe(t,e){return T.isValidElement(t)?T.cloneElement(t,e):typeof t=="function"?T.createElement(t,e):T.createElement(fme,e)}var Cz=[],Owe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function jwe(t){var e,n,r=ns(t,Owe),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:o,content:c,filterNull:u,isAnimationActive:f,offset:h,payloadUniqBy:g,position:y,reverseDirection:w,useTranslate3d:S,wrapperStyle:E,cursor:C,shared:M,trigger:R,defaultIndex:D,portal:I,axisId:P}=r,k=Br(),U=typeof D=="number"?String(D):D;T.useEffect(()=>{k(kbe({shared:M,trigger:R,axisId:P,active:i,defaultIndex:U}))},[k,M,R,P,i,U]);var B=P_(),V=ZV(),H=Cbe(M),{activeIndex:G,isActive:Q}=(e=Je(Ce=>Uxe(Ce,H,R,U)))!==null&&e!==void 0?e:{},W=Je(Ce=>Fxe(Ce,H,R,U)),ee=Je(Ce=>yY(Ce,H,R,U)),$=Je(Ce=>jxe(Ce,H,R,U)),q=W,J=cwe(),ae=(n=i??Q)!==null&&n!==void 0?n:!1,[ye,Y]=Xfe([q,ae]),ne=H==="axis"?ee:void 0;Mwe(H,R,$,ne,G,ae);var ue=I??J;if(ue==null||B==null||H==null)return null;var me=q??Cz;ae||(me=Cz),u&&me.length&&(me=Sfe(me.filter(Ce=>Ce.value!=null&&(Ce.hide!==!0||r.includeHidden)),g,Dwe));var xe=me.length>0,Me=T.createElement(bme,{allowEscapeViewBox:a,animationDuration:s,animationEasing:o,isAnimationActive:f,active:ae,coordinate:$,hasPayload:xe,offset:h,position:y,reverseDirection:w,useTranslate3d:S,viewBox:B,wrapperStyle:E,lastBoundingBox:ye,innerRef:Y,hasPortalFromProps:!!I},Lwe(c,_z(_z({},r),{},{payload:me,label:ne,active:ae,activeIndex:G,coordinate:$,accessibilityLayer:V})));return T.createElement(T.Fragment,null,i_.createPortal(Me,ue),ae&&T.createElement(lwe,{cursor:C,tooltipEventType:H,coordinate:$,payload:me,index:G}))}function Fwe(t,e,n){return(e=Uwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uwe(t){var e=Bwe(t,"string");return typeof e=="symbol"?e:e+""}function Bwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Hwe{constructor(e){Fwe(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Tz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zwe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tz(Object(n),!0).forEach(function(r){$we(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $we(t,e,n){return(e=Gwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gwe(t){var e=qwe(t,"string");return typeof e=="symbol"?e:e+""}function qwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vwe={cacheSize:2e3,enableCache:!0},EY=zwe({},Vwe),Nz=new Hwe(EY.cacheSize),Wwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Rz="recharts_measurement_span";function Ywe(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(o)}var Mz=(t,e)=>{try{var n=document.getElementById(Rz);n||(n=document.createElement("span"),n.setAttribute("id",Rz),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Wwe,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},R0=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||rw.isSsr)return{width:0,height:0};if(!EY.enableCache)return Mz(e,n);var r=Ywe(e,n),i=Nz.get(r);if(i)return i;var a=Mz(e,n);return Nz.set(r,a),a},AY;function Kwe(t,e,n){return(e=Xwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xwe(t){var e=Jwe(t,"string");return typeof e=="symbol"?e:e+""}function Jwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kz=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Qwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Zwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,eSe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},tSe=["cm","mm","pt","pc","in","Q","px"];function nSe(t){return tSe.includes(t)}var Cm="NaN";function rSe(t,e){return t*eSe[e]}class ti{static parse(e){var n,[,r,i]=(n=Zwe.exec(e))!==null&&n!==void 0?n:[];return r==null?ti.NaN:new ti(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,So(e)&&(this.unit=""),n!==""&&!Qwe.test(n)&&(this.num=NaN,this.unit=""),nSe(n)&&(this.num=rSe(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new ti(NaN,""):new ti(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new ti(NaN,""):new ti(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ti(NaN,""):new ti(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new ti(NaN,""):new ti(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return So(this.num)}}AY=ti;Kwe(ti,"NaN",new AY(NaN,""));function _Y(t){if(t==null||t.includes(Cm))return Cm;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=Pz.exec(e))!==null&&n!==void 0?n:[],s=ti.parse(r??""),o=ti.parse(a??""),c=i==="*"?s.multiply(o):s.divide(o);if(c.isNaN())return Cm;e=e.replace(Pz,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,f,h,g]=(u=kz.exec(e))!==null&&u!==void 0?u:[],y=ti.parse(f??""),w=ti.parse(g??""),S=h==="+"?y.add(w):y.subtract(w);if(S.isNaN())return Cm;e=e.replace(kz,S.toString())}return e}var Iz=/\(([^()]*)\)/;function iSe(t){for(var e=t,n;(n=Iz.exec(e))!=null;){var[,r]=n;e=e.replace(Iz,_Y(r))}return e}function aSe(t){var e=t.replace(/\s+/g,"");return e=iSe(e),e=_Y(e),e}function sSe(t){try{return aSe(t)}catch{return Cm}}function sR(t){var e=sSe(t.slice(5,-1));return e===Cm?"":e}var oSe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],lSe=["dx","dy","angle","className","breakAll"];function tP(){return tP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tP.apply(null,arguments)}function Dz(t,e){if(t==null)return{};var n,r,i=cSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var CY=/[ \f\n\r\t\v\u2028\u2029]+/,TY=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];oi(e)||(n?i=e.toString().split(""):i=e.toString().split(CY));var a=i.map(o=>({word:o,width:R0(o,r).width})),s=n?0:R0("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function uSe(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var NY=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:o}=a,c=i[i.length-1];if(c&&o!=null&&(e==null||r||c.width+o+n<Number(e)))c.words.push(s),c.width+=o+n;else{var u={words:[s],width:o};i.push(u)}return i},[]),RY=t=>t.reduce((e,n)=>e.width>n.width?e:n),dSe="",Lz=(t,e,n,r,i,a,s,o)=>{var c=t.slice(0,e),u=TY({breakAll:n,style:r,children:c+dSe});if(!u)return[!1,[]];var f=NY(u.wordsWithComputedWidth,a,s,o),h=f.length>i||RY(f).width>Number(a);return[h,f]},fSe=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:o,breakAll:c}=t,u=We(a),f=String(s),h=NY(e,r,n,i);if(!u||i)return h;var g=h.length>a||RY(h).width>Number(r);if(!g)return h;for(var y=0,w=f.length-1,S=0,E;y<=w&&S<=f.length-1;){var C=Math.floor((y+w)/2),M=C-1,[R,D]=Lz(f,M,c,o,a,r,n,i),[I]=Lz(f,C,c,o,a,r,n,i);if(!R&&!I&&(y=C+1),R&&I&&(w=C-1),!R&&I){E=D;break}S++}return E||h},Oz=t=>{var e=oi(t)?[]:t.toString().split(CY);return[{words:e,width:void 0}]},hSe=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!rw.isSsr){var o,c,u=TY({breakAll:a,children:r,style:i});if(u){var{wordsWithComputedWidth:f,spaceWidth:h}=u;o=f,c=h}else return Oz(r);return fSe({breakAll:a,children:r,maxLines:s,style:i},o,c,e,!!n)}return Oz(r)},MY="#808080",pSe={angle:0,breakAll:!1,capHeight:"0.71em",fill:MY,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},qD=T.forwardRef((t,e)=>{var n=ns(t,pSe),{x:r,y:i,lineHeight:a,capHeight:s,fill:o,scaleToFit:c,textAnchor:u,verticalAnchor:f}=n,h=Dz(n,oSe),g=T.useMemo(()=>hSe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:y,dy:w,angle:S,className:E,breakAll:C}=h,M=Dz(h,lSe);if(!pl(r)||!pl(i)||g.length===0)return null;var R=Number(r)+(We(y)?y:0),D=Number(i)+(We(w)?w:0);if(!wn(R)||!wn(D))return null;var I;switch(f){case"start":I=sR("calc(".concat(s,")"));break;case"middle":I=sR("calc(".concat((g.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:I=sR("calc(".concat(g.length-1," * -").concat(a,")"));break}var P=[];if(c){var k=g[0].width,{width:U}=h;P.push("scale(".concat(We(U)&&We(k)?U/k:1,")"))}return S&&P.push("rotate(".concat(S,", ").concat(R,", ").concat(D,")")),P.length&&(M.transform=P.join(" ")),T.createElement("text",tP({},Bs(M),{ref:e,x:R,y:D,className:$t("recharts-text",E),textAnchor:u,fill:o.includes("url")?MY:o}),g.map((B,V)=>{var H=B.words.join(C?"":" ");return T.createElement("tspan",{x:R,dy:V===0?I:a,key:"".concat(H,"-").concat(V)},H)}))});qD.displayName="Text";var mSe=["labelRef"],gSe=["content"];function jz(t,e){if(t==null)return{};var n,r,i=vSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Fz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fz(Object(n),!0).forEach(function(r){ySe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ySe(t,e,n){return(e=bSe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bSe(t){var e=xSe(t,"string");return typeof e=="symbol"?e:e+""}function xSe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(null,arguments)}var PY=T.createContext(null),wSe=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:o}=t,c=T.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return T.createElement(PY.Provider,{value:c},o)},kY=()=>{var t=T.useContext(PY),e=P_();return t||zV(e)},SSe=T.createContext(null),ESe=()=>{var t=T.useContext(SSe),e=Je(cW);return t||e},ASe=t=>{var{value:e,formatter:n}=t,r=oi(t.children)?e:t.children;return typeof n=="function"?n(r):r},VD=t=>t!=null&&typeof t=="function",_Se=(t,e)=>{var n=Ds(e-t),r=Math.min(Math.abs(e-t),360);return n*r},CSe=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:o,cy:c,innerRadius:u,outerRadius:f,startAngle:h,endAngle:g,clockWise:y}=i,w=(u+f)/2,S=_Se(h,g),E=S>=0?1:-1,C,M;switch(e){case"insideStart":C=h+E*a,M=y;break;case"insideEnd":C=g-E*a,M=!y;break;case"end":C=g+E*a,M=y;break;default:throw new Error("Unsupported position ".concat(e))}M=S<=0?M:!M;var R=si(o,c,w,C),D=si(o,c,w,C+(M?1:-1)*359),I="M".concat(R.x,",").concat(R.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(M?0:1,`,
    `).concat(D.x,",").concat(D.y),P=oi(t.id)?U0("recharts-radial-line-"):t.id;return T.createElement("text",Tc({},r,{dominantBaseline:"central",className:$t("recharts-radial-bar-label",s)}),T.createElement("defs",null,T.createElement("path",{id:P,d:I})),T.createElement("textPath",{xlinkHref:"#".concat(P)},n))},TSe=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:o,endAngle:c}=t,u=(o+c)/2;if(n==="outside"){var{x:f,y:h}=si(r,i,s+e,u);return{x:f,y:h,textAnchor:f>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(a+s)/2,{x:y,y:w}=si(r,i,g,u);return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},nP=t=>"cx"in t&&We(t.cx),NSe=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!nP(n)&&(a=n);var{x:s,y:o,upperWidth:c,lowerWidth:u,height:f}=e,h=s,g=s+(c-u)/2,y=(h+g)/2,w=(c+u)/2,S=h+c/2,E=f>=0?1:-1,C=E*r,M=E>0?"end":"start",R=E>0?"start":"end",D=c>=0?1:-1,I=D*r,P=D>0?"end":"start",k=D>0?"start":"end";if(i==="top"){var U={x:h+c/2,y:o-C,textAnchor:"middle",verticalAnchor:M};return qn(qn({},U),a?{height:Math.max(o-a.y,0),width:c}:{})}if(i==="bottom"){var B={x:g+u/2,y:o+f+C,textAnchor:"middle",verticalAnchor:R};return qn(qn({},B),a?{height:Math.max(a.y+a.height-(o+f),0),width:u}:{})}if(i==="left"){var V={x:y-I,y:o+f/2,textAnchor:P,verticalAnchor:"middle"};return qn(qn({},V),a?{width:Math.max(V.x-a.x,0),height:f}:{})}if(i==="right"){var H={x:y+w+I,y:o+f/2,textAnchor:k,verticalAnchor:"middle"};return qn(qn({},H),a?{width:Math.max(a.x+a.width-H.x,0),height:f}:{})}var G=a?{width:w,height:f}:{};return i==="insideLeft"?qn({x:y+I,y:o+f/2,textAnchor:k,verticalAnchor:"middle"},G):i==="insideRight"?qn({x:y+w-I,y:o+f/2,textAnchor:P,verticalAnchor:"middle"},G):i==="insideTop"?qn({x:h+c/2,y:o+C,textAnchor:"middle",verticalAnchor:R},G):i==="insideBottom"?qn({x:g+u/2,y:o+f-C,textAnchor:"middle",verticalAnchor:M},G):i==="insideTopLeft"?qn({x:h+I,y:o+C,textAnchor:k,verticalAnchor:R},G):i==="insideTopRight"?qn({x:h+c-I,y:o+C,textAnchor:P,verticalAnchor:R},G):i==="insideBottomLeft"?qn({x:g+I,y:o+f-C,textAnchor:k,verticalAnchor:M},G):i==="insideBottomRight"?qn({x:g+u-I,y:o+f-C,textAnchor:P,verticalAnchor:M},G):i&&typeof i=="object"&&(We(i.x)||Fc(i.x))&&(We(i.y)||Fc(i.y))?qn({x:s+$d(i.x,w),y:o+$d(i.y,f),textAnchor:"end",verticalAnchor:"end"},G):qn({x:S,y:o+f/2,textAnchor:"middle",verticalAnchor:"middle"},G)},RSe={angle:0,offset:5,zIndex:Ui.label,position:"middle",textBreakAll:!1};function Ou(t){var e=ns(t,RSe),{viewBox:n,position:r,value:i,children:a,content:s,className:o="",textBreakAll:c,labelRef:u}=e,f=ESe(),h=kY(),g=r==="center"?h:f??h,y,w,S;if(n==null?y=g:nP(n)?y=n:y=zV(n),!y||oi(i)&&oi(a)&&!T.isValidElement(s)&&typeof s!="function")return null;var E=qn(qn({},e),{},{viewBox:y});if(T.isValidElement(s)){var{labelRef:C}=E,M=jz(E,mSe);return T.cloneElement(s,M)}if(typeof s=="function"){var{content:R}=E,D=jz(E,gSe);if(w=T.createElement(s,D),T.isValidElement(w))return w}else w=ASe(e);var I=Bs(e);if(nP(y)){if(r==="insideStart"||r==="insideEnd"||r==="end")return CSe(e,r,w,I,y);S=TSe(y,e.offset,e.position)}else S=NSe(e,y);return T.createElement(ou,{zIndex:e.zIndex},T.createElement(qD,Tc({ref:u,className:$t("recharts-label",o)},I,S,{textAnchor:uSe(I.textAnchor)?I.textAnchor:S.textAnchor,breakAll:c}),w))}Ou.displayName="Label";var MSe=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?T.createElement(Ou,Tc({key:"label-implicit"},r)):pl(t)?T.createElement(Ou,Tc({key:"label-implicit",value:t},r)):T.isValidElement(t)?t.type===Ou?T.cloneElement(t,qn({key:"label-implicit"},r)):T.createElement(Ou,Tc({key:"label-implicit",content:t},r)):VD(t)?T.createElement(Ou,Tc({key:"label-implicit",content:t},r)):t&&typeof t=="object"?T.createElement(Ou,Tc({},t,{key:"label-implicit"},r)):null};function PSe(t){var{label:e,labelRef:n}=t,r=kY();return MSe(e,r,n)||null}var oR={},lR={},Uz;function kSe(){return Uz||(Uz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(lR)),lR}var cR={},Bz;function ISe(){return Bz||(Bz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(cR)),cR}var Hz;function DSe(){return Hz||(Hz=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kSe(),n=ISe(),r=LI();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(oR)),oR}var uR,zz;function LSe(){return zz||(zz=1,uR=DSe().last),uR}var OSe=LSe();const jSe=Co(OSe);var FSe=["valueAccessor"],USe=["dataKey","clockWise","id","textBreakAll","zIndex"];function aA(){return aA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aA.apply(null,arguments)}function $z(t,e){if(t==null)return{};var n,r,i=BSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var HSe=t=>Array.isArray(t.value)?jSe(t.value):t.value,IY=T.createContext(void 0),zSe=IY.Provider,DY=T.createContext(void 0);DY.Provider;function $Se(){return T.useContext(IY)}function GSe(){return T.useContext(DY)}function k1(t){var{valueAccessor:e=HSe}=t,n=$z(t,FSe),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:o}=n,c=$z(n,USe),u=$Se(),f=GSe(),h=u||f;return!h||!h.length?null:T.createElement(ou,{zIndex:o??Ui.label},T.createElement(hl,{className:"recharts-label-list"},h.map((g,y)=>{var w,S=oi(r)?e(g,y):li(g&&g.payload,r),E=oi(a)?{}:{id:"".concat(a,"-").concat(y)};return T.createElement(Ou,aA({key:"label-".concat(y)},Bs(g),c,E,{fill:(w=n.fill)!==null&&w!==void 0?w:g.fill,parentViewBox:g.parentViewBox,value:S,textBreakAll:s,viewBox:g.viewBox,index:y,zIndex:0}))})))}k1.displayName="LabelList";function qSe(t){var{label:e}=t;return e?e===!0?T.createElement(k1,{key:"labelList-implicit"}):T.isValidElement(e)||VD(e)?T.createElement(k1,{key:"labelList-implicit",content:e}):typeof e=="object"?T.createElement(k1,aA({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function rP(){return rP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rP.apply(null,arguments)}var LY=t=>{var{cx:e,cy:n,r,className:i}=t,a=$t("recharts-dot",i);return We(e)&&We(n)&&We(r)?T.createElement("circle",rP({},wo(t),DI(t),{className:a,cx:e,cy:n,r})):null},VSe={radiusAxis:{},angleAxis:{}},OY=ga({name:"polarAxis",initialState:VSe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:p2e,removeRadiusAxis:m2e,addAngleAxis:g2e,removeAngleAxis:v2e}=OY.actions,WSe=OY.reducer,jY=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0;function YSe(t){var{tooltipEntrySettings:e}=t,n=Br(),r=va(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(Rbe(e)):i.current!==e&&n(Mbe({prev:i.current,next:e})),i.current=e)},[e,n,r]),T.useLayoutEffect(()=>()=>{i.current&&(n(Pbe(i.current)),i.current=null)},[n]),null}function KSe(t){var{legendPayload:e}=t,n=Br(),r=va(),i=T.useRef(null);return T.useLayoutEffect(()=>{r||(i.current===null?n(ime(e)):i.current!==e&&n(ame({prev:i.current,next:e})),i.current=e)},[n,r,e]),T.useLayoutEffect(()=>()=>{i.current&&(n(sme(i.current)),i.current=null)},[n]),null}var dR,XSe=()=>{var[t]=T.useState(()=>U0("uid-"));return t},JSe=(dR=Dk.useId)!==null&&dR!==void 0?dR:XSe;function QSe(t,e){var n=JSe();return e||(t?"".concat(t,"-").concat(n):n)}var ZSe=T.createContext(void 0),e1e=t=>{var{id:e,type:n,children:r}=t,i=QSe("recharts-".concat(n),e);return T.createElement(ZSe.Provider,{value:i},r(i))},t1e={cartesianItems:[],polarItems:[]},FY=ga({name:"graphicalItems",initialState:t1e,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:bn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=xo(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:bn()},removeCartesianGraphicalItem:{reducer(t,e){var n=xo(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:bn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:bn()},removePolarGraphicalItem:{reducer(t,e){var n=xo(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:bn()}}}),{addCartesianGraphicalItem:n1e,replaceCartesianGraphicalItem:r1e,removeCartesianGraphicalItem:i1e,addPolarGraphicalItem:y2e,removePolarGraphicalItem:b2e}=FY.actions,a1e=FY.reducer,s1e=t=>{var e=Br(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(n1e(t)):n.current!==t&&e(r1e({prev:n.current,next:t})),n.current=t},[e,t]),T.useLayoutEffect(()=>()=>{n.current&&(e(i1e(n.current)),n.current=null)},[e]),null},o1e=T.memo(s1e),l1e=["points"];function Gz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gz(Object(n),!0).forEach(function(r){c1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function c1e(t,e,n){return(e=u1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u1e(t){var e=d1e(t,"string");return typeof e=="symbol"?e:e+""}function d1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sA(){return sA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sA.apply(null,arguments)}function f1e(t,e){if(t==null)return{};var n,r,i=h1e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function h1e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function p1e(t){var{option:e,dotProps:n,className:r}=t;if(T.isValidElement(e))return T.cloneElement(e,n);if(typeof e=="function")return e(n);var i=$t(r,typeof e!="boolean"?e.className:""),a=n??{},{points:s}=a,o=f1e(a,l1e);return T.createElement(LY,sA({},o,{className:i}))}function m1e(t,e){return t==null?!1:e?!0:t.length===1}function g1e(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:s,needClip:o,clipPathId:c,zIndex:u=Ui.scatter}=t;if(!m1e(e,n))return null;var f=jY(n),h=pde(n),g=e.map((w,S)=>{var E,C,M=fR(fR(fR({r:3},s),h),{},{index:S,cx:(E=w.x)!==null&&E!==void 0?E:void 0,cy:(C=w.y)!==null&&C!==void 0?C:void 0,dataKey:a,value:w.value,payload:w.payload,points:e});return T.createElement(p1e,{key:"dot-".concat(S),option:n,dotProps:M,className:i})}),y={};return o&&c!=null&&(y.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(c,")")),T.createElement(ou,{zIndex:u},T.createElement(hl,sA({className:r},y),g))}function qz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qz(Object(n),!0).forEach(function(r){v1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function v1e(t,e,n){return(e=y1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y1e(t){var e=b1e(t,"string");return typeof e=="symbol"?e:e+""}function b1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var UY=0,x1e={xAxis:{},yAxis:{},zAxis:{}},BY=ga({name:"cartesianAxis",initialState:x1e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:bn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:bn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:bn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:bn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:bn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:bn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:bn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:bn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:bn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=Vz(Vz({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:w1e,replaceXAxis:S1e,removeXAxis:E1e,addYAxis:A1e,replaceYAxis:_1e,removeYAxis:C1e,addZAxis:x2e,replaceZAxis:w2e,removeZAxis:S2e,updateYAxisWidth:T1e}=BY.actions,N1e=BY.reducer,R1e=fe([ui],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),M1e=fe([R1e,eu,tu],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),WD=()=>Je(M1e),P1e=()=>Je(Exe);function Wz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wz(Object(n),!0).forEach(function(r){k1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k1e(t,e,n){return(e=I1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I1e(t){var e=D1e(t,"string");return typeof e=="symbol"?e:e+""}function D1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var L1e=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:s}=t;if(i===!1||e.x==null||e.y==null)return null;var o={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=hR(hR(hR({},o),h_(i)),DI(i)),u;return T.isValidElement(i)?u=T.cloneElement(i,c):typeof i=="function"?u=i(c):u=T.createElement(LY,c),T.createElement(hl,{className:"recharts-active-dot",clipPath:s},u)};function Yz(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:s=Ui.activeDot}=t,o=Je(Q0),c=P1e();if(e==null||c==null)return null;var u=e.find(f=>c.includes(f.payload));return oi(u)?null:T.createElement(ou,{zIndex:s},T.createElement(L1e,{point:u,childIndex:Number(o),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var O1e=t=>{var{chartData:e}=t,n=Br(),r=va();return T.useEffect(()=>r?()=>{}:(n(Sz(e)),()=>{n(Sz(void 0))}),[e,n,r]),null},Kz={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},HY=ga({name:"brush",initialState:Kz,reducers:{setBrushSettings(t,e){return e.payload==null?Kz:e.payload}}}),{setBrushSettings:E2e}=HY.actions,j1e=HY.reducer;function F1e(t,e,n){return(e=U1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U1e(t){var e=B1e(t,"string");return typeof e=="symbol"?e:e+""}function B1e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class YD{static create(e){return new YD(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}F1e(YD,"EPS",1e-4);function H1e(t){return(t%180+180)%180}var z1e=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=H1e(i),s=a*Math.PI/180,o=Math.atan(r/n),c=s>o&&s<Math.PI-o?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},$1e={dots:[],areas:[],lines:[]},zY=ga({name:"referenceElements",initialState:$1e,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=xo(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=xo(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=xo(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:A2e,removeDot:_2e,addArea:C2e,removeArea:T2e,addLine:N2e,removeLine:R2e}=zY.actions,G1e=zY.reducer,q1e=T.createContext(void 0),V1e=t=>{var{children:e}=t,[n]=T.useState("".concat(U0("recharts"),"-clip")),r=WD();if(r==null)return null;var{x:i,y:a,width:s,height:o}=r;return T.createElement(q1e.Provider,{value:n},T.createElement("defs",null,T.createElement("clipPath",{id:n},T.createElement("rect",{x:i,y:a,height:o,width:s}))),e)};function $Y(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function W1e(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return z1e(r,n)}function Y1e(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:o}=t;return e===1?{start:r?i:a,end:r?i+s:a+o}:{start:r?i+s:a+o,end:r?i:a}}function eb(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function K1e(t,e){return $Y(t,e+1)}function X1e(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:o}=e,c=0,u=1,f=s,h=function(){var w=r==null?void 0:r[c];if(w===void 0)return{v:$Y(r,u)};var S=c,E,C=()=>(E===void 0&&(E=n(w,S)),E),M=w.coordinate,R=c===0||eb(t,M,C,f,o);R||(c=0,f=s,u+=1),R&&(f=M+t*(C()/2+i),c+=u)},g;u<=a.length;)if(g=h(),g)return g.v;return[]}function J1e(t,e,n,r,i){var a=(r||[]).slice(),s=a.length;if(s===0)return[];for(var{start:o,end:c}=e,u=1;u<=s;u++){for(var f=(s-1)%u,h=o,g=!0,y=function(){var M=r[w],R=w,D,I=()=>(D===void 0&&(D=n(M,R)),D),P=M.coordinate,k=w===f||eb(t,P,I,h,c);if(!k)return g=!1,1;k&&(h=P+t*(I()/2+i))},w=f;w<s&&!y();w+=u);if(g){for(var S=[],E=f;E<s;E+=u)S.push(r[E]);return S}}return[]}function Xz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xz(Object(n),!0).forEach(function(r){Q1e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Q1e(t,e,n){return(e=Z1e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z1e(t){var e=eEe(t,"string");return typeof e=="symbol"?e:e+""}function eEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tEe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:o}=e,{end:c}=e,u=function(g){var y=a[g],w,S=()=>(w===void 0&&(w=n(y,g)),w);if(g===s-1){var E=t*(y.coordinate+t*S()/2-c);a[g]=y=wi(wi({},y),{},{tickCoord:E>0?y.coordinate-E*t:y.coordinate})}else a[g]=y=wi(wi({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var C=eb(t,y.tickCoord,S,o,c);C&&(c=y.tickCoord-t*(S()/2+i),a[g]=wi(wi({},y),{},{isShow:!0}))}},f=s-1;f>=0;f--)u(f);return a}function nEe(t,e,n,r,i,a){var s=(r||[]).slice(),o=s.length,{start:c,end:u}=e;if(a){var f=r[o-1],h=n(f,o-1),g=t*(f.coordinate+t*h/2-u);if(s[o-1]=f=wi(wi({},f),{},{tickCoord:g>0?f.coordinate-g*t:f.coordinate}),f.tickCoord!=null){var y=eb(t,f.tickCoord,()=>h,c,u);y&&(u=f.tickCoord-t*(h/2+i),s[o-1]=wi(wi({},f),{},{isShow:!0}))}}for(var w=a?o-1:o,S=function(M){var R=s[M],D,I=()=>(D===void 0&&(D=n(R,M)),D);if(M===0){var P=t*(R.coordinate-t*I()/2-c);s[M]=R=wi(wi({},R),{},{tickCoord:P<0?R.coordinate-P*t:R.coordinate})}else s[M]=R=wi(wi({},R),{},{tickCoord:R.coordinate});if(R.tickCoord!=null){var k=eb(t,R.tickCoord,I,c,u);k&&(c=R.tickCoord+t*(I()/2+i),s[M]=wi(wi({},R),{},{isShow:!0}))}},E=0;E<w;E++)S(E);return s}function KD(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:o,interval:c,tickFormatter:u,unit:f,angle:h}=t;if(!i||!i.length||!r)return[];if(We(c)||rw.isSsr){var g;return(g=K1e(i,We(c)?c:0))!==null&&g!==void 0?g:[]}var y=[],w=o==="top"||o==="bottom"?"width":"height",S=f&&w==="width"?R0(f,{fontSize:e,letterSpacing:n}):{width:0,height:0},E=(R,D)=>{var I=typeof u=="function"?u(R.value,D):R.value;return w==="width"?W1e(R0(I,{fontSize:e,letterSpacing:n}),S,h):R0(I,{fontSize:e,letterSpacing:n})[w]},C=i.length>=2?Ds(i[1].coordinate-i[0].coordinate):1,M=Y1e(a,C,w);return c==="equidistantPreserveStart"?X1e(C,M,E,i,s):c==="equidistantPreserveEnd"?J1e(C,M,E,i,s):(c==="preserveStart"||c==="preserveStartEnd"?y=nEe(C,M,E,i,s,c==="preserveStartEnd"):y=tEe(C,M,E,i,s),y.filter(R=>R.isShow))}var rEe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(f=>{if(f){var h=f.getBoundingClientRect();h.width>s&&(s=h.width)}});var o=n?n.getBoundingClientRect().width:0,c=i+a,u=s+c+o+(n?r:0);return Math.round(u)}return 0},iEe=["axisLine","width","height","className","hide","ticks","axisType"];function aEe(t,e){if(t==null)return{};var n,r,i=sEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fp.apply(null,arguments)}function Jz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jz(Object(n),!0).forEach(function(r){oEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oEe(t,e,n){return(e=lEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lEe(t){var e=cEe(t,"string");return typeof e=="symbol"?e:e+""}function cEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kc={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ui.axis};function uEe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:o,otherSvgProps:c}=t;if(!o)return null;var u=nr(nr(nr({},c),wo(o)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!s||a==="bottom"&&s);u=nr(nr({},u),{},{x1:e,y1:n+f*i,x2:e+r,y2:n+f*i})}else{var h=+(a==="left"&&!s||a==="right"&&s);u=nr(nr({},u),{},{x1:e+h*r,y1:n,x2:e+h*r,y2:n+i})}return T.createElement("line",fp({},u,{className:$t("recharts-cartesian-axis-line",g_(o,"className"))}))}function dEe(t,e,n,r,i,a,s,o,c){var u,f,h,g,y,w,S=o?-1:1,E=t.tickSize||s,C=We(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":u=f=t.coordinate,g=n+ +!o*i,h=g-S*E,w=h-S*c,y=C;break;case"left":h=g=t.coordinate,f=e+ +!o*r,u=f-S*E,y=u-S*c,w=C;break;case"right":h=g=t.coordinate,f=e+ +o*r,u=f+S*E,y=u+S*c,w=C;break;default:u=f=t.coordinate,g=n+ +o*i,h=g+S*E,w=h+S*c,y=C;break}return{line:{x1:u,y1:h,x2:f,y2:g},tick:{x:y,y:w}}}function fEe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function hEe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function pEe(t){var{option:e,tickProps:n,value:r}=t,i,a=$t(n.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(e))i=T.cloneElement(e,nr(nr({},n),{},{className:a}));else if(typeof e=="function")i=e(nr(nr({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=$t(s,e==null?void 0:e.className)),i=T.createElement(qD,fp({},n,{className:s}),r)}return i}var mEe=T.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:o,padding:c,tickTextProps:u,orientation:f,mirror:h,x:g,y,width:w,height:S,tickSize:E,tickMargin:C,fontSize:M,letterSpacing:R,getTicksConfig:D,events:I,axisType:P}=t,k=KD(nr(nr({},D),{},{ticks:n}),M,R),U=fEe(f,h),B=hEe(f,h),V=wo(D),H=h_(r),G={};typeof i=="object"&&(G=i);var Q=nr(nr({},V),{},{fill:"none"},G),W=k.map(q=>nr({entry:q},dEe(q,g,y,w,S,f,E,h,C))),ee=W.map(q=>{var{entry:J,line:ae}=q;return T.createElement(hl,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&T.createElement("line",fp({},Q,ae,{className:$t("recharts-cartesian-axis-tick-line",g_(i,"className"))})))}),$=W.map((q,J)=>{var{entry:ae,tick:ye}=q,Y=nr(nr(nr(nr({textAnchor:U,verticalAnchor:B},V),{},{stroke:"none",fill:a},H),ye),{},{index:J,payload:ae,visibleTicksCount:k.length,tickFormatter:s,padding:c},u);return T.createElement(hl,fp({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ae.value,"-").concat(ae.coordinate,"-").concat(ae.tickCoord)},Jde(I,ae,J)),r&&T.createElement(pEe,{option:r,tickProps:Y,value:"".concat(typeof s=="function"?s(ae.value,J):ae.value).concat(o||"")}))});return T.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},$.length>0&&T.createElement(ou,{zIndex:Ui.label},T.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:e},$)),ee.length>0&&T.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},ee))}),gEe=T.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:o,axisType:c}=t,u=aEe(t,iEe),[f,h]=T.useState(""),[g,y]=T.useState(""),w=T.useRef(null);T.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var E;return rEe({ticks:w.current,label:(E=t.labelRef)===null||E===void 0?void 0:E.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var S=T.useCallback(E=>{if(E){var C=E.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=C;var M=C[0];if(M){var R=window.getComputedStyle(M),D=R.fontSize,I=R.letterSpacing;(D!==f||I!==g)&&(h(D),y(I))}}},[f,g]);return s||r!=null&&r<=0||i!=null&&i<=0?null:T.createElement(ou,{zIndex:t.zIndex},T.createElement(hl,{className:$t("recharts-cartesian-axis",a)},T.createElement(uEe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:wo(t)}),T.createElement(mEe,{ref:S,axisType:c,events:u,fontSize:f,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:o,unit:t.unit,width:t.width,x:t.x,y:t.y}),T.createElement(wSe,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},T.createElement(PSe,{label:t.label,labelRef:t.labelRef}),t.children)))}),XD=T.forwardRef((t,e)=>{var n=ns(t,kc);return T.createElement(gEe,fp({},n,{ref:e}))});XD.displayName="CartesianAxis";var vEe=["x1","y1","x2","y2","key"],yEe=["offset"],bEe=["xAxisId","yAxisId"],xEe=["xAxisId","yAxisId"];function Qz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ai(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qz(Object(n),!0).forEach(function(r){wEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wEe(t,e,n){return(e=SEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SEe(t){var e=EEe(t,"string");return typeof e=="symbol"?e:e+""}function EEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $f(){return $f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$f.apply(null,arguments)}function oA(t,e){if(t==null)return{};var n,r,i=AEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function AEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _Ee=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:o}=t;return T.createElement("rect",{x:r,y:i,ry:o,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function GY(t){var{option:e,lineItemProps:n}=t,r;if(T.isValidElement(e))r=T.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:o,y2:c,key:u}=n,f=oA(n,vEe),h=(i=wo(f))!==null&&i!==void 0?i:{},{offset:g}=h,y=oA(h,yEe);r=T.createElement("line",$f({},y,{x1:a,y1:s,x2:o,y2:c,fill:"none",key:u}))}return r}function CEe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=oA(t,bEe),c=i.map((u,f)=>{var h=Ai(Ai({},o),{},{x1:e,y1:u,x2:e+n,y2:u,key:"line-".concat(f),index:f});return T.createElement(GY,{key:"line-".concat(f),option:r,lineItemProps:h})});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function TEe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,o=oA(t,xEe),c=i.map((u,f)=>{var h=Ai(Ai({},o),{},{x1:u,y1:e,x2:u,y2:e+n,key:"line-".concat(f),index:f});return T.createElement(GY,{option:r,lineItemProps:h,key:"line-".concat(f)})});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function NEe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:o,horizontal:c=!0}=t;if(!c||!e||!e.length||o==null)return null;var u=o.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var y=!u[g+1],w=y?i+s-h:u[g+1]-h;if(w<=0)return null;var S=g%e.length;return T.createElement("rect",{key:"react-".concat(g),y:h,x:r,height:w,width:a,stroke:"none",fill:e[S],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function REe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:o,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var u=c.map(h=>Math.round(h+i-i)).sort((h,g)=>h-g);i!==u[0]&&u.unshift(0);var f=u.map((h,g)=>{var y=!u[g+1],w=y?i+s-h:u[g+1]-h;if(w<=0)return null;var S=g%n.length;return T.createElement("rect",{key:"react-".concat(g),x:h,y:a,width:w,height:o,stroke:"none",fill:n[S],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var MEe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return DV(KD(Ai(Ai(Ai({},kc),n),{},{ticks:LV(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},PEe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return DV(KD(Ai(Ai(Ai({},kc),n),{},{ticks:LV(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},kEe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ui.grid};function qY(t){var e=GV(),n=qV(),r=$V(),i=Ai(Ai({},ns(t,kEe)),{},{x:We(t.x)?t.x:r.left,y:We(t.y)?t.y:r.top,width:We(t.width)?t.width:r.width,height:We(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:o,y:c,width:u,height:f,syncWithTicks:h,horizontalValues:g,verticalValues:y}=i,w=va(),S=Je(B=>uz(B,"xAxis",a,w)),E=Je(B=>uz(B,"yAxis",s,w));if(!ml(u)||!ml(f)||!We(o)||!We(c))return null;var C=i.verticalCoordinatesGenerator||MEe,M=i.horizontalCoordinatesGenerator||PEe,{horizontalPoints:R,verticalPoints:D}=i;if((!R||!R.length)&&typeof M=="function"){var I=g&&g.length,P=M({yAxis:E?Ai(Ai({},E),{},{ticks:I?g:E.ticks}):void 0,width:e??u,height:n??f,offset:r},I?!0:h);OE(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(R=P)}if((!D||!D.length)&&typeof C=="function"){var k=y&&y.length,U=C({xAxis:S?Ai(Ai({},S),{},{ticks:k?y:S.ticks}):void 0,width:e??u,height:n??f,offset:r},k?!0:h);OE(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(D=U)}return T.createElement(ou,{zIndex:i.zIndex},T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(_Ee,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),T.createElement(NEe,$f({},i,{horizontalPoints:R})),T.createElement(REe,$f({},i,{verticalPoints:D})),T.createElement(CEe,$f({},i,{offset:r,horizontalPoints:R,xAxis:S,yAxis:E})),T.createElement(TEe,$f({},i,{offset:r,verticalPoints:D,xAxis:S,yAxis:E}))))}qY.displayName="CartesianGrid";var IEe={},VY=ga({name:"errorBars",initialState:IEe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:M2e,replaceErrorBar:P2e,removeErrorBar:k2e}=VY.actions,DEe=VY.reducer;function WY(t,e){var n,r,i=Je(u=>iu(u,t)),a=Je(u=>au(u,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:_r.allowDataOverflow,o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Cr.allowDataOverflow,c=s||o;return{needClip:c,needClipX:s,needClipY:o}}function LEe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=WD(),{needClipX:a,needClipY:s,needClip:o}=WY(e,n);if(!o||!i)return null;var{x:c,y:u,width:f,height:h}=i;return T.createElement("clipPath",{id:"clipPath-".concat(r)},T.createElement("rect",{x:a?c:c-f/2,y:s?u:u-h/2,width:a?f:f*2,height:s?h:h*2}))}function OEe(t){var e=h_(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),o=Number(a);return(Number.isNaN(s)||s<0)&&(s=n),(Number.isNaN(o)||o<0)&&(o=r),{r:s,strokeWidth:o}}return{r:n,strokeWidth:r}}var pR={exports:{}},mR={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zz;function jEe(){if(Zz)return mR;Zz=1;var t=_v();function e(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,o=t.useDebugValue;return mR.useSyncExternalStoreWithSelector=function(c,u,f,h,g){var y=i(null);if(y.current===null){var w={hasValue:!1,value:null};y.current=w}else w=y.current;y=s(function(){function E(I){if(!C){if(C=!0,M=I,I=h(I),g!==void 0&&w.hasValue){var P=w.value;if(g(P,I))return R=P}return R=I}if(P=R,n(M,I))return P;var k=h(I);return g!==void 0&&g(P,k)?(M=I,P):(M=I,R=k)}var C=!1,M,R,D=f===void 0?null:f;return[function(){return E(u())},D===null?void 0:function(){return E(D())}]},[u,f,h,g]);var S=r(c,y[0],y[1]);return a(function(){w.hasValue=!0,w.value=S},[S]),o(S),S},mR}var e6;function FEe(){return e6||(e6=1,pR.exports=jEe()),pR.exports}FEe();function UEe(t){t()}function BEe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){UEe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var t6={notify(){},get:()=>[]};function HEe(t,e){let n,r=t6,i=0,a=!1;function s(S){f();const E=r.subscribe(S);let C=!1;return()=>{C||(C=!0,E(),h())}}function o(){r.notify()}function c(){w.onStateChange&&w.onStateChange()}function u(){return a}function f(){i++,n||(n=t.subscribe(c),r=BEe())}function h(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=t6)}function g(){a||(a=!0,f())}function y(){a&&(a=!1,h())}const w={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:y,getListeners:()=>r};return w}var zEe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$Ee=zEe(),GEe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",qEe=GEe(),VEe=()=>$Ee||qEe?T.useLayoutEffect:T.useEffect,WEe=VEe();function n6(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function YEe(t,e){if(n6(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!n6(t[n[i]],e[n[i]]))return!1;return!0}var gR=Symbol.for("react-redux-context"),vR=typeof globalThis<"u"?globalThis:{};function KEe(){if(!T.createContext)return{};const t=vR[gR]??(vR[gR]=new Map);let e=t.get(T.createContext);return e||(e=T.createContext(null),t.set(T.createContext,e)),e}var XEe=KEe();function JEe(t){const{children:e,context:n,serverState:r,store:i}=t,a=T.useMemo(()=>{const c=HEe(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=T.useMemo(()=>i.getState(),[i]);WEe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const o=n||XEe;return T.createElement(o.Provider,{value:a},e)}var QEe=JEe,ZEe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function eAe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function JD(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(ZEe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!YEe(t[r],e[r]))return!1}else if(!eAe(t[r],e[r]))return!1;return!0}function QD(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:UY}function ZD(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:UY}var YY=(t,e,n)=>YW(t,"xAxis",QD(t,e),n),KY=(t,e,n)=>WW(t,"xAxis",QD(t,e),n),XY=(t,e,n)=>YW(t,"yAxis",ZD(t,e),n),JY=(t,e,n)=>WW(t,"yAxis",ZD(t,e),n),tAe=fe([cn,YY,XY,KY,JY],(t,e,n,r,i)=>Zc(t,"xAxis")?LE(e,r,!1):LE(n,i,!1)),nAe=(t,e)=>e,QY=fe([mW,nAe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),ZY=t=>{var e=cn(t),n=Zc(e,"xAxis");return n?"yAxis":"xAxis"},rAe=(t,e)=>{var n=ZY(t);return n==="yAxis"?ZD(t,e):QD(t,e)},iAe=(t,e,n)=>AW(t,ZY(t),rAe(t,e),n),aAe=fe([QY,iAe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=AD(t);if(!(r==null||i==null)){var a=(n=e[r])===null||n===void 0?void 0:n.stackedData,s=a==null?void 0:a.find(o=>o.key===i);if(s!=null)return s.map(o=>[o[0],o[1]])}}}),sAe=fe([cn,YY,XY,KY,JY,aAe,o0e,tAe,QY,x0e],(t,e,n,r,i,a,s,o,c,u)=>{var{chartData:f,dataStartIndex:h,dataEndIndex:g}=s;if(!(c==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{data:y}=c,w;if(y&&y.length>0?w=y:w=f==null?void 0:f.slice(h,g+1),w!=null)return _Ae({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:h,areaSettings:c,stackedData:a,displayedData:w,chartBaseValue:u,bandSize:o})}}),oAe=["id"],lAe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function sp(){return sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sp.apply(null,arguments)}function e7(t,e){if(t==null)return{};var n,r,i=cAe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function r6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?r6(Object(n),!0).forEach(function(r){uAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uAe(t,e,n){return(e=dAe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dAe(t){var e=fAe(t,"string");return typeof e=="symbol"?e:e+""}function fAe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lA(t,e){return t&&t!=="none"?t:e}var hAe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:a,hide:s}=t;return[{inactive:s,dataKey:e,type:a,color:lA(r,i),value:OV(n,e),payload:t}]},pAe=T.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:s,hide:o,unit:c,tooltipType:u,id:f}=t,h={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:OV(s,e),hide:o,type:u,color:lA(r,a),unit:c,graphicalItemId:f}};return T.createElement(YSe,{tooltipEntrySettings:h})});function mAe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:a,dataKey:s}=r,o=wo(r);return T.createElement(g1e,{points:n,dot:a,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:s,baseProps:o,needClip:i,clipPathId:e})}function gAe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(a=>{var s,o,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(o=a.y)!==null&&o!==void 0?o:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Tm(Tm({},c),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return T.createElement(zSe,{value:e?i:void 0},n)}function i6(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:a}=t,{layout:s,type:o,stroke:c,connectNulls:u,isRange:f}=a,{id:h}=a,g=e7(a,oAe),y=wo(g),w=Bs(g);return T.createElement(T.Fragment,null,(e==null?void 0:e.length)>1&&T.createElement(hl,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},T.createElement(M1,sp({},w,{id:h,points:e,connectNulls:u,type:o,baseLine:n,layout:s,stroke:"none",className:"recharts-area-area"})),c!=="none"&&T.createElement(M1,sp({},y,{className:"recharts-area-curve",layout:s,type:o,connectNulls:u,fill:"none",points:e})),c!=="none"&&f&&T.createElement(M1,sp({},y,{className:"recharts-area-curve",layout:s,type:o,connectNulls:u,fill:"none",points:n}))),T.createElement(mAe,{points:e,props:g,clipPathId:i}))}function vAe(t){var e,n,{alpha:r,baseLine:i,points:a,strokeWidth:s}=t,o=(e=a[0])===null||e===void 0?void 0:e.y,c=(n=a[a.length-1])===null||n===void 0?void 0:n.y;if(!wn(o)||!wn(c))return null;var u=r*Math.abs(o-c),f=Math.max(...a.map(h=>h.x||0));return We(i)?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(...i.map(h=>h.x||0),f)),We(f)?T.createElement("rect",{x:0,y:o<c?o:o-u,width:f+(s?parseInt("".concat(s),10):1),height:Math.floor(u)}):null}function yAe(t){var e,n,{alpha:r,baseLine:i,points:a,strokeWidth:s}=t,o=(e=a[0])===null||e===void 0?void 0:e.x,c=(n=a[a.length-1])===null||n===void 0?void 0:n.x;if(!wn(o)||!wn(c))return null;var u=r*Math.abs(o-c),f=Math.max(...a.map(h=>h.y||0));return We(i)?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(...i.map(h=>h.y||0),f)),We(f)?T.createElement("rect",{x:o<c?o:o-u,y:0,width:u,height:Math.floor(f+(s?parseInt("".concat(s),10):1))}):null}function bAe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:a}=t;return n==="vertical"?T.createElement(vAe,{alpha:e,points:r,baseLine:i,strokeWidth:a}):T.createElement(yAe,{alpha:e,points:r,baseLine:i,strokeWidth:a})}function xAe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a}=t,{points:s,baseLine:o,isAnimationActive:c,animationBegin:u,animationDuration:f,animationEasing:h,onAnimationStart:g,onAnimationEnd:y}=r,w=T.useMemo(()=>({points:s,baseLine:o}),[s,o]),S=i9(w,"recharts-area-"),E=Gpe(),[C,M]=T.useState(!1),R=!C,D=T.useCallback(()=>{typeof y=="function"&&y(),M(!1)},[y]),I=T.useCallback(()=>{typeof g=="function"&&g(),M(!0)},[g]);if(E==null)return null;var P=i.current,k=a.current;return T.createElement(gAe,{showLabels:R,points:s},r.children,T.createElement(r9,{animationId:S,begin:u,duration:f,isActive:c,easing:h,onAnimationEnd:D,onAnimationStart:I,key:S},U=>{if(P){var B=P.length/s.length,V=U===1?s:s.map((G,Q)=>{var W=Math.floor(Q*B);if(P[W]){var ee=P[W];return Tm(Tm({},G),{},{x:sl(ee.x,G.x,U),y:sl(ee.y,G.y,U)})}return G}),H;return We(o)?H=sl(k,o,U):oi(o)||So(o)?H=sl(k,0,U):H=o.map((G,Q)=>{var W=Math.floor(Q*B);if(Array.isArray(k)&&k[W]){var ee=k[W];return Tm(Tm({},G),{},{x:sl(ee.x,G.x,U),y:sl(ee.y,G.y,U)})}return G}),U>0&&(i.current=V,a.current=H),T.createElement(i6,{points:V,baseLine:H,needClip:e,clipPathId:n,props:r})}return U>0&&(i.current=s,a.current=o),T.createElement(hl,null,c&&T.createElement("defs",null,T.createElement("clipPath",{id:"animationClipPath-".concat(n)},T.createElement(bAe,{alpha:U,points:s,baseLine:o,layout:E,strokeWidth:r.strokeWidth}))),T.createElement(hl,{clipPath:"url(#animationClipPath-".concat(n,")")},T.createElement(i6,{points:s,baseLine:o,needClip:e,clipPathId:n,props:r})))}),T.createElement(qSe,{label:r.label}))}function wAe(t){var{needClip:e,clipPathId:n,props:r}=t,i=T.useRef(null),a=T.useRef();return T.createElement(xAe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:a})}class SAe extends T.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:a,left:s,needClip:o,xAxisId:c,yAxisId:u,width:f,height:h,id:g,baseLine:y,zIndex:w}=this.props;if(e)return null;var S=$t("recharts-area",i),E=g,{r:C,strokeWidth:M}=OEe(n),R=jY(n),D=C*2+M,I=o?"url(#clipPath-".concat(R?"":"dots-").concat(E,")"):void 0;return T.createElement(ou,{zIndex:w},T.createElement(hl,{className:S},o&&T.createElement("defs",null,T.createElement(LEe,{clipPathId:E,xAxisId:c,yAxisId:u}),!R&&T.createElement("clipPath",{id:"clipPath-dots-".concat(E)},T.createElement("rect",{x:s-D/2,y:a-D/2,width:f+D,height:h+D}))),T.createElement(wAe,{needClip:o,clipPathId:E,props:this.props})),T.createElement(Yz,{points:r,mainColor:lA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}),this.props.isRange&&Array.isArray(y)&&T.createElement(Yz,{points:y,mainColor:lA(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:I}))}}var t7={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Ui.area};function EAe(t){var e,n=ns(t,t7),{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:o,dot:c,fill:u,fillOpacity:f,hide:h,isAnimationActive:g,legendType:y,stroke:w,xAxisId:S,yAxisId:E}=n,C=e7(n,lAe),M=kv(),R=mY(),{needClip:D}=WY(S,E),I=va(),{points:P,isRange:k,baseLine:U}=(e=Je(W=>sAe(W,t.id,I)))!==null&&e!==void 0?e:{},B=WD();if(M!=="horizontal"&&M!=="vertical"||B==null||R!=="AreaChart"&&R!=="ComposedChart")return null;var{height:V,width:H,x:G,y:Q}=B;return!P||!P.length?null:T.createElement(SAe,sp({},C,{activeDot:r,animationBegin:i,animationDuration:a,animationEasing:s,baseLine:U,connectNulls:o,dot:c,fill:u,fillOpacity:f,height:V,hide:h,layout:M,isAnimationActive:g==="auto"?!rw.isSsr:g,isRange:k,legendType:y,needClip:D,points:P,stroke:w,width:H,left:G,top:Q,xAxisId:S,yAxisId:E}))}var AAe=(t,e,n,r,i)=>{var a=n??e;if(We(a))return a;var s=t==="horizontal"?i:r,o=s.scale.domain();if(s.type==="number"){var c=Math.max(o[0],o[1]),u=Math.min(o[0],o[1]);return a==="dataMin"?u:a==="dataMax"||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return a==="dataMin"?o[0]:a==="dataMax"?o[1]:o[0]};function _Ae(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:a,chartBaseValue:s,xAxis:o,yAxis:c,displayedData:u,dataStartIndex:f,xAxisTicks:h,yAxisTicks:g,bandSize:y}=t,w=i&&i.length,S=AAe(a,s,n,o,c),E=a==="horizontal",C=!1,M=u.map((D,I)=>{var P,k,U;if(w)U=i[f+I];else{var B=li(D,r);Array.isArray(B)?(U=B,C=!0):U=[S,B]}var V=(P=(k=U)===null||k===void 0?void 0:k[1])!==null&&P!==void 0?P:null,H=V==null||w&&!e&&li(D,r)==null;return E?{x:gB({axis:o,ticks:h,bandSize:y,entry:D,index:I}),y:H?null:c.scale(V),value:U,payload:D}:{x:H?null:o.scale(V),y:gB({axis:c,ticks:g,bandSize:y,entry:D,index:I}),value:U,payload:D}}),R;return w||C?R=M.map(D=>{var I=Array.isArray(D.value)?D.value[0]:null;return E?{x:D.x,y:I!=null&&D.y!=null?c.scale(I):null,payload:D.payload}:{x:I!=null?o.scale(I):null,y:D.y,payload:D.payload}}):R=E?c.scale(S):o.scale(S),{points:M,baseLine:R,isRange:C}}function CAe(t){var e=ns(t,t7),n=va();return T.createElement(e1e,{id:e.id,type:"area"},r=>T.createElement(T.Fragment,null,T.createElement(KSe,{legendPayload:hAe(e)}),T.createElement(pAe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),T.createElement(o1e,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:spe(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),T.createElement(EAe,sp({},e,{id:r}))))}var n7=T.memo(CAe,JD);n7.displayName="Area";var TAe="Invariant failed";function nn(t,e){if(!t)throw new Error(TAe)}var NAe=["domain","range"],RAe=["domain","range"];function a6(t,e){if(t==null)return{};var n,r,i=MAe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function MAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function s6(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function r7(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=a6(t,NAe),{domain:a,range:s}=e,o=a6(e,RAe);return!s6(n,a)||!s6(r,s)?!1:JD(i,o)}var PAe=["dangerouslySetInnerHTML","ticks","scale"],kAe=["id","scale"];function iP(){return iP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iP.apply(null,arguments)}function o6(t,e){if(t==null)return{};var n,r,i=IAe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function IAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function DAe(t){var e=Br(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(w1e(t)):n.current!==t&&e(S1e({prev:n.current,next:t})),n.current=t},[t,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(E1e(n.current)),n.current=null)},[e]),null}var LAe=t=>{var{xAxisId:e,className:n}=t,r=Je(FV),i=va(),a="xAxis",s=Je(C=>VW(C,a,e,i)),o=Je(C=>fbe(C,e)),c=Je(C=>ybe(C,e)),u=Je(C=>dW(C,e));if(o==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:f,ticks:h,scale:g}=t,y=o6(t,PAe),{id:w,scale:S}=u,E=o6(u,kAe);return T.createElement(XD,iP({},y,E,{x:c.x,y:c.y,width:o.width,height:o.height,className:$t("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:s,axisType:a}))},OAe={allowDataOverflow:_r.allowDataOverflow,allowDecimals:_r.allowDecimals,allowDuplicatedCategory:_r.allowDuplicatedCategory,angle:_r.angle,axisLine:kc.axisLine,height:_r.height,hide:!1,includeHidden:_r.includeHidden,interval:_r.interval,minTickGap:_r.minTickGap,mirror:_r.mirror,orientation:_r.orientation,padding:_r.padding,reversed:_r.reversed,scale:_r.scale,tick:_r.tick,tickCount:_r.tickCount,tickLine:kc.tickLine,tickSize:kc.tickSize,type:_r.type,xAxisId:0},jAe=t=>{var e=ns(t,OAe);return T.createElement(T.Fragment,null,T.createElement(DAe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),T.createElement(LAe,e))},i7=T.memo(jAe,r7);i7.displayName="XAxis";var FAe=["dangerouslySetInnerHTML","ticks","scale"],UAe=["id","scale"];function aP(){return aP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aP.apply(null,arguments)}function l6(t,e){if(t==null)return{};var n,r,i=BAe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function BAe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function HAe(t){var e=Br(),n=T.useRef(null);return T.useLayoutEffect(()=>{n.current===null?e(A1e(t)):n.current!==t&&e(_1e({prev:n.current,next:t})),n.current=t},[t,e]),T.useLayoutEffect(()=>()=>{n.current&&(e(C1e(n.current)),n.current=null)},[e]),null}var zAe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=T.useRef(null),s=T.useRef(null),o=Je(FV),c=va(),u=Br(),f="yAxis",h=Je(P=>wbe(P,e)),g=Je(P=>xbe(P,e)),y=Je(P=>VW(P,f,e,c)),w=Je(P=>fW(P,e));if(T.useLayoutEffect(()=>{if(!(r!=="auto"||!h||VD(i)||T.isValidElement(i)||w==null)){var P=a.current;if(P){var k=P.getCalculatedWidth();Math.round(h.width)!==Math.round(k)&&u(T1e({id:e,width:k}))}}},[y,h,u,i,e,r,w]),h==null||g==null||w==null)return null;var{dangerouslySetInnerHTML:S,ticks:E,scale:C}=t,M=l6(t,FAe),{id:R,scale:D}=w,I=l6(w,UAe);return T.createElement(XD,aP({},M,I,{ref:a,labelRef:s,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:h.width,height:h.height,className:$t("recharts-".concat(f," ").concat(f),n),viewBox:o,ticks:y,axisType:f}))},$Ae={allowDataOverflow:Cr.allowDataOverflow,allowDecimals:Cr.allowDecimals,allowDuplicatedCategory:Cr.allowDuplicatedCategory,angle:Cr.angle,axisLine:kc.axisLine,hide:!1,includeHidden:Cr.includeHidden,interval:Cr.interval,minTickGap:Cr.minTickGap,mirror:Cr.mirror,orientation:Cr.orientation,padding:Cr.padding,reversed:Cr.reversed,scale:Cr.scale,tick:Cr.tick,tickCount:Cr.tickCount,tickLine:kc.tickLine,tickSize:kc.tickSize,type:Cr.type,width:Cr.width,yAxisId:0},GAe=t=>{var e=ns(t,$Ae);return T.createElement(T.Fragment,null,T.createElement(HAe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),T.createElement(zAe,e))},a7=T.memo(GAe,r7);a7.displayName="YAxis";var qAe=(t,e)=>e,eL=fe([qAe,cn,cW,yr,cY,su,Lxe,ui],zxe),tL=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},s7=Hs("mouseClick"),o7=ew();o7.startListening({actionCreator:s7,effect:(t,e)=>{var n=t.payload,r=eL(e.getState(),tL(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(Dbe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var sP=Hs("mouseMove"),l7=ew(),u1=null;l7.startListening({actionCreator:sP,effect:(t,e)=>{var n=t.payload;u1!==null&&cancelAnimationFrame(u1);var r=tL(n);u1=requestAnimationFrame(()=>{var i=e.getState(),a=LD(i,i.tooltip.settings.shared);if(a==="axis"){var s=eL(i,r);(s==null?void 0:s.activeIndex)!=null?e.dispatch(tY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(eY())}u1=null})}});function VAe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var c6={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},c7=ga({name:"rootProps",initialState:c6,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:c6.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),WAe=c7.reducer,{updateOptions:YAe}=c7.actions,u7=ga({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:I2e}=u7.actions,KAe=u7.reducer,d7=Hs("keyDown"),f7=Hs("focus"),nL=ew();nL.startListening({actionCreator:d7,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=OD(i,Bv(n),uw(n),pw(n)),o=s==null?-1:Number(s);if(!(!Number.isFinite(o)||o<0)){var c=su(n);if(a==="Enter"){var u=iA(n,"axis","hover",String(i.index));e.dispatch(QM({active:!i.active,activeIndex:i.index,activeCoordinate:u}));return}var f=_be(n),h=f==="left-to-right"?1:-1,g=a==="ArrowRight"?1:-1,y=o+g*h;if(!(c==null||y>=c.length||y<0)){var w=iA(n,"axis","hover",String(y));e.dispatch(QM({active:!0,activeIndex:y.toString(),activeCoordinate:w}))}}}}}});nL.startListening({actionCreator:f7,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=iA(n,"axis","hover",String(a));e.dispatch(QM({active:!0,activeIndex:a,activeCoordinate:s}))}}}});var ys=Hs("externalEvent"),h7=ew(),yR=new Map;h7.startListening({actionCreator:ys,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=yR.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var o=e.getState(),c={activeCoordinate:xxe(o),activeDataKey:yxe(o),activeIndex:Q0(o),activeLabel:fY(o),activeTooltipIndex:Q0(o),isTooltipActive:wxe(o)};n(c,r)}finally{yR.delete(i)}});yR.set(i,s)}}});var XAe=fe([Fv],t=>t.tooltipItemPayloads),JAe=fe([XAe,hw,(t,e)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(o=>o.settings.graphicalItemId===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),p7=Hs("touchMove"),m7=ew();m7.startListening({actionCreator:p7,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=LD(r,r.tooltip.settings.shared);if(i==="axis"){var a=n.touches[0];if(a==null)return;var s=eL(r,tL({clientX:a.clientX,clientY:a.clientY,currentTarget:n.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&e.dispatch(tY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var f=u.getAttribute(hpe),h=(o=u.getAttribute(ppe))!==null&&o!==void 0?o:void 0,g=Uv(r).find(S=>S.id===h);if(f==null||g==null||h==null)return;var{dataKey:y}=g,w=JAe(r,f,h);e.dispatch(Ibe({activeDataKey:y,activeIndex:f,activeCoordinate:w,activeGraphicalItemId:h}))}}}});var QAe=aV({brush:j1e,cartesianAxis:N1e,chartData:xwe,errorBars:DEe,graphicalItems:a1e,layout:Xhe,legend:ome,options:mwe,polarAxis:WSe,polarOptions:KAe,referenceElements:G1e,rootProps:WAe,tooltip:Lbe,zIndex:nwe}),ZAe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return whe({reducer:QAe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([o7.middleware,l7.middleware,nL.middleware,h7.middleware,m7.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(xV({type:"raf"}))},devTools:{serialize:{replacer:VAe},name:"recharts-".concat(n)}})};function e_e(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=va(),a=T.useRef(null);if(i)return n;a.current==null&&(a.current=ZAe(e,r));var s=jI;return T.createElement(QEe,{context:s,store:a.current},n)}function t_e(t){var{layout:e,margin:n}=t,r=Br(),i=va();return T.useEffect(()=>{i||(r(Whe(e)),r(Vhe(n)))},[r,i,e,n]),null}var n_e=T.memo(t_e,JD);function r_e(t){var e=Br();return T.useEffect(()=>{e(YAe(t))},[e,t]),null}function u6(t){var{zIndex:e,isPanorama:n}=t,r=T.useRef(null),i=Br();return T.useLayoutEffect(()=>(r.current&&i(ewe({zIndex:e,element:r.current,isPanorama:n})),()=>{i(twe({zIndex:e,isPanorama:n}))}),[i,e,n]),T.createElement("g",{tabIndex:-1,ref:r})}function d6(t){var{children:e,isPanorama:n}=t,r=Je(Gxe);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return T.createElement(T.Fragment,null,i.map(s=>T.createElement(u6,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>T.createElement(u6,{key:s,zIndex:s,isPanorama:n})))}var i_e=["children"];function a_e(t,e){if(t==null)return{};var n,r,i=s_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function s_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cA(){return cA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cA.apply(null,arguments)}var o_e={width:"100%",height:"100%",display:"block"},l_e=T.forwardRef((t,e)=>{var n=GV(),r=qV(),i=ZV();if(!ml(n)||!ml(r))return null;var{children:a,otherAttributes:s,title:o,desc:c}=t,u,f;return s!=null&&(typeof s.tabIndex=="number"?u=s.tabIndex:u=i?0:void 0,typeof s.role=="string"?f=s.role:f=i?"application":void 0),T.createElement(Tq,cA({},s,{title:o,desc:c,role:f,tabIndex:u,width:n,height:r,style:o_e,ref:e}),a)}),c_e=t=>{var{children:e}=t,n=Je(M_);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return T.createElement(Tq,{width:r,height:i,x:s,y:a},e)},f6=T.forwardRef((t,e)=>{var{children:n}=t,r=a_e(t,i_e),i=va();return i?T.createElement(c_e,null,T.createElement(d6,{isPanorama:!0},n)):T.createElement(l_e,cA({ref:e},r),T.createElement(d6,{isPanorama:!1},n))});function u_e(){var t=Br(),[e,n]=T.useState(null),r=Je(fpe);return T.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;wn(a)&&a!==r&&t(Khe(a))}},[e,t,r]),n}function h6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d_e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h6(Object(n),!0).forEach(function(r){f_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function f_e(t,e,n){return(e=h_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h_e(t){var e=p_e(t,"string");return typeof e=="symbol"?e:e+""}function p_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hp(){return hp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hp.apply(null,arguments)}var m_e=()=>(Rwe(),null);function uA(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var g_e=T.forwardRef((t,e)=>{var n,r,i=T.useRef(null),[a,s]=T.useState({containerWidth:uA((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:uA((r=t.style)===null||r===void 0?void 0:r.height)}),o=T.useCallback((u,f)=>{s(h=>{var g=Math.round(u),y=Math.round(f);return h.containerWidth===g&&h.containerHeight===y?h:{containerWidth:g,containerHeight:y}})},[]),c=T.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null&&typeof ResizeObserver<"u"){var{width:f,height:h}=u.getBoundingClientRect();o(f,h);var g=w=>{var{width:S,height:E}=w[0].contentRect;o(S,E)},y=new ResizeObserver(g);y.observe(u),i.current=y}},[e,o]);return T.useEffect(()=>()=>{var u=i.current;u!=null&&u.disconnect()},[o]),T.createElement(T.Fragment,null,T.createElement(k_,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",hp({ref:c},t)))}),v_e=T.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=T.useState({containerWidth:uA(n),containerHeight:uA(r)}),s=T.useCallback((c,u)=>{a(f=>{var h=Math.round(c),g=Math.round(u);return f.containerWidth===h&&f.containerHeight===g?f:{containerWidth:h,containerHeight:g}})},[]),o=T.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:u,height:f}=c.getBoundingClientRect();s(u,f)}},[e,s]);return T.createElement(T.Fragment,null,T.createElement(k_,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",hp({ref:o},t)))}),y_e=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return T.createElement(T.Fragment,null,T.createElement(k_,{width:n,height:r}),T.createElement("div",hp({ref:e},t)))}),b_e=T.forwardRef((t,e)=>{var{width:n,height:r}=t;return Fc(n)||Fc(r)?T.createElement(v_e,hp({},t,{ref:e})):T.createElement(y_e,hp({},t,{ref:e}))});function x_e(t){return t===!0?g_e:b_e}var w_e=T.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:f,onMouseMove:h,onMouseUp:g,onTouchEnd:y,onTouchMove:w,onTouchStart:S,style:E,width:C,responsive:M,dispatchTouchEvents:R=!0}=t,D=T.useRef(null),I=Br(),[P,k]=T.useState(null),[U,B]=T.useState(null),V=u_e(),H=GI(),G=(H==null?void 0:H.width)>0?H.width:C,Q=(H==null?void 0:H.height)>0?H.height:i,W=T.useCallback(he=>{V(he),typeof e=="function"&&e(he),k(he),B(he),he!=null&&(D.current=he)},[V,e,k,B]),ee=T.useCallback(he=>{I(s7(he)),I(ys({handler:a,reactEvent:he}))},[I,a]),$=T.useCallback(he=>{I(sP(he)),I(ys({handler:u,reactEvent:he}))},[I,u]),q=T.useCallback(he=>{I(eY()),I(ys({handler:f,reactEvent:he}))},[I,f]),J=T.useCallback(he=>{I(sP(he)),I(ys({handler:h,reactEvent:he}))},[I,h]),ae=T.useCallback(()=>{I(f7())},[I]),ye=T.useCallback(he=>{I(d7(he.key))},[I]),Y=T.useCallback(he=>{I(ys({handler:s,reactEvent:he}))},[I,s]),ne=T.useCallback(he=>{I(ys({handler:o,reactEvent:he}))},[I,o]),ue=T.useCallback(he=>{I(ys({handler:c,reactEvent:he}))},[I,c]),me=T.useCallback(he=>{I(ys({handler:g,reactEvent:he}))},[I,g]),xe=T.useCallback(he=>{I(ys({handler:S,reactEvent:he}))},[I,S]),Me=T.useCallback(he=>{R&&I(p7(he)),I(ys({handler:w,reactEvent:he}))},[I,R,w]),Ce=T.useCallback(he=>{I(ys({handler:y,reactEvent:he}))},[I,y]),pt=x_e(M);return T.createElement(xY.Provider,{value:P},T.createElement(wde.Provider,{value:U},T.createElement(pt,{width:G??(E==null?void 0:E.width),height:Q??(E==null?void 0:E.height),className:$t("recharts-wrapper",r),style:d_e({position:"relative",cursor:"default",width:G,height:Q},E),onClick:ee,onContextMenu:Y,onDoubleClick:ne,onFocus:ae,onKeyDown:ye,onMouseDown:ue,onMouseEnter:$,onMouseLeave:q,onMouseMove:J,onMouseUp:me,onTouchEnd:Ce,onTouchMove:Me,onTouchStart:xe,ref:W},T.createElement(m_e,null),n)))}),S_e=["width","height","responsive","children","className","style","compact","title","desc"];function E_e(t,e){if(t==null)return{};var n,r,i=A_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function A_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var __e=T.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:o,compact:c,title:u,desc:f}=t,h=E_e(t,S_e),g=wo(h);return c?T.createElement(T.Fragment,null,T.createElement(k_,{width:n,height:r}),T.createElement(f6,{otherAttributes:g,title:u,desc:f},a)):T.createElement(w_e,{className:s,style:o,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},T.createElement(f6,{otherAttributes:g,title:u,desc:f,ref:e},T.createElement(V1e,null,a)))});function oP(){return oP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oP.apply(null,arguments)}var C_e={top:5,right:5,bottom:5,left:5},T_e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:C_e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},N_e=T.forwardRef(function(e,n){var r,i=ns(e.categoricalChartProps,T_e),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:u}=e,f={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return T.createElement(e_e,{preloadedState:{options:f},reduxStoreName:(r=u.id)!==null&&r!==void 0?r:a},T.createElement(O1e,{chartData:u.data}),T.createElement(n_e,{layout:i.layout,margin:i.margin}),T.createElement(r_e,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),T.createElement(__e,oP({},i,{ref:n})))}),R_e=["axis"],M_e=T.forwardRef((t,e)=>T.createElement(N_e,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:R_e,tooltipPayloadSearcher:hwe,categoricalChartProps:t,ref:e}));const P_e=[{name:"Jan",sales:12e3},{name:"Feb",sales:19e3},{name:"Mar",sales:15e3},{name:"Apr",sales:22e3},{name:"May",sales:28e3},{name:"Jun",sales:24e3},{name:"Jul",sales:32e3},{name:"Aug",sales:38e3}],k_e=({title:t="Revenue Trend",data:e=P_e,className:n=""})=>v.jsxs("div",{className:`flex flex-col h-full w-full ${n}`,children:[v.jsx("div",{className:"flex justify-between items-center mb-6 px-2 shrink-0",children:v.jsx("h3",{className:"text-lg font-medium text-white",children:t})}),v.jsx("div",{className:"flex-1 w-full min-h-0 relative",children:v.jsx("div",{className:"absolute inset-0",children:v.jsx(zpe,{width:"100%",height:"100%",children:v.jsxs(M_e,{data:e,margin:{top:10,right:10,left:-20,bottom:0},children:[v.jsx("defs",{children:v.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[v.jsx("stop",{offset:"5%",stopColor:"#81c995",stopOpacity:.3}),v.jsx("stop",{offset:"95%",stopColor:"#81c995",stopOpacity:0})]})}),v.jsx(qY,{strokeDasharray:"3 3",stroke:"#333",vertical:!1}),v.jsx(i7,{dataKey:"name",stroke:"#666",tick:{fill:"#999",fontSize:11},axisLine:!1,tickLine:!1,dy:10}),v.jsx(a7,{stroke:"#666",tick:{fill:"#999",fontSize:11},tickFormatter:r=>`${r>=1e3?(r/1e3).toFixed(0)+"k":r}`,axisLine:!1,tickLine:!1}),v.jsx(jwe,{cursor:{stroke:"#81c995",strokeWidth:1,strokeDasharray:"4 4"},contentStyle:{backgroundColor:"#1e1e1e",border:"1px solid #333",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.5)"},itemStyle:{color:"#fff",fontSize:"12px"},labelStyle:{color:"#888",fontSize:"10px",marginBottom:"4px"},formatter:r=>[`${r.toLocaleString()}`,"Revenue"]}),v.jsx(n7,{type:"monotone",dataKey:"sales",stroke:"#81c995",strokeWidth:3,fillOpacity:1,fill:"url(#colorSales)"})]})})})})]}),I_e="cowritter",D_e="user-data",L_e=()=>localStorage.getItem("github_access_token"),O_e=async(t,e)=>{L_e();try{return localStorage.setItem(`cowritter_site_${t}`,JSON.stringify(e)),await new Promise(n=>setTimeout(n,1500)),{success:!0,message:"Deployed to GitHub Pages",url:`https://co-writter.github.io/${t}`}}catch(n){return console.error("Deployment failed",n),{success:!1,message:"Storage Error"}}},j_e=async t=>{try{const e=localStorage.getItem(`cowritter_site_${t}`);if(e)return JSON.parse(e)}catch{console.warn("Failed to load from local storage simulation")}try{const e=await fetch(`https://raw.githubusercontent.com/${I_e}/${D_e}/main/users/${t}.json`);return e.ok?await e.json():null}catch(e){return console.error("Failed to load profile from GitHub:",e),null}},{useNavigate:F_e}=Fr,U_e=[{id:1,name:"Alice Freeman",email:"alice.f...@gmail.com",location:"Mumbai, IN",time:"2 mins ago",status:"Signed In",action:"Viewed 'The Void Start'",avatar:"A"},{id:2,name:"Bob Script",email:"bob.script...@outlook.com",location:"London, UK",time:"15 mins ago",status:"Signed In",action:"Purchased 'Neural Architectures'",avatar:"B"},{id:3,name:"Guest User",email:"",location:"New York, US",time:"42 mins ago",status:"Guest",action:"Browsing Store",avatar:"?"},{id:4,name:"Diana Prince",email:"diana.p...@gmail.com",location:"Toronto, CA",time:"1 hour ago",status:"Signed In",action:"Added to Cart",avatar:"D"},{id:5,name:"Evan Wright",email:"evan.w...@yahoo.com",location:"Sydney, AU",time:"3 hours ago",status:"Signed In",action:"Viewed Profile",avatar:"E"},{id:6,name:"Guest User",email:"",location:"Berlin, DE",time:"5 hours ago",status:"Guest",action:"Read Preview",avatar:"?"}],B_e=()=>{const{currentUser:t,updateSellerCreatorSite:e,addCreatedBook:n,setCurrentUser:r,userType:i}=Gi(),a=t,[s,o]=T.useState("overview"),c=F_e(),[u,f]=T.useState(!1),[h,g]=T.useState(null),y=(a==null?void 0:a.uploadedBooks)||[],[w,S]=T.useState((a==null?void 0:a.creatorSite)||{isEnabled:!1,slug:a==null?void 0:a.name.toLowerCase().replace(/\s+/g,"-"),theme:"dark-minimal",profileImageUrl:(a==null?void 0:a.profileImageUrl)||"",displayName:(a==null?void 0:a.name)||"",tagline:"Author & Digital Creator",showcasedBookIds:[]});if(T.useEffect(()=>{a!=null&&a.creatorSite&&S(a.creatorSite)},[a]),!a)return null;const E=P=>{n(P),o("overview")},C=async()=>{if(!w.slug)return;f(!0),e(w);const P=await O_e(w.slug,{sellerProfile:a,siteConfig:w,books:y});P.success&&g(P.url||null),f(!1)},M=P=>{const{name:k,value:U,type:B}=P.target;if(B==="checkbox"){const{checked:V}=P.target;S(H=>({...H,[k]:V}))}else S(V=>({...V,[k]:U}))},R=({id:P,label:k,icon:U,onClick:B})=>v.jsxs("button",{onClick:B||(()=>o(P)),className:`w-full flex items-center gap-4 px-6 py-3.5 text-sm font-medium rounded-r-full transition-all duration-200 group ${s===P?"bg-[#34a853]/15 text-[#81c995] border-l-4 border-[#34a853]":"text-neutral-400 hover:bg-white/5 hover:text-white border-l-4 border-transparent"}`,children:[v.jsx(U,{className:`w-5 h-5 ${s===P?"text-[#81c995]":"text-neutral-500 group-hover:text-white"}`}),k]}),D=({id:P,label:k,icon:U})=>v.jsxs("button",{onClick:()=>o(P),className:`flex flex-col items-center justify-center py-2 px-4 flex-1 transition-colors ${s===P?"text-white":"text-neutral-500 hover:text-neutral-300"}`,children:[v.jsx(U,{className:`w-6 h-6 mb-1 ${s===P?"text-[#81c995]":"text-current"}`}),v.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:k})]}),I=a.isAdmin===!0||a.email==="subatomicerror@gmail.com";return v.jsxs("div",{className:"h-screen w-full bg-[#0b0b0b] font-sans text-white pt-16 flex overflow-hidden",children:[v.jsxs("aside",{className:"w-64 flex-shrink-0 border-r border-white/5 hidden md:flex flex-col bg-[#0b0b0b] z-20 h-full overflow-y-auto",children:[v.jsxs("nav",{className:"flex-1 space-y-1 pr-4 mt-6",children:[v.jsx(R,{id:"home",label:"Back to Home",icon:uM,onClick:()=>c("/")}),v.jsx("div",{className:"my-4 border-t border-white/5 mx-6"}),v.jsx(R,{id:"overview",label:"Overview",icon:n0}),v.jsx(R,{id:"audience",label:"Audience",icon:lM}),v.jsx(R,{id:"studio",label:"Content Manager",icon:ON}),v.jsx("div",{className:"my-4 border-t border-white/5 mx-6"}),v.jsx(R,{id:"settings",label:"Site Settings",icon:N0}),I&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"my-4 border-t border-white/5 mx-6"}),v.jsx(R,{id:"admin",label:"System Admin",icon:GF})]})]}),v.jsxs("div",{className:"p-6 border-t border-white/5",children:[v.jsx("button",{onClick:()=>r(t,Ht.USER),className:"text-xs font-medium text-neutral-500 hover:text-white transition-colors mb-4 block",children:"Switch to Reading Mode"}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-800 overflow-hidden border border-white/10",children:a.profileImageUrl?v.jsx("img",{src:a.profileImageUrl,alt:"",className:"w-full h-full object-cover"}):v.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-500 font-bold",children:a.name[0]})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("p",{className:"text-sm font-bold truncate flex items-center gap-2",children:[a.name,a.isVerified&&v.jsx(Or,{className:"w-3 h-3 text-[#34a853]"})]}),v.jsx("p",{className:"text-xs text-neutral-500 truncate",children:I?"System Owner":"Writer Account"})]})]})]})]}),v.jsx("main",{className:"flex-1 h-full overflow-y-auto bg-[#0b0b0b] relative scroll-smooth",children:v.jsxs("div",{className:"p-4 md:p-8 pb-32",children:[v.jsx("div",{className:"mb-8 flex justify-between items-center",children:v.jsxs("h1",{className:"text-xl md:text-2xl font-normal text-white",children:[s==="overview"&&(I?"Global Overview":"Dashboard Overview"),s==="audience"&&"Live Audience",s==="studio"&&"Content Manager",s==="settings"&&"Site Configuration",s==="admin"&&"System Administration"]})}),s==="overview"&&v.jsxs("div",{className:"space-y-6 animate-fade-in",children:[v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{label:"Revenue",value:I?"1,240,500":"24,500",icon:f_,color:"text-[#81c995]"},{label:"Total Visitors",value:I?"84,320":"1,240",icon:n0,color:"text-[#a8c7fa]"},{label:I?"Total Books":"Active Books",value:I?"342":y.length.toString(),icon:Ti,color:"text-[#fdd663]"}].map((P,k)=>v.jsxs("div",{className:"bg-[#1e1e1e] p-6 rounded-3xl border border-white/5",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsx("div",{className:`p-3 rounded-full bg-white/5 ${P.color}`,children:v.jsx(P.icon,{className:"w-6 h-6"})}),v.jsx("span",{className:"text-xs font-bold bg-green-900/30 text-green-400 px-2 py-1 rounded-full",children:"+12%"})]}),v.jsx("h3",{className:"text-3xl font-normal text-white mb-1",children:P.value}),v.jsx("p",{className:"text-sm text-neutral-500",children:P.label})]},k))}),v.jsx("div",{className:"bg-[#1e1e1e] rounded-3xl p-8 border border-white/5 h-[300px] md:h-[400px]",children:v.jsx(k_e,{className:"w-full h-full",title:I?"Platform Revenue":"Revenue Trend"})}),!I&&v.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl overflow-hidden border border-white/5",children:[v.jsxs("div",{className:"px-6 md:px-8 py-6 border-b border-white/5 flex justify-between items-center",children:[v.jsx("h3",{className:"text-lg font-medium",children:"Recent Uploads"}),v.jsx("button",{onClick:()=>o("studio"),className:"text-sm text-[#81c995] font-bold hover:underline",children:"View All"})]}),v.jsxs("div",{className:"divide-y divide-white/5",children:[y.slice(0,5).map(P=>v.jsxs("div",{className:"px-6 md:px-8 py-4 flex items-center justify-between hover:bg-white/5 transition-colors group",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("img",{src:P.coverImageUrl,className:"w-10 h-14 object-cover rounded bg-black",alt:""}),v.jsxs("div",{children:[v.jsx("p",{className:"font-bold text-sm text-white group-hover:text-[#a8c7fa] transition-colors line-clamp-1",children:P.title}),v.jsxs("p",{className:"text-xs text-neutral-500",children:["",P.price]})]})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("span",{className:"text-xs text-neutral-500 hidden sm:block",children:new Date(P.publicationDate).toLocaleDateString()}),v.jsx("button",{onClick:()=>c(`/edit-ebook/${P.id}`),className:"p-2 hover:bg-white/10 rounded-full text-neutral-400 hover:text-white",children:v.jsx(VF,{className:"w-4 h-4"})})]})]},P.id)),y.length===0&&v.jsx("p",{className:"p-8 text-center text-neutral-500 text-sm",children:"No books uploaded yet."})]})]})]}),s==="audience"&&v.jsxs("div",{className:"animate-fade-in max-w-5xl mx-auto",children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-sm font-bold uppercase tracking-widest text-neutral-500 mb-1",children:"Live Feed"}),v.jsx("p",{className:"text-neutral-400 text-xs",children:"Real-time visitor tracking"})]}),v.jsxs("div",{className:"flex items-center gap-2 bg-[#34a853]/10 px-3 py-1.5 rounded-full border border-[#34a853]/20",children:[v.jsxs("span",{className:"relative flex h-2 w-2",children:[v.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#34a853] opacity-75"}),v.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-[#34a853]"})]}),v.jsx("span",{className:"text-[10px] font-bold text-[#81c995] uppercase tracking-widest",children:"Active"})]})]}),v.jsx("div",{className:"space-y-3",children:U_e.map(P=>v.jsxs("div",{className:"group bg-[#1e1e1e] hover:bg-[#252525] border border-white/5 hover:border-white/10 rounded-2xl p-4 flex flex-col md:flex-row md:items-center gap-4 transition-all duration-300",children:[v.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[200px]",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neutral-800 to-neutral-900 border border-white/10 flex items-center justify-center font-bold text-sm text-white shadow-inner",children:P.avatar}),v.jsxs("div",{children:[v.jsx("div",{className:"font-medium text-white text-sm",children:P.name}),v.jsx("div",{className:"text-xs text-neutral-500",children:P.email})]})]}),v.jsxs("div",{className:"flex items-center gap-2 md:w-[150px] text-neutral-400 text-sm",children:[v.jsx(CI,{className:"w-4 h-4 text-neutral-600"}),v.jsx("span",{children:P.location})]}),v.jsxs("div",{className:"flex-1 md:w-[250px]",children:[v.jsxs("div",{className:"flex items-center gap-2 text-white text-sm mb-0.5",children:[v.jsx(n0,{className:"w-3 h-3 text-[#a8c7fa]"}),v.jsx("span",{className:"truncate",children:P.action})]}),v.jsxs("div",{className:"text-[10px] text-neutral-500 font-mono flex items-center gap-1",children:[v.jsx(Cue,{className:"w-3 h-3"})," ",P.time]})]}),v.jsx("div",{className:"md:w-[120px] flex justify-end",children:v.jsxs("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest flex items-center gap-1.5 ${P.status==="Signed In"?"bg-[#34a853]/10 text-[#81c995] border border-[#34a853]/20":"bg-white/5 text-neutral-500 border border-white/5"}`,children:[v.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${P.status==="Signed In"?"bg-[#34a853]":"bg-neutral-500"}`}),P.status==="Signed In"?"User":"Guest"]})})]},P.id))})]}),s==="studio"&&v.jsxs("div",{className:"animate-fade-in max-w-5xl mx-auto space-y-12",children:[v.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-3xl overflow-hidden",children:[v.jsxs("div",{className:"p-8 border-b border-white/5 bg-white/[0.02]",children:[v.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Your Manuscripts"}),v.jsx("p",{className:"text-sm text-neutral-500",children:"Edit content, update pricing, or manage visual assets."})]}),v.jsx("div",{className:"divide-y divide-white/5 max-h-[400px] overflow-y-auto custom-scrollbar",children:y.length>0?y.map(P=>v.jsxs("div",{className:"p-6 flex flex-col sm:flex-row items-center gap-6 hover:bg-white/[0.02] transition-colors group",children:[v.jsx("img",{src:P.coverImageUrl,alt:P.title,className:"w-16 h-24 object-cover rounded-lg shadow-lg bg-[#0b0b0b] border border-white/10"}),v.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[v.jsx("h3",{className:"font-bold text-white text-lg mb-1 group-hover:text-blue-400 transition-colors",children:P.title}),v.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3 text-xs text-neutral-500 mb-2",children:[v.jsx("span",{className:"uppercase tracking-wider font-bold",children:P.genre}),v.jsx("span",{children:""}),v.jsxs("span",{className:"font-mono",children:["",P.price]})]}),v.jsx("p",{className:"text-xs text-neutral-600 line-clamp-1 max-w-md",children:P.description})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:()=>c(`/read/${P.id}`),className:"p-3 rounded-full border border-white/10 text-neutral-400 hover:text-white hover:bg-white/10 transition-all",title:"Read Preview",children:v.jsx(Pue,{className:"w-5 h-5"})}),v.jsxs("button",{onClick:()=>c(`/edit-ebook/${P.id}`),className:"px-6 py-3 rounded-full bg-white text-black font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all flex items-center gap-2 shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:[v.jsx(VF,{className:"w-4 h-4"})," Edit"]})]})]},P.id)):v.jsxs("div",{className:"p-12 text-center text-neutral-500",children:[v.jsx(Ti,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),v.jsx("p",{children:"You haven't uploaded any books yet."})]})})]}),v.jsxs("div",{children:[v.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[v.jsx("div",{className:"h-px flex-1 bg-white/10"}),v.jsx("span",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest",children:"Create New"}),v.jsx("div",{className:"h-px flex-1 bg-white/10"})]}),v.jsx(ude,{onBookUploaded:E})]})]}),s==="settings"&&v.jsxs("div",{className:"animate-fade-in grid grid-cols-1 lg:grid-cols-2 gap-8",children:[v.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl p-6 md:p-8 border border-white/5",children:[v.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[v.jsx("h2",{className:"text-xl font-medium",children:"Public Profile"}),h&&v.jsxs("a",{href:h,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-xs font-bold text-[#81c995] bg-[#34a853]/10 px-3 py-1 rounded-full",children:[v.jsx("span",{className:"w-2 h-2 rounded-full bg-[#34a853] animate-pulse"})," Live"]})]}),v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Display Name"}),v.jsx("input",{name:"displayName",value:w.displayName,onChange:M,className:"w-full bg-[#0b0b0b] border border-white/10 rounded-lg p-3 text-sm focus:outline-none focus:border-white/30 text-white"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Tagline"}),v.jsx("textarea",{name:"tagline",value:w.tagline,onChange:M,rows:3,className:"w-full bg-[#0b0b0b] border border-white/10 rounded-lg p-3 text-sm focus:outline-none focus:border-white/30 text-white resize-none"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Username (Slug)"}),v.jsxs("div",{className:"flex",children:[v.jsx("span",{className:"bg-[#151515] border border-r-0 border-white/10 text-neutral-500 px-3 py-3 text-sm rounded-l-lg hidden sm:block",children:"ebook-engine.github.io/"}),v.jsx("input",{name:"slug",value:w.slug,onChange:M,className:"flex-1 bg-[#0b0b0b] border border-white/10 rounded-lg sm:rounded-l-none p-3 text-sm focus:outline-none focus:border-white/30 text-white"})]})]}),v.jsx("button",{onClick:C,disabled:u,className:"w-full py-4 bg-white text-black font-bold rounded-xl hover:bg-neutral-200 transition-colors flex items-center justify-center gap-2 mt-4",children:u?"Deploying...":v.jsxs(v.Fragment,{children:[v.jsx(ON,{className:"w-5 h-5"})," Publish Site"]})})]})]}),v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl p-8 border border-white/5 flex flex-col items-center justify-center text-center",children:[v.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-4",children:v.jsx(fM,{className:"w-10 h-10 text-white"})}),v.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"GitHub Integration"}),v.jsx("p",{className:"text-sm text-neutral-400 max-w-xs mb-6",children:"Your creator site is hosted for free on GitHub Pages. Changes may take up to 2 minutes to propagate globally."}),h?v.jsxs("div",{className:"bg-[#0b0b0b] p-4 rounded-xl border border-white/10 w-full flex justify-between items-center",children:[v.jsx("span",{className:"text-xs text-neutral-500 truncate",children:h}),v.jsx("a",{href:h,target:"_blank",className:"text-[#81c995] hover:text-white",children:v.jsx(hq,{className:"w-4 h-4"})})]}):v.jsx("div",{className:"bg-[#0b0b0b] p-4 rounded-xl border border-white/10 w-full text-xs text-neutral-600",children:"Not deployed yet."})]}),v.jsx("div",{className:"bg-[#1e1e1e] rounded-3xl p-6 border border-white/5",children:v.jsx("button",{onClick:()=>r(a,Ht.USER),className:"w-full py-3 bg-white/5 hover:bg-white/10 text-white font-medium rounded-xl transition-colors text-sm",children:"Switch to Reader Mode"})})]})]}),s==="admin"&&I&&v.jsx("div",{className:"animate-fade-in space-y-6",children:v.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-3xl p-8",children:[v.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Registered Users"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left border-collapse",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"border-b border-white/10 text-neutral-500 text-xs uppercase tracking-widest",children:[v.jsx("th",{className:"py-4 px-2 font-bold",children:"User"}),v.jsx("th",{className:"py-4 px-2 font-bold",children:"Email"}),v.jsx("th",{className:"py-4 px-2 font-bold",children:"Role"}),v.jsx("th",{className:"py-4 px-2 font-bold text-right",children:"Action"})]})}),v.jsx("tbody",{className:"text-sm",children:Object.values(Oo).filter(P=>P.id!=="guest").map(P=>v.jsxs("tr",{className:"border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors",children:[v.jsxs("td",{className:"py-4 px-2 font-medium text-white flex items-center gap-3",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-800 flex items-center justify-center text-xs",children:P.profileImageUrl?v.jsx("img",{src:P.profileImageUrl,alt:"",className:"w-full h-full rounded-full"}):P.name[0]}),P.name]}),v.jsx("td",{className:"py-4 px-2 text-neutral-400",children:P.email}),v.jsx("td",{className:"py-4 px-2",children:v.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] uppercase font-bold ${P.isAdmin?"bg-purple-900/30 text-purple-400 border border-purple-500/20":"uploadedBooks"in P?"bg-blue-900/30 text-blue-400 border border-blue-500/20":"bg-white/5 text-neutral-500"}`,children:P.isAdmin?"Admin":"uploadedBooks"in P?"Writer":"Reader"})}),v.jsx("td",{className:"py-4 px-2 text-right",children:v.jsx("button",{className:"text-xs text-neutral-500 hover:text-white underline",children:"Manage"})})]},P.id))})]})})]})})]})}),!I&&v.jsxs("button",{onClick:()=>c("/ebook-studio"),className:"fixed bottom-24 right-8 z-50 w-16 h-16 bg-white text-black rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(255,255,255,0.4)] hover:scale-110 active:scale-95 transition-all group","aria-label":"Create New Story",children:[v.jsx(bo,{className:"w-8 h-8 group-hover:-translate-y-1 transition-transform"}),v.jsx("span",{className:"absolute right-full mr-4 px-3 py-1.5 bg-[#1a1a1a] border border-white/10 rounded-lg text-white text-[10px] font-bold uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:"Start New Manuscript"})]}),v.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-[#0b0b0b]/90 backdrop-blur-xl border-t border-white/10 flex items-center justify-around z-50 pb-safe",children:[v.jsx(D,{id:"overview",label:"Stats",icon:n0}),v.jsx(D,{id:"audience",label:"Visitors",icon:lM}),v.jsx(D,{id:"studio",label:"Content",icon:ON}),v.jsx(D,{id:"settings",label:"Config",icon:N0}),I&&v.jsx(D,{id:"admin",label:"Admin",icon:GF})]})]})},{useNavigate:H_e}=Fr,z_e=()=>{const{currentUser:t,userType:e}=Gi(),n=H_e();return T.useEffect(()=>{(e===Ht.GUEST||!t)&&n("/login")},[e,t,n]),e===Ht.GUEST||!t?null:v.jsx(v.Fragment,{children:e===Ht.USER?v.jsx(lde,{}):v.jsx(B_e,{})})},{useNavigate:$_e}=Fr,G_e=()=>{const{cart:t,removeFromCart:e,clearCart:n,currentUser:r}=Gi(),i=$_e(),[a,s]=T.useState(!1),o=r&&r.id!=="guest",c=t.reduce((w,S)=>w+S.price*S.quantity,0),f=c*.07,h=c+f,g=()=>new Promise(w=>{if(document.getElementById("razorpay-checkout-js")){w(!0);return}const S=document.createElement("script");S.id="razorpay-checkout-js",S.src="https://checkout.razorpay.com/v1/checkout.js",S.onload=()=>{w(!0)},S.onerror=()=>{w(!1)},document.body.appendChild(S)});T.useEffect(()=>{g()},[]);const y=async()=>{if(!o){i("/login");return}if(!await g()||!window.Razorpay){alert("Payment Gateway failed to load. Please check your connection."),s(!1);return}s(!0);const S={key:fq,amount:Math.round(h*100),currency:"INR",name:"Co-Writter Inc.",description:"Book Purchase",image:"https://raw.githubusercontent.com/atherosai/OpenStore.io/main/vite.svg",handler:function(E){console.log("Razorpay Response:",E),alert(`Payment Successful! Transaction ID: ${E.razorpay_payment_id}`),n(),i("/dashboard"),s(!1)},prefill:{name:(r==null?void 0:r.name)||"",email:(r==null?void 0:r.email)||"",contact:""},readonly:{email:!0,name:!0},notes:{items:t.map(E=>`${E.title} (Qty: ${E.quantity})`).join(", "),userId:r==null?void 0:r.id},theme:{color:"#000000"}};try{const E=new window.Razorpay(S);E.on("payment.failed",function(C){alert(`Payment Failed: ${C.error.description}`),s(!1)}),E.open()}catch(E){console.error("Error initializing Razorpay:",E),alert("Could not initiate payment."),s(!1)}};return t.length===0?v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden bg-transparent",children:[v.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-white/5 rounded-full blur-[100px] pointer-events-none"}),v.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center animate-slide-up",children:[v.jsx("div",{className:"mb-8 opacity-50 grayscale hover:grayscale-0 transition-all duration-700 hover:opacity-100 hover:scale-110",children:v.jsx(bp,{className:"w-32 h-32 bg-black border border-white/10 rounded-full",isActive:!1})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4",children:"Cart is Empty"}),v.jsx("p",{className:"text-neutral-500 font-mono text-xs uppercase tracking-widest mb-10",children:"You haven't added any books yet."}),v.jsxs("button",{onClick:()=>i("/store"),className:"group relative px-8 py-4 bg-white text-black font-bold text-xs uppercase tracking-widest rounded-full hover:scale-105 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center gap-3 overflow-hidden",children:[v.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[v.jsx(cM,{className:"w-4 h-4"})," Browse Books"]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]})]})]}):v.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pt-32 pb-20",children:[v.jsxs("header",{className:"mb-12 flex flex-col md:flex-row md:items-end justify-between gap-6 animate-slide-down",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[v.jsx("span",{className:"w-2 h-2 bg-google-green rounded-full animate-pulse"}),v.jsx("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest",children:"Secure Checkout"})]}),v.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter",children:"Your Cart"})]}),v.jsxs("p",{className:"text-neutral-400 text-sm font-mono text-right hidden md:block",children:["Order ID: ",Math.random().toString(36).substring(2,9).toUpperCase()]})]}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[v.jsx("div",{className:"lg:col-span-2 space-y-4",children:t.map((w,S)=>v.jsxs("div",{className:`group flex flex-col sm:flex-row items-center gap-6 p-6 bg-black/40 backdrop-blur-md border border-white/10 rounded-[24px] hover:border-white/30 hover:bg-white/5 transition-all duration-300 animate-slide-up-stagger delay-${S*100}`,children:[v.jsxs("div",{className:"shrink-0 relative",children:[v.jsx("img",{src:w.coverImageUrl,alt:w.title,className:"w-24 h-36 object-cover rounded-lg shadow-2xl border border-white/10 group-hover:scale-105 transition-transform duration-500"}),v.jsx("div",{className:"absolute inset-0 rounded-lg ring-1 ring-inset ring-white/10 group-hover:ring-white/30"})]}),v.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[v.jsx("div",{className:"flex items-center justify-center sm:justify-start gap-2 mb-2",children:v.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/5 text-[9px] font-bold text-neutral-300 uppercase tracking-widest",children:w.genre})}),v.jsx("h3",{className:"text-xl font-bold text-white mb-1 leading-tight",children:w.title}),v.jsxs("p",{className:"text-xs text-neutral-500 font-mono uppercase tracking-wide mb-4",children:["By ",w.author]}),v.jsx("div",{className:"flex items-center justify-center sm:justify-start gap-4",children:v.jsxs("button",{onClick:()=>e(w.id),className:"text-[10px] font-bold text-red-500 hover:text-red-400 uppercase tracking-widest flex items-center gap-1 transition-colors",children:[v.jsx(wue,{className:"w-3 h-3"})," Remove"]})})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("p",{className:"text-3xl font-light text-white tracking-tighter",children:["",(w.price*w.quantity).toFixed(0)]}),v.jsx("p",{className:"text-[10px] text-neutral-600 font-mono uppercase mt-1",children:"Price"})]})]},w.id))}),v.jsx("div",{className:"lg:col-span-1 h-fit sticky top-24 animate-slide-up-stagger delay-300",children:v.jsxs("div",{className:"bg-black/60 backdrop-blur-xl border border-white/10 p-8 rounded-[32px] shadow-[0_0_50px_rgba(0,0,0,0.5)] relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),v.jsx("h2",{className:"text-lg font-bold text-white uppercase tracking-widest mb-8 border-b border-white/10 pb-4",children:"Summary"}),v.jsxs("div",{className:"space-y-4 mb-8",children:[v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{className:"text-neutral-400",children:"Subtotal"}),v.jsxs("span",{className:"text-white font-mono",children:["",c.toFixed(2)]})]}),v.jsxs("div",{className:"flex justify-between text-sm",children:[v.jsx("span",{className:"text-neutral-400",children:"Tax"}),v.jsxs("span",{className:"text-white font-mono",children:["",f.toFixed(2)]})]}),v.jsx("div",{className:"w-full h-px bg-white/10 my-2"}),v.jsxs("div",{className:"flex justify-between items-end",children:[v.jsx("span",{className:"text-white font-bold",children:"Total"}),v.jsxs("span",{className:"text-4xl font-black text-white tracking-tighter",children:["",h.toFixed(0)]})]})]}),o?v.jsx("button",{onClick:y,disabled:a,className:"w-full py-4 bg-white text-black font-black text-xs uppercase tracking-widest rounded-full hover:bg-neutral-200 hover:scale-[1.02] active:scale-[0.98] transition-all shadow-[0_0_20px_rgba(255,255,255,0.2)] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?"Processing...":v.jsxs(v.Fragment,{children:[v.jsx(Sue,{className:"w-4 h-4"})," Pay Now"]})}):v.jsx("button",{onClick:()=>i("/login"),className:"w-full py-4 bg-white/10 text-white border border-white/20 font-bold text-xs uppercase tracking-widest rounded-full hover:bg-white hover:text-black transition-all",children:"Login to Purchase"}),v.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-[9px] text-neutral-600 font-mono uppercase tracking-widest",children:[v.jsx(bo,{className:"w-3 h-3"})," Instant Download"]})]})})]})]})},{useNavigate:q_e,Link:V_e}=Fr,W_e=()=>v.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[v.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),v.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),v.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),v.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),Y_e=()=>{const{currentUser:t,userType:e,setCurrentUser:n,handleEmailLogin:r}=Gi(),i=q_e(),[a,s]=T.useState(!1),[o,c]=T.useState("social"),[u,f]=T.useState(""),[h,g]=T.useState(""),[y,w]=T.useState("");ir.useEffect(()=>{t&&e!==Ht.GUEST&&i("/dashboard")},[t,e,i]);const S=()=>{if(s(!0),!window.google||!window.google.accounts||!window.google.accounts.oauth2){console.error("Google Sign-In script not loaded yet."),alert("System initializing... Please try again in a moment."),s(!1);return}window.google.accounts.oauth2.initTokenClient({client_id:yue,scope:"https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",callback:async M=>{if(M&&M.access_token)try{const D=await(await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${M.access_token}`}})).json(),I={id:`google_${D.sub}`,name:D.name,email:D.email,purchaseHistory:[],wishlist:[],isVerified:!1,profileImageUrl:D.picture};n(I,Ht.USER),i("/dashboard")}catch(R){console.error("Failed to fetch user info",R),alert("Authentication failed during profile retrieval.")}finally{s(!1)}else s(!1)},error_callback:M=>{console.error("Google Auth Error:",M),s(!1)}}).requestAccessToken()},E=async C=>{C.preventDefault(),w(""),s(!0);try{const M=await r(u.trim(),h.trim());M.success?i("/dashboard"):w(M.message||"Login failed.")}catch(M){console.error("Login Error:",M),w("System error. Check console for details.")}finally{s(!1)}};return v.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 relative font-sans selection:bg-white/20",children:v.jsxs("div",{className:"relative z-10 w-full max-w-sm flex flex-col items-center",children:[v.jsx("div",{className:"mb-10 scale-125 animate-float-delayed",children:v.jsx(bp,{className:"w-24 h-24 border border-white/30 bg-black shadow-[0_0_50px_rgba(255,255,255,0.1)] rounded-full"})}),v.jsxs("div",{className:"w-full bg-black/40 backdrop-blur-2xl border border-white/10 p-8 shadow-[0_0_40px_rgba(0,0,0,0.8)] rounded-[32px] relative overflow-hidden transition-all duration-500 hover:border-white/20 hover:shadow-[0_0_60px_rgba(255,255,255,0.05)]",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"}),v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("h1",{className:"text-2xl font-black tracking-tighter text-white mb-2",children:js}),v.jsx("p",{className:"text-[10px] text-neutral-500 font-mono uppercase tracking-[0.2em]",children:"Writing Platform"})]}),v.jsxs("div",{className:"flex bg-white/5 p-1 rounded-full mb-8 border border-white/5",children:[v.jsx("button",{onClick:()=>c("social"),className:`flex-1 py-2 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all ${o==="social"?"bg-white text-black shadow-lg":"text-neutral-500 hover:text-white"}`,children:"Reader"}),v.jsx("button",{onClick:()=>c("email"),className:`flex-1 py-2 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all ${o==="email"?"bg-white text-black shadow-lg":"text-neutral-500 hover:text-white"}`,children:"Admin / Writer"})]}),o==="social"&&v.jsxs("div",{className:"animate-fade-in",children:[v.jsxs("div",{className:"mb-6 relative group",children:[v.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-white/10 to-neutral-700/30 rounded-full blur opacity-0 group-hover:opacity-100 transition duration-700"}),v.jsxs("button",{onClick:S,disabled:a,className:"relative w-full py-4 rounded-full bg-white/5 border border-white/10 text-white font-bold uppercase tracking-widest text-xs flex items-center justify-center gap-4 hover:bg-white/10 hover:border-white/30 transition-all duration-300 shadow-[0_0_20px_rgba(255,255,255,0.02)] hover:shadow-[0_0_30px_rgba(255,255,255,0.05)] hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:[a?v.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):v.jsx(W_e,{}),v.jsx("span",{children:"Continue with Google"})]})]}),v.jsx("p",{className:"text-center text-[10px] text-neutral-500 px-4 leading-relaxed",children:"By continuing, you agree to our Terms of Service and confirm you have read our Privacy Policy."})]}),o==="email"&&v.jsxs("form",{onSubmit:E,className:"animate-fade-in space-y-4",children:[v.jsx("div",{children:v.jsx("input",{type:"text",placeholder:"Email or Username",value:u,onChange:C=>f(C.target.value),className:"w-full bg-[#0b0b0b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-white/40 placeholder-neutral-600 transition-colors",required:!0})}),v.jsx("div",{children:v.jsx("input",{type:"password",placeholder:"Password",value:h,onChange:C=>g(C.target.value),className:"w-full bg-[#0b0b0b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-white/40 placeholder-neutral-600 transition-colors",required:!0})}),y&&v.jsx("div",{className:"text-red-400 text-xs bg-red-500/10 p-2 rounded-lg border border-red-500/20 text-center",children:y}),v.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 rounded-full bg-white text-black font-bold uppercase tracking-widest text-xs hover:bg-neutral-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:a?"Authenticating...":"Access Dashboard"}),v.jsx("div",{className:"text-center pt-2",children:v.jsx("p",{className:"text-[10px] text-neutral-600",children:"Restricted access for Owners & Paid Writers."})})]}),v.jsx("div",{className:"mt-6 pt-6 border-t border-white/5 text-center",children:v.jsx(V_e,{to:"/",className:"text-neutral-600 hover:text-white text-[10px] font-bold uppercase tracking-widest transition-colors",children:"Cancel"})})]}),v.jsx("div",{className:"mt-8 text-center opacity-40 hover:opacity-100 transition-opacity duration-500",children:v.jsx("p",{className:"text-[9px] text-neutral-500 font-mono tracking-widest",children:"POWERED BY AI"})})]})})},{useNavigate:K_e}=Fr,X_e=()=>{const{currentUser:t,userType:e,upgradeToSeller:n}=Gi(),r=K_e(),[i,a]=T.useState(!1),[s,o]=T.useState("monthly"),c=async()=>{if(!t){r("/login");return}if(!await new Promise(y=>{if(window.Razorpay){y(!0);return}const w=document.createElement("script");w.src="https://checkout.razorpay.com/v1/checkout.js",w.onload=()=>y(!0),w.onerror=()=>y(!1),document.body.appendChild(w)})){alert("Could not load payment gateway. Please try again.");return}a(!0);const g={key:fq,amount:(s==="monthly"?444:4444)*100,currency:"INR",name:"My Ebook Store",description:`Pro Creator Subscription (${s})`,image:"https://raw.githubusercontent.com/atherosai/OpenStore.io/main/vite.svg",handler:function(y){console.log("Subscription Successful",y),n(),alert(`Welcome to the Writer Dashboard! Payment ID: ${y.razorpay_payment_id}`),r("/dashboard"),a(!1)},prefill:{name:t.name,email:t.email},theme:{color:"#000000"}};try{const y=new window.Razorpay(g);y.on("payment.failed",function(w){alert(`Payment Failed: ${w.error.description}`),a(!1)}),y.open()}catch(y){console.error("Payment initialization failed",y),a(!1)}};return v.jsxs("div",{className:"min-h-screen w-full relative bg-black selection:bg-white/20 font-sans",children:[v.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none",children:[v.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-white/5 rounded-full blur-[120px]"}),v.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"})]}),v.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pt-24 pb-20 animate-fade-in max-w-7xl relative z-10",children:[v.jsxs("div",{className:"text-center mb-16 relative",children:[v.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 relative z-10 tracking-tighter",children:"Choose a Plan"}),v.jsx("p",{className:"text-neutral-400 text-lg max-w-2xl mx-auto relative z-10",children:"Start for free or upgrade to sell your own books and use AI tools."}),v.jsx("div",{className:"flex items-center justify-center mt-8 relative z-10",children:v.jsxs("div",{className:"bg-white/5 p-1 rounded-full border border-white/10 flex relative",children:[v.jsx("button",{onClick:()=>o("monthly"),className:`px-6 py-2 rounded-full text-sm font-bold transition-all duration-300 ${s==="monthly"?"bg-white text-black shadow-glow-white":"text-neutral-500 hover:text-white"}`,children:"Monthly"}),v.jsxs("button",{onClick:()=>o("yearly"),className:`px-6 py-2 rounded-full text-sm font-bold transition-all duration-300 ${s==="yearly"?"bg-white text-black shadow-glow-white":"text-neutral-500 hover:text-white"}`,children:["Yearly ",v.jsx("span",{className:"text-[9px] bg-google-green text-black px-1.5 py-0.5 rounded ml-1",children:"-15%"})]})]})})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[v.jsxs("div",{className:"bg-black border border-white/10 p-8 md:p-10 rounded-[32px] relative group shadow-2xl overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white border border-white/10",children:v.jsx(Ti,{className:"w-5 h-5"})}),v.jsx("h3",{className:"text-xl font-bold text-white",children:"Reader"})]}),v.jsxs("div",{className:"mb-6",children:[v.jsx("span",{className:"text-4xl font-black text-white",children:"Free"}),v.jsx("span",{className:"text-neutral-500 ml-2",children:"/ forever"})]}),v.jsx("p",{className:"text-neutral-400 text-sm mb-8 min-h-[40px]",children:"Read free books and build your personal collection."}),v.jsx("button",{onClick:()=>r("/store"),className:"w-full py-4 rounded-full border border-white/20 text-white font-bold hover:bg-white/10 transition-colors mb-8 uppercase tracking-widest text-xs",children:"Browse Books"}),v.jsx("div",{className:"space-y-4",children:["Read Unlimited Books","Saved Books List","Works on All Devices","Community Reviews","Personal Library"].map((u,f)=>v.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-300",children:[v.jsx(Or,{className:"w-4 h-4 text-google-green flex-shrink-0"}),v.jsx("span",{children:u})]},f))})]}),v.jsxs("div",{className:"bg-black border border-white/10 p-8 md:p-10 rounded-[32px] relative shadow-2xl overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-google-blue to-transparent opacity-50"}),v.jsx("div",{className:"absolute top-6 right-6 px-3 py-1 bg-white text-black text-[10px] font-bold uppercase tracking-widest rounded-full shadow-glow-white",children:"Recommended"}),v.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-white text-black flex items-center justify-center shadow-lg",children:v.jsx(pq,{className:"w-5 h-5"})}),v.jsx("h3",{className:"text-xl font-bold text-white",children:"Writer"})]}),v.jsxs("div",{className:"mb-6 relative z-10",children:[v.jsxs("span",{className:"text-4xl font-black text-white",children:["",s==="monthly"?"444":"4,444"]}),v.jsxs("span",{className:"text-neutral-500 ml-2",children:["/ ",s==="monthly"?"mo":"yr"]})]}),v.jsx("p",{className:"text-neutral-400 text-sm mb-8 min-h-[40px] relative z-10",children:"Write with AI, publish your books, and sell them online."}),e===Ht.SELLER?v.jsxs("button",{disabled:!0,className:"w-full py-4 rounded-full bg-green-500/10 text-green-400 font-bold border border-green-500/50 mb-8 cursor-default flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:[v.jsx(Or,{className:"w-5 h-5"})," Current Plan"]}):v.jsx("button",{onClick:c,disabled:i,className:"w-full py-4 rounded-full bg-white text-black font-bold hover:bg-neutral-200 transition-colors shadow-glow-white mb-8 flex items-center justify-center gap-2 relative z-10 uppercase tracking-widest text-xs",children:i?"Processing...":v.jsxs(v.Fragment,{children:[v.jsx(bo,{className:"w-4 h-4"})," Upgrade to Writer"]})}),v.jsx("div",{className:"space-y-4 relative z-10",children:["Everything in Reader","Publish Unlimited Books","Co-Author Assistant","AI Cover Creator","Your Own Profile Page","See Sales Stats","Keep 70% of Sales","Priority Support"].map((u,f)=>v.jsxs("div",{className:"flex items-center gap-3 text-sm text-white font-medium",children:[v.jsx("div",{className:"p-0.5 bg-white rounded-full",children:v.jsx(Or,{className:"w-3 h-3 text-black flex-shrink-0"})}),v.jsx("span",{children:u})]},f))})]})]}),v.jsx("div",{className:"mt-20 text-center border-t border-white/10 pt-10",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-8 md:gap-16 text-neutral-400 text-sm",children:[v.jsxs("div",{className:"flex items-center justify-center gap-3",children:[v.jsx(gq,{className:"w-5 h-5 text-yellow-500"}),v.jsx("span",{children:"Trusted by 10,000+ Creators"})]}),v.jsxs("div",{className:"flex items-center justify-center gap-3",children:[v.jsx("svg",{className:"w-5 h-5 text-google-green",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),v.jsx("span",{children:"Secure Payments"})]}),v.jsxs("div",{className:"flex items-center justify-center gap-3",children:[v.jsx("svg",{className:"w-5 h-5 text-google-blue",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),v.jsx("span",{children:"Cancel Anytime"})]})]})})]})]})},{useParams:J_e,Link:bR}=Fr,Q_e=()=>{const{slug:t}=J_e(),[e,n]=T.useState(null),[r,i]=T.useState(null),[a,s]=T.useState([]),[o,c]=T.useState(!0);if(T.useEffect(()=>{c(!0);const f=Object.values(Oo).find(h=>{var g;return((g=h.creatorSite)==null?void 0:g.slug)===t&&h.id.startsWith("seller")});if(f&&f.creatorSite&&f.creatorSite.isEnabled){n(f),i(f.creatorSite);const h=np.filter(g=>f.creatorSite.showcasedBookIds.includes(g.id)&&g.sellerId===f.id);s(h)}else n(null),i(null),s([]);c(!1)},[t]),T.useEffect(()=>(r!=null&&r.theme&&(document.body.className="",document.body.classList.add(`theme-${r.theme}`,"creator-site-body","font-sans")),()=>{document.body.className="font-sans",document.body.style.backgroundColor="#080808"}),[r==null?void 0:r.theme]),o)return v.jsx("div",{className:"flex justify-center items-center min-h-screen bg-brand-bg-dark text-white",children:"Loading Creator Page..."});if(!e||!r)return v.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-brand-bg-dark text-white p-6 text-center",children:[v.jsx(Ti,{className:"w-20 h-20 text-brand-accent opacity-50 mb-6"}),v.jsx("h1",{className:"text-4xl font-bold mb-3",children:"Creator Page Not Found"}),v.jsx("p",{className:"text-neutral-400 mb-6",children:"The page you're looking for doesn't exist or hasn't been configured by the seller."}),v.jsxs(bR,{to:"/",className:"px-6 py-2.5 rounded-sm font-semibold transition-all duration-200 bg-brand-accent text-black hover:bg-brand-accent-darker",children:["Back to ",js]})]});const u=`theme-${r.theme}`;return v.jsxs("div",{className:`${u} pt-20`,children:[" ",v.jsxs("header",{className:"creator-site-header",children:[r.profileImageUrl&&v.jsx("img",{src:r.profileImageUrl,alt:r.displayName||e.name,className:"creator-site-profile-img"}),v.jsx("h1",{className:"creator-site-display-name",children:r.displayName||e.name}),r.tagline&&v.jsx("p",{className:"creator-site-tagline",children:r.tagline})]}),v.jsx("main",{className:"container mx-auto px-4 py-8",children:a.length>0?v.jsx("div",{className:"creator-site-books-grid",children:a.map(f=>v.jsxs("div",{className:"creator-site-book-card",children:[v.jsx("img",{src:f.coverImageUrl,alt:f.title,className:"creator-site-book-cover"}),v.jsxs("div",{className:"creator-site-book-info",children:[v.jsx("h2",{className:"creator-site-book-title",title:f.title,children:f.title}),v.jsxs("p",{className:"creator-site-book-author",children:["By ",f.author]}),v.jsxs("p",{className:"creator-site-book-price",children:["",f.price.toFixed(2)]}),v.jsxs(bR,{to:`/store?bookId=${f.id}`,className:"creator-site-book-button",target:"_blank",rel:"noopener noreferrer",children:["View on ",js]})]})]},f.id))}):v.jsx("p",{className:"text-center text-lg col-span-full py-10",children:"This creator hasn't showcased any eBooks yet."})}),v.jsx("footer",{className:"creator-site-footer",children:v.jsxs("p",{children:[" ",new Date().getFullYear()," ",r.displayName||e.name,". Powered by ",v.jsx(bR,{to:"/",target:"_blank",rel:"noopener noreferrer",children:js}),"."]})})]})},{useParams:Z_e,useNavigate:eCe}=Fr,lm="w-full bg-[#0b0b0b] border border-white/10 rounded-xl p-4 text-sm text-white focus:outline-none focus:border-white/30 transition-all duration-200 placeholder-neutral-600 font-sans",cm="block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",tCe=()=>{const{bookId:t}=Z_e(),e=eCe(),n=Gi(),{allBooks:r,updateEBook:i,currentUser:a,userType:s}=n,[o,c]=T.useState(null),[u,f]=T.useState(""),[h,g]=T.useState(""),[y,w]=T.useState(""),[S,E]=T.useState(""),[C,M]=T.useState(""),[R,D]=T.useState("paid"),[I,P]=T.useState(""),[k,U]=T.useState(null),[B,V]=T.useState(!0),[H,G]=T.useState(!1),[Q,W]=T.useState(null);T.useEffect(()=>{if(!t){e("/dashboard");return}const ae=r.find(ye=>ye.id===t);ae?a&&s===Ht.SELLER&&ae.sellerId===a.id?(c(ae),f(ae.title),g(ae.author),w(ae.description),E(ae.genre),M(ae.price.toString()),D(ae.price===0?"free":"paid"),P(ae.coverImageUrl)):(W("You do not have permission to edit this eBook."),setTimeout(()=>e("/dashboard"),3e3)):(W("eBook not found."),setTimeout(()=>e("/dashboard"),3e3)),V(!1)},[t,r,e,a,s]);const ee=ae=>{R==="paid"&&M(ae)},$=ae=>{U(ae),P(`data:image/jpeg;base64,${ae.imageBytes}`)},q=ae=>{if(ae.preventDefault(),W(null),!o){W("No book selected for editing.");return}if(!u||!h||!y||!S){W("Please fill in all required fields.");return}let ye=0;if(R==="paid"){if(!C||isNaN(parseFloat(C))||parseFloat(C)<=0){W("Please enter a valid price.");return}ye=parseFloat(C)}else ye=0;G(!0);const Y=k?`data:image/jpeg;base64,${k.imageBytes}`:I,ne={...o,title:u,author:h,description:y,genre:S,price:ye,coverImageUrl:Y,publicationDate:o.publicationDate};i(ne),G(!1),e("/dashboard")};if(B)return v.jsx("div",{className:"min-h-screen bg-[#0b0b0b] flex items-center justify-center",children:v.jsx(F0,{size:"lg",color:"text-white"})});if(Q&&!o)return v.jsxs("div",{className:"min-h-screen bg-[#0b0b0b] flex flex-col items-center justify-center text-center px-6",children:[v.jsx(Ti,{className:"w-16 h-16 text-neutral-700 mb-6"}),v.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),v.jsx("p",{className:"text-neutral-500 mb-8",children:Q}),v.jsx("button",{onClick:()=>e("/dashboard"),className:"bg-white text-black font-bold py-3 px-8 rounded-full hover:bg-neutral-200 transition-colors",children:"Back to Dashboard"})]});if(!o)return null;const J={title:u,genre:S,description:y};return v.jsx("div",{className:"min-h-screen bg-[#0b0b0b] pt-24 pb-20 px-4 md:px-8 font-sans",children:v.jsxs("div",{className:"max-w-4xl mx-auto",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center gap-2 text-neutral-400 hover:text-white transition-colors group",children:[v.jsx("div",{className:"w-8 h-8 rounded-full border border-white/10 flex items-center justify-center group-hover:bg-white group-hover:text-black transition-all",children:v.jsx(AI,{className:"w-4 h-4"})}),v.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Back"})]}),v.jsxs("h1",{className:"text-xl font-normal text-white flex items-center gap-3",children:["Edit ",v.jsx("span",{className:"text-neutral-500",children:"/"})," ",o.title]})]}),v.jsxs("form",{onSubmit:q,className:"bg-[#1e1e1e] border border-white/5 rounded-3xl p-8 md:p-10 shadow-2xl space-y-8 animate-slide-up",children:[v.jsxs("div",{className:"flex items-center gap-4 border-b border-white/5 pb-8 mb-8",children:[v.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center text-white border border-white/10",children:v.jsx(Hd,{className:"w-6 h-6"})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-normal text-white",children:"Book Configuration"}),v.jsx("p",{className:"text-neutral-500 text-sm",children:"Update metadata, pricing, and visual assets."})]})]}),Q&&v.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm font-medium",children:Q}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{htmlFor:"title",className:cm,children:"Book Title"}),v.jsx("input",{type:"text",id:"title",value:u,onChange:ae=>f(ae.target.value),required:!0,className:lm})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"author",className:cm,children:"Author Name"}),v.jsx("input",{type:"text",id:"author",value:h,onChange:ae=>g(ae.target.value),required:!0,className:lm})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"genre",className:cm,children:"Genre"}),v.jsx("input",{type:"text",id:"genre",value:S,onChange:ae=>E(ae.target.value),required:!0,placeholder:"e.g. Sci-Fi",className:lm})]}),v.jsxs("div",{className:"md:col-span-2",children:[v.jsx("label",{htmlFor:"description",className:cm,children:"Description"}),v.jsx("textarea",{id:"description",value:y,onChange:ae=>w(ae.target.value),rows:4,required:!0,className:`${lm} min-h-[120px] resize-none`})]})]}),v.jsxs("div",{className:"p-6 bg-[#0b0b0b] border border-white/5 rounded-2xl",children:[v.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Monetization Strategy"}),v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[v.jsxs("button",{type:"button",onClick:()=>D("paid"),className:`p-5 rounded-2xl border text-left transition-all group ${R==="paid"?"bg-white text-black border-white":"bg-transparent border-white/10 hover:border-white/20"}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R==="paid"?"bg-black text-white":"bg-white/10 text-neutral-400"}`,children:v.jsx(f_,{className:"w-4 h-4"})}),R==="paid"&&v.jsx(Or,{className:"w-5 h-5 text-black"})]}),v.jsx("h4",{className:`font-bold mb-1 ${R==="paid"?"text-black":"text-white"}`,children:"Premium Asset"}),v.jsx("p",{className:`text-xs ${R==="paid"?"text-neutral-600":"text-neutral-500"}`,children:"Set a price and earn royalties."})]}),v.jsxs("button",{type:"button",onClick:()=>D("free"),className:`p-5 rounded-2xl border text-left transition-all group ${R==="free"?"bg-white text-black border-white":"bg-transparent border-white/10 hover:border-white/20"}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R==="free"?"bg-black text-white":"bg-white/10 text-neutral-400"}`,children:v.jsx(bo,{className:"w-4 h-4"})}),R==="free"&&v.jsx(Or,{className:"w-5 h-5 text-black"})]}),v.jsx("h4",{className:`font-bold mb-1 ${R==="free"?"text-black":"text-white"}`,children:"Growth Magnet"}),v.jsx("p",{className:`text-xs ${R==="free"?"text-neutral-600":"text-neutral-500"}`,children:"Free distribution for readers."})]})]}),R==="paid"&&v.jsxs("div",{className:"animate-fade-in space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"price",className:cm,children:"List Price (INR)"}),v.jsx("input",{type:"number",id:"price",value:C,onChange:ae=>M(ae.target.value),step:"0.01",min:"1",required:R==="paid",className:lm,placeholder:"499"})]}),v.jsx(Sq,{bookDetails:J,onPriceSuggested:ee})]})]}),v.jsxs("div",{className:"p-6 bg-[#0b0b0b] border border-white/5 rounded-2xl",children:[v.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Cover Art"}),v.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[v.jsxs("div",{className:"w-full md:w-1/3 shrink-0",children:[v.jsx("div",{className:"aspect-[3/4] bg-[#1e1e1e] rounded-xl overflow-hidden border border-white/10 relative group",children:I?v.jsx("img",{src:I,alt:"Preview",className:"w-full h-full object-cover"}):v.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-neutral-600",children:[v.jsx(Ti,{className:"w-12 h-12 mb-2 opacity-50"}),v.jsx("span",{className:"text-xs uppercase tracking-widest",children:"No Cover"})]})}),v.jsxs("div",{className:"mt-4",children:[v.jsx("label",{htmlFor:"manualCover",className:cm,children:"Manual URL"}),v.jsx("input",{type:"url",id:"manualCover",value:k?"":I,onChange:ae=>{P(ae.target.value),U(null)},className:lm,placeholder:"https://..."})]})]}),v.jsx("div",{className:"w-full md:w-2/3",children:v.jsx(Eq,{onCoverGenerated:$,currentTitle:u,currentAuthor:h})})]})]}),v.jsxs("div",{className:"pt-6 border-t border-white/5 flex items-center justify-end gap-4",children:[v.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"px-8 py-4 rounded-full border border-white/10 text-white font-bold text-xs uppercase tracking-widest hover:bg-white/5 transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:H,className:"px-8 py-4 rounded-full bg-white text-black font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all shadow-glow-white disabled:opacity-50 flex items-center gap-2",children:H?v.jsx(F0,{size:"sm",color:"text-black"}):v.jsxs(v.Fragment,{children:[v.jsx(Or,{className:"w-4 h-4"})," Save Changes"]})})]})]})]})})},nCe=({title:t,onTitleChange:e,content:n,onContentChange:r,onTriggerAI:i,onTriggerImageGen:a})=>{const s=W=>{if(!W)return[{id:Date.now().toString(),type:"p",content:""}];const ee=W.split(`
`),$=[];for(const q of ee)if(q.startsWith("# "))$.push({id:Math.random().toString(),type:"h1",content:q.replace("# ","")});else if(q.startsWith("## "))$.push({id:Math.random().toString(),type:"h2",content:q.replace("## ","")});else if(q.startsWith("- "))$.push({id:Math.random().toString(),type:"ul",content:q.replace("- ","")});else if(q.startsWith("> "))$.push({id:Math.random().toString(),type:"blockquote",content:q.replace("> ","")});else if(q.startsWith("![")){const J=q.match(/\((.*?)\)/);J&&$.push({id:Math.random().toString(),type:"image",content:J[1]})}else $.push({id:Math.random().toString(),type:"p",content:q});return $.length===0&&$.push({id:Date.now().toString(),type:"p",content:""}),$},o=W=>W.map(ee=>ee.type==="h1"?`# ${ee.content}`:ee.type==="h2"?`## ${ee.content}`:ee.type==="ul"?`- ${ee.content}`:ee.type==="blockquote"?`> ${ee.content}`:ee.type==="image"?`![Image](${ee.content})`:ee.type==="image-prompt"?"":ee.content).join(`

`),[c,u]=T.useState(()=>s(n)),[f,h]=T.useState(0),[g,y]=T.useState(!1),[w,S]=T.useState({top:0,left:0}),[E,C]=T.useState(""),[M,R]=T.useState(0),D=T.useRef([]);T.useEffect(()=>{const W=o(c);W!==n&&!c.some(ee=>ee.type==="image-prompt")&&r(W)},[c]),T.useEffect(()=>{const W=o(c);n!==W&&u(s(n))},[n]);const P=[{label:"Heading 1",type:"h1",icon:Tue,desc:"Big section header"},{label:"Heading 2",type:"h2",icon:Nue,desc:"Medium subsection header"},{label:"Bullet List",type:"ul",icon:Rue,desc:"Simple bulleted list"},{label:"Quote",type:"blockquote",icon:Mue,desc:"Capture a quote"},{label:"Text",type:"p",icon:mq,desc:"Plain text paragraph"},{label:"Ask Co-Author",action:"ai",icon:Hd,desc:"Generate text with AI",highlight:!0},{label:"Generate Image",action:"img",icon:_ue,desc:"Create art from description",highlight:!0}].filter(W=>W.label.toLowerCase().includes(E.toLowerCase())||W.desc.toLowerCase().includes(E.toLowerCase())),k=()=>{var $;const W=window.getSelection();if(W&&W.rangeCount>0){const J=W.getRangeAt(0).getBoundingClientRect(),ae=($=D.current[f])==null?void 0:$.closest(".editor-container");if(ae){const ye=ae.getBoundingClientRect();S({top:J.bottom-ye.top+8,left:J.left-ye.left}),y(!0),C(""),R(0);return}}const ee=D.current[f];ee&&(S({top:ee.offsetTop+ee.clientHeight+8,left:ee.offsetLeft}),y(!0),C(""),R(0))},U=()=>{y(!1),C(""),R(0)},B=W=>{const ee=[...c];if(ee[f].content="",W.action)if(W.action==="img")ee[f].type="image-prompt",u(ee),U();else{u(ee),U();const $=window.prompt("Instruction for Co-Author:");$&&i($)}else ee[f].type=W.type,u(ee),U(),setTimeout(()=>{var $;return($=D.current[f])==null?void 0:$.focus()},0)},V=(W,ee)=>{var $,q;if(g){if(W.key==="ArrowDown"){W.preventDefault(),R(J=>(J+1)%P.length);return}if(W.key==="ArrowUp"){W.preventDefault(),R(J=>(J-1+P.length)%P.length);return}if(W.key==="Enter"){W.preventDefault(),P[M]&&B(P[M]);return}if(W.key==="Escape"){W.preventDefault(),U();return}}if(W.key==="Enter"&&!W.shiftKey){W.preventDefault();const J={id:Date.now().toString(),type:"p",content:""},ae=[...c];ae.splice(ee+1,0,J),u(ae),h(ee+1),setTimeout(()=>{var ye;return(ye=D.current[ee+1])==null?void 0:ye.focus()},0)}else if(W.key==="Backspace"&&c[ee].content===""){if(W.preventDefault(),c.length>1){const J=[...c];J.splice(ee,1),u(J),h(Math.max(0,ee-1)),setTimeout(()=>{var ae;return(ae=D.current[Math.max(0,ee-1)])==null?void 0:ae.focus()},0)}}else W.key==="ArrowUp"&&!g?ee>0&&(W.preventDefault(),h(ee-1),($=D.current[ee-1])==null||$.focus()):W.key==="ArrowDown"&&!g&&ee<c.length-1&&(W.preventDefault(),h(ee+1),(q=D.current[ee+1])==null||q.focus())},H=(W,ee)=>{const $=W.currentTarget.innerText,q=[...c];q[ee].content=$,u(q),$.startsWith("/")?(g||k(),C($.substring(1)),R(0)):g&&U()},G=(W,ee)=>{if(!ee.trim())return;a(ee);const $=[...c];$[W]={...$[W],type:"p",content:`*Creating visual: "${ee}"...*`};const q={id:Date.now().toString(),type:"p",content:""};$.splice(W+1,0,q),u($),h(W+1),setTimeout(()=>{var J;return(J=D.current[W+1])==null?void 0:J.focus()},0)},Q=W=>{const ee=[...c];ee[W]={...ee[W],type:"p",content:""},u(ee),setTimeout(()=>{var $;return($=D.current[W])==null?void 0:$.focus()},0)};return v.jsxs("div",{className:"editor-container w-full max-w-4xl mx-auto min-h-screen relative font-sans flex flex-col pt-10 pb-32",children:[v.jsx("div",{className:"px-12 mb-8 group",children:v.jsx("input",{type:"text",value:t,onChange:W=>e(W.target.value),className:"w-full bg-transparent text-5xl font-bold text-white border-none outline-none placeholder-neutral-700 leading-tight",placeholder:"Untitled"})}),v.jsx("div",{className:"px-12 relative flex-1",children:c.map((W,ee)=>v.jsxs("div",{className:"group relative mb-2",children:[W.type!=="image-prompt"&&v.jsx("div",{className:"absolute -left-8 top-1 opacity-0 group-hover:opacity-100 cursor-grab text-neutral-600 hover:text-white transition-opacity select-none",children:v.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:"::"})}),W.type==="image"?v.jsx("div",{className:"rounded-lg overflow-hidden border border-white/10 my-4 bg-black/20",children:v.jsx("img",{src:W.content,alt:"Generated",className:"w-full h-auto"})}):W.type==="image-prompt"?v.jsxs("div",{className:"my-4 p-1.5 pl-3 bg-[#151515] border border-white/20 rounded-full flex items-center gap-3 w-full max-w-xl shadow-2xl animate-fade-in focus-within:border-white/40 focus-within:ring-1 focus-within:ring-white/20 transition-all",children:[v.jsx(Hd,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}),v.jsx("input",{autoFocus:!0,type:"text",placeholder:"Describe the image (e.g. A cyberpunk city in rain)...",className:"flex-1 bg-transparent border-none outline-none text-sm text-white placeholder-neutral-500 h-8 min-w-0",value:W.content,onChange:$=>{const q=[...c];q[ee].content=$.target.value,u(q)},onKeyDown:$=>{var q,J;$.key==="Enter"&&($.preventDefault(),G(ee,W.content)),$.key==="Escape"&&($.preventDefault(),Q(ee)),$.key==="ArrowUp"&&ee>0&&($.preventDefault(),(q=D.current[ee-1])==null||q.focus()),$.key==="ArrowDown"&&ee<c.length-1&&($.preventDefault(),(J=D.current[ee+1])==null||J.focus())}}),v.jsxs("div",{className:"flex items-center gap-2 pr-1",children:[v.jsx("button",{onClick:()=>G(ee,W.content),className:"px-6 py-2 bg-white text-black rounded-full text-[10px] font-bold uppercase tracking-widest hover:bg-neutral-200 transition-all shadow-[0_0_15px_rgba(255,255,255,0.3)] hover:scale-105 active:scale-95 flex-shrink-0",title:"Generate Visual",children:"ENTER"}),v.jsx("button",{onClick:()=>Q(ee),className:"w-8 h-8 rounded-full text-neutral-500 hover:text-white flex items-center justify-center transition-colors hover:bg-white/10",title:"Cancel",children:v.jsx(zd,{className:"w-4 h-4"})})]})]}):v.jsx("div",{ref:$=>{D.current[ee]=$},contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:$=>V($,ee),onInput:$=>H($,ee),onFocus:()=>h(ee),className:`w-full outline-none empty:before:content-[attr(data-placeholder)] empty:before:text-neutral-700
                                ${W.type==="h1"?"text-4xl font-bold text-white mb-4 mt-6":W.type==="h2"?"text-2xl font-bold text-neutral-200 mb-3 mt-4":W.type==="ul"?"list-disc list-inside text-lg text-neutral-300 pl-4 border-l-2 border-transparent":W.type==="blockquote"?"text-xl italic text-neutral-400 border-l-4 border-white/20 pl-4 py-2 my-4":"text-lg text-neutral-300 leading-relaxed"}
                            `,"data-placeholder":W.type==="p"&&ee===0&&c.length===1?"Start writing or type '/' for commands...":"Type '/' for commands",children:W.content})]},W.id))}),g&&v.jsxs("div",{className:"absolute z-50 w-72 bg-[#121212]/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.8)] overflow-hidden animate-slide-up origin-top-left flex flex-col ring-1 ring-white/10",style:{top:w.top,left:w.left},children:[v.jsxs("div",{className:"px-3 py-2 text-[10px] font-bold text-neutral-500 uppercase tracking-widest border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[v.jsx("span",{children:"Blocks"}),v.jsx("button",{onClick:U,className:"hover:text-white transition-colors",children:v.jsx(zd,{className:"w-3 h-3"})})]}),v.jsx("div",{className:"p-1 max-h-[320px] overflow-y-auto custom-scrollbar",children:P.length>0?P.map((W,ee)=>v.jsxs("button",{onMouseDown:$=>{$.preventDefault(),B(W)},onMouseEnter:()=>R(ee),className:`w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors group cursor-pointer ${ee===M?"bg-white/10":"hover:bg-white/5"}`,children:[v.jsx("div",{className:`w-10 h-10 rounded border flex items-center justify-center transition-colors shadow-sm ${W.highlight?"bg-indigo-500/20 border-indigo-500/30 text-indigo-400":"bg-white/5 border-white/10 text-white"}`,children:v.jsx(W.icon,{className:"w-5 h-5"})}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:`text-sm font-bold truncate ${W.highlight?"text-indigo-300":"text-white"}`,children:W.label}),v.jsx("div",{className:"text-[10px] text-neutral-500 truncate",children:W.desc})]})]},W.label)):v.jsx("div",{className:"p-4 text-center text-neutral-500 text-xs",children:"No matching commands"})})]})]})},rCe=({isOpen:t,onClose:e,content:n,isStreaming:r,chapterTitle:i})=>{const a=T.useRef(null),[s,o]=T.useState(""),[c,u]=T.useState({tps:0,stability:100,sync:0}),[f,h]=T.useState(null),[g,y]=T.useState(!1);if(T.useEffect(()=>{if(a.current){const S=a.current;S.scrollHeight-S.scrollTop-S.clientHeight<300&&S.scrollTo({top:S.scrollHeight,behavior:"smooth"})}},[s]),T.useEffect(()=>{if(!t)return;o(n);const S=n.match(/!\[.*?\]\((.*?)\)/g);if(S){const C=S[S.length-1].match(/\((.*?)\)/);C&&C[1]!==f&&(y(!0),setTimeout(()=>{h(C[1]),y(!1)},2e3))}if(r){const E=setInterval(()=>{u({tps:Math.floor(Math.random()*40)+90,stability:98+Math.random()*2,sync:Math.min(100,c.sync+2)})},800);return()=>clearInterval(E)}else u(E=>({...E,sync:100,tps:0}))},[n,t,r]),!t)return null;const w=()=>s.split(/(!\[.*?\]\(.*?\))/g).map((E,C)=>{var M,R;if(E.match(/!\[.*?\]\(.*?\)/)){const D=(M=E.match(/\((.*?)\)/))==null?void 0:M[1],I=((R=E.match(/!\[(.*?)\]/))==null?void 0:R[1])||"Visual Asset";if(!D)return null;const P=D===f&&g;return v.jsxs("div",{className:"my-12 w-full flex flex-col items-center",children:[v.jsxs("div",{className:`
                          relative w-full max-w-3xl aspect-video rounded-lg overflow-hidden transition-all duration-1000
                          ${P?"scale-95 opacity-80 blur-sm":"scale-100 opacity-100 blur-0 shadow-2xl shadow-indigo-500/10"}
                      `,children:[P&&v.jsx("div",{className:"absolute inset-0 z-10 bg-white/5 backdrop-blur-md flex items-center justify-center border border-white/10",children:v.jsxs("div",{className:"flex flex-col items-center gap-3",children:[v.jsx(Hd,{className:"w-6 h-6 text-white animate-spin-slow"}),v.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em] text-white/70",children:"Materializing Visual..."})]})}),v.jsx("img",{src:D,alt:I,className:"w-full h-full object-cover animate-fade-in"}),v.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"}),v.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-black/60 to-transparent pointer-events-none"})]}),v.jsxs("span",{className:"mt-4 text-[10px] uppercase tracking-widest text-neutral-600 font-medium",children:["Fig. ",C+1,"  ",I]})]},C)}return v.jsx("div",{className:"animate-slide-up",children:E.split(`
`).map((D,I)=>D.trim()?D.startsWith("# ")?v.jsx("h1",{className:"text-4xl md:text-5xl font-serif text-white font-medium mb-8 mt-12 leading-tight tracking-tight",children:D.replace("# ","")},I):D.startsWith("## ")?v.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-white/90 mb-6 mt-10 leading-snug",children:D.replace("## ","")},I):v.jsx("p",{className:"mb-6 text-lg md:text-xl leading-relaxed text-neutral-300 font-serif font-light tracking-wide mix-blend-screen",children:D.replace(/\*\*(.*?)\*\*/g,(P,k)=>k)},I):v.jsx("div",{className:"h-6"},I))},C)});return v.jsxs("div",{className:"fixed inset-0 z-[100] bg-black text-white overflow-hidden flex flex-col font-sans",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none z-0",children:[v.jsx("div",{className:`
                absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-indigo-900/20 rounded-full blur-[120px] transition-all duration-[2000ms]
                ${r?"opacity-60 scale-110 translate-y-10":"opacity-30 scale-100"}
            `}),v.jsx("div",{className:`
                absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-violet-900/10 rounded-full blur-[150px] transition-all duration-[3000ms]
                ${r?"opacity-50 scale-105 -translate-y-10":"opacity-20 scale-100"}
            `}),v.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03]"})]}),v.jsxs("header",{className:"relative z-20 h-20 px-8 flex items-center justify-between backdrop-blur-sm",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"relative group",children:[v.jsx("div",{className:`absolute -inset-2 bg-white/5 rounded-full blur-md transition-opacity duration-500 ${r?"opacity-100":"opacity-0"}`}),v.jsx(bp,{className:"w-10 h-10 border border-white/10 bg-black/50 shadow-2xl",isActive:r})]}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-sm font-bold tracking-[0.2em] text-white uppercase",children:"Co-Author"}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${r?"bg-green-500 animate-pulse":"bg-neutral-600"}`}),v.jsx("p",{className:"text-[10px] text-neutral-500 font-medium uppercase tracking-widest",children:r?"Neural Engine Active":"Standby"})]})]})]}),v.jsxs("button",{onClick:e,className:"group flex items-center gap-3 px-6 py-2.5 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 transition-all hover:scale-105 active:scale-95 backdrop-blur-md",children:[v.jsx("span",{className:"text-xs font-bold tracking-widest text-neutral-400 group-hover:text-white transition-colors",children:"EXIT STUDIO"}),v.jsx(zd,{className:"w-4 h-4 text-neutral-500 group-hover:text-white transition-colors"})]})]}),v.jsx("main",{className:"relative z-10 flex-1 overflow-hidden flex justify-center",children:v.jsxs("div",{ref:a,className:"w-full max-w-4xl h-full overflow-y-auto custom-scrollbar px-6 md:px-12 py-12 scroll-smooth",children:[v.jsx("div",{className:"flex justify-center mb-16 opacity-0 animate-fade-in",style:{animationDelay:"0.2s"},children:v.jsx("div",{className:"px-4 py-1.5 rounded-full border border-white/10 bg-white/[0.02] backdrop-blur-md",children:v.jsxs("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-[0.2em]",children:["Drafting: ",i]})})}),v.jsxs("article",{className:"prose prose-invert max-w-none",children:[w(),r&&v.jsx("div",{className:"inline-block w-1 h-6 ml-1 bg-gradient-to-t from-transparent via-white to-transparent opacity-80 animate-pulse align-middle shadow-[0_0_10px_rgba(255,255,255,0.5)]"})]}),v.jsx("div",{className:"h-32"})]})}),v.jsx("div",{className:"absolute bottom-8 left-0 right-0 z-30 flex justify-center pointer-events-none",children:v.jsxs("div",{className:"flex items-center gap-6 px-8 py-3 bg-[#0a0a0a]/80 backdrop-blur-xl border border-white/10 rounded-full shadow-[0_20px_50px_rgba(0,0,0,0.5)] pointer-events-auto transition-transform duration-500 hover:scale-105",children:[v.jsxs("div",{className:"flex items-center gap-3 border-r border-white/5 pr-6",children:[v.jsx(pq,{className:"w-4 h-4 text-neutral-500"}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx("span",{className:"text-sm font-bold text-white tabular-nums leading-none",children:c.tps}),v.jsx("span",{className:"text-[8px] uppercase tracking-widest text-neutral-600 font-bold",children:"Tokens/s"})]})]}),v.jsxs("div",{className:"flex items-center gap-3 border-r border-white/5 pr-6",children:[v.jsx(TI,{className:"w-4 h-4 text-neutral-500"}),v.jsxs("div",{className:"flex flex-col",children:[v.jsxs("span",{className:"text-sm font-bold text-white tabular-nums leading-none",children:[c.stability.toFixed(0),"%"]}),v.jsx("span",{className:"text-[8px] uppercase tracking-widest text-neutral-600 font-bold",children:"Coherence"})]})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(n0,{className:`w-4 h-4 transition-colors ${r?"text-green-500":"text-neutral-500"}`}),v.jsx("div",{className:"w-24 h-1 bg-white/10 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-white transition-all duration-300 ease-out shadow-[0_0_10px_white]",style:{width:`${c.sync}%`}})})]})]})})]})},{useNavigate:iCe,useLocation:aCe}=Fr,sCe=()=>{var ke;const{currentUser:t,addCreatedBook:e}=Gi(),n=iCe(),i=((ke=aCe().state)==null?void 0:ke.initialPrompt)||"",[a,s]=T.useState("chat"),[o,c]=T.useState(!1),[u,f]=T.useState([{id:"1",title:"Chapter 1: The Beginning",content:"",pageNumber:1}]),[h,g]=T.useState("1"),y=T.useMemo(()=>u.find(te=>te.id===h)||u[0],[u,h]),[w,S]=T.useState([]),[E,C]=T.useState(""),[M,R]=T.useState(!1),[D,I]=T.useState(!1),[P,k]=T.useState("idle"),[U,B]=T.useState([]),[V,H]=T.useState([]),[G,Q]=T.useState([]),W=T.useRef(null),ee=T.useRef([]),$=T.useRef(null),q=T.useRef(null),J=T.useRef(null),ae=T.useRef(null);T.useEffect(()=>{if(!$.current){const te=`You are the Co-Author engine (v3.5) for co-writter.
        Current User: ${(t==null?void 0:t.name)||"Author"}.
        Project Context: Active Chapter "${y.title}".
        Goal: Writing a world-class book with deep reasoning.`,Ee=yq(te);Ee&&($.current=Ee,S([{id:"sys-init",role:"ai",text:"Engine Online. Ready to create."}]),i&&setTimeout(()=>xe(void 0,i),500))}},[]),T.useEffect(()=>{var te;(te=q.current)==null||te.scrollIntoView({behavior:"smooth"})},[w,a]),T.useEffect(()=>{J.current&&(J.current.style.height="auto",J.current.style.height=Math.min(J.current.scrollHeight,120)+"px")},[E]),T.useEffect(()=>{if(!M)if(P==="planning")if(u.length>1){const te=u.map(Ee=>Ee.id);B(te),k("writing_sequence"),ye(te)}else k("idle");else P==="writing_sequence"&&(U.length>0?ye(U):(k("idle"),S(te=>[...te,{id:Date.now().toString(),role:"system",text:"Auto-Pilot Complete. Book Finalized."}])))},[M,P,u]);const ye=te=>{if(te.length===0)return;const Ee=te[0],be=te.slice(1);B(be),g(Ee);const Te=u.find(qe=>qe.id===Ee);Te&&setTimeout(()=>{const qe=`Lead Writer: Chapter ${Te.pageNumber}: "${Te.title}". Write immersive ~1000 words.`;xe(void 0,qe)},1e3)},Y=async te=>new Promise((Ee,be)=>{const Te=new FileReader;Te.onloadend=()=>{const qe=Te.result.split(",")[1];Ee({inlineData:{data:qe,mimeType:te.type}})},Te.onerror=be,Te.readAsDataURL(te)}),ne=te=>{if(te.target.files){const Ee=Array.from(te.target.files);H(Te=>[...Te,...Ee]);const be=Ee.map(Te=>URL.createObjectURL(Te));Q(Te=>[...Te,...be])}},ue=te=>{H(Ee=>Ee.filter((be,Te)=>Te!==te)),Q(Ee=>(Ee[te]&&URL.revokeObjectURL(Ee[te]),Ee.filter((be,Te)=>Te!==te)))},me=async(te,Ee)=>{try{if(te==="write_content")return f(be=>be.map(Te=>Te.id===h?{...Te,content:Ee.content}:Te)),"Content saved to editor.";if(te==="generate_image"){S(Te=>[...Te,{id:Date.now().toString(),role:"system",text:`Visualizing: ${Ee.prompt}...`}]);const be=await bq(Ee.prompt,"Cinematic",y.title,t==null?void 0:t.name);if("imageBytes"in be){const Te=`

![${Ee.prompt}](data:image/jpeg;base64,${be.imageBytes})

`;return f(qe=>qe.map(et=>et.id===h?{...et,content:et.content+Te}:et)),"Visual asset materialized."}return"Visualization failed."}if(te==="propose_blueprint"){const be=Ee.outline.map((Te,qe)=>({id:Date.now().toString()+qe,title:Te.title,content:`> **Objective**: ${Te.summary}

`,pageNumber:qe+1}));return f(be),be.length>0&&g(be[0].id),`Blueprint synchronized. Title: "${Ee.title}".`}return"Instruction acknowledged."}catch(be){return`Error: ${be.message}`}},xe=async(te,Ee)=>{const be=Ee||E;if(!be.trim()&&V.length===0)return;const Te=[...V],qe=[...G];C(""),H([]),Q([]),J.current&&(J.current.style.height="auto"),(!P||P==="idle")&&S(Hn=>[...Hn,{id:Date.now().toString(),role:"user",text:be,attachments:qe}]),R(!0);const et=(Date.now()+1).toString();S(Hn=>[...Hn,{id:et,role:"ai",text:"",isStreaming:!0}]);try{if(!$.current)throw new Error("No link");const Hn=[];be.trim()&&Hn.push({text:be});for(const Mn of Te)Hn.push(await Y(Mn));const rs=await $.current.sendMessageStream({message:Hn});let xr="",is;for await(const Mn of rs)Mn.text&&(xr+=Mn.text,S(ya=>ya.map(Lt=>Lt.id===et?{...Lt,text:xr}:Lt))),Mn!=null&&Mn.functionCalls&&(is=Mn.functionCalls);if(is&&is.length>0){S(wr=>wr.map(Vi=>Vi.id===et?{...Vi,isToolUse:!0,text:Vi.text+`

*Synchronizing Editor...*`}:Vi));const Mn=[];for(const wr of is)Mn.push({functionResponse:{name:wr.name,response:{result:await me(wr.name,wr.args)}}});const ya=await $.current.sendMessageStream({message:Mn});let Lt="";for await(const wr of ya)wr.text&&(Lt+=wr.text,S(Vi=>Vi.map(as=>as.id===et?{...as,text:xr+(xr?`

`:"")+Lt,isToolUse:!1}:as)))}S(Mn=>Mn.map(ya=>ya.id===et?{...ya,isStreaming:!1}:ya))}catch{S(rs=>rs.map(xr=>xr.id===et?{...xr,text:"Interface interrupted. Please retry.",isStreaming:!1}:xr))}finally{R(!1)}},Me=async()=>{try{const te=await navigator.mediaDevices.getUserMedia({audio:!0}),Ee=new MediaRecorder(te);W.current=Ee,ee.current=[],Ee.ondataavailable=be=>{be.data.size>0&&ee.current.push(be.data)},Ee.onstop=async()=>{const be=new Blob(ee.current,{type:"audio/webm"}),Te=new FileReader;Te.readAsDataURL(be),Te.onloadend=async()=>{const qe=Te.result.split(",")[1];R(!0);try{const et=await zue(qe,"audio/webm");et&&C(Hn=>Hn+(Hn?" ":"")+et)}catch{}R(!1)},te.getTracks().forEach(qe=>qe.stop())},Ee.start(),I(!0)}catch{alert("Mic access denied.")}},Ce=()=>{W.current&&D&&(W.current.stop(),I(!1))},pt=()=>{if(c(!0),u.length<=1&&u[0].content.length<200)k("planning"),xe(void 0,`Architect: Proposed outline for "${u[0].title}". Use propose_blueprint.`);else{const Ee=u.map(be=>be.id);B(Ee),k("writing_sequence"),ye(Ee)}},he=()=>{e({id:`gen-${Date.now()}`,title:u[0].title||"Untitled",author:(t==null?void 0:t.name)||"Author",description:"AI Synthesized Book",price:0,coverImageUrl:"https://images.unsplash.com/photo-1543002588-bfa74002ed7e?auto=format&fit=crop&q=80&w=800",genre:"Draft",sellerId:(t==null?void 0:t.id)||"guest",publicationDate:new Date().toISOString().split("T")[0],pages:u}),n("/dashboard")},He=w.slice().reverse().find(te=>te.role==="ai");return v.jsxs("div",{className:"flex flex-col h-screen bg-black text-white overflow-hidden font-sans",children:[v.jsx(rCe,{isOpen:o,onClose:()=>{c(!1),k("idle"),B([])},content:He?He.text:"Neural Link Established...",isStreaming:M,chapterTitle:y.title}),v.jsxs("header",{className:"h-14 border-b border-white/10 bg-[#050505] flex items-center justify-between px-4 z-50 shrink-0",children:[v.jsxs("button",{onClick:()=>n("/dashboard"),className:"flex items-center gap-2 text-neutral-400 hover:text-white uppercase text-[10px] font-bold tracking-widest transition-colors",children:[v.jsx(AI,{className:"w-4 h-4"})," Exit Studio"]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsxs("button",{onClick:pt,disabled:M||P!=="idle",className:"flex items-center gap-2 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-[10px] font-bold uppercase hover:bg-indigo-500/20 transition-colors disabled:opacity-50 text-indigo-300",children:[M?v.jsx(Hd,{className:"w-3 h-3 animate-spin"}):v.jsx(TI,{className:"w-3 h-3"}),P!=="idle"?"Processing...":"Neural Auto-Pilot"]}),v.jsx("div",{className:"h-4 w-px bg-white/10 mx-1"}),v.jsx("button",{onClick:he,className:"bg-white text-black px-6 py-1.5 rounded-full text-[10px] font-bold uppercase hover:bg-neutral-200 transition-colors shadow-[0_0_15px_rgba(255,255,255,0.15)]",children:"Sync Changes"})]})]}),v.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[v.jsxs("aside",{className:"hidden md:flex w-[360px] bg-[#09090b] border-r border-white/10 flex-col z-20 shadow-2xl",children:[v.jsxs("div",{className:"flex border-b border-white/10",children:[v.jsx("button",{onClick:()=>s("chat"),className:`flex-1 py-4 text-[10px] font-bold uppercase tracking-widest transition-colors ${a==="chat"?"text-white bg-white/5 border-b-2 border-white":"text-neutral-500 hover:text-neutral-300"}`,children:"Co-Author"}),v.jsx("button",{onClick:()=>s("outline"),className:`flex-1 py-4 text-[10px] font-bold uppercase tracking-widest transition-colors ${a==="outline"?"text-white bg-white/5 border-b-2 border-white":"text-neutral-500 hover:text-neutral-300"}`,children:"Outline"})]}),v.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col",children:[a==="chat"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:[w.map((te,Ee)=>{var be;return v.jsxs("div",{className:"py-6 px-5 border-b border-white/5 last:border-0 hover:bg-white/[0.02] transition-colors group",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80 group-hover:opacity-100 transition-opacity",children:[te.role==="user"?v.jsx("div",{className:"w-5 h-5 rounded-full bg-neutral-800 flex items-center justify-center border border-white/10",children:v.jsx("span",{className:"text-[10px] font-bold text-neutral-400",children:"U"})}):v.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500/10 flex items-center justify-center border border-indigo-500/20",children:v.jsx(Hd,{className:"w-3 h-3 text-indigo-400"})}),v.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${te.role==="user"?"text-neutral-500":"text-indigo-400"}`,children:te.role==="user"?"Human":"Neural Core"})]}),v.jsxs("div",{className:`pl-8 text-sm leading-7 font-medium whitespace-pre-wrap font-sans ${te.role==="user"?"text-white":"text-neutral-300"}`,children:[(be=te.attachments)==null?void 0:be.map((Te,qe)=>v.jsx("img",{src:Te,className:"h-20 w-auto rounded-lg mb-2"},qe)),te.text,te.isToolUse&&v.jsxs("div",{className:"mt-2 text-[9px] text-green-400 uppercase tracking-widest flex items-center gap-1",children:[v.jsx(Or,{className:"w-2 h-2"})," Sync Active"]}),te.role==="ai"&&te.isStreaming&&Ee===w.length-1&&v.jsx("span",{className:"inline-block w-2 h-4 ml-1 bg-indigo-500 animate-pulse"})]})]},te.id)}),v.jsx("div",{ref:q})]}),v.jsxs("div",{className:"p-4 bg-[#09090b] border-t border-white/10",children:[G.length>0&&v.jsx("div",{className:"flex gap-2 mb-3 px-1 overflow-x-auto",children:G.map((te,Ee)=>v.jsxs("div",{className:"relative group flex-shrink-0",children:[v.jsx("img",{src:te,className:"h-14 w-14 object-cover rounded-lg border border-white/10 shadow-md"}),v.jsx("button",{onClick:()=>ue(Ee),className:"absolute -top-1.5 -right-1.5 w-5 h-5 bg-black rounded-full text-white border border-white/20 hover:bg-red-500 transition-colors",children:v.jsx(zd,{className:"w-3 h-3"})})]},Ee))}),v.jsxs("div",{className:`bg-[#151515] border rounded-[28px] p-2 flex items-end gap-2 shadow-lg transition-colors ${M?"border-indigo-500/30":"border-white/10 focus-within:border-white/20"}`,children:[v.jsx("button",{onClick:()=>{var te;return(te=ae.current)==null?void 0:te.click()},className:"w-9 h-9 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-neutral-400 hover:text-white transition-colors mb-0.5",children:v.jsx(dM,{className:"w-4 h-4"})}),v.jsx("input",{type:"file",ref:ae,className:"hidden",onChange:ne,accept:"image/*,application/pdf",multiple:!0}),v.jsx("button",{onMouseDown:Me,onMouseUp:Ce,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all flex-shrink-0 mb-0.5 ${D?"bg-red-500 text-white scale-110":"bg-white/5 text-neutral-400 hover:text-white"}`,children:D?v.jsx(Aue,{className:"w-4 h-4"}):v.jsx(Eue,{className:"w-4 h-4"})}),v.jsx("textarea",{ref:J,value:E,onChange:te=>C(te.target.value),placeholder:D?"Listening...":"Ask Co-Author...",className:"flex-1 bg-transparent border-none outline-none text-white text-sm py-2.5 max-h-32 resize-none font-medium",onKeyDown:te=>{te.key==="Enter"&&!te.shiftKey&&(te.preventDefault(),xe())},disabled:M}),v.jsx("button",{onClick:()=>xe(),className:"w-9 h-9 rounded-full bg-white text-black flex items-center justify-center hover:scale-105 transition-transform mb-0.5 disabled:opacity-50",children:M?v.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}):v.jsx(_I,{className:"w-4 h-4"})})]}),v.jsxs("div",{className:"flex justify-between items-center mt-2 px-2 text-[9px] text-neutral-600 font-mono",children:[v.jsx("span",{children:"GEMINI 3 FLASH CORE"}),v.jsxs("span",{children:[y.content.length," CHARS"]})]})]})]}),a==="outline"&&v.jsxs("div",{className:"p-4 space-y-2 overflow-y-auto flex-1",children:[u.map((te,Ee)=>v.jsxs("button",{onClick:()=>g(te.id),className:`w-full text-left p-4 rounded-xl border text-sm transition-all group ${h===te.id?"bg-white/10 border-white/20 text-white shadow-lg":"border-transparent text-neutral-500 hover:bg-white/5"}`,children:[v.jsxs("div",{className:"flex items-center justify-between mb-1",children:[v.jsxs("span",{className:"text-[9px] uppercase font-bold opacity-50 tracking-wider",children:["Chapter ",Ee+1]}),h===te.id&&v.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"})]}),v.jsx("span",{className:"font-bold truncate block",children:te.title})]},te.id)),v.jsxs("button",{onClick:()=>{const te=Date.now().toString();f([...u,{id:te,title:"New Chapter",content:"",pageNumber:u.length+1}]),g(te)},className:"w-full py-4 border border-dashed border-white/10 text-neutral-500 text-xs font-bold uppercase rounded-xl hover:border-white/30 hover:text-white mt-4 flex items-center justify-center gap-2 transition-all",children:[v.jsx(dM,{className:"w-3 h-3"})," Append Node"]})]})]})]}),v.jsxs("main",{className:"flex-1 flex flex-col relative bg-[#000000]",children:[v.jsxs("div",{className:"h-10 bg-[#050505] border-b border-white/5 flex items-center justify-between px-6 shrink-0",children:[v.jsx("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-[0.2em]",children:y.title}),v.jsxs("div",{className:"flex items-center gap-4 text-[9px] font-mono text-neutral-600 uppercase tracking-widest",children:[v.jsx("span",{className:"bg-white/5 px-2 py-0.5 rounded",children:"MODALITY: TEXT/IMAGE"}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${M?"bg-indigo-500 animate-pulse":"bg-green-500"}`}),v.jsx("span",{children:M?"SYNCING":"STABLE"})]})]})]}),v.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar scroll-smooth",children:v.jsx(nCe,{title:y.title,onTitleChange:te=>f(Ee=>Ee.map(be=>be.id===h?{...be,title:te}:be)),content:y.content,onContentChange:te=>f(Ee=>Ee.map(be=>be.id===h?{...be,content:te}:be)),onTriggerAI:te=>xe(void 0,`Write content: ${te}`),onTriggerImageGen:te=>xe(void 0,`Generate image: ${te}`)})})]})]})]})},ji=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),lP=[.001,0,0,.001,0,0],xR=1.35,qa={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ol={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},tb="pdfjs_internal_editor_",it={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},g7={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Wr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},M0={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Vn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},pm={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},gw={ERRORS:0,WARNINGS:1,INFOS:5},Sv={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},d1={moveTo:0,lineTo:1,curveTo:2,closePath:3},v7={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Q_=gw.WARNINGS;function oCe(t){Number.isInteger(t)&&(Q_=t)}function lCe(){return Q_}function Z_(t){Q_>=gw.INFOS&&console.info(`Info: ${t}`)}function at(t){Q_>=gw.WARNINGS&&console.warn(`Warning: ${t}`)}function sn(t){throw new Error(t)}function Ct(t,e){t||sn(e)}function cCe(t){switch(t==null?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function rL(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"){if(n.addDefaultProtocol&&t.startsWith("www.")){const i=t.match(/\./g);(i==null?void 0:i.length)>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=pCe(t)}catch{}}const r=e?URL.parse(t,e):URL.parse(t);return cCe(r)?r:null}function iL(t,e,n=!1){const r=URL.parse(t);return r?(r.hash=e,r.href):n&&rL(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function dt(t,e,n,r=!1){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const Sp=(function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class p6 extends Sp{constructor(e,n){super(e,"PasswordException"),this.code=n}}class wR extends Sp{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class dA extends Sp{constructor(e){super(e,"InvalidPDFException")}}class nb extends Sp{constructor(e,n,r){super(e,"ResponseException"),this.status=n,this.missing=r}}class uCe extends Sp{constructor(e){super(e,"FormatError")}}class Gc extends Sp{constructor(e){super(e,"AbortException")}}function y7(t){(typeof t!="object"||(t==null?void 0:t.length)===void 0)&&sn("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const a=Math.min(i+n,e),s=t.subarray(i,a);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function vw(t){typeof t!="string"&&sn("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=t.charCodeAt(r)&255;return n}function dCe(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function fCe(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function hCe(){try{return new Function(""),!0}catch{return!1}}class jr{static get isLittleEndian(){return dt(this,"isLittleEndian",fCe())}static get isEvalSupported(){return dt(this,"isEvalSupported",hCe())}static get isOffscreenCanvasSupported(){return dt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return dt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return dt(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){var e,n;return dt(this,"isCSSRoundSupported",(n=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:n.call(e,"width: round(1.5px, 1px)"))}}const SR=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));var Ic,I1,cP;class Le{static makeHexColor(e,n,r){return`#${SR[e]}${SR[n]}${SR[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,r=0){const i=e[r],a=e[r+1];e[r]=i*n[0]+a*n[2]+n[4],e[r+1]=i*n[1]+a*n[3]+n[5]}static applyTransformToBezier(e,n,r=0){const i=n[0],a=n[1],s=n[2],o=n[3],c=n[4],u=n[5];for(let f=0;f<6;f+=2){const h=e[r+f],g=e[r+f+1];e[r+f]=h*i+g*s+c,e[r+f+1]=h*a+g*o+u}}static applyInverseTransform(e,n){const r=e[0],i=e[1],a=n[0]*n[3]-n[1]*n[2];e[0]=(r*n[3]-i*n[2]+n[2]*n[5]-n[4]*n[3])/a,e[1]=(-r*n[1]+i*n[0]+n[4]*n[1]-n[5]*n[0])/a}static axialAlignedBoundingBox(e,n,r){const i=n[0],a=n[1],s=n[2],o=n[3],c=n[4],u=n[5],f=e[0],h=e[1],g=e[2],y=e[3];let w=i*f+c,S=w,E=i*g+c,C=E,M=o*h+u,R=M,D=o*y+u,I=D;if(a!==0||s!==0){const P=a*f,k=a*g,U=s*h,B=s*y;w+=U,C+=U,E+=B,S+=B,M+=P,I+=P,D+=k,R+=k}r[0]=Math.min(r[0],w,E,S,C),r[1]=Math.min(r[1],M,D,R,I),r[2]=Math.max(r[2],w,E,S,C),r[3]=Math.max(r[3],M,D,R,I)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const r=e[0],i=e[1],a=e[2],s=e[3],o=r**2+i**2,c=r*a+i*s,u=a**2+s**2,f=(o+u)/2,h=Math.sqrt(f**2-(o*u-c**2));n[0]=Math.sqrt(f+h||1),n[1]=Math.sqrt(f-h||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return a>s?null:[r,a,i,s]}static pointBoundingBox(e,n,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],n),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],n)}static rectBoundingBox(e,n,r,i,a){a[0]=Math.min(a[0],e,r),a[1]=Math.min(a[1],n,i),a[2]=Math.max(a[2],e,r),a[3]=Math.max(a[3],n,i)}static bezierBoundingBox(e,n,r,i,a,s,o,c,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],n,c),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],n,c),F(this,Ic,cP).call(this,e,r,a,o,n,i,s,c,3*(-e+3*(r-a)+o),6*(e-2*r+a),3*(r-e),u),F(this,Ic,cP).call(this,e,r,a,o,n,i,s,c,3*(-n+3*(i-s)+c),6*(n-2*i+s),3*(i-n),u)}}Ic=new WeakSet,I1=function(e,n,r,i,a,s,o,c,u,f){if(u<=0||u>=1)return;const h=1-u,g=u*u,y=g*u,w=h*(h*(h*e+3*u*n)+3*g*r)+y*i,S=h*(h*(h*a+3*u*s)+3*g*o)+y*c;f[0]=Math.min(f[0],w),f[1]=Math.min(f[1],S),f[2]=Math.max(f[2],w),f[3]=Math.max(f[3],S)},cP=function(e,n,r,i,a,s,o,c,u,f,h,g){if(Math.abs(u)<1e-12){Math.abs(f)>=1e-12&&F(this,Ic,I1).call(this,e,n,r,i,a,s,o,c,-h/f,g);return}const y=f**2-4*h*u;if(y<0)return;const w=Math.sqrt(y),S=2*u;F(this,Ic,I1).call(this,e,n,r,i,a,s,o,c,(-f+w)/S,g),F(this,Ic,I1).call(this,e,n,r,i,a,s,o,c,(-f-w)/S,g)},j(Le,Ic);function pCe(t){return decodeURIComponent(escape(t))}let ER=null,m6=null;function b7(t){return ER||(ER=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,m6=new Map([["","t"]])),t.replaceAll(ER,(e,n,r)=>n?n.normalize("NFKC"):m6.get(r))}function aL(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),y7(t)}const sL="pdfjs_internal_id_";function mCe(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,i,...a]=n;if(!t(r)&&!Number.isInteger(r)||!e(i))return!1;const s=a.length;let o=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;o=!1;break;default:return!1}for(const c of a)if(!(typeof c=="number"||o&&c===null))return!1;return!0}function Si(t,e,n){return Math.min(Math.max(t,e),n)}function x7(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(y7(t))}function gCe(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):vw(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class rb{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function i(a){var c;if(!a)return;let s=null;const o=a.name;if(o==="#text")s=a.value;else if(rb.shouldBuildText(o))(c=a==null?void 0:a.attributes)!=null&&c.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&n.push({str:s}),!!a.children)for(const u of a.children)i(u)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class oL{static setupStorage(e,n,r,i,a){const s=i.getValue(n,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?e.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",o=>{i.setValue(n,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",o=>{i.setValue(n,{value:o.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const o of r.children)o.attributes.value===s.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const c=o.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(n,{value:u})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:i,linkService:a}){const{attributes:s}=n,o=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[c,u]of Object.entries(s))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}o&&a.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,n,r)}static render(e){var h,g;const n=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:r});const o=a!=="richText",c=e.div;if(c.append(s),e.viewport){const y=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=y}o&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(i.children.length===0){if(i.value){const y=document.createTextNode(i.value);s.append(y),o&&rb.shouldBuildText(i.name)&&u.push(y)}return{textDivs:u}}const f=[[i,-1,s]];for(;f.length>0;){const[y,w,S]=f.at(-1);if(w+1===y.children.length){f.pop();continue}const E=y.children[++f.at(-1)[1]];if(E===null)continue;const{name:C}=E;if(C==="#text"){const R=document.createTextNode(E.value);u.push(R),S.append(R);continue}const M=(h=E==null?void 0:E.attributes)!=null&&h.xmlns?document.createElementNS(E.attributes.xmlns,C):document.createElement(C);if(S.append(M),E.attributes&&this.setAttributes({html:M,element:E,storage:n,intent:a,linkService:r}),((g=E.children)==null?void 0:g.length)>0)f.push([E,-1,M]);else if(E.value){const R=document.createTextNode(E.value);o&&rb.shouldBuildText(C)&&u.push(R),M.append(R)}}for(const y of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const Bl="http://www.w3.org/2000/svg",Of=class Of{};Se(Of,"CSS",96),Se(Of,"PDF",72),Se(Of,"PDF_TO_CSS_UNITS",Of.CSS/Of.PDF);let qc=Of;async function Hv(t,e="text"){if(a0(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class yw{constructor({viewBox:e,userUnit:n,scale:r,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=s,r*=n;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let f,h,g,y;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,h=0,g=0,y=1;break;case 90:f=0,h=1,g=1,y=0;break;case 270:f=0,h=-1,g=-1,y=0;break;case 0:f=1,h=0,g=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(g=-g,y=-y);let w,S,E,C;f===0?(w=Math.abs(u-e[1])*r+a,S=Math.abs(c-e[0])*r+s,E=(e[3]-e[1])*r,C=(e[2]-e[0])*r):(w=Math.abs(c-e[0])*r+a,S=Math.abs(u-e[1])*r+s,E=(e[2]-e[0])*r,C=(e[3]-e[1])*r),this.transform=[f*r,h*r,g*r,y*r,w-f*r*c-g*r*u,S-h*r*c-y*r*u],this.width=E,this.height=C}get rawDims(){const e=this.viewBox;return dt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new yw({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,n){const r=[e,n];return Le.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const n=[e[0],e[1]];Le.applyTransform(n,this.transform);const r=[e[2],e[3]];return Le.applyTransform(r,this.transform),[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){const r=[e,n];return Le.applyInverseTransform(r,this.transform),r}}class eC extends Sp{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function bw(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function tC(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function w7(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function S7(t,e="document.pdf"){if(typeof t!="string")return e;if(bw(t))return at('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(t);if(!r)return e;const i=o=>{try{let c=decodeURIComponent(o);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:o):c}catch{return o}},a=/\.pdf$/i,s=r.pathname.split("/").at(-1);if(a.test(s))return i(s);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const u of o)if(a.test(u))return i(u);const c=Array.from(r.searchParams.keys()).reverse();for(const u of c)if(a.test(u))return i(u)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return i(c[0])}return e}class g6{constructor(){Se(this,"started",Object.create(null));Se(this,"times",[])}time(e){e in this.started&&at(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||at(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:i,end:a}of this.times)e.push(`${r.padEnd(n)} ${a-i}ms
`);return e.join("")}}function a0(t,e){const n=e?URL.parse(t,e):URL.parse(t);return(n==null?void 0:n.protocol)==="http:"||(n==null?void 0:n.protocol)==="https:"}function es(t){t.preventDefault()}function Nn(t){t.preventDefault(),t.stopPropagation()}function vCe(t){console.log("Deprecated API usage: "+t)}var cb;class ib{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;m(this,cb)||L(this,cb,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const n=m(this,cb).exec(e);if(!n)return null;const r=parseInt(n[1],10);let i=parseInt(n[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(n[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(n[4],10);s=s>=0&&s<=23?s:0;let o=parseInt(n[5],10);o=o>=0&&o<=59?o:0;let c=parseInt(n[6],10);c=c>=0&&c<=59?c:0;const u=n[7]||"Z";let f=parseInt(n[8],10);f=f>=0&&f<=23?f:0;let h=parseInt(n[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(s+=f,o+=h):u==="+"&&(s-=f,o-=h),new Date(Date.UTC(r,i,a,s,o,c))}}cb=new WeakMap,j(ib,cb);function E7(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new yw({viewBox:a,userUnit:1,scale:e,rotation:n})}function zv(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(at(`Not a valid color format: "${t}"`),[0,0,0])}function yCe(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,zv(r))}e.remove()}function Cn(t){const{a:e,b:n,c:r,d:i,e:a,f:s}=t.getTransform();return[e,n,r,i,a,s]}function Io(t){const{a:e,b:n,c:r,d:i,e:a,f:s}=t.getTransform().invertSelf();return[e,n,r,i,a,s]}function qd(t,e,n=!1,r=!0){if(e instanceof yw){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=t,o=jr.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,u=`var(--total-scale-factor) * ${a}px`,f=o?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!n||e.rotation%180===0?(s.width=f,s.height=h):(s.width=h,s.height=f)}r&&t.setAttribute("data-main-rotation",e.rotation)}class Ao{constructor(){const{pixelRatio:e}=Ao;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,r,i,a=-1){let s=1/0,o=1/0,c=1/0;r=Ao.capPixels(r,a),r>0&&(s=Math.sqrt(r/(e*n))),i!==-1&&(o=i/e,c=i/n);const u=Math.min(s,o,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,r):r}return e}}const fA=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class bCe{static get isDarkMode(){var e;return dt(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class A7{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),dt(this,"commentForegroundColor",zv(r))}}function _7(t,e,n,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return t=Math.round(t*r+i),e=Math.round(e*r+i),n=Math.round(n*r+i),[t,e,n]}function v6(t,e){const n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.max(n,r,i),s=Math.min(n,r,i),o=(a+s)/2;if(a===s)e[0]=e[1]=0;else{const c=a-s;switch(e[1]=o<.5?c/(a+s):c/(2-a-s),a){case n:e[0]=((r-i)/c+(r<i?6:0))*60;break;case r:e[0]=((i-n)/c+2)*60;break;case i:e[0]=((n-r)/c+4)*60;break}}e[2]=o}function uP(t,e){const n=t[0],r=t[1],i=t[2],a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),o=i-a/2;switch(Math.floor(n/60)){case 0:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 1:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 2:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 3:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 4:e[0]=s+o,e[1]=o,e[2]=a+o;break;case 5:case 6:e[0]=a+o,e[1]=o,e[2]=s+o;break}}function y6(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function b6(t,e,n){uP(t,n),n.map(y6);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];uP(e,n),n.map(y6);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const x6=new Map;function C7(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=x6.get(n);if(r)return r;const i=new Float32Array(9),a=i.subarray(0,3),s=i.subarray(3,6);v6(t,s);const o=i.subarray(6,9);v6(e,o);const c=o[2]<.5,u=c?12:4.5;if(s[2]=c?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),b6(s,o,a)<u){let f,h;c?(f=s[2],h=1):(f=0,h=s[2]);const g=.005;for(;h-f>g;){const y=s[2]=(f+h)/2;c===b6(s,o,a)<u?f=y:h=y}s[2]=c?h:f}return uP(s,a),r=Le.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),x6.set(n,r),r}function lL({html:t,dir:e,className:n},r){const i=document.createDocumentFragment();if(typeof t=="string"){const a=document.createElement("p");a.dir=e||"auto";const s=t.split(/(?:\r\n?|\n)/);for(let o=0,c=s.length;o<c;++o){const u=s[o];a.append(document.createTextNode(u)),o<c-1&&a.append(document.createElement("br"))}i.append(a)}else oL.render({xfaHtml:t,div:i,intent:"richText"});i.firstChild.classList.add("richText",n),r.append(i)}var Uu,Bu,xs,ws,ub,Hu,$m,Gm,db,EA,T7,ai,N7,R7,mm,s0;const $l=class $l{constructor(e){j(this,ai);j(this,Uu,null);j(this,Bu,null);j(this,xs);j(this,ws,null);j(this,ub,null);j(this,Hu,null);j(this,$m,null);j(this,Gm,null);L(this,xs,e),m($l,db)||L($l,db,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=L(this,Uu,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=m(this,xs)._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",es,{signal:n}),e.addEventListener("pointerdown",F($l,EA,T7),{signal:n}));const r=L(this,ws,document.createElement("div"));r.className="buttons",e.append(r);const i=m(this,xs).toolbarPosition;if(i){const{style:a}=e,s=m(this,xs)._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return m(this,Uu)}hide(){var e;m(this,Uu).classList.add("hidden"),(e=m(this,Bu))==null||e.hideDropdown()}show(){var e,n;m(this,Uu).classList.remove("hidden"),(e=m(this,ub))==null||e.shown(),(n=m(this,Hu))==null||n.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=m(this,xs),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",m($l,db)[e]),F(this,ai,mm).call(this,r)&&r.addEventListener("click",i=>{n.delete()},{signal:n._signal}),m(this,ws).append(r)}async addAltText(e){const n=await e.render();F(this,ai,mm).call(this,n),m(this,ws).append(n,m(this,ai,s0)),L(this,ub,e)}addComment(e,n=null){if(m(this,Hu))return;const r=e.renderForToolbar();if(!r)return;F(this,ai,mm).call(this,r);const i=L(this,$m,m(this,ai,s0));n?(m(this,ws).insertBefore(r,n),m(this,ws).insertBefore(i,n)):m(this,ws).append(r,i),L(this,Hu,e),e.toolbar=this}addColorPicker(e){if(m(this,Bu))return;L(this,Bu,e);const n=e.renderButton();F(this,ai,mm).call(this,n),m(this,ws).append(n,m(this,ai,s0))}async addEditSignatureButton(e){const n=L(this,Gm,await e.renderEditButton(m(this,xs)));F(this,ai,mm).call(this,n),m(this,ws).append(n,m(this,ai,s0))}removeButton(e){var n,r;switch(e){case"comment":(n=m(this,Hu))==null||n.removeToolbarCommentButton(),L(this,Hu,null),(r=m(this,$m))==null||r.remove(),L(this,$m,null);break}}async addButton(e,n){switch(e){case"colorPicker":this.addColorPicker(n);break;case"altText":await this.addAltText(n);break;case"editSignature":await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(n);break}}async addButtonBefore(e,n,r){const i=m(this,ws).querySelector(r);i&&e==="comment"&&this.addComment(n,i)}updateEditSignatureButton(e){m(this,Gm)&&(m(this,Gm).title=e)}remove(){var e;m(this,Uu).remove(),(e=m(this,Bu))==null||e.destroy(),L(this,Bu,null)}};Uu=new WeakMap,Bu=new WeakMap,xs=new WeakMap,ws=new WeakMap,ub=new WeakMap,Hu=new WeakMap,$m=new WeakMap,Gm=new WeakMap,db=new WeakMap,EA=new WeakSet,T7=function(e){e.stopPropagation()},ai=new WeakSet,N7=function(e){m(this,xs)._focusEventsAllowed=!1,Nn(e)},R7=function(e){m(this,xs)._focusEventsAllowed=!0,Nn(e)},mm=function(e){const n=m(this,xs)._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",F(this,ai,N7).bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",F(this,ai,R7).bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",es,{signal:n}),!0)},s0=function(){const e=document.createElement("div");return e.className="divider",e},j($l,EA),j($l,db,null);let dP=$l;var fb,Gf,Vl,Vc,M7,P7,fP;class xCe{constructor(e){j(this,Vc);j(this,fb,null);j(this,Gf,null);j(this,Vl);L(this,Vl,e)}show(e,n,r){const[i,a]=F(this,Vc,P7).call(this,n,r),{style:s}=m(this,Gf)||L(this,Gf,F(this,Vc,M7).call(this));e.append(m(this,Gf)),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){m(this,Gf).remove()}}fb=new WeakMap,Gf=new WeakMap,Vl=new WeakMap,Vc=new WeakSet,M7=function(){const e=L(this,Gf,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const n=m(this,Vl)._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",es,{signal:n});const r=L(this,fb,document.createElement("div"));return r.className="buttons",e.append(r),m(this,Vl).hasCommentManager()&&F(this,Vc,fP).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{m(this,Vl).commentSelection("floating_button")}),F(this,Vc,fP).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{m(this,Vl).highlightSelection("floating_button")}),e},P7=function(e,n){let r=0,i=0;for(const a of e){const s=a.y+a.height;if(s<r)continue;const o=a.x+(n?a.width:0);if(s>r){i=o,r=s;continue}n?o>i&&(i=o):o<i&&(i=o)}return[n?1-i:i,r]},fP=function(e,n,r,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",n);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",r);const o=m(this,Vl)._signal;o instanceof AbortSignal&&!o.aborted&&(a.addEventListener("contextmenu",es,{signal:o}),a.addEventListener("click",i,{signal:o})),m(this,fb).append(a)};function k7(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))}var AA;class wCe{constructor(){j(this,AA,0)}get id(){return`${tb}${lr(this,AA)._++}`}}AA=new WeakMap;var qm,hb,mi,Vm,D1;const bL=class bL{constructor(){j(this,Vm);j(this,qm,aL());j(this,hb,0);j(this,mi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return dt(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:n,name:r,size:i,type:a}=e;return F(this,Vm,D1).call(this,`${n}_${r}_${i}_${a}`,e)}async getFromUrl(e){return F(this,Vm,D1).call(this,e,e)}async getFromBlob(e,n){const r=await n;return F(this,Vm,D1).call(this,e,r)}async getFromId(e){m(this,mi)||L(this,mi,new Map);const n=m(this,mi).get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){m(this,mi)||L(this,mi,new Map);let r=m(this,mi).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(n.width,n.height);return i.getContext("2d").drawImage(n,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${m(this,qm)}_${lr(this,hb)._++}`,refCounter:1,isSvg:!1},m(this,mi).set(e,r),m(this,mi).set(r.id,r),r}getSvgUrl(e){const n=m(this,mi).get(e);return n!=null&&n.isSvg?n.svgUrl:null}deleteId(e){var i;m(this,mi)||L(this,mi,new Map);const n=m(this,mi).get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const a=new OffscreenCanvas(r.width,r.height);a.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=a.convertToBlob()}(i=r.close)==null||i.call(r),n.bitmap=null}isValidId(e){return e.startsWith(`image_${m(this,qm)}_`)}};qm=new WeakMap,hb=new WeakMap,mi=new WeakMap,Vm=new WeakSet,D1=async function(e,n){m(this,mi)||L(this,mi,new Map);let r=m(this,mi).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${m(this,qm)}_${lr(this,hb)._++}`,refCounter:0,isSvg:!1});let i;if(typeof n=="string"?(r.url=n,i=await Hv(n,"blob")):n instanceof File?i=r.file=n:n instanceof Blob&&(i=n),i.type==="image/svg+xml"){const a=bL._isSVGFittingCanvas,s=new FileReader,o=new Image,c=new Promise((u,f)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,u()},s.onload=async()=>{const h=r.svgUrl=s.result;o.src=await a?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=s.onerror=f});s.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){at(i),r=null}return m(this,mi).set(e,r),r&&m(this,mi).set(r.id,r),r};let hP=bL;var Wn,zu,pb,_n;class SCe{constructor(e=128){j(this,Wn,[]);j(this,zu,!1);j(this,pb);j(this,_n,-1);L(this,pb,e)}add({cmd:e,undo:n,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:o=!1}){if(i&&e(),m(this,zu))return;const c={cmd:e,undo:n,post:r,type:a};if(m(this,_n)===-1){m(this,Wn).length>0&&(m(this,Wn).length=0),L(this,_n,0),m(this,Wn).push(c);return}if(s&&m(this,Wn)[m(this,_n)].type===a){o&&(c.undo=m(this,Wn)[m(this,_n)].undo),m(this,Wn)[m(this,_n)]=c;return}const u=m(this,_n)+1;u===m(this,pb)?m(this,Wn).splice(0,1):(L(this,_n,u),u<m(this,Wn).length&&m(this,Wn).splice(u)),m(this,Wn).push(c)}undo(){if(m(this,_n)===-1)return;L(this,zu,!0);const{undo:e,post:n}=m(this,Wn)[m(this,_n)];e(),n==null||n(),L(this,zu,!1),L(this,_n,m(this,_n)-1)}redo(){if(m(this,_n)<m(this,Wn).length-1){L(this,_n,m(this,_n)+1),L(this,zu,!0);const{cmd:e,post:n}=m(this,Wn)[m(this,_n)];e(),n==null||n(),L(this,zu,!1)}}hasSomethingToUndo(){return m(this,_n)!==-1}hasSomethingToRedo(){return m(this,_n)<m(this,Wn).length-1}cleanType(e){if(m(this,_n)!==-1){for(let n=m(this,_n);n>=0;n--)if(m(this,Wn)[n].type!==e){m(this,Wn).splice(n+1,m(this,_n)-n),L(this,_n,n);return}m(this,Wn).length=0,L(this,_n,-1)}}destroy(){L(this,Wn,null)}}Wn=new WeakMap,zu=new WeakMap,pb=new WeakMap,_n=new WeakMap;var _A,I7;class xw{constructor(e){j(this,_A);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=jr.platform;for(const[r,i,a={}]of e)for(const s of r){const o=s.startsWith("mac+");n&&o?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!n&&!o&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(F(this,_A,I7).call(this,n));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:o=null}}=r;o&&!o(e,n)||(i.bind(e,...s,n)(),a||Nn(n))}}_A=new WeakSet,I7=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n};const CA=class CA{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return yCe(e),dt(this,"_colors",e)}convert(e){const n=zv(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,i]of this._colors)if(i.every((a,s)=>a===n[s]))return CA._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?Le.makeHexColor(...n):e}};Se(CA,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let pP=CA;var Wm,Na,Ym,Ln,ur,Km,Ss,Xm,Es,gi,$u,Gu,Jm,qu,jo,As,qf,mb,gb,Qm,vb,Fo,Vu,Zm,Wu,Uo,TA,Yu,eg,yb,Ku,Vf,tg,Xu,bb,tr,Ut,Wl,Ju,Qu,xb,ng,wb,Zu,Bo,Yl,Sb,Eb,_s,Ne,L1,mP,D7,L7,o0,O7,j7,F7,gP,U7,vP,yP,B7,Pi,Hl,H7,z7,bP,$7,l0,xP;const Rm=class Rm{constructor(e,n,r,i,a,s,o,c,u,f,h,g,y,w,S,E){j(this,Ne);j(this,Wm,new AbortController);j(this,Na,null);j(this,Ym,null);j(this,Ln,new Map);j(this,ur,new Map);j(this,Km,null);j(this,Ss,null);j(this,Xm,null);j(this,Es,new SCe);j(this,gi,null);j(this,$u,null);j(this,Gu,null);j(this,Jm,0);j(this,qu,new Set);j(this,jo,null);j(this,As,null);j(this,qf,new Set);Se(this,"_editorUndoBar",null);j(this,mb,!1);j(this,gb,!1);j(this,Qm,!1);j(this,vb,null);j(this,Fo,null);j(this,Vu,null);j(this,Zm,null);j(this,Wu,!1);j(this,Uo,null);j(this,TA,new wCe);j(this,Yu,!1);j(this,eg,!1);j(this,yb,!1);j(this,Ku,null);j(this,Vf,null);j(this,tg,null);j(this,Xu,null);j(this,bb,null);j(this,tr,it.NONE);j(this,Ut,new Set);j(this,Wl,null);j(this,Ju,null);j(this,Qu,null);j(this,xb,null);j(this,ng,null);j(this,wb,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});j(this,Zu,[0,0]);j(this,Bo,null);j(this,Yl,null);j(this,Sb,null);j(this,Eb,null);j(this,_s,null);const C=this._signal=m(this,Wm).signal;L(this,Yl,e),L(this,Sb,n),L(this,Eb,r),L(this,Km,i),L(this,gi,a),L(this,Ju,s),L(this,ng,c),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:C}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:C}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:C}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:C}),o._on("setpreference",this.onSetPreference.bind(this),{signal:C}),o._on("switchannotationeditorparams",M=>this.updateParams(M.type,M.value),{signal:C}),window.addEventListener("pointerdown",()=>{L(this,eg,!0)},{capture:!0,signal:C}),window.addEventListener("pointerup",()=>{L(this,eg,!1)},{capture:!0,signal:C}),F(this,Ne,O7).call(this),F(this,Ne,B7).call(this),F(this,Ne,gP).call(this),L(this,Ss,c.annotationStorage),L(this,vb,c.filterFactory),L(this,Qu,u),L(this,Zm,f||null),L(this,mb,h),L(this,gb,g),L(this,Qm,y),L(this,bb,w||null),this.viewParameters={realScale:qc.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=E!==!1,a==null||a.setSidebarUiManager(this)}static get _keyboardManager(){const e=Rm.prototype,n=s=>m(s,Yl).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:o})=>{if(o instanceof HTMLInputElement){const{type:c}=o;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return dt(this,"_keyboardManager",new xw([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&m(s,Yl).contains(o)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:o})=>!(o instanceof HTMLButtonElement)&&m(s,Yl).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:n}]]))}destroy(){var e,n,r,i,a,s,o,c,u;(e=m(this,_s))==null||e.resolve(),L(this,_s,null),(n=m(this,Wm))==null||n.abort(),L(this,Wm,null),this._signal=null;for(const f of m(this,ur).values())f.destroy();m(this,ur).clear(),m(this,Ln).clear(),m(this,qf).clear(),(r=m(this,Xu))==null||r.clear(),L(this,Na,null),m(this,Ut).clear(),m(this,Es).destroy(),(i=m(this,Km))==null||i.destroy(),(a=m(this,gi))==null||a.destroy(),(s=m(this,Ju))==null||s.destroy(),(o=m(this,Uo))==null||o.hide(),L(this,Uo,null),(c=m(this,tg))==null||c.destroy(),L(this,tg,null),L(this,Ym,null),m(this,Fo)&&(clearTimeout(m(this,Fo)),L(this,Fo,null)),m(this,Bo)&&(clearTimeout(m(this,Bo)),L(this,Bo,null)),(u=this._editorUndoBar)==null||u.destroy(),L(this,ng,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return m(this,bb)}get useNewAltTextFlow(){return m(this,gb)}get useNewAltTextWhenAddingImage(){return m(this,Qm)}get hcmFilter(){return dt(this,"hcmFilter",m(this,Qu)?m(this,vb).addHCMFilter(m(this,Qu).foreground,m(this,Qu).background):"none")}get direction(){return dt(this,"direction",getComputedStyle(m(this,Yl)).direction)}get _highlightColors(){return dt(this,"_highlightColors",m(this,Zm)?new Map(m(this,Zm).split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return dt(this,"highlightColors",null);const n=new Map,r=!!m(this,Qu);for(const[i,a]of e){const s=i.endsWith("_HCM");if(r&&s){n.set(i.replace("_HCM",""),a);continue}!r&&!s&&n.set(i,a)}return dt(this,"highlightColors",n)}get highlightColorNames(){return dt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),L(this,Gu,e)}setMainHighlightColorPicker(e){L(this,tg,e)}editAltText(e,n=!1){var r;(r=m(this,Km))==null||r.editAltText(this,e,n)}hasCommentManager(){return!!m(this,gi)}editComment(e,n,r,i){var a;(a=m(this,gi))==null||a.showDialog(this,e,n,r,i)}selectComment(e,n){const r=m(this,ur).get(e),i=r==null?void 0:r.getEditorByUID(n);i==null||i.toggleComment(!0,!0)}updateComment(e){var n;(n=m(this,gi))==null||n.updateComment(e.getData())}updatePopupColor(e){var n;(n=m(this,gi))==null||n.updatePopupColor(e)}removeComment(e){var n;(n=m(this,gi))==null||n.removeComments([e.uid])}toggleComment(e,n,r=void 0){var i;(i=m(this,gi))==null||i.toggleCommentPopup(e,n,r)}makeCommentColor(e,n){var r;return e&&((r=m(this,gi))==null?void 0:r.makeCommentColor(e,n))||null}getCommentDialogElement(){var e;return((e=m(this,gi))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(m(this,ur).has(e-1))return;const{resolve:n,promise:r}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),n())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){var n;(n=m(this,Ju))==null||n.getSignature({uiManager:this,editor:e})}get signatureManager(){return m(this,Ju)}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":L(this,Qm,n);break}}onPageChanging({pageNumber:e}){L(this,Jm,e-1)}focusMainContainer(){m(this,Yl).focus()}findParent(e,n){for(const r of m(this,ur).values()){const{x:i,y:a,width:s,height:o}=r.div.getBoundingClientRect();if(e>=i&&e<=i+s&&n>=a&&n<=a+o)return r}return null}disableUserSelect(e=!1){m(this,Sb).classList.toggle("noUserSelect",e)}addShouldRescale(e){m(this,qf).add(e)}removeShouldRescale(e){m(this,qf).delete(e)}onScaleChanging({scale:e}){var n;this.commitOrRemove(),this.viewParameters.realScale=e*qc.PDF_TO_CSS_UNITS;for(const r of m(this,qf))r.onScaleChanging();(n=m(this,Gu))==null||n.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",n=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o}=r,c=r.toString(),f=F(this,Ne,L1).call(this,r).closest(".textLayer"),h=this.getSelectionBoxes(f);if(!h)return;r.empty();const g=F(this,Ne,mP).call(this,f),y=m(this,tr)===it.NONE,w=()=>{const S=g==null?void 0:g.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:o,text:c});y&&this.showAllEditors("highlight",!0,!0),n&&(S==null||S.editComment())};if(y){this.switchToMode(it.HIGHLIGHT,w);return}w()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!m(this,Ss))return null;const n=`${tb}${e}`,r=m(this,Ss).getRawValue(n);return r&&m(this,Ss).remove(n),r}addToAnnotationStorage(e){!e.isEmpty()&&m(this,Ss)&&!m(this,Ss).has(e.id)&&m(this,Ss).setValue(e.id,e)}a11yAlert(e,n=null){const r=m(this,Eb);r&&(r.setAttribute("data-l10n-id",e),n?r.setAttribute("data-l10n-args",JSON.stringify(n)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,m(this,Wu)&&(L(this,Wu,!1),F(this,Ne,o0).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of m(this,Ut))if(n.div.contains(e)){L(this,Vf,[n,e]),n._focusEventsAllowed=!1;break}}focus(){if(!m(this,Vf))return;const[e,n]=m(this,Vf);L(this,Vf,null),n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}addEditListeners(){F(this,Ne,gP).call(this),F(this,Ne,vP).call(this)}removeEditListeners(){F(this,Ne,U7).call(this),F(this,Ne,yP).call(this)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of m(this,As))if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of m(this,As))if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=m(this,Na))==null||r.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of m(this,Ut)){const a=i.serialize(!0);a&&n.push(a)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const a of n.items)for(const s of m(this,As))if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){at(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const c of r){const u=await i.deserialize(c);if(!u)return;a.push(u)}const s=()=>{for(const c of a)F(this,Ne,bP).call(this,c);F(this,Ne,xP).call(this,a)},o=()=>{for(const c of a)c.remove()};this.addCommands({cmd:s,undo:o,mustExec:!0})}catch(a){at(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),m(this,tr)!==it.NONE&&!this.isEditorHandlingKeyboard&&Rm._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,m(this,Wu)&&(L(this,Wu,!1),F(this,Ne,o0).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(F(this,Ne,j7).call(this),F(this,Ne,vP).call(this),F(this,Ne,Pi).call(this,{isEditing:m(this,tr)!==it.NONE,isEmpty:F(this,Ne,l0).call(this),hasSomethingToUndo:m(this,Es).hasSomethingToUndo(),hasSomethingToRedo:m(this,Es).hasSomethingToRedo(),hasSelectedEditor:!1})):(F(this,Ne,F7).call(this),F(this,Ne,yP).call(this),F(this,Ne,Pi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!m(this,As)){L(this,As,e);for(const n of m(this,As))F(this,Ne,Hl).call(this,n.defaultPropertiesToUpdate)}}getId(){return m(this,TA).id}get currentLayer(){return m(this,ur).get(m(this,Jm))}getLayer(e){return m(this,ur).get(e)}get currentPageIndex(){return m(this,Jm)}addLayer(e){m(this,ur).set(e.pageIndex,e),m(this,Yu)?e.enable():e.disable()}removeLayer(e){m(this,ur).delete(e.pageIndex)}async updateMode(e,n=null,r=!1,i=!1,a=!1){var s,o,c,u,f,h;if(m(this,tr)!==e&&!(m(this,_s)&&(await m(this,_s).promise,!m(this,_s)))){if(L(this,_s,Promise.withResolvers()),(s=m(this,Gu))==null||s.commitOrRemove(),m(this,tr)===it.POPUP&&((o=m(this,gi))==null||o.hideSidebar()),(c=m(this,gi))==null||c.destroyPopup(),L(this,tr,e),e===it.NONE){this.setEditingState(!1),F(this,Ne,z7).call(this);for(const g of m(this,Ln).values())g.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),m(this,_s).resolve();return}for(const g of m(this,Ln).values())g.addStandaloneCommentButton();e===it.SIGNATURE&&await((f=m(this,Ju))==null?void 0:f.loadSignatures()),this.setEditingState(!0),await F(this,Ne,H7).call(this),this.unselectAll();for(const g of m(this,ur).values())g.updateMode(e);if(e===it.POPUP){m(this,Ym)||L(this,Ym,await m(this,ng).getAnnotationsByType(new Set(m(this,As).map(w=>w._editorType))));const g=new Set,y=[];for(const w of m(this,Ln).values()){const{annotationElementId:S,hasComment:E,deleted:C}=w;S&&g.add(S),E&&!C&&y.push(w.getData())}for(const w of m(this,Ym)){const{id:S,popupRef:E,contentsObj:C}=w;E&&(C!=null&&C.str)&&!g.has(S)&&!m(this,qu).has(S)&&y.push(w)}(h=m(this,gi))==null||h.showSidebar(y)}if(!n){r&&this.addNewEditorFromKeyboard(),m(this,_s).resolve();return}for(const g of m(this,Ln).values())g.uid===n?(this.setSelected(g),a?g.editComment():i?g.enterInEditMode():g.focus()):g.unselect();m(this,_s).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==m(this,tr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(m(this,As)){switch(e){case wt.CREATE:this.currentLayer.addNewEditor(n);return;case wt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(m(this,xb)||L(this,xb,new Map)).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const r of m(this,Ut))r.updateParams(e,n);else for(const r of m(this,As))r.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){var a;for(const s of m(this,Ln).values())s.editorType===e&&s.show(n);(((a=m(this,xb))==null?void 0:a.get(wt.HIGHLIGHT_SHOW_ALL))??!0)!==n&&F(this,Ne,Hl).call(this,[[wt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(m(this,yb)!==e){L(this,yb,e);for(const n of m(this,ur).values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}*getEditors(e){for(const n of m(this,Ln).values())n.pageIndex===e&&(yield n)}getEditor(e){return m(this,Ln).get(e)}addEditor(e){m(this,Ln).set(e.id,e)}removeEditor(e){var n,r;e.div.contains(document.activeElement)&&(m(this,Fo)&&clearTimeout(m(this,Fo)),L(this,Fo,setTimeout(()=>{this.focusMainContainer(),L(this,Fo,null)},0))),m(this,Ln).delete(e.id),e.annotationElementId&&((n=m(this,Xu))==null||n.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!m(this,qu).has(e.annotationElementId))&&((r=m(this,Ss))==null||r.remove(e.id))}addDeletedAnnotationElement(e){m(this,qu).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return m(this,qu).has(e)}removeDeletedAnnotationElement(e){m(this,qu).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){m(this,Na)!==e&&(L(this,Na,e),e&&F(this,Ne,Hl).call(this,e.propertiesToUpdate))}updateUI(e){m(this,Ne,$7)===e&&F(this,Ne,Hl).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){F(this,Ne,Hl).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(m(this,Ut).has(e)){m(this,Ut).delete(e),e.unselect(),F(this,Ne,Pi).call(this,{hasSelectedEditor:this.hasSelection});return}m(this,Ut).add(e),e.select(),F(this,Ne,Hl).call(this,e.propertiesToUpdate),F(this,Ne,Pi).call(this,{hasSelectedEditor:!0})}setSelected(e){var n;this.updateToolbar({mode:e.mode,editId:e.id}),(n=m(this,Gu))==null||n.commitOrRemove();for(const r of m(this,Ut))r!==e&&r.unselect();m(this,Ut).clear(),m(this,Ut).add(e),e.select(),F(this,Ne,Hl).call(this,e.propertiesToUpdate),F(this,Ne,Pi).call(this,{hasSelectedEditor:!0})}isSelected(e){return m(this,Ut).has(e)}get firstSelectedEditor(){return m(this,Ut).values().next().value}unselect(e){e.unselect(),m(this,Ut).delete(e),F(this,Ne,Pi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return m(this,Ut).size!==0}get isEnterHandled(){return m(this,Ut).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;m(this,Es).undo(),F(this,Ne,Pi).call(this,{hasSomethingToUndo:m(this,Es).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:F(this,Ne,l0).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){m(this,Es).redo(),F(this,Ne,Pi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:m(this,Es).hasSomethingToRedo(),isEmpty:F(this,Ne,l0).call(this)})}addCommands(e){m(this,Es).add(e),F(this,Ne,Pi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:F(this,Ne,l0).call(this)})}cleanUndoStack(e){m(this,Es).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...m(this,Ut)],r=()=>{var s;(s=this._editorUndoBar)==null||s.show(i,n.length===1?n[0].editorType:n.length);for(const o of n)o.remove()},i=()=>{for(const s of n)F(this,Ne,bP).call(this,s)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=m(this,Na))==null||e.commitOrRemove()}hasSomethingToControl(){return m(this,Na)||this.hasSelection}selectAll(){for(const e of m(this,Ut))e.commit();F(this,Ne,xP).call(this,m(this,Ln).values())}unselectAll(){var e;if(!(m(this,Na)&&(m(this,Na).commitOrRemove(),m(this,tr)!==it.NONE))&&!((e=m(this,Gu))!=null&&e.commitOrRemove())&&this.hasSelection){for(const n of m(this,Ut))n.unselect();m(this,Ut).clear(),F(this,Ne,Pi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;m(this,Zu)[0]+=e,m(this,Zu)[1]+=n;const[i,a]=m(this,Zu),s=[...m(this,Ut)],o=1e3;m(this,Bo)&&clearTimeout(m(this,Bo)),L(this,Bo,setTimeout(()=>{L(this,Bo,null),m(this,Zu)[0]=m(this,Zu)[1]=0,this.addCommands({cmd:()=>{for(const c of s)m(this,Ln).has(c.id)&&(c.translateInPage(i,a),c.translationDone())},undo:()=>{for(const c of s)m(this,Ln).has(c.id)&&(c.translateInPage(-i,-a),c.translationDone())},mustExec:!1})},o));for(const c of s)c.translateInPage(e,n),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),L(this,jo,new Map);for(const e of m(this,Ut))m(this,jo).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!m(this,jo))return!1;this.disableUserSelect(!1);const e=m(this,jo);L(this,jo,null);let n=!1;for(const[{x:i,y:a,pageIndex:s},o]of e)o.newX=i,o.newY=a,o.newPageIndex=s,n||(n=i!==o.savedX||a!==o.savedY||s!==o.savedPageIndex);if(!n)return!1;const r=(i,a,s,o)=>{if(m(this,Ln).has(i.id)){const c=m(this,ur).get(o);c?i._setParentAndPosition(c,a,s):(i.pageIndex=o,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:o}]of e)r(i,a,s,o)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:o}]of e)r(i,a,s,o)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(m(this,jo))for(const r of m(this,jo).keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||m(this,Ut).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return m(this,Na)===e}getActive(){return m(this,Na)}getMode(){return m(this,tr)}isEditingMode(){return m(this,tr)!==it.NONE}get imageManager(){return dt(this,"imageManager",new hP)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let u=0,f=n.rangeCount;u<f;u++)if(!e.contains(n.getRangeAt(u).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:s}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,f,h,g)=>({x:(f-i)/s,y:1-(u+h-r)/a,width:g/s,height:h/a});break;case"180":o=(u,f,h,g)=>({x:1-(u+h-r)/a,y:1-(f+g-i)/s,width:h/a,height:g/s});break;case"270":o=(u,f,h,g)=>({x:1-(f+g-i)/s,y:(u-r)/a,width:g/s,height:h/a});break;default:o=(u,f,h,g)=>({x:(u-r)/a,y:(f-i)/s,width:h/a,height:g/s});break}const c=[];for(let u=0,f=n.rangeCount;u<f;u++){const h=n.getRangeAt(u);if(!h.collapsed)for(const{x:g,y,width:w,height:S}of h.getClientRects())w===0||S===0||c.push(o(g,y,w,S))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:n}){(m(this,Xm)||L(this,Xm,new Map)).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){var n;(n=m(this,Xm))==null||n.delete(e)}renderAnnotationElement(e){var i;const n=(i=m(this,Xm))==null?void 0:i.get(e.data.id);if(!n)return;const r=m(this,Ss).getRawValue(n);r&&(m(this,tr)===it.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,n,r){var a;const i=(a=m(this,Xu))==null?void 0:a.get(e);i&&(i.setCanvas(n,r),m(this,Xu).delete(e))}addMissingCanvas(e,n){(m(this,Xu)||L(this,Xu,new Map)).set(e,n)}};Wm=new WeakMap,Na=new WeakMap,Ym=new WeakMap,Ln=new WeakMap,ur=new WeakMap,Km=new WeakMap,Ss=new WeakMap,Xm=new WeakMap,Es=new WeakMap,gi=new WeakMap,$u=new WeakMap,Gu=new WeakMap,Jm=new WeakMap,qu=new WeakMap,jo=new WeakMap,As=new WeakMap,qf=new WeakMap,mb=new WeakMap,gb=new WeakMap,Qm=new WeakMap,vb=new WeakMap,Fo=new WeakMap,Vu=new WeakMap,Zm=new WeakMap,Wu=new WeakMap,Uo=new WeakMap,TA=new WeakMap,Yu=new WeakMap,eg=new WeakMap,yb=new WeakMap,Ku=new WeakMap,Vf=new WeakMap,tg=new WeakMap,Xu=new WeakMap,bb=new WeakMap,tr=new WeakMap,Ut=new WeakMap,Wl=new WeakMap,Ju=new WeakMap,Qu=new WeakMap,xb=new WeakMap,ng=new WeakMap,wb=new WeakMap,Zu=new WeakMap,Bo=new WeakMap,Yl=new WeakMap,Sb=new WeakMap,Eb=new WeakMap,_s=new WeakMap,Ne=new WeakSet,L1=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},mP=function(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of m(this,ur).values())if(r.hasTextLayer(e))return r;return null},D7=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=F(this,Ne,L1).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(m(this,Uo)||L(this,Uo,new xCe(this)),m(this,Uo).show(r,i,this.direction==="ltr"))},L7=function(){var a,s,o;const e=document.getSelection();if(!e||e.isCollapsed){m(this,Wl)&&((a=m(this,Uo))==null||a.hide(),L(this,Wl,null),F(this,Ne,Pi).call(this,{hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===m(this,Wl))return;const i=F(this,Ne,L1).call(this,e).closest(".textLayer");if(!i){m(this,Wl)&&((s=m(this,Uo))==null||s.hide(),L(this,Wl,null),F(this,Ne,Pi).call(this,{hasSelectedText:!1}));return}if((o=m(this,Uo))==null||o.hide(),L(this,Wl,n),F(this,Ne,Pi).call(this,{hasSelectedText:!0}),!(m(this,tr)!==it.HIGHLIGHT&&m(this,tr)!==it.NONE)&&(m(this,tr)===it.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),L(this,Wu,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=m(this,tr)===it.HIGHLIGHT?F(this,Ne,mP).call(this,i):null;if(c==null||c.toggleDrawing(),m(this,eg)){const u=new AbortController,f=this.combinedSignal(u),h=g=>{g.type==="pointerup"&&g.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),g.type==="pointerup"&&F(this,Ne,o0).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:f}),window.addEventListener("blur",h,{signal:f})}else c==null||c.toggleDrawing(!0),F(this,Ne,o0).call(this,"main_toolbar")}},o0=function(e=""){m(this,tr)===it.HIGHLIGHT?this.highlightSelection(e):m(this,mb)&&F(this,Ne,D7).call(this)},O7=function(){document.addEventListener("selectionchange",F(this,Ne,L7).bind(this),{signal:this._signal})},j7=function(){if(m(this,Vu))return;L(this,Vu,new AbortController);const e=this.combinedSignal(m(this,Vu));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},F7=function(){var e;(e=m(this,Vu))==null||e.abort(),L(this,Vu,null)},gP=function(){if(m(this,Ku))return;L(this,Ku,new AbortController);const e=this.combinedSignal(m(this,Ku));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},U7=function(){var e;(e=m(this,Ku))==null||e.abort(),L(this,Ku,null)},vP=function(){if(m(this,$u))return;L(this,$u,new AbortController);const e=this.combinedSignal(m(this,$u));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},yP=function(){var e;(e=m(this,$u))==null||e.abort(),L(this,$u,null)},B7=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Pi=function(e){Object.entries(e).some(([r,i])=>m(this,wb)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(m(this,wb),e)}),m(this,tr)===it.HIGHLIGHT&&e.hasSelectedEditor===!1&&F(this,Ne,Hl).call(this,[[wt.HIGHLIGHT_FREE,!0]]))},Hl=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},H7=async function(){if(!m(this,Yu)){L(this,Yu,!0);const e=[];for(const n of m(this,ur).values())e.push(n.enable());await Promise.all(e);for(const n of m(this,Ln).values())n.enable()}},z7=function(){if(this.unselectAll(),m(this,Yu)){L(this,Yu,!1);for(const e of m(this,ur).values())e.disable();for(const e of m(this,Ln).values())e.disable()}},bP=function(e){const n=m(this,ur).get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},$7=function(){let e=null;for(e of m(this,Ut));return e},l0=function(){if(m(this,Ln).size===0)return!0;if(m(this,Ln).size===1)for(const e of m(this,Ln).values())return e.isEmpty();return!1},xP=function(e){for(const n of m(this,Ut))n.unselect();m(this,Ut).clear();for(const n of e)n.isEmpty()||(m(this,Ut).add(n),n.select());F(this,Ne,Pi).call(this,{hasSelectedEditor:this.hasSelection})},Se(Rm,"TRANSLATE_SMALL",1),Se(Rm,"TRANSLATE_BIG",10);let Vd=Rm;var Tr,Ho,eo,rg,zo,Ra,ig,$o,ia,Kl,Wf,Go,ed,go,c0,O1;const ki=class ki{constructor(e){j(this,go);j(this,Tr,null);j(this,Ho,!1);j(this,eo,null);j(this,rg,null);j(this,zo,null);j(this,Ra,null);j(this,ig,!1);j(this,$o,null);j(this,ia,null);j(this,Kl,null);j(this,Wf,null);j(this,Go,!1);L(this,ia,e),L(this,Go,e._uiManager.useNewAltTextFlow),m(ki,ed)||L(ki,ed,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ki._l10n??(ki._l10n=e)}async render(){const e=L(this,eo,document.createElement("button"));e.className="altText",e.tabIndex="0";const n=L(this,rg,document.createElement("span"));e.append(n),m(this,Go)?(e.classList.add("new"),e.setAttribute("data-l10n-id",m(ki,ed).missing),n.setAttribute("data-l10n-id",m(ki,ed)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=m(this,ia)._uiManager._signal;e.addEventListener("contextmenu",es,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),m(this,ia)._uiManager.editAltText(m(this,ia)),m(this,Go)&&m(this,ia)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:m(this,go,c0)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(L(this,ig,!0),i(a))},{signal:r}),await F(this,go,O1).call(this),e}finish(){m(this,eo)&&(m(this,eo).focus({focusVisible:m(this,ig)}),L(this,ig,!1))}isEmpty(){return m(this,Go)?m(this,Tr)===null:!m(this,Tr)&&!m(this,Ho)}hasData(){return m(this,Go)?m(this,Tr)!==null||!!m(this,Kl):this.isEmpty()}get guessedText(){return m(this,Kl)}async setGuessedText(e){m(this,Tr)===null&&(L(this,Kl,e),L(this,Wf,await ki._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),F(this,go,O1).call(this))}toggleAltTextBadge(e=!1){var n;if(!m(this,Go)||m(this,Tr)){(n=m(this,$o))==null||n.remove(),L(this,$o,null);return}if(!m(this,$o)){const r=L(this,$o,document.createElement("div"));r.className="noAltTextBadge",m(this,ia).div.append(r)}m(this,$o).classList.toggle("hidden",!e)}serialize(e){let n=m(this,Tr);return!e&&m(this,Kl)===n&&(n=m(this,Wf)),{altText:n,decorative:m(this,Ho),guessedText:m(this,Kl),textWithDisclaimer:m(this,Wf)}}get data(){return{altText:m(this,Tr),decorative:m(this,Ho)}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(L(this,Kl,r),L(this,Wf,i)),!(m(this,Tr)===e&&m(this,Ho)===n)&&(a||(L(this,Tr,e),L(this,Ho,n)),F(this,go,O1).call(this))}toggle(e=!1){m(this,eo)&&(!e&&m(this,Ra)&&(clearTimeout(m(this,Ra)),L(this,Ra,null)),m(this,eo).disabled=!e)}shown(){m(this,ia)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:m(this,go,c0)}})}destroy(){var e,n;(e=m(this,eo))==null||e.remove(),L(this,eo,null),L(this,rg,null),L(this,zo,null),(n=m(this,$o))==null||n.remove(),L(this,$o,null)}};Tr=new WeakMap,Ho=new WeakMap,eo=new WeakMap,rg=new WeakMap,zo=new WeakMap,Ra=new WeakMap,ig=new WeakMap,$o=new WeakMap,ia=new WeakMap,Kl=new WeakMap,Wf=new WeakMap,Go=new WeakMap,ed=new WeakMap,go=new WeakSet,c0=function(){return m(this,Tr)&&"added"||m(this,Tr)===null&&this.guessedText&&"review"||"missing"},O1=async function(){var i,a,s;const e=m(this,eo);if(!e)return;if(m(this,Go)){if(e.classList.toggle("done",!!m(this,Tr)),e.setAttribute("data-l10n-id",m(ki,ed)[m(this,go,c0)]),(i=m(this,rg))==null||i.setAttribute("data-l10n-id",m(ki,ed)[`${m(this,go,c0)}-label`]),!m(this,Tr)){(a=m(this,zo))==null||a.remove();return}}else{if(!m(this,Tr)&&!m(this,Ho)){e.classList.remove("done"),(s=m(this,zo))==null||s.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=m(this,zo);if(!n){L(this,zo,n=document.createElement("span")),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${m(this,ia).id}`;const o=100,c=m(this,ia)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(m(this,Ra)),L(this,Ra,null)},{once:!0}),e.addEventListener("mouseenter",()=>{L(this,Ra,setTimeout(()=>{L(this,Ra,null),m(this,zo).classList.add("show"),m(this,ia)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;m(this,Ra)&&(clearTimeout(m(this,Ra)),L(this,Ra,null)),(u=m(this,zo))==null||u.classList.remove("show")},{signal:c})}m(this,Ho)?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=m(this,Tr)),n.parentNode||e.append(n);const r=m(this,ia).getElementForAltText();r==null||r.setAttribute("aria-describedby",n.id)},j(ki,ed,null),Se(ki,"_l10n",null);let hA=ki;var Yr,Cs,Yf,on,Ab,Kf,to,Xf,Jf,Qf,_b,wP;class f1{constructor(e){j(this,_b);j(this,Yr,null);j(this,Cs,null);j(this,Yf,!1);j(this,on,null);j(this,Ab,null);j(this,Kf,null);j(this,to,null);j(this,Xf,null);j(this,Jf,!1);j(this,Qf,null);L(this,on,e)}renderForToolbar(){const e=L(this,Cs,document.createElement("button"));return e.className="comment",F(this,_b,wP).call(this,e,!1)}renderForStandalone(){const e=L(this,Yr,document.createElement("button"));e.className="annotationCommentButton";const n=m(this,on).commentButtonPosition;if(n){const{style:r}=e;r.insetInlineEnd=`calc(${100*(m(this,on)._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const i=m(this,on).commentButtonColor;i&&(r.backgroundColor=i)}return F(this,_b,wP).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=m(this,Yr)??m(this,Cs))==null||e.focus()},0)}onUpdatedColor(){if(!m(this,Yr))return;const e=m(this,on).commentButtonColor;e&&(m(this,Yr).style.backgroundColor=e),m(this,on)._uiManager.updatePopupColor(m(this,on))}get commentButtonWidth(){var e;return(((e=m(this,Yr))==null?void 0:e.getBoundingClientRect().width)??0)/m(this,on).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(m(this,Qf))return m(this,Qf);if(!m(this,Yr))return null;const{x:e,y:n,height:r}=m(this,Yr).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=m(this,on).parent.boundingClientRect;return[(e-i)/s,(n+r-a)/o]}set commentPopupPositionInLayer(e){L(this,Qf,e)}hasDefaultPopupPosition(){return m(this,Qf)===null}removeStandaloneCommentButton(){var e;(e=m(this,Yr))==null||e.remove(),L(this,Yr,null)}removeToolbarCommentButton(){var e;(e=m(this,Cs))==null||e.remove(),L(this,Cs,null)}setCommentButtonStates({selected:e,hasPopup:n}){m(this,Yr)&&(m(this,Yr).classList.toggle("selected",e),m(this,Yr).ariaExpanded=n)}edit(e){const n=this.commentPopupPositionInLayer;let r,i;if(n)[r,i]=n;else{[r,i]=m(this,on).commentButtonPosition;const{width:f,height:h,x:g,y}=m(this,on);r=g+r*f,i=y+i*h}const a=m(this,on).parent.boundingClientRect,{x:s,y:o,width:c,height:u}=a;m(this,on)._uiManager.editComment(m(this,on),s+r*c,o+i*u,{...e,parentDimensions:a})}finish(){m(this,Cs)&&(m(this,Cs).focus({focusVisible:m(this,Yf)}),L(this,Yf,!1))}isDeleted(){return m(this,Jf)||m(this,to)===""}isEmpty(){return m(this,to)===null}hasBeenEdited(){return this.isDeleted()||m(this,to)!==m(this,Ab)}serialize(){return this.data}get data(){return{text:m(this,to),richText:m(this,Kf),date:m(this,Xf),deleted:this.isDeleted()}}set data(e){if(e!==m(this,to)&&L(this,Kf,null),e===null){L(this,to,""),L(this,Jf,!0);return}L(this,to,e),L(this,Xf,new Date),L(this,Jf,!1)}setInitialText(e,n=null){L(this,Ab,e),this.data=e,L(this,Xf,null),L(this,Kf,n)}shown(){}destroy(){var e,n;(e=m(this,Cs))==null||e.remove(),L(this,Cs,null),(n=m(this,Yr))==null||n.remove(),L(this,Yr,null),L(this,to,""),L(this,Kf,null),L(this,Xf,null),L(this,on,null),L(this,Yf,!1),L(this,Jf,!1)}}Yr=new WeakMap,Cs=new WeakMap,Yf=new WeakMap,on=new WeakMap,Ab=new WeakMap,Kf=new WeakMap,to=new WeakMap,Xf=new WeakMap,Jf=new WeakMap,Qf=new WeakMap,_b=new WeakSet,wP=function(e,n){if(!m(this,on)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[m(this,on)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const r=m(this,on)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",es,{signal:r}),n&&(e.addEventListener("focusin",a=>{m(this,on)._focusEventsAllowed=!1,Nn(a)},{capture:!0,signal:r}),e.addEventListener("focusout",a=>{m(this,on)._focusEventsAllowed=!0,Nn(a)},{capture:!0,signal:r})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),e===m(this,Cs)?this.edit():m(this,on).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(L(this,Yf,!0),i(a))},{signal:r}),e.addEventListener("pointerenter",()=>{m(this,on).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{m(this,on).toggleComment(!1,!1)},{signal:r}),e};var ag,Zf,Cb,Tb,Nb,Rb,Mb,Xl,eh,Jl,th,Ql,Wd,G7,q7,V7;const xL=class xL{constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:o}){j(this,Wd);j(this,ag);j(this,Zf,!1);j(this,Cb,null);j(this,Tb);j(this,Nb);j(this,Rb);j(this,Mb);j(this,Xl,null);j(this,eh);j(this,Jl,null);j(this,th);j(this,Ql,null);L(this,ag,e),L(this,Cb,r),L(this,Tb,n),L(this,Nb,i),L(this,Rb,a),L(this,Mb,s),L(this,th,new AbortController),L(this,eh,AbortSignal.any([o,m(this,th).signal])),e.addEventListener("touchstart",F(this,Wd,G7).bind(this),{passive:!1,signal:m(this,eh)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ao.pixelRatio}destroy(){var e,n;(e=m(this,th))==null||e.abort(),L(this,th,null),(n=m(this,Xl))==null||n.abort(),L(this,Xl,null)}};ag=new WeakMap,Zf=new WeakMap,Cb=new WeakMap,Tb=new WeakMap,Nb=new WeakMap,Rb=new WeakMap,Mb=new WeakMap,Xl=new WeakMap,eh=new WeakMap,Jl=new WeakMap,th=new WeakMap,Ql=new WeakMap,Wd=new WeakSet,G7=function(e){var i,a,s;if((i=m(this,Tb))!=null&&i.call(this))return;if(e.touches.length===1){if(m(this,Xl))return;const o=L(this,Xl,new AbortController),c=AbortSignal.any([m(this,eh),o.signal]),u=m(this,ag),f={capture:!0,signal:c,passive:!1},h=g=>{var y;g.pointerType==="touch"&&((y=m(this,Xl))==null||y.abort(),L(this,Xl,null))};u.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(Nn(g),h(g))},f),u.addEventListener("pointerup",h,f),u.addEventListener("pointercancel",h,f);return}if(!m(this,Ql)){L(this,Ql,new AbortController);const o=AbortSignal.any([m(this,eh),m(this,Ql).signal]),c=m(this,ag),u={signal:o,capture:!1,passive:!1};c.addEventListener("touchmove",F(this,Wd,q7).bind(this),u);const f=F(this,Wd,V7).bind(this);c.addEventListener("touchend",f,u),c.addEventListener("touchcancel",f,u),u.capture=!0,c.addEventListener("pointerdown",Nn,u),c.addEventListener("pointermove",Nn,u),c.addEventListener("pointercancel",Nn,u),c.addEventListener("pointerup",Nn,u),(a=m(this,Nb))==null||a.call(this)}if(Nn(e),e.touches.length!==2||(s=m(this,Cb))!=null&&s.call(this)){L(this,Jl,null);return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),L(this,Jl,{touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY})},q7=function(e){var D;if(!m(this,Jl)||e.touches.length!==2)return;Nn(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:a}=n,{screenX:s,screenY:o}=r,c=m(this,Jl),{touch0X:u,touch0Y:f,touch1X:h,touch1Y:g}=c,y=h-u,w=g-f,S=s-i,E=o-a,C=Math.hypot(S,E)||1,M=Math.hypot(y,w)||1;if(!m(this,Zf)&&Math.abs(M-C)<=xL.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=a,c.touch1X=s,c.touch1Y=o,!m(this,Zf)){L(this,Zf,!0);return}const R=[(i+s)/2,(a+o)/2];(D=m(this,Rb))==null||D.call(this,R,M,C)},V7=function(e){var n;e.touches.length>=2||(m(this,Ql)&&(m(this,Ql).abort(),L(this,Ql,null),(n=m(this,Mb))==null||n.call(this)),m(this,Jl)&&(Nn(e),L(this,Jl,null),L(this,Zf,!1)))};let ab=xL;var nh,no,vn,en,Zl,sg,td,Pb,Kr,rh,ec,qo,nd,kb,ih,Ma,Ib,ah,tc,Vo,og,lg,Ts,sh,Db,NA,Ze,SP,Lb,EP,j1,W7,Y7,AP,F1,_P,K7,X7,J7,CP,Q7,TP,Z7,eK,tK,NP,u0;const ot=class ot{constructor(e){j(this,Ze);j(this,nh,null);j(this,no,null);j(this,vn,null);j(this,en,null);j(this,Zl,null);j(this,sg,!1);j(this,td,null);j(this,Pb,"");j(this,Kr,null);j(this,rh,null);j(this,ec,null);j(this,qo,null);j(this,nd,null);j(this,kb,"");j(this,ih,!1);j(this,Ma,null);j(this,Ib,!1);j(this,ah,!1);j(this,tc,!1);j(this,Vo,null);j(this,og,0);j(this,lg,0);j(this,Ts,null);j(this,sh,null);Se(this,"isSelected",!1);Se(this,"_isCopy",!1);Se(this,"_editToolbar",null);Se(this,"_initialOptions",Object.create(null));Se(this,"_initialData",null);Se(this,"_isVisible",!0);Se(this,"_uiManager",null);Se(this,"_focusEventsAllowed",!0);j(this,Db,!1);j(this,NA,ot._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:n,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,s];const[o,c]=this.parentDimensions;this.x=e.x/o,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ot.prototype._resizeWithKeyboard,n=Vd.TRANSLATE_SMALL,r=Vd.TRANSLATE_BIG;return dt(this,"_resizerKeyboardManager",new xw([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],ot.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return dt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new ECe({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(ot._l10n??(ot._l10n=e),ot._l10nResizer||(ot._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ot._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);ot._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){sn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return m(this,Db)}set _isDraggable(e){var n;L(this,Db,e),(n=this.div)==null||n.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=m(this,NA)}setParent(e){var n;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(F(this,Ze,u0).call(this),(n=m(this,qo))==null||n.remove(),L(this,qo,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(m(this,ih)?L(this,ih,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const n=e.relatedTarget;n!=null&&n.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,i){const[a,s]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(n+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[r,i]=this.parentDimensions;this.setAt(e*r,n*i,this.width*r,this.height*i),this._onTranslated()}translate(e,n){F(this,Ze,SP).call(this,this.parentDimensions,e,n)}translateInPage(e,n){m(this,Ma)||L(this,Ma,[this.x,this.y,this.width,this.height]),F(this,Ze,SP).call(this,this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){m(this,Ma)||L(this,Ma,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=n/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:o}=this;const[c,u]=this.getBaseTranslation();s+=c,o+=u;const{style:f}=r;f.left=`${(100*s).toFixed(2)}%`,f.top=`${(100*o).toFixed(2)}%`,this._onTranslating(s,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!m(this,Ma)&&(m(this,Ma)[0]!==this.x||m(this,Ma)[1]!==this.y)}get _hasBeenResized(){return!!m(this,Ma)&&(m(this,Ma)[2]!==this.width||m(this,Ma)[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=ot,i=r/e,a=r/n;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,i]}=this;let{x:a,y:s,width:o,height:c}=this;if(o*=r,c*=i,a*=r,s*=i,this._mustFixPosition)switch(e){case 0:a=Si(a,0,r-o),s=Si(s,0,i-c);break;case 90:a=Si(a,0,r-c),s=Si(s,o,i);break;case 180:a=Si(a,o,r),s=Si(s,c,i);break;case 270:a=Si(a,c,r),s=Si(s,0,i-o);break}this.x=a/=r,this.y=s/=i;const[u,f]=this.getBaseTranslation();a+=u,s+=f,n.left=`${(100*a).toFixed(2)}%`,n.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,n){var r;return F(r=ot,Lb,EP).call(r,e,n,this.parentRotation)}pageTranslationToScreen(e,n){var r;return F(r=ot,Lb,EP).call(r,e,n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(){const{div:{style:e},width:n,height:r}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=m(this,vn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||m(this,ah))return this._editToolbar;this._editToolbar=new dP(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,r]of e)await this._editToolbar.addButton(n,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,n;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(n=m(this,vn))==null||n.destroy()}addContainer(e){var r;const n=(r=this._editToolbar)==null?void 0:r.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return m(this,vn)||(hA.initialize(ot._l10n),L(this,vn,new hA(this)),m(this,nh)&&(m(this,vn).data=m(this,nh),L(this,nh,null))),m(this,vn)}get altTextData(){var e;return(e=m(this,vn))==null?void 0:e.data}set altTextData(e){m(this,vn)&&(m(this,vn).data=e)}get guessedAltText(){var e;return(e=m(this,vn))==null?void 0:e.guessedText}async setGuessedAltText(e){var n;await((n=m(this,vn))==null?void 0:n.setGuessedText(e))}serializeAltText(e){var n;return(n=m(this,vn))==null?void 0:n.serialize(e)}hasAltText(){return!!m(this,vn)&&!m(this,vn).isEmpty()}hasAltTextData(){var e;return((e=m(this,vn))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=m(this,en))==null||e.focusButton()}addCommentButton(){return m(this,en)||L(this,en,new f1(this))}addStandaloneCommentButton(){if(m(this,Zl)){this._uiManager.isEditingMode()&&m(this,Zl).classList.remove("hidden");return}this.hasComment&&(L(this,Zl,m(this,en).renderForStandalone()),this.div.append(m(this,Zl)))}removeStandaloneCommentButton(){m(this,en).removeStandaloneCommentButton(),L(this,Zl,null)}hideStandaloneCommentButton(){var e;(e=m(this,Zl))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:n,date:r,deleted:i}}=m(this,en);return{text:n,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){m(this,en)||L(this,en,new f1(this)),m(this,en).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:r}){if(!n||(m(this,en)||L(this,en,new f1(this)),m(this,en).setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=m(this,en))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=m(this,en))==null?void 0:e.isDeleted()}get hasComment(){return!!m(this,en)&&!m(this,en).isEmpty()&&!m(this,en).isDeleted()}async editComment(e){m(this,en)||L(this,en,new f1(this)),m(this,en).edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){m(this,en).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,o=s+a+1,c=i-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,c,u,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){m(this,en).data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var s;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=m(this,sg)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),F(this,Ze,TP).call(this);const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),k7(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(m(this,sh)||L(this,sh,new ab({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:F(this,Ze,K7).bind(this),onPinching:F(this,Ze,X7).bind(this),onPinchEnd:F(this,Ze,J7).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(s=this._uiManager._editorUndoBar)==null||s.hide(),e}pointerdown(e){const{isMac:n}=jr.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(L(this,ih,!0),this._isDraggable){F(this,Ze,Q7).call(this,e);return}F(this,Ze,CP).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){m(this,Vo)&&clearTimeout(m(this,Vo)),L(this,Vo,setTimeout(()=>{var e;L(this,Vo,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[o,c]=this.pageTranslation,u=e/i,f=n/i,h=this.x*a,g=this.y*s,y=this.width*a,w=this.height*s;switch(r){case 0:return[h+u+o,s-g-f-w+c,h+u+y+o,s-g-f+c];case 90:return[h+f+o,s-g+u+c,h+f+w+o,s-g+u+y+c];case 180:return[h-u-y+o,s-g+f+c,h-u+o,s-g+f+w+c];case 270:return[h-f-w+o,s-g-u-y+c,h-f+o,s-g-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,i,a,s]=e,o=a-r,c=s-i;switch(this.rotation){case 0:return[r,n-s,o,c];case 90:return[r,n-i,c,o];case 180:return[a,n-i,o,c];case 270:return[a,n-s,c,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ot._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=m(this,en))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:r,opacity:i,deleted:a,richText:s},uid:o,pageIndex:c,creationDate:u,modificationDate:f}=this;return{id:o,pageIndex:c,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:u,modificationDate:r||f,popupRef:!a,color:n,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),L(this,ah,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),L(this,ah,!1),!0):!1}isInEditMode(){return m(this,ah)}shouldGetKeyboardEvents(){return m(this,tc)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return n<s&&i>0&&e<a&&r>0}rebuild(){F(this,Ze,TP).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,n=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,n,r){const i=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,L(i,nh,e.accessibilityData),i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[o,c,u,f]=i.getRectInCurrentCoords(e.rect,s);return i.x=o/a,i.y=c/s,i.width=u/a,i.height=f/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,n;if((e=m(this,nd))==null||e.abort(),L(this,nd,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),m(this,Vo)&&(clearTimeout(m(this,Vo)),L(this,Vo,null)),F(this,Ze,u0).call(this),this.removeEditToolbar(),m(this,Ts)){for(const r of m(this,Ts).values())clearTimeout(r);L(this,Ts,null)}this.parent=null,(n=m(this,sh))==null||n.destroy(),L(this,sh,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(F(this,Ze,W7).call(this),m(this,Kr).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[r,i,a,s]=this.getPDFRect();return[ot._round(r+(a-r)*e),ot._round(i+(s-i)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return m(this,en).commentPopupPositionInLayer}set commentPopupPosition(e){m(this,en).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return m(this,en).hasDefaultPopupPosition()}get commentButtonWidth(){return m(this,en).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){m(this,en).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),L(this,ec,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const n=m(this,Kr).children;if(!m(this,no)){L(this,no,Array.from(n));const s=F(this,Ze,Z7).bind(this),o=F(this,Ze,eK).bind(this),c=this._uiManager._signal;for(const u of m(this,no)){const f=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",s,{signal:c}),u.addEventListener("blur",o,{signal:c}),u.addEventListener("focus",F(this,Ze,tK).bind(this,f),{signal:c}),u.setAttribute("data-l10n-id",ot._l10nResizer[f])}}const r=m(this,no)[0];let i=0;for(const s of n){if(s===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(m(this,no).length/4);if(a!==i){if(a<i)for(let o=0;o<i-a;o++)m(this,Kr).append(m(this,Kr).firstChild);else if(a>i)for(let o=0;o<a-i;o++)m(this,Kr).firstChild.before(m(this,Kr).lastChild);let s=0;for(const o of n){const u=m(this,no)[s++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",ot._l10nResizer[u])}}F(this,Ze,NP).call(this,0),L(this,tc,!0),m(this,Kr).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,n){m(this,tc)&&F(this,Ze,_P).call(this,m(this,kb),{deltaX:e,deltaY:n,fromKeyboard:!0})}_stopResizingWithKeyboard(){F(this,Ze,u0).call(this),this.div.focus()}select(){var e,n,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,a;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(n=this._editToolbar)==null||n.show(),(r=m(this,vn))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,n,r,i,a;this.isSelected&&(this.isSelected=!1,(e=m(this,Kr))==null||e.classList.add("hidden"),(n=this.div)==null||n.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(a=m(this,vn))==null||a.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return m(this,Ib)}set isEditing(e){L(this,Ib,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){m(this,Ts)||L(this,Ts,new Map);const{action:r}=e;let i=m(this,Ts).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),m(this,Ts).delete(r),m(this,Ts).size===0&&L(this,Ts,null)},ot._telemetryTimeout),m(this,Ts).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),L(this,sg,!1)}disable(){this.div&&(this.div.tabIndex=-1),L(this,sg,!0)}updateFakeAnnotationElement(e){if(!m(this,qo)&&!this.deleted){L(this,qo,e.addFakeAnnotation(this));return}if(this.deleted){m(this,qo).remove(),L(this,qo,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&m(this,qo).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstChild:n}=e.container;(n==null?void 0:n.nodeName)==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}};nh=new WeakMap,no=new WeakMap,vn=new WeakMap,en=new WeakMap,Zl=new WeakMap,sg=new WeakMap,td=new WeakMap,Pb=new WeakMap,Kr=new WeakMap,rh=new WeakMap,ec=new WeakMap,qo=new WeakMap,nd=new WeakMap,kb=new WeakMap,ih=new WeakMap,Ma=new WeakMap,Ib=new WeakMap,ah=new WeakMap,tc=new WeakMap,Vo=new WeakMap,og=new WeakMap,lg=new WeakMap,Ts=new WeakMap,sh=new WeakMap,Db=new WeakMap,NA=new WeakMap,Ze=new WeakSet,SP=function([e,n],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Lb=new WeakSet,EP=function(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}},j1=function(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}},W7=function(){if(m(this,Kr))return;L(this,Kr,document.createElement("div")),m(this,Kr).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const i=document.createElement("div");m(this,Kr).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",F(this,Ze,Y7).bind(this,r),{signal:n}),i.addEventListener("contextmenu",es,{signal:n}),i.tabIndex=-1}this.div.prepend(m(this,Kr))},Y7=function(e,n){var f;n.preventDefault();const{isMac:r}=jr.platform;if(n.button!==0||n.ctrlKey&&r)return;(f=m(this,vn))==null||f.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,L(this,rh,[n.screenX,n.screenY]);const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",F(this,Ze,_P).bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",Nn,{passive:!1,signal:s}),window.addEventListener("contextmenu",es,{signal:s}),L(this,ec,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const u=()=>{var h;a.abort(),this.parent.togglePointerEvents(!0),(h=m(this,vn))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=c,F(this,Ze,F1).call(this)};window.addEventListener("pointerup",u,{signal:s}),window.addEventListener("blur",u,{signal:s})},AP=function(e,n,r,i){this.width=r,this.height=i,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()},F1=function(){if(!m(this,ec))return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:i}=m(this,ec);L(this,ec,null);const a=this.x,s=this.y,o=this.width,c=this.height;a===e&&s===n&&o===r&&c===i||this.addCommands({cmd:F(this,Ze,AP).bind(this,a,s,o,c),undo:F(this,Ze,AP).bind(this,e,n,r,i),mustExec:!0})},_P=function(e,n){const[r,i]=this.parentDimensions,a=this.x,s=this.y,o=this.width,c=this.height,u=ot.MIN_SIZE/r,f=ot.MIN_SIZE/i,h=F(this,Ze,j1).call(this,this.rotation),g=($,q)=>[h[0]*$+h[2]*q,h[1]*$+h[3]*q],y=F(this,Ze,j1).call(this,360-this.rotation),w=($,q)=>[y[0]*$+y[2]*q,y[1]*$+y[3]*q];let S,E,C=!1,M=!1;switch(e){case"topLeft":C=!0,S=($,q)=>[0,0],E=($,q)=>[$,q];break;case"topMiddle":S=($,q)=>[$/2,0],E=($,q)=>[$/2,q];break;case"topRight":C=!0,S=($,q)=>[$,0],E=($,q)=>[0,q];break;case"middleRight":M=!0,S=($,q)=>[$,q/2],E=($,q)=>[0,q/2];break;case"bottomRight":C=!0,S=($,q)=>[$,q],E=($,q)=>[0,0];break;case"bottomMiddle":S=($,q)=>[$/2,q],E=($,q)=>[$/2,0];break;case"bottomLeft":C=!0,S=($,q)=>[0,q],E=($,q)=>[$,0];break;case"middleLeft":M=!0,S=($,q)=>[0,q/2],E=($,q)=>[$,q/2];break}const R=S(o,c),D=E(o,c);let I=g(...D);const P=ot._round(a+I[0]),k=ot._round(s+I[1]);let U=1,B=1,V,H;if(n.fromKeyboard)({deltaX:V,deltaY:H}=n);else{const{screenX:$,screenY:q}=n,[J,ae]=m(this,rh);[V,H]=this.screenToPageTranslation($-J,q-ae),m(this,rh)[0]=$,m(this,rh)[1]=q}if([V,H]=w(V/r,H/i),C){const $=Math.hypot(o,c);U=B=Math.max(Math.min(Math.hypot(D[0]-R[0]-V,D[1]-R[1]-H)/$,1/o,1/c),u/o,f/c)}else M?U=Si(Math.abs(D[0]-R[0]-V),u,1)/o:B=Si(Math.abs(D[1]-R[1]-H),f,1)/c;const G=ot._round(o*U),Q=ot._round(c*B);I=g(...E(G,Q));const W=P-I[0],ee=k-I[1];m(this,Ma)||L(this,Ma,[this.x,this.y,this.width,this.height]),this.width=G,this.height=Q,this.x=W,this.y=ee,this.setDims(),this.fixAndSetPosition(),this._onResizing()},K7=function(){var e;L(this,ec,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=m(this,vn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},X7=function(e,n,r){let a=.7*(r/n)+1-.7;if(a===1)return;const s=F(this,Ze,j1).call(this,this.rotation),o=(P,k)=>[s[0]*P+s[2]*k,s[1]*P+s[3]*k],[c,u]=this.parentDimensions,f=this.x,h=this.y,g=this.width,y=this.height,w=ot.MIN_SIZE/c,S=ot.MIN_SIZE/u;a=Math.max(Math.min(a,1/g,1/y),w/g,S/y);const E=ot._round(g*a),C=ot._round(y*a);if(E===g&&C===y)return;m(this,Ma)||L(this,Ma,[f,h,g,y]);const M=o(g/2,y/2),R=ot._round(f+M[0]),D=ot._round(h+M[1]),I=o(E/2,C/2);this.x=R-I[0],this.y=D-I[1],this.width=E,this.height=C,this.setDims(),this.fixAndSetPosition(),this._onResizing()},J7=function(){var e;(e=m(this,vn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),F(this,Ze,F1).call(this)},CP=function(e){const{isMac:n}=jr.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)},Q7=function(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},o=u=>{i.abort(),L(this,td,null),L(this,ih,!1),this._uiManager.endDragSession()||F(this,Ze,CP).call(this,u),r&&this._onStopDragging()};n&&(L(this,og,e.clientX),L(this,lg,e.clientY),L(this,td,e.pointerId),L(this,Pb,e.pointerType),window.addEventListener("pointermove",u=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:h,pointerId:g}=u;if(g!==m(this,td)){Nn(u);return}const[y,w]=this.screenToPageTranslation(f-m(this,og),h-m(this,lg));L(this,og,f),L(this,lg,h),this._uiManager.dragSelectedEditors(y,w)},s),window.addEventListener("touchmove",Nn,s),window.addEventListener("pointerdown",u=>{u.pointerType===m(this,Pb)&&(m(this,sh)||u.isPrimary)&&o(u),Nn(u)},s));const c=u=>{if(!m(this,td)||m(this,td)===u.pointerId){o(u);return}Nn(u)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},TP=function(){if(m(this,nd)||!this.div)return;L(this,nd,new AbortController);const e=this._uiManager.combinedSignal(m(this,nd));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Z7=function(e){ot._resizerKeyboardManager.exec(this,e)},eK=function(e){var n;m(this,tc)&&((n=e.relatedTarget)==null?void 0:n.parentNode)!==m(this,Kr)&&F(this,Ze,u0).call(this)},tK=function(e){L(this,kb,m(this,tc)?e:"")},NP=function(e){if(m(this,no))for(const n of m(this,no))n.tabIndex=e},u0=function(){L(this,tc,!1),F(this,Ze,NP).call(this,-1),F(this,Ze,F1).call(this)},j(ot,Lb),Se(ot,"_l10n",null),Se(ot,"_l10nResizer",null),Se(ot,"_borderLineWidth",-1),Se(ot,"_colorManager",new pP),Se(ot,"_zIndex",1),Se(ot,"_telemetryTimeout",1e3);let ln=ot;class ECe extends ln{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const w6=3285377520,gs=4294901760,Do=65535;class nK{constructor(e){this.h1=e?e&4294967295:w6,this.h2=e?e&4294967295:w6}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let S=0,E=e.length;S<E;S++){const C=e.charCodeAt(S);C<=255?n[r++]=C:(n[r++]=C>>>8,n[r++]=C&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,s=new Uint32Array(n.buffer,0,i);let o=0,c=0,u=this.h1,f=this.h2;const h=3432918353,g=461845907,y=h&Do,w=g&Do;for(let S=0;S<i;S++)S&1?(o=s[S],o=o*h&gs|o*y&Do,o=o<<15|o>>>17,o=o*g&gs|o*w&Do,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(c=s[S],c=c*h&gs|c*y&Do,c=c<<15|c>>>17,c=c*g&gs|c*w&Do,f^=c,f=f<<13|f>>>19,f=f*5+3864292196);switch(o=0,a){case 3:o^=n[i*4+2]<<16;case 2:o^=n[i*4+1]<<8;case 1:o^=n[i*4],o=o*h&gs|o*y&Do,o=o<<15|o>>>17,o=o*g&gs|o*w&Do,i&1?u^=o:f^=o}this.h1=u,this.h2=f}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&gs|e*36045&Do,n=n*4283543511&gs|((n<<16|e>>>16)*2950163797&gs)>>>16,e^=n>>>1,e=e*444984403&gs|e*60499&Do,n=n*3301882366&gs|((n<<16|e>>>16)*3120437893&gs)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const RP=Object.freeze({map:null,hash:"",transfer:void 0});var oh,lh,nc,Xr,RA,rK;class cL{constructor(){j(this,RA);j(this,oh,!1);j(this,lh,null);j(this,nc,null);j(this,Xr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=m(this,Xr).get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return m(this,Xr).get(e)}remove(e){const n=m(this,Xr).get(e);if(n!==void 0&&(n instanceof ln&&m(this,nc).delete(n.annotationElementId),m(this,Xr).delete(e),m(this,Xr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of m(this,Xr).values())if(r instanceof ln)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=m(this,Xr).get(e);let i=!1;if(r!==void 0)for(const[a,s]of Object.entries(n))r[a]!==s&&(i=!0,r[a]=s);else i=!0,m(this,Xr).set(e,n);i&&F(this,RA,rK).call(this),n instanceof ln&&((m(this,nc)||L(this,nc,new Map)).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return m(this,Xr).has(e)}get size(){return m(this,Xr).size}resetModified(){m(this,oh)&&(L(this,oh,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iK(this)}get serializable(){if(m(this,Xr).size===0)return RP;const e=new Map,n=new nK,r=[],i=Object.create(null);let a=!1;for(const[s,o]of m(this,Xr)){const c=o instanceof ln?o.serialize(!1,i):o;c&&(e.set(s,c),n.update(`${s}:${JSON.stringify(c)}`),a||(a=!!c.bitmap))}if(a)for(const s of e.values())s.bitmap&&r.push(s.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:RP}get editorStats(){let e=null;const n=new Map;let r=0,i=0;for(const a of m(this,Xr).values()){if(!(a instanceof ln)){a.popup&&(a.popup.deleted?i+=1:r+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(r+=1);const s=a.telemetryFinalData;if(!s)continue;const{type:o}=s;n.has(o)||n.set(o,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const c=e[o]||(e[o]=new Map);for(const[u,f]of Object.entries(s)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const g=h.get(f)??0;h.set(f,g+1)}}if((i>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:r}),!e)return null;for(const[a,s]of n)e[a]=s.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){L(this,lh,null)}updateEditor(e,n){var i;const r=(i=m(this,nc))==null?void 0:i.get(e);return r?(r.updateFromAnnotationLayer(n),!0):!1}getEditor(e){var n;return((n=m(this,nc))==null?void 0:n.get(e))||null}get modifiedIds(){if(m(this,lh))return m(this,lh);const e=[];if(m(this,nc))for(const n of m(this,nc).values())n.serialize()&&e.push(n.annotationElementId);return L(this,lh,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return m(this,Xr).entries()}}oh=new WeakMap,lh=new WeakMap,nc=new WeakMap,Xr=new WeakMap,RA=new WeakSet,rK=function(){m(this,oh)||(L(this,oh,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ob;class iK extends cL{constructor(n){super();j(this,Ob);const{map:r,hash:i,transfer:a}=n.serializable,s=structuredClone(r,a?{transfer:a}:null);L(this,Ob,{map:s,hash:i,transfer:a})}get print(){sn("Should not call PrintAnnotationStorage.print")}get serializable(){return m(this,Ob)}get modifiedIds(){return dt(this,"modifiedIds",{ids:new Set,hash:""})}}Ob=new WeakMap;var cg;class ACe{constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){j(this,cg,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),m(this,cg).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:r}){if(!(!e||m(this,cg).has(e.loadedName))){if(Ct(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,o=new FontFace(i,a,s);this.addNativeFontFace(o);try{await o.load(),m(this,cg).add(i),r==null||r(e)}catch{at(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}sn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw at(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var n;const e=!!((n=this._document)!=null&&n.fonts);return dt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return dt(this,"isSyncFontLoadingSupported",ji||jr.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(Ct(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:n,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return dt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(D,I){return D.charCodeAt(I)<<24|D.charCodeAt(I+1)<<16|D.charCodeAt(I+2)<<8|D.charCodeAt(I+3)&255}function i(D,I,P,k){const U=D.substring(0,I),B=D.substring(I+P);return U+k+B}let a,s;const o=this._document.createElement("canvas");o.width=1,o.height=1;const c=o.getContext("2d");let u=0;function f(D,I){if(++u>30){at("Load test font never loaded."),I();return}if(c.font="30px "+D,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(f.bind(null,D,I))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=i(g,976,h.length,h);const w=16,S=1482184792;let E=r(g,w);for(a=0,s=h.length-3;a<s;a+=4)E=E-S+r(h,a)|0;a<h.length&&(E=E-S+r(h+"XXX",a)|0),g=i(g,w,4,dCe(E));const C=`url(data:font/opentype;base64,${btoa(g)});`,M=`@font-face {font-family:"${h}";src:${C}}`;this.insertRule(M);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const D of[e.loadedName,h]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=D,R.append(I)}this._document.body.append(R),f(h,()=>{R.remove(),n.complete()})}}cg=new WeakMap;var Wt;class _Ce{constructor(e,n=null,r,i){j(this,Wt);this.compiledGlyphs=Object.create(null),L(this,Wt,e),this._inspectFont=n,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var n;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(n=this._inspectFont)==null||n.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${x7(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let i;try{i=e.get(r)}catch(s){at(`getPathGenerator - ignoring character: "${s}".`)}const a=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=a}get black(){return m(this,Wt).black}get bold(){return m(this,Wt).bold}get disableFontFace(){return m(this,Wt).disableFontFace??!1}get fontExtraProperties(){return m(this,Wt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return m(this,Wt).isInvalidPDFjsFont}get isType3Font(){return m(this,Wt).isType3Font}get italic(){return m(this,Wt).italic}get missingFile(){return m(this,Wt).missingFile}get remeasure(){return m(this,Wt).remeasure}get vertical(){return m(this,Wt).vertical}get ascent(){return m(this,Wt).ascent}get defaultWidth(){return m(this,Wt).defaultWidth}get descent(){return m(this,Wt).descent}get bbox(){return m(this,Wt).bbox}get fontMatrix(){return m(this,Wt).fontMatrix}get fallbackName(){return m(this,Wt).fallbackName}get loadedName(){return m(this,Wt).loadedName}get mimetype(){return m(this,Wt).mimetype}get name(){return m(this,Wt).name}get data(){return m(this,Wt).data}clearData(){m(this,Wt).clearData()}get cssFontInfo(){return m(this,Wt).cssFontInfo}get systemFontInfo(){return m(this,Wt).systemFontInfo}get defaultVMetrics(){return m(this,Wt).defaultVMetrics}}Wt=new WeakMap;function CCe(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(ji)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function TCe(t){if(ji&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return vw(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t==null?void 0:t.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function h1(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const MP=t=>typeof t=="object"&&Number.isInteger(t==null?void 0:t.num)&&t.num>=0&&Number.isInteger(t==null?void 0:t.gen)&&t.gen>=0,NCe=t=>typeof t=="object"&&typeof(t==null?void 0:t.name)=="string",aK=mCe.bind(null,MP,NCe);var rc,MA;class RCe{constructor(){j(this,rc,new Map);j(this,MA,Promise.resolve())}postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};m(this,MA).then(()=>{for(const[i]of m(this,rc))i.call(this,r)})}addEventListener(e,n,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:a}=r;if(a.aborted){at("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,n);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}m(this,rc).set(n,i)}removeEventListener(e,n){const r=m(this,rc).get(n);r==null||r(),m(this,rc).delete(n)}terminate(){for(const[,e]of m(this,rc))e==null||e();m(this,rc).clear()}}rc=new WeakMap,MA=new WeakMap;const p1={DATA:1,ERROR:2},er={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function S6(){}function na(t){if(t instanceof Gc||t instanceof dA||t instanceof p6||t instanceof nb||t instanceof wR)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||sn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Gc(t.message);case"InvalidPDFException":return new dA(t.message);case"PasswordException":return new p6(t.message,t.code);case"ResponseException":return new nb(t.message,t.status,t.missing);case"UnknownErrorException":return new wR(t.message,t.details)}return new wR(t.message,t.toString())}var ug,Fs,sK,oK,lK,U1;class d0{constructor(e,n,r){j(this,Fs);j(this,ug,new AbortController);this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",F(this,Fs,sK).bind(this),{signal:m(this,ug).signal})}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:n},r)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,n,r,i){const a=this.streamId++,s=this.sourceName,o=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const f=Promise.withResolvers();return this.streamControllers[a]={controller:u,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:s,targetName:o,action:e,streamId:a,data:n,desiredSize:u.desiredSize},i),f.promise},pull:u=>{const f=Promise.withResolvers();return this.streamControllers[a].pullCall=f,c.postMessage({sourceName:s,targetName:o,stream:er.PULL,streamId:a,desiredSize:u.desiredSize}),f.promise},cancel:u=>{Ct(u instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[a].cancelCall=f,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:s,targetName:o,stream:er.CANCEL,streamId:a,reason:na(u)}),f.promise}},r)}destroy(){var e;(e=m(this,ug))==null||e.abort(),L(this,ug,null)}}ug=new WeakMap,Fs=new WeakSet,sK=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){F(this,Fs,lK).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===p1.DATA)i.resolve(e.data);else if(e.callback===p1.ERROR)i.reject(na(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(n,e.data).then(function(s){a.postMessage({sourceName:r,targetName:i,callback:p1.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:r,targetName:i,callback:p1.ERROR,callbackId:e.callbackId,reason:na(s)})});return}if(e.streamId){F(this,Fs,oK).call(this,e);return}n(e.data)},oK=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this,o=this.actionHandler[e.action],c={enqueue(u,f=1,h){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=f,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:er.ENQUEUE,streamId:n,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:er.CLOSE,streamId:n}),delete s.streamSinks[n])},error(u){Ct(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:er.ERROR,streamId:n,reason:na(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[n]=c,Promise.try(o,e.data,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:er.START_COMPLETE,streamId:n,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:er.START_COMPLETE,streamId:n,reason:na(u)})})},lK=function(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[n],o=this.streamSinks[n];switch(e.stream){case er.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject(na(e.reason));break;case er.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject(na(e.reason));break;case er.PULL:if(!o){a.postMessage({sourceName:r,targetName:i,stream:er.PULL_COMPLETE,streamId:n,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||S6).then(function(){a.postMessage({sourceName:r,targetName:i,stream:er.PULL_COMPLETE,streamId:n,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:er.PULL_COMPLETE,streamId:n,reason:na(u)})});break;case er.ENQUEUE:if(Ct(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case er.CLOSE:if(Ct(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),F(this,Fs,U1).call(this,s,n);break;case er.ERROR:Ct(s,"error should have stream controller"),s.controller.error(na(e.reason)),F(this,Fs,U1).call(this,s,n);break;case er.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject(na(e.reason)),F(this,Fs,U1).call(this,s,n);break;case er.CANCEL:if(!o)break;const c=na(e.reason);Promise.try(o.onCancel||S6,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:er.CANCEL_COMPLETE,streamId:n,success:!0})},function(u){a.postMessage({sourceName:r,targetName:i,stream:er.CANCEL_COMPLETE,streamId:n,reason:na(u)})}),o.sinkCapability.reject(c),o.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}},U1=async function(e,n){var r,i,a;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[n]};var jb;class cK{constructor({enableHWA:e=!1}){j(this,jb,!1);L(this,jb,e)}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!m(this,jb)})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){sn("Abstract method `_createCanvas` called.")}}jb=new WeakMap;class MCe extends cK{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class uK{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){sn("Abstract method `_fetch` called.")}}class E6 extends uK{async _fetch(e){const n=await Hv(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):vw(n)}}class dK{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,i,a){return"none"}destroy(e=!1){}}var ch,dg,ic,ac,vi,uh,dh,Ie,pi,f0,gm,B1,vm,fK,PP,ym,h0,p0,kP,m0;class PCe extends dK{constructor({docId:n,ownerDocument:r=globalThis.document}){super();j(this,Ie);j(this,ch);j(this,dg);j(this,ic);j(this,ac);j(this,vi);j(this,uh);j(this,dh,0);L(this,ac,n),L(this,vi,r)}addFilter(n){if(!n)return"none";let r=m(this,Ie,pi).get(n);if(r)return r;const[i,a,s]=F(this,Ie,B1).call(this,n),o=n.length===1?i:`${i}${a}${s}`;if(r=m(this,Ie,pi).get(o),r)return m(this,Ie,pi).set(n,r),r;const c=`g_${m(this,ac)}_transfer_map_${lr(this,dh)._++}`,u=F(this,Ie,vm).call(this,c);m(this,Ie,pi).set(n,u),m(this,Ie,pi).set(o,u);const f=F(this,Ie,ym).call(this,c);return F(this,Ie,p0).call(this,i,a,s,f),u}addHCMFilter(n,r){var w;const i=`${n}-${r}`,a="base";let s=m(this,Ie,f0).get(a);if((s==null?void 0:s.key)===i||(s?((w=s.filter)==null||w.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},m(this,Ie,f0).set(a,s)),!n||!r))return s.url;const o=F(this,Ie,m0).call(this,n);n=Le.makeHexColor(...o);const c=F(this,Ie,m0).call(this,r);if(r=Le.makeHexColor(...c),m(this,Ie,gm).style.color="",n==="#000000"&&r==="#ffffff"||n===r)return s.url;const u=new Array(256);for(let S=0;S<=255;S++){const E=S/255;u[S]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const f=u.join(","),h=`g_${m(this,ac)}_hcm_filter`,g=s.filter=F(this,Ie,ym).call(this,h);F(this,Ie,p0).call(this,f,f,f,g),F(this,Ie,PP).call(this,g);const y=(S,E)=>{const C=o[S]/255,M=c[S]/255,R=new Array(E+1);for(let D=0;D<=E;D++)R[D]=C+D/E*(M-C);return R.join(",")};return F(this,Ie,p0).call(this,y(0,5),y(1,5),y(2,5),g),s.url=F(this,Ie,vm).call(this,h),s.url}addAlphaFilter(n){let r=m(this,Ie,pi).get(n);if(r)return r;const[i]=F(this,Ie,B1).call(this,[n]),a=`alpha_${i}`;if(r=m(this,Ie,pi).get(a),r)return m(this,Ie,pi).set(n,r),r;const s=`g_${m(this,ac)}_alpha_map_${lr(this,dh)._++}`,o=F(this,Ie,vm).call(this,s);m(this,Ie,pi).set(n,o),m(this,Ie,pi).set(a,o);const c=F(this,Ie,ym).call(this,s);return F(this,Ie,kP).call(this,i,c),o}addLuminosityFilter(n){let r=m(this,Ie,pi).get(n||"luminosity");if(r)return r;let i,a;if(n?([i]=F(this,Ie,B1).call(this,[n]),a=`luminosity_${i}`):a="luminosity",r=m(this,Ie,pi).get(a),r)return m(this,Ie,pi).set(n,r),r;const s=`g_${m(this,ac)}_luminosity_map_${lr(this,dh)._++}`,o=F(this,Ie,vm).call(this,s);m(this,Ie,pi).set(n,o),m(this,Ie,pi).set(a,o);const c=F(this,Ie,ym).call(this,s);return F(this,Ie,fK).call(this,c),n&&F(this,Ie,kP).call(this,i,c),o}addHighlightHCMFilter(n,r,i,a,s){var M;const o=`${r}-${i}-${a}-${s}`;let c=m(this,Ie,f0).get(n);if((c==null?void 0:c.key)===o||(c?((M=c.filter)==null||M.remove(),c.key=o,c.url="none",c.filter=null):(c={key:o,url:"none",filter:null},m(this,Ie,f0).set(n,c)),!r||!i))return c.url;const[u,f]=[r,i].map(F(this,Ie,m0).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[y,w]=[a,s].map(F(this,Ie,m0).bind(this));g<h&&([h,g,y,w]=[g,h,w,y]),m(this,Ie,gm).style.color="";const S=(R,D,I)=>{const P=new Array(256),k=(g-h)/I,U=R/255,B=(D-R)/(255*I);let V=0;for(let H=0;H<=I;H++){const G=Math.round(h+H*k),Q=U+H*B;for(let W=V;W<=G;W++)P[W]=Q;V=G+1}for(let H=V;H<256;H++)P[H]=P[V-1];return P.join(",")},E=`g_${m(this,ac)}_hcm_${n}_filter`,C=c.filter=F(this,Ie,ym).call(this,E);return F(this,Ie,PP).call(this,C),F(this,Ie,p0).call(this,S(y[0],w[0],5),S(y[1],w[1],5),S(y[2],w[2],5),C),c.url=F(this,Ie,vm).call(this,E),c.url}destroy(n=!1){var r,i,a,s;n&&((r=m(this,uh))!=null&&r.size)||((i=m(this,ic))==null||i.parentNode.parentNode.remove(),L(this,ic,null),(a=m(this,dg))==null||a.clear(),L(this,dg,null),(s=m(this,uh))==null||s.clear(),L(this,uh,null),L(this,dh,0))}}ch=new WeakMap,dg=new WeakMap,ic=new WeakMap,ac=new WeakMap,vi=new WeakMap,uh=new WeakMap,dh=new WeakMap,Ie=new WeakSet,pi=function(){return m(this,dg)||L(this,dg,new Map)},f0=function(){return m(this,uh)||L(this,uh,new Map)},gm=function(){if(!m(this,ic)){const n=m(this,vi).createElement("div"),{style:r}=n;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=m(this,vi).createElementNS(Bl,"svg");i.setAttribute("width",0),i.setAttribute("height",0),L(this,ic,m(this,vi).createElementNS(Bl,"defs")),n.append(i),i.append(m(this,ic)),m(this,vi).body.append(n)}return m(this,ic)},B1=function(n){if(n.length===1){const u=n[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=u[g]/255;const h=f.join(",");return[h,h,h]}const[r,i,a]=n,s=new Array(256),o=new Array(256),c=new Array(256);for(let u=0;u<256;u++)s[u]=r[u]/255,o[u]=i[u]/255,c[u]=a[u]/255;return[s.join(","),o.join(","),c.join(",")]},vm=function(n){if(m(this,ch)===void 0){L(this,ch,"");const r=m(this,vi).URL;r!==m(this,vi).baseURI&&(bw(r)?at('#createUrl: ignore "data:"-URL for performance reasons.'):L(this,ch,iL(r,"")))}return`url(${m(this,ch)}#${n})`},fK=function(n){const r=m(this,vi).createElementNS(Bl,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),n.append(r)},PP=function(n){const r=m(this,vi).createElementNS(Bl,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),n.append(r)},ym=function(n){const r=m(this,vi).createElementNS(Bl,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",n),m(this,Ie,gm).append(r),r},h0=function(n,r,i){const a=m(this,vi).createElementNS(Bl,r);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),n.append(a)},p0=function(n,r,i,a){const s=m(this,vi).createElementNS(Bl,"feComponentTransfer");a.append(s),F(this,Ie,h0).call(this,s,"feFuncR",n),F(this,Ie,h0).call(this,s,"feFuncG",r),F(this,Ie,h0).call(this,s,"feFuncB",i)},kP=function(n,r){const i=m(this,vi).createElementNS(Bl,"feComponentTransfer");r.append(i),F(this,Ie,h0).call(this,i,"feFuncA",n)},m0=function(n){return m(this,Ie,gm).style.color=n,zv(getComputedStyle(m(this,Ie,gm)).getPropertyValue("color"))};class hK{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){sn("Abstract method `_fetch` called.")}}class A6 extends hK{async _fetch(e){const n=await Hv(e,"arraybuffer");return new Uint8Array(n)}}class pK{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){sn("Abstract method `_fetch` called.")}}class _6 extends pK{async _fetch(e){const n=await Hv(e,"arraybuffer");return new Uint8Array(n)}}ji&&at("Please use the `legacy` build in Node.js environments.");async function uL(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class kCe extends dK{}class ICe extends cK{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class DCe extends uK{async _fetch(e){return uL(e)}}class LCe extends hK{async _fetch(e){return uL(e)}}class OCe extends pK{async _fetch(e){return uL(e)}}const um="__forcedDependency",{floor:C6,ceil:T6}=Math;function m1(t,e,n,r,i,a){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],r),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],a)}const IP=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var fg,rd;class jCe{constructor(e,n){j(this,fg);j(this,rd);L(this,fg,e),L(this,rd,n)}get length(){return m(this,fg).length}isEmpty(e){return m(this,fg)[e]===IP}minX(e){return m(this,rd)[e*4+0]/256}minY(e){return m(this,rd)[e*4+1]/256}maxX(e){return(m(this,rd)[e*4+2]+1)/256}maxY(e){return(m(this,rd)[e*4+3]+1)/256}}fg=new WeakMap,rd=new WeakMap;const g1=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};var aa,sa,fh,ro,hh,sc,Bt,Yt,oc,oa,Fb,hg,ph,mh,lc,yi,Wo,Ub,DP;class FCe{constructor(e,n,r=!1){j(this,Ub);j(this,aa,{__proto__:null});j(this,sa,{__proto__:null,transform:[],moveText:[],sameLineText:[],[um]:[]});j(this,fh,new Map);j(this,ro,[]);j(this,hh,[]);j(this,sc,[[1,0,0,1,0,0]]);j(this,Bt,[-1/0,-1/0,1/0,1/0]);j(this,Yt,new Float64Array([1/0,1/0,-1/0,-1/0]));j(this,oc,-1);j(this,oa,new Set);j(this,Fb,new Map);j(this,hg,new Map);j(this,ph);j(this,mh);j(this,lc);j(this,yi);j(this,Wo);L(this,ph,e.width),L(this,mh,e.height),F(this,Ub,DP).call(this,n),r&&L(this,Wo,new Map)}growOperationsCount(e){e>=m(this,yi).length&&F(this,Ub,DP).call(this,e,m(this,yi))}save(e){return L(this,aa,{__proto__:m(this,aa)}),L(this,sa,{__proto__:m(this,sa),transform:{__proto__:m(this,sa).transform},moveText:{__proto__:m(this,sa).moveText},sameLineText:{__proto__:m(this,sa).sameLineText},[um]:{__proto__:m(this,sa)[um]}}),L(this,Bt,{__proto__:m(this,Bt)}),m(this,ro).push(e),this}restore(e){var i;const n=Object.getPrototypeOf(m(this,aa));if(n===null)return this;L(this,aa,n),L(this,sa,Object.getPrototypeOf(m(this,sa))),L(this,Bt,Object.getPrototypeOf(m(this,Bt)));const r=m(this,ro).pop();return r!==void 0&&((i=g1(m(this,Wo),e))==null||i.dependencies.add(r),m(this,yi)[e]=m(this,yi)[r]),this}recordOpenMarker(e){return m(this,ro).push(e),this}getOpenMarker(){return m(this,ro).length===0?null:m(this,ro).at(-1)}recordCloseMarker(e){var r;const n=m(this,ro).pop();return n!==void 0&&((r=g1(m(this,Wo),e))==null||r.dependencies.add(n),m(this,yi)[e]=m(this,yi)[n]),this}beginMarkedContent(e){return m(this,hh).push(e),this}endMarkedContent(e){var r;const n=m(this,hh).pop();return n!==void 0&&((r=g1(m(this,Wo),e))==null||r.dependencies.add(n),m(this,yi)[e]=m(this,yi)[n]),this}pushBaseTransform(e){return m(this,sc).push(Le.multiplyByDOMMatrix(m(this,sc).at(-1),e.getTransform())),this}popBaseTransform(){return m(this,sc).length>1&&m(this,sc).pop(),this}recordSimpleData(e,n){return m(this,aa)[e]=n,this}recordIncrementalData(e,n){return m(this,sa)[e].push(n),this}resetIncrementalData(e,n){return m(this,sa)[e].length=0,this}recordNamedData(e,n){return m(this,fh).set(e,n),this}recordSimpleDataFromNamed(e,n,r){m(this,aa)[e]=m(this,fh).get(n)??r}recordFutureForcedDependency(e,n){return this.recordIncrementalData(um,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in m(this,aa)&&this.recordFutureForcedDependency(n,m(this,aa)[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of m(this,oa))this.recordFutureForcedDependency(um,e);return this}resetBBox(e){return m(this,oc)!==e&&(L(this,oc,e),m(this,Yt)[0]=1/0,m(this,Yt)[1]=1/0,m(this,Yt)[2]=-1/0,m(this,Yt)[3]=-1/0),this}recordClipBox(e,n,r,i,a,s){const o=Le.multiplyByDOMMatrix(m(this,sc).at(-1),n.getTransform()),c=[1/0,1/0,-1/0,-1/0];Le.axialAlignedBoundingBox([r,a,i,s],o,c);const u=Le.intersect(m(this,Bt),c);return u?(m(this,Bt)[0]=u[0],m(this,Bt)[1]=u[1],m(this,Bt)[2]=u[2],m(this,Bt)[3]=u[3]):(m(this,Bt)[0]=m(this,Bt)[1]=1/0,m(this,Bt)[2]=m(this,Bt)[3]=-1/0),this}recordBBox(e,n,r,i,a,s){const o=m(this,Bt);if(o[0]===1/0)return this;const c=Le.multiplyByDOMMatrix(m(this,sc).at(-1),n.getTransform());if(o[0]===-1/0)return Le.axialAlignedBoundingBox([r,a,i,s],c,m(this,Yt)),this;const u=[1/0,1/0,-1/0,-1/0];return Le.axialAlignedBoundingBox([r,a,i,s],c,u),m(this,Yt)[0]=Math.min(m(this,Yt)[0],Math.max(u[0],o[0])),m(this,Yt)[1]=Math.min(m(this,Yt)[1],Math.max(u[1],o[1])),m(this,Yt)[2]=Math.max(m(this,Yt)[2],Math.min(u[2],o[2])),m(this,Yt)[3]=Math.max(m(this,Yt)[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,n,r,i=1,a=0,s=0,o){const c=r.bbox;let u,f;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&m(this,hg).get(r),u!==!1&&(f=[0,0,0,0],Le.axialAlignedBoundingBox(c,r.fontMatrix,f),(i!==1||a!==0||s!==0)&&Le.scaleMinMax([i,0,0,-i,a,s],f),u)))return this.recordBBox(e,n,f[0],f[2],f[1],f[3]);if(!o)return this.recordFullPageBBox(e);const h=o();return c&&f&&u===void 0&&(u=f[0]<=a-h.actualBoundingBoxLeft&&f[2]>=a+h.actualBoundingBoxRight&&f[1]<=s-h.actualBoundingBoxAscent&&f[3]>=s+h.actualBoundingBoxDescent,m(this,hg).set(r,u),u)?this.recordBBox(e,n,f[0],f[2],f[1],f[3]):this.recordBBox(e,n,a-h.actualBoundingBoxLeft,a+h.actualBoundingBoxRight,s-h.actualBoundingBoxAscent,s+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return m(this,Yt)[0]=Math.max(0,m(this,Bt)[0]),m(this,Yt)[1]=Math.max(0,m(this,Bt)[1]),m(this,Yt)[2]=Math.min(m(this,ph),m(this,Bt)[2]),m(this,Yt)[3]=Math.min(m(this,mh),m(this,Bt)[3]),this}getSimpleIndex(e){return m(this,aa)[e]}recordDependencies(e,n){const r=m(this,oa),i=m(this,aa),a=m(this,sa);for(const s of n)s in m(this,aa)?r.add(i[s]):s in a&&a[s].forEach(r.add,r);return this}recordNamedDependency(e,n){return m(this,fh).has(n)&&m(this,oa).add(m(this,fh).get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[um]),m(this,Wo)){const r=g1(m(this,Wo),e),{dependencies:i}=r;m(this,oa).forEach(i.add,i),m(this,ro).forEach(i.add,i),m(this,hh).forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(m(this,oc)===e){const r=C6(m(this,Yt)[0]*256/m(this,ph)),i=C6(m(this,Yt)[1]*256/m(this,mh)),a=T6(m(this,Yt)[2]*256/m(this,ph)),s=T6(m(this,Yt)[3]*256/m(this,mh));m1(m(this,lc),e,r,i,a,s);for(const o of m(this,oa))o!==e&&m1(m(this,lc),o,r,i,a,s);for(const o of m(this,ro))o!==e&&m1(m(this,lc),o,r,i,a,s);for(const o of m(this,hh))o!==e&&m1(m(this,lc),o,r,i,a,s);n||(m(this,oa).clear(),L(this,oc,-1))}return this}recordShowTextOperation(e,n=!1){const r=Array.from(m(this,oa));this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,n=!1){return m(this,oc)===e&&(L(this,oc,-1),m(this,Bt)[0]=Math.max(m(this,Bt)[0],m(this,Yt)[0]),m(this,Bt)[1]=Math.max(m(this,Bt)[1],m(this,Yt)[1]),m(this,Bt)[2]=Math.min(m(this,Bt)[2],m(this,Yt)[2]),m(this,Bt)[3]=Math.min(m(this,Bt)[3],m(this,Yt)[3]),n||m(this,oa).clear()),this}_takePendingDependencies(){const e=m(this,oa);return L(this,oa,new Set),e}_extractOperation(e){const n=m(this,Fb).get(e);return m(this,Fb).delete(e),n}_pushPendingDependencies(e){for(const n of e)m(this,oa).add(n)}take(){return m(this,hg).clear(),new jCe(m(this,yi),m(this,lc))}takeDebugMetadata(){return m(this,Wo)}}aa=new WeakMap,sa=new WeakMap,fh=new WeakMap,ro=new WeakMap,hh=new WeakMap,sc=new WeakMap,Bt=new WeakMap,Yt=new WeakMap,oc=new WeakMap,oa=new WeakMap,Fb=new WeakMap,hg=new WeakMap,ph=new WeakMap,mh=new WeakMap,lc=new WeakMap,yi=new WeakMap,Wo=new WeakMap,Ub=new WeakSet,DP=function(e,n){const r=new ArrayBuffer(e*4);L(this,lc,new Uint8ClampedArray(r)),L(this,yi,new Uint32Array(r)),n&&n.length>0?(m(this,yi).set(n),m(this,yi).fill(IP,n.length)):m(this,yi).fill(IP)};var tn,On,io,pg,mg;const wL=class wL{constructor(e,n,r){j(this,tn);j(this,On);j(this,io);j(this,pg,0);j(this,mg,0);if(e instanceof wL&&m(e,io)===!!r)return e;L(this,tn,e),L(this,On,n),L(this,io,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return lr(this,mg)._++,m(this,tn).save(m(this,On)),this}restore(e){return m(this,mg)>0&&(m(this,tn).restore(m(this,On)),lr(this,mg)._--),this}recordOpenMarker(e){return lr(this,pg)._++,this}getOpenMarker(){return m(this,pg)>0?m(this,On):m(this,tn).getOpenMarker()}recordCloseMarker(e){return lr(this,pg)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return m(this,tn).pushBaseTransform(e),this}popBaseTransform(){return m(this,tn).popBaseTransform(),this}recordSimpleData(e,n){return m(this,tn).recordSimpleData(e,m(this,On)),this}recordIncrementalData(e,n){return m(this,tn).recordIncrementalData(e,m(this,On)),this}resetIncrementalData(e,n){return m(this,tn).resetIncrementalData(e,m(this,On)),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,r){return m(this,tn).recordSimpleDataFromNamed(e,n,m(this,On)),this}recordFutureForcedDependency(e,n){return m(this,tn).recordFutureForcedDependency(e,m(this,On)),this}inheritSimpleDataAsFutureForcedDependencies(e){return m(this,tn).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return m(this,tn).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return m(this,io)||m(this,tn).resetBBox(m(this,On)),this}recordClipBox(e,n,r,i,a,s){return m(this,io)||m(this,tn).recordClipBox(m(this,On),n,r,i,a,s),this}recordBBox(e,n,r,i,a,s){return m(this,io)||m(this,tn).recordBBox(m(this,On),n,r,i,a,s),this}recordCharacterBBox(e,n,r,i,a,s,o){return m(this,io)||m(this,tn).recordCharacterBBox(m(this,On),n,r,i,a,s,o),this}recordFullPageBBox(e){return m(this,io)||m(this,tn).recordFullPageBBox(m(this,On)),this}getSimpleIndex(e){return m(this,tn).getSimpleIndex(e)}recordDependencies(e,n){return m(this,tn).recordDependencies(m(this,On),n),this}recordNamedDependency(e,n){return m(this,tn).recordNamedDependency(m(this,On),n),this}recordOperation(e){return m(this,tn).recordOperation(m(this,On),!0),this}recordShowTextOperation(e){return m(this,tn).recordShowTextOperation(m(this,On),!0),this}bboxToClipBoxDropOperation(e){return m(this,io)||m(this,tn).bboxToClipBoxDropOperation(m(this,On),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};tn=new WeakMap,On=new WeakMap,io=new WeakMap,pg=new WeakMap,mg=new WeakMap;let pA=wL;const vs={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ri={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function LP(t,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}class dL{isModifyingCurrentTransform(){return!1}getPattern(){sn("Abstract method `getPattern` called.")}}class UCe extends dL{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)n.addColorStop(r[0],r[1]);return n}getPattern(e,n,r,i){let a;if(i===ri.STROKE||i===ri.FILL){const s=n.current.getClippedPathBoundingBox(i,Cn(e))||[0,0,0,0],o=Math.ceil(s[2]-s[0])||1,c=Math.ceil(s[3]-s[1])||1,u=n.cachedCanvases.getCanvas("pattern",o,c),f=u.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-s[0],-s[1]),r=Le.transform(r,[1,0,0,1,s[0],s[1]]),f.transform(...n.baseTransform),this.matrix&&f.transform(...this.matrix),LP(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),a=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(r);a.setTransform(h)}else LP(e,this._bbox),a=this._createGradient(e);return a}}function AR(t,e,n,r,i,a,s,o){const c=e.coords,u=e.colors,f=t.data,h=t.width*4;let g;c[n+1]>c[r+1]&&(g=n,n=r,r=g,g=a,a=s,s=g),c[r+1]>c[i+1]&&(g=r,r=i,i=g,g=s,s=o,o=g),c[n+1]>c[r+1]&&(g=n,n=r,r=g,g=a,a=s,s=g);const y=(c[n]+e.offsetX)*e.scaleX,w=(c[n+1]+e.offsetY)*e.scaleY,S=(c[r]+e.offsetX)*e.scaleX,E=(c[r+1]+e.offsetY)*e.scaleY,C=(c[i]+e.offsetX)*e.scaleX,M=(c[i+1]+e.offsetY)*e.scaleY;if(w>=M)return;const R=u[a],D=u[a+1],I=u[a+2],P=u[s],k=u[s+1],U=u[s+2],B=u[o],V=u[o+1],H=u[o+2],G=Math.round(w),Q=Math.round(M);let W,ee,$,q,J,ae,ye,Y;for(let ne=G;ne<=Q;ne++){if(ne<E){const Ce=ne<w?0:(w-ne)/(w-E);W=y-(y-S)*Ce,ee=R-(R-P)*Ce,$=D-(D-k)*Ce,q=I-(I-U)*Ce}else{let Ce;ne>M?Ce=1:E===M?Ce=0:Ce=(E-ne)/(E-M),W=S-(S-C)*Ce,ee=P-(P-B)*Ce,$=k-(k-V)*Ce,q=U-(U-H)*Ce}let ue;ne<w?ue=0:ne>M?ue=1:ue=(w-ne)/(w-M),J=y-(y-C)*ue,ae=R-(R-B)*ue,ye=D-(D-V)*ue,Y=I-(I-H)*ue;const me=Math.round(Math.min(W,J)),xe=Math.round(Math.max(W,J));let Me=h*ne+me*4;for(let Ce=me;Ce<=xe;Ce++)ue=(W-Ce)/(W-J),ue<0?ue=0:ue>1&&(ue=1),f[Me++]=ee-(ee-ae)*ue|0,f[Me++]=$-($-ye)*ue|0,f[Me++]=q-(q-Y)*ue|0,f[Me++]=255}}function BCe(t,e,n){const r=e.coords,i=e.colors;let a,s;switch(e.type){case"lattice":const o=e.verticesPerRow,c=Math.floor(r.length/o)-1,u=o-1;for(a=0;a<c;a++){let f=a*o;for(let h=0;h<u;h++,f++)AR(t,n,r[f],r[f+1],r[f+o],i[f],i[f+1],i[f+o]),AR(t,n,r[f+o+1],r[f+1],r[f+o],i[f+o+1],i[f+1],i[f+o])}break;case"triangles":for(a=0,s=r.length;a<s;a+=3)AR(t,n,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class HCe extends dL{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,r){const o=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,f=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),y=u/h,w=f/g,S={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-c,scaleX:1/y,scaleY:1/w},E=h+4,C=g+4,M=r.getCanvas("mesh",E,C),R=M.context,D=R.createImageData(h,g);if(n){const P=D.data;for(let k=0,U=P.length;k<U;k+=4)P[k]=n[0],P[k+1]=n[1],P[k+2]=n[2],P[k+3]=255}for(const P of this._figures)BCe(D,P,S);return R.putImageData(D,2,2),{canvas:M.canvas,offsetX:o-2*y,offsetY:c-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,n,r,i){LP(e,this._bbox);const a=new Float32Array(2);if(i===ri.SHADING)Le.singularValueDecompose2dScale(Cn(e),a);else if(this.matrix){Le.singularValueDecompose2dScale(this.matrix,a);const[o,c]=a;Le.singularValueDecompose2dScale(n.baseTransform,a),a[0]*=o,a[1]*=c}else Le.singularValueDecompose2dScale(n.baseTransform,a);const s=this._createMeshCanvas(a,i===ri.SHADING?null:this._background,n.cachedCanvases);return i!==ri.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class zCe extends dL{getPattern(){return"hotpink"}}function $Ce(t){switch(t[0]){case"RadialAxial":return new UCe(t);case"Mesh":return new HCe(t);case"Dummy":return new zCe}throw new Error(`Unknown IR type: ${t[0]}`)}const N6={COLORED:1,UNCOLORED:2},PA=class PA{constructor(e,n,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,n){var ae,ye;const{bbox:r,operatorList:i,paintType:a,tilingType:s,color:o,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:f}=this;u=Math.abs(u),f=Math.abs(f),Z_("TilingType: "+s);const h=r[0],g=r[1],y=r[2],w=r[3],S=y-h,E=w-g,C=new Float32Array(2);Le.singularValueDecompose2dScale(this.matrix,C);const[M,R]=C;Le.singularValueDecompose2dScale(this.baseTransform,C);const D=M*C[0],I=R*C[1];let P=S,k=E,U=!1,B=!1;const V=Math.ceil(u*D),H=Math.ceil(f*I),G=Math.ceil(S*D),Q=Math.ceil(E*I);V>=G?P=u:U=!0,H>=Q?k=f:B=!0;const W=this.getSizeAndScale(P,this.ctx.canvas.width,D),ee=this.getSizeAndScale(k,this.ctx.canvas.height,I),$=e.cachedCanvases.getCanvas("pattern",W.size,ee.size),q=$.context,J=c.createCanvasGraphics(q,n);if(J.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(J,a,o),q.translate(-W.scale*h,-ee.scale*g),J.transform(0,W.scale,0,0,ee.scale,0,0),q.save(),(ae=J.dependencyTracker)==null||ae.save(),this.clipBbox(J,h,g,y,w),J.baseTransform=Cn(J.ctx),J.executeOperatorList(i),J.endDrawing(),(ye=J.dependencyTracker)==null||ye.restore(),q.restore(),U||B){const Y=$.canvas;U&&(P=u),B&&(k=f);const ne=this.getSizeAndScale(P,this.ctx.canvas.width,D),ue=this.getSizeAndScale(k,this.ctx.canvas.height,I),me=ne.size,xe=ue.size,Me=e.cachedCanvases.getCanvas("pattern-workaround",me,xe),Ce=Me.context,pt=U?Math.floor(S/u):0,he=B?Math.floor(E/f):0;for(let He=0;He<=pt;He++)for(let ke=0;ke<=he;ke++)Ce.drawImage(Y,me*He,xe*ke,me,xe,0,0,me,xe);return{canvas:Me.canvas,scaleX:ne.scale,scaleY:ue.scale,offsetX:h,offsetY:g}}return{canvas:$.canvas,scaleX:W.scale,scaleY:ee.scale,offsetX:h,offsetY:g}}getSizeAndScale(e,n,r){const i=Math.max(PA.MAX_PATTERN_SIZE,n);let a=Math.ceil(e*r);return a>=i?a=i:r=a/e,{scale:r,size:a}}clipBbox(e,n,r,i,a){const s=i-n,o=a-r;e.ctx.rect(n,r,s,o),Le.axialAlignedBoundingBox([n,r,i,a],Cn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const i=e.ctx,a=e.current;switch(n){case N6.COLORED:const{fillStyle:s,strokeStyle:o}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=o;break;case N6.UNCOLORED:i.fillStyle=i.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new uCe(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,r,i,a){let s=r;i!==ri.SHADING&&(s=Le.transform(s,n.baseTransform),this.matrix&&(s=Le.transform(s,this.matrix)));const o=this.createPatternCanvas(n,a);let c=new DOMMatrix(s);c=c.translate(o.offsetX,o.offsetY),c=c.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(c),u}};Se(PA,"MAX_PATTERN_SIZE",3e3);let OP=PA;function GCe({src:t,srcPos:e=0,dest:n,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const o=jr.isLittleEndian?4278190080:255,[c,u]=s?[a,o]:[o,a],f=r>>3,h=r&7,g=t.length;n=new Uint32Array(n.buffer);let y=0;for(let w=0;w<i;w++){for(const E=e+f;e<E;e++){const C=e<g?t[e]:255;n[y++]=C&128?u:c,n[y++]=C&64?u:c,n[y++]=C&32?u:c,n[y++]=C&16?u:c,n[y++]=C&8?u:c,n[y++]=C&4?u:c,n[y++]=C&2?u:c,n[y++]=C&1?u:c}if(h===0)continue;const S=e<g?t[e++]:255;for(let E=0;E<h;E++)n[y++]=S&1<<7-E?u:c}return{srcPos:e,destPos:y}}const R6=16,M6=100,qCe=15,P6=10,da=16,_R=new DOMMatrix,Wa=new Float32Array(2),Nm=new Float32Array([1/0,1/0,-1/0,-1/0]);function VCe(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},t.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},t.transform=function(n,r,i,a,s,o){e.transform(n,r,i,a,s,o),this.__originalTransform(n,r,i,a,s,o)},t.setTransform=function(n,r,i,a,s,o){e.setTransform(n,r,i,a,s,o),this.__originalSetTransform(n,r,i,a,s,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},t.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},t.bezierCurveTo=function(n,r,i,a,s,o){e.bezierCurveTo(n,r,i,a,s,o),this.__originalBezierCurveTo(n,r,i,a,s,o)},t.rect=function(n,r,i,a){e.rect(n,r,i,a),this.__originalRect(n,r,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class WCe{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,n,r)):(i=this.canvasFactory.create(n,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function v1(t,e,n,r,i,a,s,o,c,u){const[f,h,g,y,w,S]=Cn(t);if(h===0&&g===0){const M=s*f+w,R=Math.round(M),D=o*y+S,I=Math.round(D),P=(s+c)*f+w,k=Math.abs(Math.round(P)-R)||1,U=(o+u)*y+S,B=Math.abs(Math.round(U)-I)||1;return t.setTransform(Math.sign(f),0,0,Math.sign(y),R,I),t.drawImage(e,n,r,i,a,0,0,k,B),t.setTransform(f,h,g,y,w,S),[k,B]}if(f===0&&y===0){const M=o*g+w,R=Math.round(M),D=s*h+S,I=Math.round(D),P=(o+u)*g+w,k=Math.abs(Math.round(P)-R)||1,U=(s+c)*h+S,B=Math.abs(Math.round(U)-I)||1;return t.setTransform(0,Math.sign(h),Math.sign(g),0,R,I),t.drawImage(e,n,r,i,a,0,0,B,k),t.setTransform(f,h,g,y,w,S),[B,k]}t.drawImage(e,n,r,i,a,s,o,c,u);const E=Math.hypot(f,h),C=Math.hypot(g,y);return[E*c,C*u]}class k6{constructor(e,n,r){Se(this,"alphaIsShape",!1);Se(this,"fontSize",0);Se(this,"fontSizeScale",1);Se(this,"textMatrix",null);Se(this,"textMatrixScale",1);Se(this,"fontMatrix",lP);Se(this,"leading",0);Se(this,"x",0);Se(this,"y",0);Se(this,"lineX",0);Se(this,"lineY",0);Se(this,"charSpacing",0);Se(this,"wordSpacing",0);Se(this,"textHScale",1);Se(this,"textRenderingMode",Wr.FILL);Se(this,"textRise",0);Se(this,"fillColor","#000000");Se(this,"strokeColor","#000000");Se(this,"patternFill",!1);Se(this,"patternStroke",!1);Se(this,"fillAlpha",1);Se(this,"strokeAlpha",1);Se(this,"lineWidth",1);Se(this,"activeSMask",null);Se(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=Nm.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ri.FILL,n=null){const r=this.minMax.slice();if(e===ri.STROKE){n||sn("Stroke bounding box must include transform."),Le.singularValueDecompose2dScale(n,Wa);const i=Wa[0]*this.lineWidth/2,a=Wa[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=Le.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Nm,0)}getClippedPathBoundingBox(e=ri.FILL,n=null){return Le.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function I6(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,r=e.width,i=n%da,a=(n-i)/da,s=i===0?a:a+1,o=t.createImageData(r,da);let c=0,u;const f=e.data,h=o.data;let g,y,w,S;if(e.kind===M0.GRAYSCALE_1BPP){const E=f.byteLength,C=new Uint32Array(h.buffer,0,h.byteLength>>2),M=C.length,R=r+7>>3,D=4294967295,I=jr.isLittleEndian?4278190080:255;for(g=0;g<s;g++){for(w=g<a?da:i,u=0,y=0;y<w;y++){const P=E-c;let k=0;const U=P>R?r:P*8-7,B=U&-8;let V=0,H=0;for(;k<B;k+=8)H=f[c++],C[u++]=H&128?D:I,C[u++]=H&64?D:I,C[u++]=H&32?D:I,C[u++]=H&16?D:I,C[u++]=H&8?D:I,C[u++]=H&4?D:I,C[u++]=H&2?D:I,C[u++]=H&1?D:I;for(;k<U;k++)V===0&&(H=f[c++],V=128),C[u++]=H&V?D:I,V>>=1}for(;u<M;)C[u++]=0;t.putImageData(o,0,g*da)}}else if(e.kind===M0.RGBA_32BPP){for(y=0,S=r*da*4,g=0;g<a;g++)h.set(f.subarray(c,c+S)),c+=S,t.putImageData(o,0,y),y+=da;g<s&&(S=r*i*4,h.set(f.subarray(c,c+S)),t.putImageData(o,0,y))}else if(e.kind===M0.RGB_24BPP)for(w=da,S=r*w,g=0;g<s;g++){for(g>=a&&(w=i,S=r*w),u=0,y=S;y--;)h[u++]=f[c++],h[u++]=f[c++],h[u++]=f[c++],h[u++]=255;t.putImageData(o,0,g*da)}else throw new Error(`bad image kind: ${e.kind}`)}function D6(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,i=n%da,a=(n-i)/da,s=i===0?a:a+1,o=t.createImageData(r,da);let c=0;const u=e.data,f=o.data;for(let h=0;h<s;h++){const g=h<a?da:i;({srcPos:c}=GCe({src:u,srcPos:c,dest:f,width:r,height:g,nonBlackColor:0})),t.putImageData(o,0,h*da)}}function Ky(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)t[r]!==void 0&&(e[r]=t[r]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function y1(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function L6(t,e){if(e)return!0;Le.singularValueDecompose2dScale(t,Wa);const n=Math.fround(Ao.pixelRatio*qc.PDF_TO_CSS_UNITS);return Wa[0]<=n&&Wa[1]<=n}const YCe=["butt","round","square"],KCe=["miter","round","bevel"],XCe={},O6={};var _o,jP,FP,UP;const SL=class SL{constructor(e,n,r,i,a,{optionalContentConfig:s,markedContentStack:o=null},c,u,f){j(this,_o);this.ctx=e,this.current=new k6(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=s,this.cachedCanvases=new WCe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,n,r=null){var i;return typeof n=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):r}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=o,r){const c=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Cn(this.compositeCtx))}this.ctx.save(),y1(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Cn(this.ctx)}executeOperatorList(e,n,r,i,a){var C;const s=e.argsArray,o=e.fnArray;let c=n||0;const u=s.length;if(u===c)return c;const f=u-c>P6&&typeof r=="function",h=f?Date.now()+qCe:0;let g=0;const y=this.commonObjs,w=this.objs;let S,E;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,r),c;if(!a||a(c))if(S=o[c],E=s[c]??null,S!==Sv.dependency)E===null?this[S](c):this[S](c,...E);else for(const M of E){(C=this.dependencyTracker)==null||C.recordNamedData(M,c);const R=M.startsWith("g_")?y:w;if(!R.has(M))return R.get(M,r),c}if(c++,c===u)return c;if(f&&++g>P6){if(Date.now()>h)return r(),c;g=0}}}endDrawing(){F(this,_o,jP).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),F(this,_o,FP).call(this)}_scaleImage(e,n){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(n[0],n[1]),1),s=Math.max(Math.hypot(n[2],n[3]),1),o=r,c=i,u="prescale1",f,h;for(;a>2&&o>1||s>2&&c>1;){let g=o,y=c;a>2&&o>1&&(g=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),a/=o/g),s>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,s/=c/y),f=this.cachedCanvases.getCanvas(u,g,y),h=f.context,h.clearRect(0,0,g,y),h.drawImage(e,0,0,o,c,0,0,g,y),e=f.canvas,o=g,c=y,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:c}}_createMaskCanvas(e,n){var V,H;const r=this.ctx,{width:i,height:a}=n,s=this.current.fillColor,o=this.current.patternFill,c=Cn(r);let u,f,h,g;if((n.bitmap||n.data)&&n.count>1){const G=n.bitmap||n.data.buffer;f=JSON.stringify(o?c:[c.slice(0,4),s]),u=this._cachedBitmapsMap.get(G),u||(u=new Map,this._cachedBitmapsMap.set(G,u));const Q=u.get(f);if(Q&&!o){const W=Math.round(Math.min(c[0],c[2])+c[4]),ee=Math.round(Math.min(c[1],c[3])+c[5]);return(V=this.dependencyTracker)==null||V.recordDependencies(e,vs.transformAndFill),{canvas:Q,offsetX:W,offsetY:ee}}h=Q}h||(g=this.cachedCanvases.getCanvas("maskCanvas",i,a),D6(g.context,n));let y=Le.transform(c,[1/i,0,0,-1/a,0,0]);y=Le.transform(y,[1,0,0,1,0,-a]);const w=Nm.slice();Le.axialAlignedBoundingBox([0,0,i,a],y,w);const[S,E,C,M]=w,R=Math.round(C-S)||1,D=Math.round(M-E)||1,I=this.cachedCanvases.getCanvas("fillCanvas",R,D),P=I.context,k=S,U=E;P.translate(-k,-U),P.transform(...y),h||(h=this._scaleImage(g.canvas,Io(P)),h=h.img,u&&o&&u.set(f,h)),P.imageSmoothingEnabled=L6(Cn(P),n.interpolate),v1(P,h,0,0,h.width,h.height,0,0,i,a),P.globalCompositeOperation="source-in";const B=Le.transform(Io(P),[1,0,0,1,-k,-U]);return P.fillStyle=o?s.getPattern(r,this,B,ri.FILL,e):s,P.fillRect(0,0,i,a),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,I.canvas)),(H=this.dependencyTracker)==null||H.recordDependencies(e,vs.transformAndFill),{canvas:I.canvas,offsetX:Math.round(k),offsetY:Math.round(U)}}setLineWidth(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=YCe[n]}setLineJoin(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=KCe[n]}setMiterLimit(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,r){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=r)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){var r,i,a,s,o;for(const[c,u]of n)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(s=this.dependencyTracker)==null||s.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,n,r);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),Ky(this.suspendedCtx,s),VCe(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ky(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,i){const a=i[0],s=i[1],o=i[2]-a,c=i[3]-s;o===0||c===0||(this.genericComposeSMask(n.context,r,o,c,n.subtype,n.backdrop,n.transferMap,a,s,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,i,a,s,o,c,u,f,h){let g=e.canvas,y=c-f,w=u-h;if(s)if(y<0||w<0||y+r>g.width||w+i>g.height){const E=this.cachedCanvases.getCanvas("maskExtension",r,i),C=E.context;C.drawImage(g,-y,-w),C.globalCompositeOperation="destination-atop",C.fillStyle=s,C.fillRect(0,0,r,i),C.globalCompositeOperation="source-over",g=E.canvas,y=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(y,w,r,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(y,w,r,i),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),a==="Alpha"&&o?n.filter=this.filterFactory.addAlphaFilter(o):a==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(o));const S=new Path2D;S.rect(c,u,r,i),n.clip(S),n.globalCompositeOperation="destination-in",n.drawImage(g,y,w,r,i,c,u,r,i),n.restore()}save(e){var r;this.inSMaskMode&&Ky(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var n;if((n=this.dependencyTracker)==null||n.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ky(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,r,i,a,s,o){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(n,r,i,a,s,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r,i){let[a]=r;if(!i){a||(a=r[0]=new Path2D),this[n](e,a);return}if(this.dependencyTracker!==null){const s=n===Sv.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const s=r[0]=new Path2D;for(let o=0,c=a.length;o<c;)switch(a[o++]){case d1.moveTo:s.moveTo(a[o++],a[o++]);break;case d1.lineTo:s.lineTo(a[o++],a[o++]);break;case d1.curveTo:s.bezierCurveTo(a[o++],a[o++],a[o++],a[o++],a[o++],a[o++]);break;case d1.closePath:s.closePath();break;default:at(`Unrecognized drawing path operator: ${a[o-1]}`);break}a=s}Le.axialAlignedBoundingBox(i,Cn(this.ctx),this.current.minMax),this[n](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,r=!0){var s;const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const o=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,Io(i),ri.STROKE,e),o){const c=new Path2D;c.addPath(n,i.getTransform().invertSelf().multiplySelf(o)),n=c}this.rescaleAndStroke(n,!1),i.restore()}else this.rescaleAndStroke(n,!0);(s=this.dependencyTracker)==null||s.recordDependencies(e,vs.stroke),r&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(ri.STROKE,Cn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,r=!0){var u,f,h;const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let o=!1;if(s){const g=a.isModifyingCurrentTransform()?i.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),i.save(),i.fillStyle=a.getPattern(i,this,Io(i),ri.FILL,e),g){const y=new Path2D;y.addPath(n,i.getTransform().invertSelf().multiplySelf(g)),n=y}o=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(n,"evenodd"),this.pendingEOFill=!1):i.fill(n)),(f=this.dependencyTracker)==null||f.recordDependencies(e,vs.fill),o&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),r&&this.consumePath(e,n,c)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){var r;this.ctx.fill(n),(r=this.dependencyTracker)==null||r.recordDependencies(e,vs.rawFillPath).recordOperation(e)}clip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=XCe}eoClip(e){var n;(n=this.dependencyTracker)==null||n.recordFutureForcedDependency("clipMode",e),this.pendingClip=O6}beginText(e){var n;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(n=this.dependencyTracker)==null||n.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;n!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(n!==void 0){const i=new Path2D,a=r.getTransform().invertSelf();for(const{transform:s,x:o,y:c,fontSize:u,path:f}of n)f&&i.addPath(f,new DOMMatrix(s).preMultiplySelf(a).translate(o,c).scale(u,-u));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,r){var h,g;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const i=this.commonObjs.get(n),a=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(a.fontMatrix=i.fontMatrix||lP,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&at("Invalid font matrix for font "+n),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const s=i.loadedName||"sans-serif",o=((g=i.systemFontInfo)==null?void 0:g.css)||`"${s}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const u=i.italic?"italic":"normal";let f=r;r<R6?f=R6:r>M6&&(f=M6),this.current.fontSizeScale=r/f,this.ctx.font=`${u} ${c} ${f}px ${o}`}setTextRenderingMode(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,n,r){this.setLeading(e,-r),this.moveText(e,n,r)}setTextMatrix(e,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=n,r.textMatrixScale=Math.hypot(n[0],n[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var n;this.moveText(e,0,this.current.leading),(n=this.dependencyTracker)==null||n.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,n,r,i,a,s){var C,M,R,D;const o=this.ctx,c=this.current,u=c.font,f=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,g=f&Wr.FILL_STROKE_MASK,y=!!(f&Wr.ADD_TO_PATH_FLAG),w=c.patternFill&&!u.missingFile,S=c.patternStroke&&!u.missingFile;let E;if((u.disableFontFace||y||w||S)&&!u.missingFile&&(E=u.getPathGenerator(this.commonObjs,n)),E&&(u.disableFontFace||w||S)){o.save(),o.translate(r,i),o.scale(h,-h),(C=this.dependencyTracker)==null||C.recordCharacterBBox(e,o,u);let I;if(g===Wr.FILL||g===Wr.FILL_STROKE)if(a){I=o.getTransform(),o.setTransform(...a);const P=F(this,_o,UP).call(this,E,I,a);o.fill(P)}else o.fill(E);if(g===Wr.STROKE||g===Wr.FILL_STROKE)if(s){I||(I=o.getTransform()),o.setTransform(...s);const{a:P,b:k,c:U,d:B}=I,V=Le.inverseTransform(s),H=Le.transform([P,k,U,B,0,0],V);Le.singularValueDecompose2dScale(H,Wa),o.lineWidth*=Math.max(Wa[0],Wa[1])/h,o.stroke(F(this,_o,UP).call(this,E,I,s))}else o.lineWidth/=h,o.stroke(E);o.restore()}else(g===Wr.FILL||g===Wr.FILL_STROKE)&&(o.fillText(n,r,i),(M=this.dependencyTracker)==null||M.recordCharacterBBox(e,o,u,h,r,i,()=>o.measureText(n))),(g===Wr.STROKE||g===Wr.FILL_STROKE)&&(this.dependencyTracker&&((R=this.dependencyTracker)==null||R.recordCharacterBBox(e,o,u,h,r,i,()=>o.measureText(n)).recordDependencies(e,vs.stroke)),o.strokeText(n,r,i));y&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Cn(o),x:r,y:i,fontSize:h,path:E}),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,o,u,h,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<n.length;i+=4)if(n[i]>0&&n[i]<255){r=!0;break}return dt(this,"isFontSubpixelAAEnabled",r)}showText(e,n){var U,B,V,H;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,vs.showText).resetBBox(e),this.current.textRenderingMode&Wr.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,n),(U=this.dependencyTracker)==null||U.recordShowTextOperation(e);return}const a=r.fontSize;if(a===0){(B=this.dependencyTracker)==null||B.recordOperation(e);return}const s=this.ctx,o=r.fontSizeScale,c=r.charSpacing,u=r.wordSpacing,f=r.fontDirection,h=r.textHScale*f,g=n.length,y=i.vertical,w=y?1:-1,S=i.defaultVMetrics,E=a*r.fontMatrix[0],C=r.textRenderingMode===Wr.FILL&&!i.disableFontFace&&!r.patternFill;s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),f>0?s.scale(h,-1):s.scale(h,1);let M,R;if(r.patternFill){s.save();const G=r.fillColor.getPattern(s,this,Io(s),ri.FILL,e);M=Cn(s),s.restore(),s.fillStyle=G}if(r.patternStroke){s.save();const G=r.strokeColor.getPattern(s,this,Io(s),ri.STROKE,e);R=Cn(s),s.restore(),s.strokeStyle=G}let D=r.lineWidth;const I=r.textMatrixScale;if(I===0||D===0){const G=r.textRenderingMode&Wr.FILL_STROKE_MASK;(G===Wr.STROKE||G===Wr.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=I;if(o!==1&&(s.scale(o,o),D/=o),s.lineWidth=D,i.isInvalidPDFjsFont){const G=[];let Q=0;for(const ee of n)G.push(ee.unicode),Q+=ee.width;const W=G.join("");if(s.fillText(W,0,0),this.dependencyTracker!==null){const ee=s.measureText(W);this.dependencyTracker.recordBBox(e,this.ctx,-ee.actualBoundingBoxLeft,ee.actualBoundingBoxRight,-ee.actualBoundingBoxAscent,ee.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=Q*E*h,s.restore(),this.compose();return}let P=0,k;for(k=0;k<g;++k){const G=n[k];if(typeof G=="number"){P+=w*G*a/1e3;continue}let Q=!1;const W=(G.isSpace?u:0)+c,ee=G.fontChar,$=G.accent;let q,J,ae=G.width;if(y){const ne=G.vmetric||S,ue=-(G.vmetric?ne[1]:ae*.5)*E,me=ne[2]*E;ae=ne?-ne[0]:ae,q=ue/o,J=(P+me)/o}else q=P/o,J=0;let ye;if(i.remeasure&&ae>0){ye=s.measureText(ee);const ne=ye.width*1e3/a*o;if(ae<ne&&this.isFontSubpixelAAEnabled){const ue=ae/ne;Q=!0,s.save(),s.scale(ue,1),q/=ue}else ae!==ne&&(q+=(ae-ne)/2e3*a/o)}if(this.contentVisible&&(G.isInFont||i.missingFile)){if(C&&!$)s.fillText(ee,q,J),(V=this.dependencyTracker)==null||V.recordCharacterBBox(e,s,ye?{bbox:null}:i,a/o,q,J,()=>ye??s.measureText(ee));else if(this.paintChar(e,ee,q,J,M,R),$){const ne=q+a*$.offset.x/o,ue=J-a*$.offset.y/o;this.paintChar(e,$.fontChar,ne,ue,M,R)}}const Y=y?ae*E-W*f:ae*E+W*f;P+=Y,Q&&s.restore()}y?r.y-=P:r.x+=P*h,s.restore(),this.compose(),(H=this.dependencyTracker)==null||H.recordShowTextOperation(e)}showType3Text(e,n){const r=this.ctx,i=this.current,a=i.font,s=i.fontSize,o=i.fontDirection,c=a.vertical?1:-1,u=i.charSpacing,f=i.wordSpacing,h=i.textHScale*o,g=i.fontMatrix||lP,y=n.length,w=i.textRenderingMode===Wr.INVISIBLE;let S,E,C,M;if(w||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(h,o);const R=this.dependencyTracker;for(this.dependencyTracker=R?new pA(R,e):null,S=0;S<y;++S){if(E=n[S],typeof E=="number"){M=c*E*s/1e3,this.ctx.translate(M,0),i.x+=M*h;continue}const D=(E.isSpace?f:0)+u,I=a.charProcOperatorList[E.operatorListId];I?this.contentVisible&&(this.save(),r.scale(s,s),r.transform(...g),this.executeOperatorList(I),this.restore()):at(`Type3 character "${E.operatorListId}" is not available.`);const P=[E.width,0];Le.applyTransform(P,g),C=P[0]*s+D,r.translate(C,0),i.x+=C*h}r.restore(),R&&(this.dependencyTracker=R)}setCharWidth(e,n,r){}setCharWidthAndBounds(e,n,r,i,a,s,o){var u;const c=new Path2D;c.rect(i,a,s-i,o-a),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,i,s,a,o).recordClipBox(e,this.ctx,i,s,a,o),this.endPath(e)}getColorN_Pattern(e,n){let r;if(n[0]==="TilingPattern"){const i=this.baseTransform||Cn(this.ctx),a={createCanvasGraphics:(s,o)=>new SL(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new pA(this.dependencyTracker,o,!0):null)};r=new OP(n,this.ctx,a,i)}else r=this._getPattern(e,n[1],n[2]);return r}setStrokeColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,r=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=$Ce(this.getObject(e,n)),this.cachedPatterns.set(n,i)),r&&(i.matrix=r),i}shadingFill(e,n){var s;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,n);r.fillStyle=i.getPattern(r,this,Io(r),ri.SHADING,e);const a=Io(r);if(a){const{width:o,height:c}=r.canvas,u=Nm.slice();Le.axialAlignedBoundingBox([0,0,o,c],a,u);const[f,h,g,y]=u;this.ctx.fillRect(f,h,g-f,y-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(s=this.dependencyTracker)==null||s.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,vs.transform).recordDependencies(e,vs.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){sn("Should not call beginInlineImage")}beginImageData(){sn("Should not call beginImageData")}paintFormXObjectBegin(e,n,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=Cn(this.ctx),r)){Le.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[a,s,o,c]=r,u=new Path2D;u.rect(a,s,o-a,c-s),this.ctx.clip(u),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,a,o,s,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){var R;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;n.isolated||Z_("TODO: Support non-isolated groups."),n.knockout&&at("Knockout groups not supported.");const i=Cn(r);if(n.matrix&&r.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let a=Nm.slice();Le.axialAlignedBoundingBox(n.bbox,Cn(r),a);const s=[0,0,r.canvas.width,r.canvas.height];a=Le.intersect(a,s)||[0,0,0,0];const o=Math.floor(a[0]),c=Math.floor(a[1]),u=Math.max(Math.ceil(a[2])-o,1),f=Math.max(Math.ceil(a[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,f]);let h="groupAt"+this.groupLevel;n.smask&&(h+="_smask_"+this.smaskCounter++%2);const g=this.cachedCanvases.getCanvas(h,u,f),y=g.context;y.translate(-o,-c),y.transform(...i);let w=new Path2D;const[S,E,C,M]=n.bbox;if(w.rect(S,E,C-S,M-E),n.matrix){const D=new Path2D;D.addPath(w,new DOMMatrix(n.matrix)),w=D}y.clip(w),n.smask&&this.smaskStack.push({canvas:g.canvas,context:y,offsetX:o,offsetY:c,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(o,c),r.save()),Ky(r,y),this.ctx=y,(R=this.dependencyTracker)==null||R.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,n){var a;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=Cn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const o=Nm.slice();Le.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],s,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,n,r,i,a,s){if(F(this,_o,jP).call(this),y1(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],c=r[3]-r[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=c,Le.singularValueDecompose2dScale(Cn(this.ctx),Wa);const{viewportScale:u}=this,f=Math.ceil(o*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(f,h);const{canvas:g,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(n,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(Wa[0],0,0,-Wa[1],0,c*Wa[1]),y1(this.ctx)}else{y1(this.ctx),this.endPath(e);const u=new Path2D;u.rect(r[0],r[1],o,c),this.ctx.clip(u)}}this.current=new k6(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),F(this,_o,FP).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){var o;if(!this.contentVisible)return;const r=n.count;n=this.getObject(e,n.data,n),n.count=r;const i=this.ctx,a=this._createMaskCanvas(e,n),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r,i=0,a=0,s,o){var h,g,y;if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const c=this.ctx;c.save();const u=Cn(c);c.transform(r,i,a,s,0,0);const f=this._createMaskCanvas(e,n);c.setTransform(1,0,0,1,f.offsetX-u[4],f.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let w=0,S=o.length;w<S;w+=2){const E=Le.transform(u,[r,i,a,s,o[w],o[w+1]]);c.drawImage(f.canvas,E[4],E[5]),(g=this.dependencyTracker)==null||g.recordBBox(e,this.ctx,E[4],E[4]+f.canvas.width,E[5],E[5]+f.canvas.height)}c.restore(),this.compose(),(y=this.dependencyTracker)==null||y.recordOperation(e)}paintImageMaskXObjectGroup(e,n){var s,o,c;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;(s=this.dependencyTracker)==null||s.resetBBox(e).recordDependencies(e,vs.transformAndFill);for(const u of n){const{data:f,width:h,height:g,transform:y}=u,w=this.cachedCanvases.getCanvas("maskCanvas",h,g),S=w.context;S.save();const E=this.getObject(e,f,u);D6(S,E),S.globalCompositeOperation="source-in",S.fillStyle=a?i.getPattern(S,this,Io(r),ri.FILL,e):i,S.fillRect(0,0,h,g),S.restore(),r.save(),r.transform(...y),r.scale(1,-1),v1(r,w.canvas,0,0,h,g,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,r,0,h,0,g),r.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const r=this.getObject(e,n);if(!r){at("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,n,r,i,a){if(!this.contentVisible)return;const s=this.getObject(e,n);if(!s){at("Dependent image isn't ready yet");return}const o=s.width,c=s.height,u=[];for(let f=0,h=a.length;f<h;f+=2)u.push({transform:[r,0,0,i,a[f],a[f+1]],x:0,y:0,w:o,h:c});this.paintInlineImageXObjectGroup(e,s,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(n,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,n){var u;if(!this.contentVisible)return;const r=n.width,i=n.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/r,-1/i);let o;if(n.bitmap)o=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)o=n;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,i).context;I6(h,n),o=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(o,Io(a));a.imageSmoothingEnabled=L6(Cn(a),n.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,a,0,r,-i,0).recordDependencies(e,vs.imageXObject).recordOperation(e),v1(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,r){var s,o,c;if(!this.contentVisible)return;const i=this.ctx;let a;if(n.bitmap)a=n.bitmap;else{const u=n.width,f=n.height,g=this.cachedCanvases.getCanvas("inlineImage",u,f).context;I6(g,n),a=this.applyTransferMapsToCanvas(g)}(s=this.dependencyTracker)==null||s.resetBBox(e);for(const u of r)i.save(),i.transform(...u.transform),i.scale(1,-1),v1(i,a,u.x,u.y,u.w,u.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,i,0,1,-1,0),i.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var n;this.contentVisible&&((n=this.dependencyTracker)==null||n.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,vs.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,r){}beginMarkedContent(e,n){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var n;(n=this.dependencyTracker)==null||n.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,r){var s,o;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===O6?a.clip(n,"evenodd"):a.clip(n)),this.pendingClip=null,(s=this.dependencyTracker)==null||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Cn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:i,d:a}=this.ctx.getTransform();let s,o;if(r===0&&i===0){const c=Math.abs(n),u=Math.abs(a);if(c===u)if(e===0)s=o=1/c;else{const f=c*e;s=o=f<1?1/f:1}else if(e===0)s=1/c,o=1/u;else{const f=c*e,h=u*e;s=f<1?1/f:1,o=h<1?1/h:1}}else{const c=Math.abs(n*a-r*i),u=Math.hypot(n,r),f=Math.hypot(i,a);if(e===0)s=f/c,o=u/c;else{const h=e*c;s=f>h?f/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:r,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){r.lineWidth=(i||1)*a,r.stroke(e);return}const o=r.getLineDash();n&&r.save(),r.scale(a,s),_R.a=1/a,_R.d=1/s;const c=new Path2D;if(c.addPath(e,_R),o.length>0){const u=Math.max(a,s);r.setLineDash(o.map(f=>f/u)),r.lineDashOffset/=u}r.lineWidth=i||1,r.stroke(c),n&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};_o=new WeakSet,jP=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},FP=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}},UP=function(e,n,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),i};let Bm=SL;for(const t in Sv)Bm.prototype[t]!==void 0&&(Bm.prototype[Sv[t]]=Bm.prototype[t]);var gg,vg,Bb,yg,H1;const Mm=class Mm{constructor(e){j(this,yg);j(this,gg);j(this,vg);j(this,Bb);L(this,gg,e),L(this,vg,new DataView(m(this,gg))),L(this,Bb,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const u of Mm.strings){const f=n.encode(e[u]);r[u]=f,i+=4+f.length}const a=new ArrayBuffer(i),s=new Uint8Array(a),o=new DataView(a);let c=0;for(const u of Mm.strings){const f=r[u],h=f.length;o.setUint32(c,h),s.set(f,c+4),c+=4+h}return Ct(c===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return F(this,yg,H1).call(this,0)}get fontWeight(){return F(this,yg,H1).call(this,1)}get italicAngle(){return F(this,yg,H1).call(this,2)}};gg=new WeakMap,vg=new WeakMap,Bb=new WeakMap,yg=new WeakSet,H1=function(e){Ct(e<Mm.strings.length,"Invalid string index");let n=0;for(let i=0;i<e;i++)n+=m(this,vg).getUint32(n)+4;const r=m(this,vg).getUint32(n);return m(this,Bb).decode(new Uint8Array(m(this,gg),n+4,r))},Se(Mm,"strings",["fontFamily","fontWeight","italicAngle"]);let mA=Mm;var id,Yo,gh,vh,g0;const Pm=class Pm{constructor(e){j(this,vh);j(this,id);j(this,Yo);j(this,gh);L(this,id,e),L(this,Yo,new DataView(m(this,id))),L(this,gh,new TextDecoder)}static write(e){const n=new TextEncoder,r={};let i=0;for(const g of Pm.strings){const y=n.encode(e[g]);r[g]=y,i+=4+y.length}i+=4;let a,s,o=1+i;e.style&&(a=n.encode(e.style.style),s=n.encode(e.style.weight),o+=4+a.length+4+s.length);const c=new ArrayBuffer(o),u=new Uint8Array(c),f=new DataView(c);let h=0;f.setUint8(h++,e.guessFallback?1:0),f.setUint32(h,0),h+=4,i=0;for(const g of Pm.strings){const y=r[g],w=y.length;i+=4+w,f.setUint32(h,w),u.set(y,h+4),h+=4+w}return f.setUint32(h-i-4,i),e.style&&(f.setUint32(h,a.length),u.set(a,h+4),h+=4+a.length,f.setUint32(h,s.length),u.set(s,h+4),h+=4+s.length),Ct(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return m(this,Yo).getUint8(0)!==0}get css(){return F(this,vh,g0).call(this,0)}get loadedName(){return F(this,vh,g0).call(this,1)}get baseFontName(){return F(this,vh,g0).call(this,2)}get src(){return F(this,vh,g0).call(this,3)}get style(){let e=1;e+=4+m(this,Yo).getUint32(e);const n=m(this,Yo).getUint32(e),r=m(this,gh).decode(new Uint8Array(m(this,id),e+4,n));e+=4+n;const i=m(this,Yo).getUint32(e),a=m(this,gh).decode(new Uint8Array(m(this,id),e+4,i));return{style:r,weight:a}}};id=new WeakMap,Yo=new WeakMap,gh=new WeakMap,vh=new WeakSet,g0=function(e){Ct(e<Pm.strings.length,"Invalid string index");let n=5;for(let i=0;i<e;i++)n+=m(this,Yo).getUint32(n)+4;const r=m(this,Yo).getUint32(n);return m(this,gh).decode(new Uint8Array(m(this,id),n+4,r))},Se(Pm,"strings",["css","loadedName","baseFontName","src"]);let gA=Pm;var bg,xg,wg,Sg,Pa,Ko,Hb,Kt,Bn,Qs,z1,v0;const ct=class ct{constructor({data:e,extra:n}){j(this,Bn);j(this,Ko);j(this,Hb);j(this,Kt);L(this,Ko,e),L(this,Hb,new TextDecoder),L(this,Kt,new DataView(m(this,Ko))),n&&Object.assign(this,n)}get black(){return F(this,Bn,Qs).call(this,0)}get bold(){return F(this,Bn,Qs).call(this,1)}get disableFontFace(){return F(this,Bn,Qs).call(this,2)}get fontExtraProperties(){return F(this,Bn,Qs).call(this,3)}get isInvalidPDFjsFont(){return F(this,Bn,Qs).call(this,4)}get isType3Font(){return F(this,Bn,Qs).call(this,5)}get italic(){return F(this,Bn,Qs).call(this,6)}get missingFile(){return F(this,Bn,Qs).call(this,7)}get remeasure(){return F(this,Bn,Qs).call(this,8)}get vertical(){return F(this,Bn,Qs).call(this,9)}get ascent(){return F(this,Bn,z1).call(this,0)}get defaultWidth(){return F(this,Bn,z1).call(this,1)}get descent(){return F(this,Bn,z1).call(this,2)}get bbox(){let e=m(ct,xg);if(m(this,Kt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(m(this,Kt).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=m(ct,wg);if(m(this,Kt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(m(this,Kt).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=m(ct,Sg);if(m(this,Kt).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(m(this,Kt).getInt16(e,!0)),e+=2;return r}get fallbackName(){return F(this,Bn,v0).call(this,0)}get loadedName(){return F(this,Bn,v0).call(this,1)}get mimetype(){return F(this,Bn,v0).call(this,2)}get name(){return F(this,Bn,v0).call(this,3)}get data(){let e=m(ct,Pa);const n=m(this,Kt).getUint32(e);e+=4+n;const r=m(this,Kt).getUint32(e);e+=4+r;const i=m(this,Kt).getUint32(e);e+=4+i;const a=m(this,Kt).getUint32(e);if(a!==0)return new Uint8Array(m(this,Ko),e+4,a)}clearData(){let e=m(ct,Pa);const n=m(this,Kt).getUint32(e);e+=4+n;const r=m(this,Kt).getUint32(e);e+=4+r;const i=m(this,Kt).getUint32(e);e+=4+i;const a=m(this,Kt).getUint32(e);new Uint8Array(m(this,Ko),e+4,a).fill(0),m(this,Kt).setUint32(e,0)}get cssFontInfo(){let e=m(ct,Pa);const n=m(this,Kt).getUint32(e);e+=4+n;const r=m(this,Kt).getUint32(e);e+=4+r;const i=m(this,Kt).getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(m(this,Ko),e+4,i)),new mA(a.buffer)}get systemFontInfo(){let e=m(ct,Pa);const n=m(this,Kt).getUint32(e);e+=4+n;const r=m(this,Kt).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(m(this,Ko),e+4,r)),new gA(i.buffer)}static write(e){const n=e.systemFontInfo?gA.write(e.systemFontInfo):null,r=e.cssFontInfo?mA.write(e.cssFontInfo):null,i=new TextEncoder,a={};let s=0;for(const S of ct.strings)a[S]=i.encode(e[S]),s+=4+a[S].length;const o=m(ct,Pa)+4+s+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(o),u=new Uint8Array(c),f=new DataView(c);let h=0;const g=ct.bools.length;let y=0,w=0;for(let S=0;S<g;S++){const E=e[ct.bools[S]];y|=(E===void 0?0:E?2:1)<<w,w+=2,(w===8||S===g-1)&&(f.setUint8(h++,y),y=0,w=0)}Ct(h===m(ct,bg),"FontInfo.write: Boolean properties offset mismatch");for(const S of ct.numbers)f.setFloat64(h,e[S]),h+=8;if(Ct(h===m(ct,xg),"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(h++,4);for(const S of e.bbox)f.setInt16(h,S,!0),h+=2}else f.setUint8(h++,0),h+=8;if(Ct(h===m(ct,wg),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(h++,6);for(const S of e.fontMatrix)f.setFloat64(h,S,!0),h+=8}else f.setUint8(h++,0),h+=48;if(Ct(h===m(ct,Sg),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(h++,1);for(const S of e.defaultVMetrics)f.setInt16(h,S,!0),h+=2}else f.setUint8(h++,0),h+=6;Ct(h===m(ct,Pa),"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(m(ct,Pa),0),h+=4;for(const S of ct.strings){const E=a[S],C=E.length;f.setUint32(h,C),u.set(E,h+4),h+=4+C}if(f.setUint32(m(ct,Pa),h-m(ct,Pa)-4),!n)f.setUint32(h,0),h+=4;else{const S=n.byteLength;f.setUint32(h,S),Ct(h+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(n),h+4),h+=4+S}if(!r)f.setUint32(h,0),h+=4;else{const S=r.byteLength;f.setUint32(h,S),Ct(h+4+S<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(r),h+4),h+=4+S}return e.data===void 0?(f.setUint32(h,0),h+=4):(f.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Ct(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};bg=new WeakMap,xg=new WeakMap,wg=new WeakMap,Sg=new WeakMap,Pa=new WeakMap,Ko=new WeakMap,Hb=new WeakMap,Kt=new WeakMap,Bn=new WeakSet,Qs=function(e){Ct(e<ct.bools.length,"Invalid boolean index");const n=Math.floor(e/4),r=e*2%8,i=m(this,Kt).getUint8(n)>>r&3;return i===0?void 0:i===2},z1=function(e){return Ct(e<ct.numbers.length,"Invalid number index"),m(this,Kt).getFloat64(m(ct,bg)+e*8)},v0=function(e){Ct(e<ct.strings.length,"Invalid string index");let n=m(ct,Pa)+4;for(let a=0;a<e;a++)n+=m(this,Kt).getUint32(n)+4;const r=m(this,Kt).getUint32(n),i=new Uint8Array(r);return i.set(new Uint8Array(m(this,Ko),n+4,r)),m(this,Hb).decode(i)},Se(ct,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),Se(ct,"numbers",["ascent","defaultWidth","descent"]),Se(ct,"strings",["fallbackName","loadedName","mimetype","name"]),j(ct,bg,Math.ceil(ct.bools.length*2/8)),j(ct,xg,m(ct,bg)+ct.numbers.length*8),j(ct,wg,m(ct,xg)+1+8),j(ct,Sg,m(ct,wg)+1+48),j(ct,Pa,m(ct,Sg)+1+6);let BP=ct;var zb,$b;class ks{static get workerPort(){return m(this,zb)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");L(this,zb,e)}static get workerSrc(){return m(this,$b)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");L(this,$b,e)}}zb=new WeakMap,$b=new WeakMap,j(ks,zb,null),j(ks,$b,"");var Eg,Gb;class JCe{constructor({parsedData:e,rawData:n}){j(this,Eg);j(this,Gb);L(this,Eg,e),L(this,Gb,n)}getRaw(){return m(this,Gb)}get(e){return m(this,Eg).get(e)??null}[Symbol.iterator](){return m(this,Eg).entries()}}Eg=new WeakMap,Gb=new WeakMap;const bm=Symbol("INTERNAL");var qb,Vb,Wb,Ag;class QCe{constructor(e,{name:n,intent:r,usage:i,rbGroups:a}){j(this,qb,!1);j(this,Vb,!1);j(this,Wb,!1);j(this,Ag,!0);L(this,qb,!!(e&qa.DISPLAY)),L(this,Vb,!!(e&qa.PRINT)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(m(this,Wb))return m(this,Ag);if(!m(this,Ag))return!1;const{print:e,view:n}=this.usage;return m(this,qb)?(n==null?void 0:n.viewState)!=="OFF":m(this,Vb)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,n,r=!1){e!==bm&&sn("Internal method `_setVisible` called."),L(this,Wb,r),L(this,Ag,n)}}qb=new WeakMap,Vb=new WeakMap,Wb=new WeakMap,Ag=new WeakMap;var ad,Xt,_g,Cg,Yb,HP;class ZCe{constructor(e,n=qa.DISPLAY){j(this,Yb);j(this,ad,null);j(this,Xt,new Map);j(this,_g,null);j(this,Cg,null);if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,L(this,Cg,e.order);for(const r of e.groups)m(this,Xt).set(r.id,new QCe(n,r));if(e.baseState==="OFF")for(const r of m(this,Xt).values())r._setVisible(bm,!1);for(const r of e.on)m(this,Xt).get(r)._setVisible(bm,!0);for(const r of e.off)m(this,Xt).get(r)._setVisible(bm,!1);L(this,_g,this.getHash())}}isVisible(e){if(m(this,Xt).size===0)return!0;if(!e)return Z_("Optional content group not defined."),!0;if(e.type==="OCG")return m(this,Xt).has(e.id)?m(this,Xt).get(e.id).visible:(at(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return F(this,Yb,HP).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!m(this,Xt).has(n))return at(`Optional content group not found: ${n}`),!0;if(m(this,Xt).get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!m(this,Xt).has(n))return at(`Optional content group not found: ${n}`),!0;if(!m(this,Xt).get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!m(this,Xt).has(n))return at(`Optional content group not found: ${n}`),!0;if(!m(this,Xt).get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!m(this,Xt).has(n))return at(`Optional content group not found: ${n}`),!0;if(m(this,Xt).get(n).visible)return!1}return!0}return at(`Unknown optional content policy ${e.policy}.`),!0}return at(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){var a;const i=m(this,Xt).get(e);if(!i){at(`Optional content group not found: ${e}`);return}if(r&&n&&i.rbGroups.length)for(const s of i.rbGroups)for(const o of s)o!==e&&((a=m(this,Xt).get(o))==null||a._setVisible(bm,!1,!0));i._setVisible(bm,!!n,!0),L(this,ad,null)}setOCGState({state:e,preserveRB:n}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=m(this,Xt).get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,n);break;case"OFF":this.setVisibility(i,!1,n);break;case"Toggle":this.setVisibility(i,!a.visible,n);break}}L(this,ad,null)}get hasInitialVisibility(){return m(this,_g)===null||this.getHash()===m(this,_g)}getOrder(){return m(this,Xt).size?m(this,Cg)?m(this,Cg).slice():[...m(this,Xt).keys()]:null}getGroup(e){return m(this,Xt).get(e)||null}getHash(){if(m(this,ad)!==null)return m(this,ad);const e=new nK;for(const[n,r]of m(this,Xt))e.update(`${n}:${r.visible}`);return L(this,ad,e.hexdigest())}[Symbol.iterator](){return m(this,Xt).entries()}}ad=new WeakMap,Xt=new WeakMap,_g=new WeakMap,Cg=new WeakMap,Yb=new WeakSet,HP=function(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let i=1;i<n;i++){const a=e[i];let s;if(Array.isArray(a))s=F(this,Yb,HP).call(this,a);else if(m(this,Xt).has(a))s=m(this,Xt).get(a).visible;else return at(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"};class eTe{constructor(e,{disableRange:n=!1,disableStream:r=!1}){Ct(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,(a==null?void 0:a.length)>0){const c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(r),!0)});Ct(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var n,r,i,a;e.total===void 0?(r=(n=this._rangeReaders[0])==null?void 0:n.onProgress)==null||r.call(n,{loaded:e.loaded}):(a=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||a.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new tTe(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new nTe(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class tTe{constructor(e,n,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=tC(i)?i:null,this._queuedChunks=n||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nTe{constructor(e,n,r){this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function rTe(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let f=o(n);return f=unescape(f),f=c(f),f=u(f),a(f)}if(n=s(t),n){const f=u(n);return a(f)}if(n=r("filename","i").exec(t),n){n=n[1];let f=o(n);return f=u(f),a(f)}function r(f,h){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(f,h){if(f){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const g=new TextDecoder(f,{fatal:!0}),y=vw(h);h=g.decode(y),e=!1}catch{}}return h}function a(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function s(f){const h=[];let g;const y=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=y.exec(f))!==null;){let[,S,E,C]=g;if(S=parseInt(S,10),S in h){if(S===0)break;continue}h[S]=[E,C]}const w=[];for(let S=0;S<h.length&&S in h;++S){let[E,C]=h[S];C=o(C),E&&(C=unescape(C),S===0&&(C=c(C))),w.push(C)}return w.join("")}function o(f){if(f.startsWith('"')){const h=f.slice(1).split('\\"');for(let g=0;g<h.length;++g){const y=h[g].indexOf('"');y!==-1&&(h[g]=h[g].slice(0,y),h.length=g+1),h[g]=h[g].replaceAll(/\\(.)/g,"$1")}f=h.join('"')}return f}function c(f){const h=f.indexOf("'");if(h===-1)return f;const g=f.slice(0,h),w=f.slice(h+1).replace(/^[^']*'/,"");return i(g,w)}function u(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,g,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,E){return String.fromCharCode(parseInt(E,16))}),i(g,w);try{w=atob(w)}catch{}return i(g,w)})}return""}function mK(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const r in e){const i=e[r];i!==void 0&&n.append(r,i)}return n}function nC(t){var e;return((e=URL.parse(t))==null?void 0:e.origin)??null}function gK({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*n)||r||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function vK(t){const e=t.get("Content-Disposition");if(e){let n=rTe(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(tC(n))return n}return null}function ww(t,e){return new nb(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function yK(t){return t===200||t===206}function bK(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function xK(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(at(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class iTe{constructor(e){Se(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=mK(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new aTe(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new sTe(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class aTe{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const r=new Headers(e.headers),i=n.url;fetch(i,bK(r,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=nC(a.url),!yK(a.status))throw ww(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:o,suggestedLength:c}=gK({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=c||this._contentLength,this._filename=vK(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Gc("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:xK(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}class sTe{constructor(e,n,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${n}-${r-1}`);const s=i.url;fetch(s,bK(a,this._withCredentials,this._abortController)).then(o=>{const c=nC(o.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!yK(o.status))throw ww(o.status,s);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:xK(e),done:!1})}cancel(e){var n;(n=this._reader)==null||n.cancel(e),this._abortController.abort()}}const CR=200,TR=206;function oTe(t){const e=t.response;return typeof e!="string"?e:vw(e).buffer}class lTe{constructor({url:e,httpHeaders:n,withCredentials:r}){Se(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=mK(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[a,s]of this.headers)n.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=TR):i.expectedStatus=CR,n.responseType="arraybuffer",Ct(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,r),n.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,n.send(null),r}onProgress(e,n){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,n))}onStateChange(e,n){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const a=i.status||CR;if(!(a===CR&&r.expectedStatus===TR)&&a!==r.expectedStatus){r.onError(i.status);return}const o=oTe(i);if(a===TR){const c=i.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?r.onDone({begin:parseInt(u[1],10),chunk:o}):(at('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class cTe{constructor(e){this._source=e,this._manager=new lTe(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new uTe(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const r=new dTe(this._manager,e,n);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class uTe{constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=nC(n.responseURL);const r=n.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[c,...u]=o.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=gK({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=vK(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ww(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var n;(n=this.onProgress)==null||n.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class dTe{constructor(e,n,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var n;const e=nC((n=this._manager.getRequestXhr(this._requestId))==null?void 0:n.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=ww(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var n;this.isStreamingSupported||(n=this.onProgress)==null||n.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const fTe=/^[a-z][a-z0-9\-+.]+:/i;function hTe(t){if(fTe.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class pTe{constructor(e){this.source=e,this.url=hTe(e.url),Ct(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new mTe(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new gTe(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var n;(n=this._fullRequestReader)==null||n.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class mTe{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=ww(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Gc("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class gTe{constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:n,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Xy=Symbol("INITIAL_DATA");var ka,Kb,zP;class wK{constructor(){j(this,Kb);j(this,ka,Object.create(null))}get(e,n=null){if(n){const i=F(this,Kb,zP).call(this,e);return i.promise.then(()=>n(i.data)),null}const r=m(this,ka)[e];if(!r||r.data===Xy)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=m(this,ka)[e];return!!n&&n.data!==Xy}delete(e){const n=m(this,ka)[e];return!n||n.data===Xy?!1:(delete m(this,ka)[e],!0)}resolve(e,n=null){const r=F(this,Kb,zP).call(this,e);r.data=n,r.resolve()}clear(){var e;for(const n in m(this,ka)){const{data:r}=m(this,ka)[n];(e=r==null?void 0:r.bitmap)==null||e.close()}L(this,ka,Object.create(null))}*[Symbol.iterator](){for(const e in m(this,ka)){const{data:n}=m(this,ka)[e];n!==Xy&&(yield[e,n])}}}ka=new WeakMap,Kb=new WeakSet,zP=function(e){var n;return(n=m(this,ka))[e]||(n[e]={...Promise.withResolvers(),data:Xy})};const vTe=1e5,j6=30;var X6,sd,la,Xb,Jb,yh,cc,Qb,Zb,bh,Tg,Ng,od,Rg,ex,Mg,xh,tx,nx,Un,Pg,wh,rx,ld,kg,Wc,SK,EK,$P,Qa,$1,GP,AK,_K;let sb=(Un=class{constructor({textContentSource:e,container:n,viewport:r}){j(this,Wc);j(this,sd,Promise.withResolvers());j(this,la,null);j(this,Xb,!1);j(this,Jb,!!((X6=globalThis.FontInspector)!=null&&X6.enabled));j(this,yh,null);j(this,cc,null);j(this,Qb,0);j(this,Zb,0);j(this,bh,null);j(this,Tg,null);j(this,Ng,0);j(this,od,0);j(this,Rg,Object.create(null));j(this,ex,[]);j(this,Mg,null);j(this,xh,[]);j(this,tx,new WeakMap);j(this,nx,null);var c;if(e instanceof ReadableStream)L(this,Mg,e);else if(typeof e=="object")L(this,Mg,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');L(this,la,L(this,Tg,n)),L(this,od,r.scale*Ao.pixelRatio),L(this,Ng,r.rotation),L(this,cc,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:a,pageX:s,pageY:o}=r.rawDims;L(this,nx,[1,0,0,-1,-s,o+a]),L(this,Zb,i),L(this,Qb,a),F(c=Un,Qa,AK).call(c),qd(n,r),m(this,sd).promise.finally(()=>{m(Un,kg).delete(this),L(this,cc,null),L(this,Rg,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=jr.platform;return dt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{m(this,bh).read().then(({value:n,done:r})=>{if(r){m(this,sd).resolve();return}m(this,yh)??L(this,yh,n.lang),Object.assign(m(this,Rg),n.styles),F(this,Wc,SK).call(this,n.items),e()},m(this,sd).reject)};return L(this,bh,m(this,Mg).getReader()),m(Un,kg).add(this),e(),m(this,sd).promise}update({viewport:e,onBefore:n=null}){var a;const r=e.scale*Ao.pixelRatio,i=e.rotation;if(i!==m(this,Ng)&&(n==null||n(),L(this,Ng,i),qd(m(this,Tg),{rotation:i})),r!==m(this,od)){n==null||n(),L(this,od,r);const s={div:null,properties:null,ctx:F(a=Un,Qa,$1).call(a,m(this,yh))};for(const o of m(this,xh))s.properties=m(this,tx).get(o),s.div=o,F(this,Wc,$P).call(this,s)}}cancel(){var n;const e=new Gc("TextLayer task cancelled.");(n=m(this,bh))==null||n.cancel(e).catch(()=>{}),L(this,bh,null),m(this,sd).reject(e)}get textDivs(){return m(this,xh)}get textContentItemsStr(){return m(this,ex)}static cleanup(){if(!(m(this,kg).size>0)){m(this,Pg).clear();for(const{canvas:e}of m(this,wh).values())e.remove();m(this,wh).clear()}}},sd=new WeakMap,la=new WeakMap,Xb=new WeakMap,Jb=new WeakMap,yh=new WeakMap,cc=new WeakMap,Qb=new WeakMap,Zb=new WeakMap,bh=new WeakMap,Tg=new WeakMap,Ng=new WeakMap,od=new WeakMap,Rg=new WeakMap,ex=new WeakMap,Mg=new WeakMap,xh=new WeakMap,tx=new WeakMap,nx=new WeakMap,Pg=new WeakMap,wh=new WeakMap,rx=new WeakMap,ld=new WeakMap,kg=new WeakMap,Wc=new WeakSet,SK=function(e){var i,a;if(m(this,Xb))return;(a=m(this,cc)).ctx??(a.ctx=F(i=Un,Qa,$1).call(i,m(this,yh)));const n=m(this,xh),r=m(this,ex);for(const s of e){if(n.length>vTe){at("Ignoring additional textDivs for performance reasons."),L(this,Xb,!0);return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const o=m(this,la);L(this,la,document.createElement("span")),m(this,la).classList.add("markedContent"),s.id&&m(this,la).setAttribute("id",`${s.id}`),o.append(m(this,la))}else s.type==="endMarkedContent"&&L(this,la,m(this,la).parentNode);continue}r.push(s.str),F(this,Wc,EK).call(this,s)}},EK=function(e){var S;const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};m(this,xh).push(n);const i=Le.transform(m(this,nx),e.transform);let a=Math.atan2(i[1],i[0]);const s=m(this,Rg)[e.fontName];s.vertical&&(a+=Math.PI/2);let o=m(this,Jb)&&s.fontSubstitution||s.fontFamily;o=Un.fontFamilyMap.get(o)||o;const c=Math.hypot(i[2],i[3]),u=c*F(S=Un,Qa,_K).call(S,o,s,m(this,yh));let f,h;a===0?(f=i[4],h=i[5]-u):(f=i[4]+u*Math.sin(a),h=i[5]-u*Math.cos(a));const g="calc(var(--total-scale-factor) *",y=n.style;m(this,la)===m(this,Tg)?(y.left=`${(100*f/m(this,Zb)).toFixed(2)}%`,y.top=`${(100*h/m(this,Qb)).toFixed(2)}%`):(y.left=`${g}${f.toFixed(2)}px)`,y.top=`${g}${h.toFixed(2)}px)`),y.fontSize=`${g}${(m(Un,ld)*c).toFixed(2)}px)`,y.fontFamily=o,r.fontSize=c,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,m(this,Jb)&&(n.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),C=Math.abs(e.transform[3]);E!==C&&Math.max(E,C)/Math.min(E,C)>1.5&&(w=!0)}if(w&&(r.canvasWidth=s.vertical?e.height:e.width),m(this,tx).set(n,r),m(this,cc).div=n,m(this,cc).properties=r,F(this,Wc,$P).call(this,m(this,cc)),r.hasText&&m(this,la).append(n),r.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),m(this,la).append(E)}},$P=function(e){var o;const{div:n,properties:r,ctx:i}=e,{style:a}=n;let s="";if(m(Un,ld)>1&&(s=`scale(${1/m(Un,ld)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:c}=a,{canvasWidth:u,fontSize:f}=r;F(o=Un,Qa,GP).call(o,i,f*m(this,od),c);const{width:h}=i.measureText(n.textContent);h>0&&(s=`scaleX(${u*m(this,od)/h}) ${s}`)}r.angle!==0&&(s=`rotate(${r.angle}deg) ${s}`),s.length>0&&(a.transform=s)},Qa=new WeakSet,$1=function(e=null){let n=m(this,wh).get(e||(e=""));if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),m(this,wh).set(e,n),m(this,rx).set(n,{size:0,family:""})}return n},GP=function(e,n,r){const i=m(this,rx).get(e);n===i.size&&r===i.family||(e.font=`${n}px ${r}`,i.size=n,i.family=r)},AK=function(){if(m(this,ld)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),L(this,ld,e.getBoundingClientRect().height),e.remove()},_K=function(e,n,r){const i=m(this,Pg).get(e);if(i)return i;const a=F(this,Qa,$1).call(this,r);a.canvas.width=a.canvas.height=j6,F(this,Qa,GP).call(this,a,j6,e);const s=a.measureText(""),o=s.fontBoundingBoxAscent,c=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let u=.8;return o?u=o/(o+c):(jr.platform.isFirefox&&at("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?u=n.ascent:n.descent&&(u=1+n.descent)),m(this,Pg).set(e,u),u},j(Un,Qa),j(Un,Pg,new Map),j(Un,wh,new Map),j(Un,rx,new WeakMap),j(Un,ld,null),j(Un,kg,new Set),Un);const yTe=100;function fL(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new qP,{docId:n}=e,r=t.url?CCe(t.url):null,i=t.data?TCe(t.data):null,a=t.httpHeaders||null,s=t.withCredentials===!0,o=t.password??null,c=t.range instanceof hL?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let f=t.worker instanceof Ev?t.worker:null;const h=t.verbosity,g=typeof t.docBaseUrl=="string"&&!bw(t.docBaseUrl)?t.docBaseUrl:null,y=h1(t.cMapUrl),w=t.cMapPacked!==!1,S=t.CMapReaderFactory||(ji?DCe:E6),E=h1(t.iccUrl),C=h1(t.standardFontDataUrl),M=t.StandardFontDataFactory||(ji?LCe:A6),R=h1(t.wasmUrl),D=t.WasmFactory||(ji?OCe:_6),I=t.stopAtErrors!==!0,P=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,k=t.isEvalSupported!==!1,U=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!ji,B=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!ji&&(jr.platform.isFirefox||!globalThis.chrome),V=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,H=typeof t.disableFontFace=="boolean"?t.disableFontFace:ji,G=t.fontExtraProperties===!0,Q=t.enableXfa===!0,W=t.ownerDocument||globalThis.document,ee=t.disableRange===!0,$=t.disableStream===!0,q=t.disableAutoFetch===!0,J=t.pdfBug===!0,ae=t.CanvasFactory||(ji?ICe:MCe),ye=t.FilterFactory||(ji?kCe:PCe),Y=t.enableHWA===!0,ne=t.useWasm!==!1,ue=c?c.length:t.length??NaN,me=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!ji&&!H,xe=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(S===E6&&M===A6&&D===_6&&y&&C&&R&&a0(y,document.baseURI)&&a0(C,document.baseURI)&&a0(R,document.baseURI)),Me=null;oCe(h);const Ce={canvasFactory:new ae({ownerDocument:W,enableHWA:Y}),filterFactory:new ye({docId:n,ownerDocument:W}),cMapReaderFactory:xe?null:new S({baseUrl:y,isCompressed:w}),standardFontDataFactory:xe?null:new M({baseUrl:C}),wasmFactory:xe?null:new D({baseUrl:R})};f||(f=Ev.create({verbosity:h,port:ks.workerPort}),e._worker=f);const pt={docId:n,apiVersion:"5.4.296",data:i,password:o,disableAutoFetch:q,rangeChunkSize:u,length:ue,docBaseUrl:g,enableXfa:Q,evaluatorOptions:{maxImageSize:P,disableFontFace:H,ignoreErrors:I,isEvalSupported:k,isOffscreenCanvasSupported:U,isImageDecoderSupported:B,canvasMaxAreaInBytes:V,fontExtraProperties:G,useSystemFonts:me,useWasm:ne,useWorkerFetch:xe,cMapUrl:y,iccUrl:E,standardFontDataUrl:C,wasmUrl:R}},he={ownerDocument:W,pdfBug:J,styleElement:Me,loadingParams:{disableAutoFetch:q,enableXfa:Q}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const He=f.messageHandler.sendWithPromise("GetDocRequest",pt,i?[i.buffer]:null);let ke;if(c)ke=new eTe(c,{disableRange:ee,disableStream:$});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const te=a0(r)?iTe:ji?pTe:cTe;ke=new te({url:r,length:ue,httpHeaders:a,withCredentials:s,rangeChunkSize:u,disableRange:ee,disableStream:$})}return He.then(te=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ee=new d0(n,te,f.port),be=new wTe(Ee,e,ke,he,Ce,Y);e._transport=be,Ee.send("Ready",null)})}).catch(e._capability.reject),e}var kA;const IA=class IA{constructor(){Se(this,"_capability",Promise.withResolvers());Se(this,"_transport",null);Se(this,"_worker",null);Se(this,"docId",`d${lr(IA,kA)._++}`);Se(this,"destroyed",!1);Se(this,"onPassword",null);Se(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,n,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((n=this._transport)==null?void 0:n.destroy())}catch(a){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,a}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};kA=new WeakMap,j(IA,kA,0);let qP=IA;var Sh,ix,ax,sx,ox,J6;let hL=(J6=class{constructor(e,n,r=!1,i=null){j(this,Sh,Promise.withResolvers());j(this,ix,[]);j(this,ax,[]);j(this,sx,[]);j(this,ox,[]);this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){m(this,ox).push(e)}addProgressListener(e){m(this,sx).push(e)}addProgressiveReadListener(e){m(this,ax).push(e)}addProgressiveDoneListener(e){m(this,ix).push(e)}onDataRange(e,n){for(const r of m(this,ox))r(e,n)}onDataProgress(e,n){m(this,Sh).promise.then(()=>{for(const r of m(this,sx))r(e,n)})}onDataProgressiveRead(e){m(this,Sh).promise.then(()=>{for(const n of m(this,ax))n(e)})}onDataProgressiveDone(){m(this,Sh).promise.then(()=>{for(const e of m(this,ix))e()})}transportReady(){m(this,Sh).resolve()}requestDataRange(e,n){sn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Sh=new WeakMap,ix=new WeakMap,ax=new WeakMap,sx=new WeakMap,ox=new WeakMap,J6);class bTe{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return dt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var uc,Eh,y0;class xTe{constructor(e,n,r,i=!1){j(this,Eh);j(this,uc,!1);this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new g6:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new wK,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new yw({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return dt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:n=e.canvas,viewport:r,intent:i="display",annotationMode:a=ol.ENABLE,transform:s=null,background:o=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:f=null,printAnnotationStorage:h=null,isEditing:g=!1,recordOperations:y=!1,operationsFilter:w=null}){var B,V,H;(B=this._stats)==null||B.time("Overall");const S=this._transport.getRenderingIntent(i,a,h,g),{renderingIntent:E,cacheKey:C}=S;L(this,uc,!1),c||(c=this._transport.getOptionalContentConfig(E));let M=this._intentStates.get(C);M||(M=Object.create(null),this._intentStates.set(C,M)),M.streamReaderCancelTimeout&&(clearTimeout(M.streamReaderCancelTimeout),M.streamReaderCancelTimeout=null);const R=!!(E&qa.PRINT);M.displayReadyCapability||(M.displayReadyCapability=Promise.withResolvers(),M.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(V=this._stats)==null||V.time("Page Request"),this._pumpOperatorList(S));const D=!!(this._pdfBug&&((H=globalThis.StepperManager)!=null&&H.enabled)),I=!this.recordedBBoxes&&(y||D),P=G=>{var Q,W;if(M.renderTasks.delete(k),I){const ee=(Q=k.gfx)==null?void 0:Q.dependencyTracker.take();ee&&(k.stepper&&k.stepper.setOperatorBBoxes(ee,k.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=ee))}R&&L(this,uc,!0),F(this,Eh,y0).call(this),G?(k.capability.reject(G),this._abortOperatorList({intentState:M,reason:G instanceof Error?G:new Error(G)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(W=globalThis.Stats)!=null&&W.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new VP({callback:P,params:{canvas:n,canvasContext:e,dependencyTracker:I?new FCe(n,M.operatorList.length,D):null,viewport:r,transform:s,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:M.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:w});(M.renderTasks||(M.renderTasks=new Set)).add(k);const U=k.task;return Promise.all([M.displayReadyCapability.promise,c]).then(([G,Q])=>{var W;if(this.destroyed){P();return}if((W=this._stats)==null||W.time("Rendering"),!(Q.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:G,optionalContentConfig:Q}),k.operatorListChanged()}).catch(P),U}getOperatorList({intent:e="display",annotationMode:n=ol.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var u;function a(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(c))}const s=this._transport.getRenderingIntent(e,n,r,i,!0);let o=this._intentStates.get(s.cacheKey);o||(o=Object.create(null),this._intentStates.set(s.cacheKey,o));let c;return o.opListReadCapability||(c=Object.create(null),c.operatorListChanged=a,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(c),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(s)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>rb.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,i){function a(){s.read().then(function({value:c,done:u}){if(u){r(o);return}o.lang??(o.lang=c.lang),Object.assign(o.styles,c.styles),o.items.push(...c.items),a()},i)}const s=n.getReader(),o={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),L(this,uc,!1),Promise.all(e)}cleanup(e=!1){L(this,uc,!0);const n=F(this,Eh,y0).call(this);return e&&n&&this._stats&&(this._stats=new g6),n}_startRenderPage(e,n){var i,a;const r=this._intentStates.get(n);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(a=r.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&F(this,Eh,y0).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:s}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:a,modifiedIds:i},s).getReader(),u=this._intentStates.get(n);u.streamReader=c;const f=()=>{c.read().then(({value:h,done:g})=>{if(g){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),f())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const g of u.renderTasks)g.operatorListChanged();F(this,Eh,y0).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};f()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof eC){let i=yTe;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new Gc(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}uc=new WeakMap,Eh=new WeakSet,y0=function(){if(!m(this,uc)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),L(this,uc,!1),!0};var cd,ao,dc,Ah,DA,_h,Ch,Bi,G1,CK,TK,b0,Ig,q1;const gn=class gn{constructor({name:e=null,port:n=null,verbosity:r=lCe()}={}){j(this,Bi);j(this,cd,Promise.withResolvers());j(this,ao,null);j(this,dc,null);j(this,Ah,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,n){if(m(gn,Ch).has(n))throw new Error("Cannot use more than one PDFWorker per port.");m(gn,Ch).set(n,this),F(this,Bi,CK).call(this,n)}else F(this,Bi,TK).call(this)}get promise(){return m(this,cd).promise}get port(){return m(this,dc)}get messageHandler(){return m(this,ao)}destroy(){var e,n;this.destroyed=!0,(e=m(this,Ah))==null||e.terminate(),L(this,Ah,null),m(gn,Ch).delete(m(this,dc)),L(this,dc,null),(n=m(this,ao))==null||n.destroy(),L(this,ao,null)}static create(e){const n=m(this,Ch).get(e==null?void 0:e.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new gn(e)}static get workerSrc(){if(ks.workerSrc)return ks.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return dt(this,"_setupFakeWorkerGlobal",(async()=>m(this,Ig,q1)?m(this,Ig,q1):(await import(this.workerSrc)).WorkerMessageHandler)())}};cd=new WeakMap,ao=new WeakMap,dc=new WeakMap,Ah=new WeakMap,DA=new WeakMap,_h=new WeakMap,Ch=new WeakMap,Bi=new WeakSet,G1=function(){m(this,cd).resolve(),m(this,ao).send("configure",{verbosity:this.verbosity})},CK=function(e){L(this,dc,e),L(this,ao,new d0("main","worker",e)),m(this,ao).on("ready",()=>{}),F(this,Bi,G1).call(this)},TK=function(){if(m(gn,_h)||m(gn,Ig,q1)){F(this,Bi,b0).call(this);return}let{workerSrc:e}=gn;try{gn._isSameOrigin(window.location,e)||(e=gn._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new d0("main","worker",n),i=()=>{a.abort(),r.destroy(),n.terminate(),this.destroyed?m(this,cd).reject(new Error("Worker was destroyed")):F(this,Bi,b0).call(this)},a=new AbortController;n.addEventListener("error",()=>{m(this,Ah)||i()},{signal:a.signal}),r.on("test",o=>{if(a.abort(),this.destroyed||!o){i();return}L(this,ao,r),L(this,dc,n),L(this,Ah,n),F(this,Bi,G1).call(this)}),r.on("ready",o=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{F(this,Bi,b0).call(this)}});const s=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};s();return}catch{Z_("The worker has been disabled.")}F(this,Bi,b0).call(this)},b0=function(){m(gn,_h)||(at("Setting up fake worker."),L(gn,_h,!0)),gn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){m(this,cd).reject(new Error("Worker was destroyed"));return}const n=new RCe;L(this,dc,n);const r=`fake${lr(gn,DA)._++}`,i=new d0(r+"_worker",r,n);e.setup(i,n),L(this,ao,new d0(r,r+"_worker",n)),F(this,Bi,G1).call(this)}).catch(e=>{m(this,cd).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Ig=new WeakSet,q1=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},j(gn,Ig),j(gn,DA,0),j(gn,_h,!1),j(gn,Ch,new WeakMap),ji&&(L(gn,_h,!0),ks.workerSrc||(ks.workerSrc="./pdf.worker.mjs")),gn._isSameOrigin=(e,n)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(n,r);return r.origin===i.origin},gn._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},gn.fromPort=e=>{if(vCe("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return gn.create(e)};let Ev=gn;var fc,Xo,Dg,Lg,hc,Th,x0;class wTe{constructor(e,n,r,i,a,s){j(this,Th);j(this,fc,new Map);j(this,Xo,new Map);j(this,Dg,new Map);j(this,Lg,new Map);j(this,hc,null);this.messageHandler=e,this.loadingTask=n,this.commonObjs=new wK,this.fontLoader=new ACe({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return dt(this,"annotationStorage",new cL)}getRenderingIntent(e,n=ol.ENABLE,r=null,i=!1,a=!1){let s=qa.DISPLAY,o=RP;switch(e){case"any":s=qa.ANY;break;case"display":break;case"print":s=qa.PRINT;break;default:at(`getRenderingIntent - invalid intent: ${e}`)}const c=s&qa.PRINT&&r instanceof iK?r:this.annotationStorage;switch(n){case ol.DISABLE:s+=qa.ANNOTATIONS_DISABLE;break;case ol.ENABLE:break;case ol.ENABLE_FORMS:s+=qa.ANNOTATIONS_FORMS;break;case ol.ENABLE_STORAGE:s+=qa.ANNOTATIONS_STORAGE,o=c.serializable;break;default:at(`getRenderingIntent - invalid annotationMode: ${n}`)}i&&(s+=qa.IS_EDITING),a&&(s+=qa.OPLIST);const{ids:u,hash:f}=c.modifiedIds,h=[s,o.hash,f];return{renderingIntent:s,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=m(this,hc))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of m(this,Xo).values())e.push(i._destroy());m(this,Xo).clear(),m(this,Dg).clear(),m(this,Lg).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{var i,a;this.commonObjs.clear(),this.fontLoader.clear(),m(this,fc).clear(),this.filterFactory.destroy(),sb.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Gc("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{Ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Ct(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&((o=n.onProgress)==null||o.call(n,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=n.onProgress)==null||u.call(n,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(r,i)=>{Ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:o}){if(o){i.close();return}Ct(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new bTe(r,this))}),e.on("DocException",r=>{n._capability.reject(na(r))}),e.on("PasswordRequest",r=>{L(this,hc,Promise.withResolvers());try{if(!n.onPassword)throw na(r);const i=a=>{a instanceof Error?m(this,hc).reject(a):m(this,hc).resolve({password:a})};n.onPassword(i,r.code)}catch(i){m(this,hc).reject(i)}return m(this,hc).promise}),e.on("DataLoaded",r=>{var i;(i=n.onProgress)==null||i.call(n,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;m(this,Xo).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,a])=>{var s;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const h=a.error;at(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const o=new BP(a),c=this._params.pdfBug&&((s=globalThis.FontInspector)!=null&&s.enabled)?(h,g)=>globalThis.FontInspector.fontAdded(h,g):null,u=new _Ce(o,c,a.extra,a.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(r,u)});break;case"CopyLocalImage":const{imageRef:f}=a;Ct(f,"The imageRef must be defined.");for(const h of m(this,Xo).values())for(const[,g]of h.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(r,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,a);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,a,s])=>{var c;if(this.destroyed)return;const o=m(this,Xo).get(i);if(!o.objs.has(r)){if(o._intentStates.size===0){(c=s==null?void 0:s.bitmap)==null||c.close();return}switch(a){case"Image":case"Pattern":o.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=n.onProgress)==null||i.call(n,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&at("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=m(this,Dg).get(n);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&m(this,Lg).set(a.refStr,e);const s=new xTe(n,a,this,this._params.pdfBug);return m(this,Xo).set(n,s),s});return m(this,Dg).set(n,i),i}getPageIndex(e){return MP(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return F(this,Th,x0).call(this,"GetFieldObjects")}hasJSActions(){return F(this,Th,x0).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return F(this,Th,x0).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return F(this,Th,x0).call(this,"GetOptionalContentConfig").then(n=>new ZCe(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=m(this,fc).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var a,s;return{info:i[0],metadata:i[1]?new JCe(i[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((s=this._fullReader)==null?void 0:s.contentLength)??null}});return m(this,fc).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of m(this,Xo).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),m(this,fc).clear(),this.filterFactory.destroy(!0),sb.cleanup()}}cachedPageNumber(e){if(!MP(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return m(this,Lg).get(n)??null}}fc=new WeakMap,Xo=new WeakMap,Dg=new WeakMap,Lg=new WeakMap,hc=new WeakMap,Th=new WeakSet,x0=function(e,n=null){const r=m(this,fc).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,n);return m(this,fc).set(e,i),i};var ud;class STe{constructor(e){j(this,ud,null);Se(this,"onContinue",null);Se(this,"onError",null);L(this,ud,e)}get promise(){return m(this,ud).capability.promise}cancel(e=0){m(this,ud).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=m(this,ud).operatorList;if(!e)return!1;const{annotationCanvasMap:n}=m(this,ud);return e.form||e.canvas&&(n==null?void 0:n.size)>0}}ud=new WeakMap;var dd,Nh;const jf=class jf{constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:o,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:f=!1,pdfBug:h=!1,pageColors:g=null,enableHWA:y=!1,operationsFilter:w=null}){j(this,dd,null);this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=o,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new STe(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=y,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){var c,u;if(this.cancelled)return;if(this._canvas){if(m(jf,Nh).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");m(jf,Nh).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:a,dependencyTracker:s}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Bm(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,n=0){var r,i,a;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),m(this,dd)&&(window.cancelAnimationFrame(m(this,dd)),L(this,dd,null)),m(jf,Nh).delete(this._canvas),e||(e=new eC(`Rendering cancelled, page ${this._pageIndex+1}`,n)),this.callback(e),(a=(i=this.task).onError)==null||a.call(i,e)}operatorListChanged(){var e,n;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(n=this.stepper)==null||n.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?L(this,dd,window.requestAnimationFrame(()=>{L(this,dd,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),m(jf,Nh).delete(this._canvas),this.callback())))}};dd=new WeakMap,Nh=new WeakMap,j(jf,Nh,new WeakSet);let VP=jf;const NK="5.4.296",RK="f56dc8601";var Ia,Rh,Og,dr,lx,jg,pc,cx,fd,so,ux,Jt,WP,YP,KP,If,MK,Du;const ra=class ra{constructor({editor:e=null,uiManager:n=null}){j(this,Jt);j(this,Ia,null);j(this,Rh,null);j(this,Og);j(this,dr,null);j(this,lx,!1);j(this,jg,!1);j(this,pc,null);j(this,cx);j(this,fd,null);j(this,so,null);var r,i;e?(L(this,jg,!1),L(this,pc,e)):L(this,jg,!0),L(this,so,(e==null?void 0:e._uiManager)||n),L(this,cx,m(this,so)._eventBus),L(this,Og,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=m(this,so))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),m(ra,ux)||L(ra,ux,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return dt(this,"_keyboardManager",new xw([[["Escape","mac+Escape"],ra.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ra.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ra.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ra.prototype._moveToPrevious],[["Home","mac+Home"],ra.prototype._moveToBeginning],[["End","mac+End"],ra.prototype._moveToEnd]]))}renderButton(){const e=L(this,Ia,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",m(this,pc)&&(e.ariaControls=`${m(this,pc).id}_colorpicker_dropdown`);const n=m(this,so)._signal;e.addEventListener("click",F(this,Jt,If).bind(this),{signal:n}),e.addEventListener("keydown",F(this,Jt,KP).bind(this),{signal:n});const r=L(this,Rh,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=m(this,Og),e.append(r),e}renderMainDropdown(){const e=L(this,dr,F(this,Jt,WP).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===m(this,Ia)){F(this,Jt,If).call(this,e);return}const n=e.target.getAttribute("data-color");n&&F(this,Jt,YP).call(this,n,e)}_moveToNext(e){var n,r;if(!m(this,Jt,Du)){F(this,Jt,If).call(this,e);return}if(e.target===m(this,Ia)){(n=m(this,dr).firstChild)==null||n.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var n,r;if(e.target===((n=m(this,dr))==null?void 0:n.firstChild)||e.target===m(this,Ia)){m(this,Jt,Du)&&this._hideDropdownFromKeyboard();return}m(this,Jt,Du)||F(this,Jt,If).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var n;if(!m(this,Jt,Du)){F(this,Jt,If).call(this,e);return}(n=m(this,dr).firstChild)==null||n.focus()}_moveToEnd(e){var n;if(!m(this,Jt,Du)){F(this,Jt,If).call(this,e);return}(n=m(this,dr).lastChild)==null||n.focus()}hideDropdown(){var e,n;(e=m(this,dr))==null||e.classList.add("hidden"),m(this,Ia).ariaExpanded="false",(n=m(this,fd))==null||n.abort(),L(this,fd,null)}_hideDropdownFromKeyboard(){var e;if(!m(this,jg)){if(!m(this,Jt,Du)){(e=m(this,pc))==null||e.unselect();return}this.hideDropdown(),m(this,Ia).focus({preventScroll:!0,focusVisible:m(this,lx)})}}updateColor(e){if(m(this,Rh)&&(m(this,Rh).style.backgroundColor=e),!m(this,dr))return;const n=m(this,so).highlightColors.values();for(const r of m(this,dr).children)r.ariaSelected=n.next().value===e.toUpperCase()}destroy(){var e,n;(e=m(this,Ia))==null||e.remove(),L(this,Ia,null),L(this,Rh,null),(n=m(this,dr))==null||n.remove(),L(this,dr,null)}};Ia=new WeakMap,Rh=new WeakMap,Og=new WeakMap,dr=new WeakMap,lx=new WeakMap,jg=new WeakMap,pc=new WeakMap,cx=new WeakMap,fd=new WeakMap,so=new WeakMap,ux=new WeakMap,Jt=new WeakSet,WP=function(){const e=document.createElement("div"),n=m(this,so)._signal;e.addEventListener("contextmenu",es,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),m(this,pc)&&(e.id=`${m(this,pc).id}_colorpicker_dropdown`);for(const[r,i]of m(this,so).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",m(ra,ux)[r]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===m(this,Og),a.addEventListener("click",F(this,Jt,YP).bind(this,i),{signal:n}),e.append(a)}return e.addEventListener("keydown",F(this,Jt,KP).bind(this),{signal:n}),e},YP=function(e,n){n.stopPropagation(),m(this,cx).dispatch("switchannotationeditorparams",{source:this,type:wt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},KP=function(e){ra._keyboardManager.exec(this,e)},If=function(e){if(m(this,Jt,Du)){this.hideDropdown();return}if(L(this,lx,e.detail===0),m(this,fd)||(L(this,fd,new AbortController),window.addEventListener("pointerdown",F(this,Jt,MK).bind(this),{signal:m(this,so).combinedSignal(m(this,fd))})),m(this,Ia).ariaExpanded="true",m(this,dr)){m(this,dr).classList.remove("hidden");return}const n=L(this,dr,F(this,Jt,WP).call(this));m(this,Ia).append(n)},MK=function(e){var n;(n=m(this,dr))!=null&&n.contains(e.target)||this.hideDropdown()},Du=function(){return m(this,dr)&&!m(this,dr).classList.contains("hidden")},j(ra,ux,null);let ob=ra;var Jo,dx,Fg,fx;const Ff=class Ff{constructor(e){j(this,Jo,null);j(this,dx,null);j(this,Fg,null);L(this,dx,e),L(this,Fg,e._uiManager),m(Ff,fx)||L(Ff,fx,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(m(this,Jo))return m(this,Jo);const{editorType:e,colorType:n,colorValue:r}=m(this,dx),i=L(this,Jo,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",m(Ff,fx)[e]),i.addEventListener("input",()=>{m(this,Fg).updateParams(n,i.value)},{signal:m(this,Fg)._signal}),i}update(e){m(this,Jo)&&(m(this,Jo).value=e)}destroy(){var e;(e=m(this,Jo))==null||e.remove(),L(this,Jo,null)}hideDropdown(){}};Jo=new WeakMap,dx=new WeakMap,Fg=new WeakMap,fx=new WeakMap,j(Ff,fx,null);let vA=Ff;function F6(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function Jy(t){return Math.max(0,Math.min(255,255*t))}class U6{static CMYK_G([e,n,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Jy(e),[e,e,e]}static G_HTML([e]){const n=F6(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(Jy)}static RGB_HTML(e){return`#${e.map(F6).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb([e,n,r,i]){return[Jy(1-Math.min(1,e+i)),Jy(1-Math.min(1,r+i)),Jy(1-Math.min(1,n+i))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const i=1-e,a=1-n,s=1-r,o=Math.min(i,a,s);return["CMYK",i,a,s,o]}}class ETe{create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${n}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){sn("Abstract method `_createSVG` called.")}}class lb extends ETe{_createSVG(e){return document.createElementNS(Bl,e)}}const ATe=9,pp=new WeakSet,_Te=new Date().getTimezoneOffset()*60*1e3;class B6{static create(e){switch(e.data.annotationType){case Vn.LINK:return new pL(e);case Vn.TEXT:return new TTe(e);case Vn.WIDGET:switch(e.data.fieldType){case"Tx":return new NTe(e);case"Btn":return e.data.radioButton?new IK(e):e.data.checkBox?new MTe(e):new PTe(e);case"Ch":return new kTe(e);case"Sig":return new RTe(e)}return new Ep(e);case Vn.POPUP:return new JP(e);case Vn.FREETEXT:return new FK(e);case Vn.LINE:return new DTe(e);case Vn.SQUARE:return new LTe(e);case Vn.CIRCLE:return new OTe(e);case Vn.POLYLINE:return new UK(e);case Vn.CARET:return new FTe(e);case Vn.INK:return new mL(e);case Vn.POLYGON:return new jTe(e);case Vn.HIGHLIGHT:return new BK(e);case Vn.UNDERLINE:return new UTe(e);case Vn.SQUIGGLY:return new BTe(e);case Vn.STRIKEOUT:return new HTe(e);case Vn.STAMP:return new HK(e);case Vn.FILEATTACHMENT:return new zTe(e);default:return new Rn(e)}}}var Mh,Ug,Ns,hx,XP;const EL=class EL{constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){j(this,hx);j(this,Mh,null);j(this,Ug,!1);j(this,Ns,null);this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,n&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return EL._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,n=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:i}=this.data;let a=-1/0,s=-1/0;if((n==null?void 0:n.length)>=8){for(let c=0;c<n.length;c+=8)n[c+1]>s?(s=n[c+1],a=n[c+2]):n[c+1]===s&&(a=Math.max(a,n[c+2]));return[a,s]}if((r==null?void 0:r.length)>=1){for(const c of r)for(let u=0,f=c.length;u<f;u+=2)c[u+1]>s?(s=c[u+1],a=c[u]):c[u+1]===s&&(a=Math.max(a,c[u]));if(a!==1/0)return[a,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-a)/r,e[1]=100*(e[1]-s)/i,e}get commentText(){var n,r,i;const{data:e}=this;return((r=(n=this.annotationStorage.getRawValue(`${tb}${e.id}`))==null?void 0:n.popup)==null?void 0:r.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:n}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:r})||this.annotationStorage.setValue(`${tb}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,n;(n=((e=m(this,Ns))==null?void 0:e.popup)||this.popup)==null||n.remove(),L(this,Ns,this.popup=null)}updateEdited(e){var a;if(!this.container)return;e.rect&&(m(this,Mh)||L(this,Mh,{rect:this.data.rect.slice(0)}));const{rect:n,popup:r}=e;n&&F(this,hx,XP).call(this,n);let i=((a=m(this,Ns))==null?void 0:a.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=m(this,Ns).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),L(this,Ns,null),this.popup=null))}resetEdited(){var e;m(this,Mh)&&(F(this,hx,XP).call(this,m(this,Mh).rect),(e=m(this,Ns))==null||e.popup.resetEdited(),L(this,Mh,null))}_createContainer(e){const{data:n,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",n.id),!(this instanceof Ep)&&!(this instanceof pL)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(a.title=n.alternativeText),n.noRotate&&a.classList.add("norotate"),!n.rect||this instanceof JP){const{rotation:S}=n;return!n.hasOwnCanvas&&S!==0&&this.setRotation(S,a),a}const{width:o,height:c}=this;if(!e&&n.borderStyle.width>0){s.borderWidth=`${n.borderStyle.width}px`;const S=n.borderStyle.horizontalCornerRadius,E=n.borderStyle.verticalCornerRadius;if(S>0||E>0){const M=`calc(${S}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;s.borderRadius=M}else if(this instanceof IK){const M=`calc(${o}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;s.borderRadius=M}switch(n.borderStyle.style){case pm.SOLID:s.borderStyle="solid";break;case pm.DASHED:s.borderStyle="dashed";break;case pm.BEVELED:at("Unimplemented border style: beveled");break;case pm.INSET:at("Unimplemented border style: inset");break;case pm.UNDERLINE:s.borderBottomStyle="solid";break}const C=n.borderColor||null;C?(L(this,Ug,!0),s.borderColor=Le.makeHexColor(C[0]|0,C[1]|0,C[2]|0)):s.borderWidth=0}const u=Le.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:f,pageHeight:h,pageX:g,pageY:y}=i.rawDims;s.left=`${100*(u[0]-g)/f}%`,s.top=`${100*(u[1]-y)/h}%`;const{rotation:w}=n;return n.hasOwnCanvas||w===0?(s.width=`${100*o/f}%`,s.height=`${100*c/h}%`):this.setRotation(w,a),a}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),n.style.width=`${100*a/r}%`,n.style.height=`${100*s/i}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,i)=>{const a=i.detail[n],s=a[0],o=a.slice(1);i.target.style[r]=U6[`${s}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:U6[`${s}_rgb`](o)})};return dt(this,"_commonActions",{display:n=>{const{display:r}=n.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const i of Object.keys(n.detail)){const a=e[i]||r[i];a==null||a(n)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[i,a]of Object.entries(n)){const s=r[i];if(s){const o={detail:{[i]:a},target:e};s(o),delete n[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,i,a]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,E,C,M]=e.subarray(2,6);if(i===S&&a===E&&n===C&&r===M)return}const{style:s}=this.container;let o;if(m(this,Ug)){const{borderColor:S,borderWidth:E}=s;s.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=i-n,u=a-r,{svgFactory:f}=this,h=f.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const g=f.createElement("defs");h.append(g);const y=f.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),g.append(y);for(let S=2,E=e.length;S<E;S+=8){const C=e[S],M=e[S+1],R=e[S+2],D=e[S+3],I=f.createElement("rect"),P=(R-n)/c,k=(a-M)/u,U=(C-R)/c,B=(M-D)/u;I.setAttribute("x",P),I.setAttribute("y",k),I.setAttribute("width",U),I.setAttribute("height",B),y.append(I),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${k}" width="${U}" height="${B}"/>`)}m(this,Ug)&&(o.push("</g></svg>')"),s.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${w})`}_createPopup(e=null){const{data:n}=this;let r,i;e?(r={str:e.text},i=e.date):(r=n.contentsObj,i=n.modificationDate);const a=L(this,Ns,new JP({data:{color:n.color,titleObj:n.titleObj,modificationDate:i,contentsObj:r,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(m(this,Ns)||this.popup||this.data.popupRef)}get extraPopupElement(){return m(this,Ns)}render(){sn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:o}of i){if(a===-1||s===n)continue;const c=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${s}"]`);if(u&&!pp.has(u)){at(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:c,domElement:u})}return r}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==n&&pp.has(i)&&r.push({id:s,exportValue:a,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Mh=new WeakMap,Ug=new WeakMap,Ns=new WeakMap,hx=new WeakSet,XP=function(e){const{container:{style:n},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:c}}}}=this;r==null||r.splice(0,4,...e),n.left=`${100*(e[0]-o)/a}%`,n.top=`${100*(s-e[3]+c)/s}%`,i===0?(n.width=`${100*(e[2]-e[0])/a}%`,n.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)};let Rn=EL;class CTe extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Ya,Df,PK,kK;class pL extends Rn{constructor(n,r=null){super(n,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});j(this,Ya);this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",n.id);let a=!1;return n.url?(r.addLinkAttributes(i,n.url,n.newWindow),a=!0):n.action?(this._bindNamedAction(i,n.action,n.overlaidText),a=!0):n.attachment?(F(this,Ya,PK).call(this,i,n.attachment,n.overlaidText,n.attachmentDest),a=!0):n.setOCGState?(F(this,Ya,kK).call(this,i,n.setOCGState,n.overlaidText),a=!0):n.dest?(this._bindLink(i,n.dest,n.overlaidText),a=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,n),a=!0),n.resetForm?(this._bindResetFormAction(i,n.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(i),this.container}_bindLink(n,r,i=""){n.href=this.linkService.getDestinationHash(r),n.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&F(this,Ya,Df).call(this),i&&(n.title=i)}_bindNamedAction(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(n.title=i),F(this,Ya,Df).call(this)}_bindJSAction(n,r){n.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(r.actions)){const s=i.get(a);s&&(n[s]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:a}}),!1})}r.overlaidText&&(n.title=r.overlaidText),n.onclick||(n.onclick=()=>!1),F(this,Ya,Df).call(this)}_bindResetFormAction(n,r){const i=n.onclick;if(i||(n.href=this.linkService.getAnchorUrl("")),F(this,Ya,Df).call(this),!this._fieldObjects){at('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(n.onclick=()=>!1);return}n.onclick=()=>{var h;i==null||i();const{fields:a,refs:s,include:o}=r,c=[];if(a.length!==0||s.length!==0){const g=new Set(s);for(const y of a){const w=this._fieldObjects[y]||[];for(const{id:S}of w)g.add(S)}for(const y of Object.values(this._fieldObjects))for(const w of y)g.has(w.id)===o&&c.push(w)}else for(const g of Object.values(this._fieldObjects))c.push(...g);const u=this.annotationStorage,f=[];for(const g of c){const{id:y}=g;switch(f.push(y),g.type){case"text":{const S=g.defaultValue||"";u.setValue(y,{value:S});break}case"checkbox":case"radiobutton":{const S=g.defaultValue===g.exportValues;u.setValue(y,{value:S});break}case"combobox":case"listbox":{const S=g.defaultValue||"";u.setValue(y,{value:S});break}default:continue}const w=document.querySelector(`[data-element-id="${y}"]`);if(w){if(!pp.has(w)){at(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;w.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}})),!1}}}Ya=new WeakSet,Df=function(){this.container.setAttribute("data-internal-link","")},PK=function(n,r,i="",a=null){n.href=this.linkService.getAnchorUrl(""),r.description?n.title=r.description:i&&(n.title=i),n.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(r.content,r.filename,a),!1},F(this,Ya,Df).call(this)},kK=function(n,r,i=""){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(n.title=i),F(this,Ya,Df).call(this)};class TTe extends Rn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Ep extends Rn{render(){return this.container}showElementAndHideCanvas(e){var n;this.data.hasOwnCanvas&&(((n=e.previousSibling)==null?void 0:n.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return jr.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,i,a){r.includes("mouse")?e.addEventListener(r,s=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(r,s=>{var o;if(r==="blur"){if(!n.focused||!s.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}a&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}}))})}_setEventListeners(e,n,r,i){var a,s,o;for(const[c,u]of r)(u==="Action"||(a=this.data.actions)!=null&&a[u])&&((u==="Focus"||u==="Blur")&&(n||(n={focused:!1})),this._setEventListener(e,n,c,u,i),u==="Focus"&&!((s=this.data.actions)!=null&&s.Blur)?this._setEventListener(e,n,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":Le.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||ATe,a=e.style;let s;const o=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),f=Math.round(u/(xR*i))||1,h=u/f;s=Math.min(i,c(h/xR))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);s=Math.min(i,c(u/xR))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=Le.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class NTe extends Ep{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[n]=r),a.setValue(s.id,{[i]:r})}render(){var i,a;const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const s=e.getValue(n,{value:this.data.fieldValue});let o=s.value||"";const c=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=s.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const f={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=u??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",u??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),pp.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:g,timeStep:y}=this.data,w=!!g&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),c&&(r.maxLength=c),r.addEventListener("input",E=>{e.setValue(n,{value:E.target.value}),this.setPropertyOnSiblings(r,"value",E.target.value,"value"),f.formattedValue=null}),r.addEventListener("resetform",E=>{const C=this.data.defaultFieldValue??"";r.value=f.userValue=C,f.formattedValue=null});let S=E=>{const{formattedValue:C}=f;C!=null&&(E.target.value=C),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",C=>{var R;if(f.focused)return;const{target:M}=C;if(w&&(M.type=g,y&&(M.step=y)),f.userValue){const D=f.userValue;if(w)if(g==="time"){const I=new Date(D),P=[I.getHours(),I.getMinutes(),I.getSeconds()];M.value=P.map(k=>k.toString().padStart(2,"0")).join(":")}else M.value=new Date(D-_Te).toISOString().split(g==="date"?"T":".",1)[0];else M.value=D}f.lastCommittedValue=M.value,f.commitKey=1,(R=this.data.actions)!=null&&R.Focus||(f.focused=!0)}),r.addEventListener("updatefromsandbox",C=>{this.showElementAndHideCanvas(C.target);const M={value(R){f.userValue=R.detail.value??"",w||e.setValue(n,{value:f.userValue.toString()}),R.target.value=f.userValue},formattedValue(R){const{formattedValue:D}=R.detail;f.formattedValue=D,D!=null&&R.target!==document.activeElement&&(R.target.value=D);const I={formattedValue:D};w&&(I.value=D),e.setValue(n,I)},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{var k;const{charLimit:D}=R.detail,{target:I}=R;if(D===0){I.removeAttribute("maxLength");return}I.setAttribute("maxLength",D);let P=f.userValue;!P||P.length<=D||(P=P.slice(0,D),I.value=f.userValue=P,e.setValue(n,{value:P}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:I.selectionStart,selEnd:I.selectionEnd}}))}};this._dispatchEventFromSandbox(M,C)}),r.addEventListener("keydown",C=>{var D;f.commitKey=1;let M=-1;if(C.key==="Escape"?M=0:C.key==="Enter"&&!this.data.multiLine?M=2:C.key==="Tab"&&(f.commitKey=3),M===-1)return;const{value:R}=C.target;f.lastCommittedValue!==R&&(f.lastCommittedValue=R,f.userValue=R,(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:R,willCommit:!0,commitKey:M,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}}))});const E=S;S=null,r.addEventListener("blur",C=>{var D,I;if(!f.focused||!C.relatedTarget)return;(D=this.data.actions)!=null&&D.Blur||(f.focused=!1);const{target:M}=C;let{value:R}=M;if(w){if(R&&g==="time"){const P=R.split(":").map(k=>parseInt(k,10));R=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),M.step=""}else R.includes("T")||(R=`${R}T00:00`),R=new Date(R).valueOf();M.type="text"}f.userValue=R,f.lastCommittedValue!==R&&((I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:R,willCommit:!0,commitKey:f.commitKey,selStart:C.target.selectionStart,selEnd:C.target.selectionEnd}})),E(C)}),(a=this.data.actions)!=null&&a.Keystroke&&r.addEventListener("beforeinput",C=>{var B;f.lastCommittedValue=null;const{data:M,target:R}=C,{value:D,selectionStart:I,selectionEnd:P}=R;let k=I,U=P;switch(C.inputType){case"deleteWordBackward":{const V=D.substring(0,I).match(/\w*[^\w]*$/);V&&(k-=V[0].length);break}case"deleteWordForward":{const V=D.substring(I).match(/^[^\w]*\w*/);V&&(U+=V[0].length);break}case"deleteContentBackward":I===P&&(k-=1);break;case"deleteContentForward":I===P&&(U+=1);break}C.preventDefault(),(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:D,change:M||"",willCommit:!1,selStart:k,selEnd:U}})}),this._setEventListeners(r,f,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],C=>C.target.value)}if(S&&r.addEventListener("blur",S),this.data.comb){const C=(this.data.rect[2]-this.data.rect[0])/c;r.classList.add("comb"),r.style.letterSpacing=`calc(${C}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class RTe extends Ep{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class MTe extends Ep{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return pp.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=n.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",n.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:c}=s.target;for(const u of this._getElementsByName(o,r)){const f=c&&u.exportValue===n.exportValue;u.domElement&&(u.domElement.checked=f),e.setValue(u.id,{value:f})}e.setValue(r,{value:c})}),a.addEventListener("resetform",s=>{const o=n.defaultFieldValue||"Off";s.target.checked=o===n.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const o={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(o,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class IK extends Ep{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof i=="string"&&(i=i!==n.buttonValue,e.setValue(r,{value:i})),i)for(const s of this._getElementsByName(n.fieldName,r))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(pp.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=n.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:o,checked:c}=s.target;for(const u of this._getElementsByName(o,r))e.setValue(u.id,{value:!1});e.setValue(r,{value:c})}),a.addEventListener("resetform",s=>{const o=n.defaultFieldValue;s.target.checked=o!=null&&o===n.buttonValue}),this.enableScripting&&this.hasJSActions){const s=n.buttonValue;a.addEventListener("updatefromsandbox",o=>{const c={value:u=>{const f=s===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const g=f&&h.id===r;h.domElement&&(h.domElement.checked=g),e.setValue(h.id,{value:g})}}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class PTe extends pL{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class kTe extends Ep{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),i=document.createElement("select");pp.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const h=this.data.defaultFieldValue;for(const g of i.options)g.selected=g.value===h});for(const f of this.data.options){const h=document.createElement("option");h.textContent=f.displayValue,h.value=f.exportValue,r.value.includes(f.exportValue)&&(h.setAttribute("selected",!0),a=!1),i.append(h)}let s=null;if(a){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),s=()=>{f.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const o=f=>{const h=f?"value":"textContent",{options:g,multiple:y}=i;return y?Array.prototype.filter.call(g,w=>w.selected).map(w=>w[h]):g.selectedIndex===-1?null:g[g.selectedIndex][h]};let c=o(!1);const u=f=>{const h=f.target.options;return Array.prototype.map.call(h,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const h={value(g){s==null||s();const y=g.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const S of i.options)S.selected=w.has(S.value);e.setValue(n,{value:o(!0)}),c=o(!1)},multipleSelection(g){i.multiple=!0},remove(g){const y=i.options,w=g.detail.remove;y[w].selected=!1,i.remove(w),y.length>0&&Array.prototype.findIndex.call(y,E=>E.selected)===-1&&(y[0].selected=!0),e.setValue(n,{value:o(!0),items:u(g)}),c=o(!1)},clear(g){for(;i.length!==0;)i.remove(0);e.setValue(n,{value:null,items:[]}),c=o(!1)},insert(g){const{index:y,displayValue:w,exportValue:S}=g.detail.insert,E=i.children[y],C=document.createElement("option");C.textContent=w,C.value=S,E?E.before(C):i.append(C),e.setValue(n,{value:o(!0),items:u(g)}),c=o(!1)},items(g){const{items:y}=g.detail;for(;i.length!==0;)i.remove(0);for(const w of y){const{displayValue:S,exportValue:E}=w,C=document.createElement("option");C.textContent=S,C.value=E,i.append(C)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(n,{value:o(!0),items:u(g)}),c=o(!1)},indices(g){const y=new Set(g.detail.indices);for(const w of g.target.options)w.selected=y.has(w.index);e.setValue(n,{value:o(!0)}),c=o(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(h,f)}),i.addEventListener("input",f=>{var y;const h=o(!0),g=o(!1);e.setValue(n,{value:h}),f.preventDefault(),(y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:c,change:g,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(n,{value:o(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var px,QP;class JP extends Rn{constructor(n){const{data:r,elements:i,parent:a}=n,s=!!a._commentManager;super(n,{isRenderable:!s&&Rn._hasPopupData(r)});j(this,px);if(this.elements=i,s&&Rn._hasPopupData(r)){const o=this.popup=F(this,px,QP).call(this);for(const c of i)c.popup=o}else this.popup=null}render(){const{container:n}=this;n.classList.add("popupAnnotation"),n.role="comment";const r=this.popup=F(this,px,QP).call(this),i=[];for(const a of this.elements)a.popup=r,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${sL}${a}`).join(",")),this.container}}px=new WeakSet,QP=function(){return new ITe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Da,hd,LA,OA,Bg,Hg,jn,Qo,pd,Ph,zg,$g,Zo,La,mc,gc,Nr,vc,md,mx,yc,Gg,kh,gd,bi,vd,ht,V1,ZP,ek,tk,W1,nk,DK,LK,OK,jK,Y1,K1,rk;class ITe{constructor({container:e,color:n,elements:r,titleObj:i,modificationDate:a,contentsObj:s,richText:o,parent:c,rect:u,parentRect:f,open:h,commentManager:g=null}){j(this,ht);j(this,Da,null);j(this,hd,F(this,ht,OK).bind(this));j(this,LA,F(this,ht,rk).bind(this));j(this,OA,F(this,ht,K1).bind(this));j(this,Bg,F(this,ht,Y1).bind(this));j(this,Hg,null);j(this,jn,null);j(this,Qo,null);j(this,pd,null);j(this,Ph,null);j(this,zg,null);j(this,$g,null);j(this,Zo,!1);j(this,La,null);j(this,mc,null);j(this,gc,null);j(this,Nr,null);j(this,vc,null);j(this,md,null);j(this,mx,null);j(this,yc,null);j(this,Gg,null);j(this,kh,null);j(this,gd,!1);j(this,bi,null);j(this,vd,null);L(this,jn,e),L(this,Gg,i),L(this,Qo,s),L(this,yc,o),L(this,zg,c),L(this,Hg,n),L(this,mx,u),L(this,$g,f),L(this,Ph,r),L(this,Da,g),L(this,bi,r[0]),L(this,pd,ib.toDateObject(a)),this.trigger=r.flatMap(y=>y.getElementsToTriggerPopup()),g?this.renderCommentButton():(F(this,ht,V1).call(this),m(this,jn).hidden=!0,h&&F(this,ht,Y1).call(this))}renderCommentButton(){if(m(this,Nr)||(m(this,vc)||F(this,ht,ZP).call(this),!m(this,vc)))return;const{signal:e}=L(this,mc,new AbortController),n=!!m(this,bi).extraPopupElement,r=()=>{m(this,Da).toggleCommentPopup(this,!0,void 0,!n)},i=()=>{m(this,Da).toggleCommentPopup(this,!1,!0,!n)},a=()=>{m(this,Da).toggleCommentPopup(this,!1,!1)};if(n){L(this,Nr,m(this,bi).container);for(const s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",m(this,hd),{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),s.classList.add("popupTriggerArea")}else{const s=L(this,Nr,document.createElement("button"));s.className="annotationCommentButton";const o=m(this,bi).container;s.style.zIndex=o.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),F(this,ht,tk).call(this),F(this,ht,ek).call(this),s.addEventListener("keydown",m(this,hd),{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),o.after(s)}}get commentButtonColor(){const{color:e,opacity:n}=m(this,bi).commentData;return e?m(this,zg)._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{var e;(e=m(this,Nr))==null||e.focus()},0)}getData(){const{richText:e,color:n,opacity:r,creationDate:i,modificationDate:a}=m(this,bi).commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:r,creationDate:i,modificationDate:a}}get elementBeforePopup(){return m(this,Nr)}get comment(){return m(this,vd)||L(this,vd,m(this,bi).commentText),m(this,vd)}set comment(e){e!==this.comment&&(m(this,bi).commentText=L(this,vd,e))}get parentBoundingClientRect(){return m(this,bi).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){m(this,Nr)&&(m(this,Nr).classList.toggle("selected",e),m(this,Nr).ariaExpanded=n)}setSelectedCommentButton(e){m(this,Nr).classList.toggle("selected",e)}get commentPopupPosition(){if(m(this,md))return m(this,md);const{x:e,y:n,height:r}=m(this,Nr).getBoundingClientRect(),{x:i,y:a,width:s,height:o}=m(this,bi).layer.getBoundingClientRect();return[(e-i)/s,(n+r-a)/o]}set commentPopupPosition(e){L(this,md,e)}hasDefaultPopupPosition(){return m(this,md)===null}get commentButtonPosition(){return m(this,vc)}get commentButtonWidth(){return m(this,Nr).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,r]=m(this,md)||this.commentButtonPosition.map(u=>u/100),i=this.parentBoundingClientRect,{x:a,y:s,width:o,height:c}=i;m(this,Da).showDialog(null,this,a+n*o,s+r*c,{...e,parentDimensions:i})}render(){var r,i;if(m(this,La))return;const e=L(this,La,document.createElement("div"));if(e.className="popup",m(this,Hg)){const a=e.style.outlineColor=Le.makeHexColor(...m(this,Hg));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const n=document.createElement("span");if(n.className="header",(r=m(this,Gg))!=null&&r.str){const a=document.createElement("span");a.className="title",n.append(a),{dir:a.dir,str:a.textContent}=m(this,Gg)}if(e.append(n),m(this,pd)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:m(this,pd).valueOf()})),a.dateTime=m(this,pd).toISOString(),n.append(a)}lL({html:m(this,ht,W1)||m(this,Qo).str,dir:(i=m(this,Qo))==null?void 0:i.dir,className:"popupContent"},e),m(this,jn).append(e)}updateEdited({rect:e,popup:n,deleted:r}){var i;if(m(this,Da)){r?(this.remove(),L(this,vd,null)):n&&(n.deleted?this.remove():(F(this,ht,tk).call(this),L(this,vd,n.text))),e&&(L(this,vc,null),F(this,ht,ZP).call(this),F(this,ht,ek).call(this));return}if(r||n!=null&&n.deleted){this.remove();return}F(this,ht,V1).call(this),m(this,kh)||L(this,kh,{contentsObj:m(this,Qo),richText:m(this,yc)}),e&&L(this,gc,null),n&&n.text&&(L(this,yc,F(this,ht,LK).call(this,n.text)),L(this,pd,ib.toDateObject(n.date)),L(this,Qo,null)),(i=m(this,La))==null||i.remove(),L(this,La,null)}resetEdited(){var e;m(this,kh)&&({contentsObj:lr(this,Qo)._,richText:lr(this,yc)._}=m(this,kh),L(this,kh,null),(e=m(this,La))==null||e.remove(),L(this,La,null),L(this,gc,null))}remove(){var e,n,r;if((e=m(this,mc))==null||e.abort(),L(this,mc,null),(n=m(this,La))==null||n.remove(),L(this,La,null),L(this,gd,!1),L(this,Zo,!1),(r=m(this,Nr))==null||r.remove(),L(this,Nr,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){L(this,gd,this.isVisible),m(this,gd)&&(m(this,jn).hidden=!0)}maybeShow(){m(this,Da)||(F(this,ht,V1).call(this),m(this,gd)&&(m(this,La)||F(this,ht,K1).call(this),L(this,gd,!1),m(this,jn).hidden=!1))}get isVisible(){return m(this,Da)?!1:m(this,jn).hidden===!1}}Da=new WeakMap,hd=new WeakMap,LA=new WeakMap,OA=new WeakMap,Bg=new WeakMap,Hg=new WeakMap,jn=new WeakMap,Qo=new WeakMap,pd=new WeakMap,Ph=new WeakMap,zg=new WeakMap,$g=new WeakMap,Zo=new WeakMap,La=new WeakMap,mc=new WeakMap,gc=new WeakMap,Nr=new WeakMap,vc=new WeakMap,md=new WeakMap,mx=new WeakMap,yc=new WeakMap,Gg=new WeakMap,kh=new WeakMap,gd=new WeakMap,bi=new WeakMap,vd=new WeakMap,ht=new WeakSet,V1=function(){var n;if(m(this,mc))return;L(this,mc,new AbortController);const{signal:e}=m(this,mc);for(const r of this.trigger)r.addEventListener("click",m(this,Bg),{signal:e}),r.addEventListener("pointerenter",m(this,OA),{signal:e}),r.addEventListener("pointerleave",m(this,LA),{signal:e}),r.classList.add("popupTriggerArea");for(const r of m(this,Ph))(n=r.container)==null||n.addEventListener("keydown",m(this,hd),{signal:e})},ZP=function(){const e=m(this,Ph).find(n=>n.hasCommentButton);e&&L(this,vc,e._normalizePoint(e.commentButtonPosition))},ek=function(){if(m(this,bi).extraPopupElement&&!m(this,bi).editor)return;this.renderCommentButton();const[e,n]=m(this,vc),{style:r}=m(this,Nr);r.left=`calc(${e}%)`,r.top=`calc(${n}% - var(--comment-button-dim))`},tk=function(){m(this,bi).extraPopupElement||(this.renderCommentButton(),m(this,Nr).style.backgroundColor=this.commentButtonColor||"")},W1=function(){const e=m(this,yc),n=m(this,Qo);return e!=null&&e.str&&(!(n!=null&&n.str)||n.str===e.str)&&m(this,yc).html||null},nk=function(){var e,n,r;return((r=(n=(e=m(this,ht,W1))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.fontSize)||0},DK=function(){var e,n,r;return((r=(n=(e=m(this,ht,W1))==null?void 0:e.attributes)==null?void 0:n.style)==null?void 0:r.color)||null},LK=function(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},i={style:{color:m(this,ht,DK),fontSize:m(this,ht,nk)?`calc(${m(this,ht,nk)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))n.push({name:"span",value:a,attributes:i});return r},OK=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&m(this,Zo))&&F(this,ht,Y1).call(this)},jK=function(){if(m(this,gc)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}}=m(this,zg);let s=!!m(this,$g),o=s?m(this,$g):m(this,mx);for(const w of m(this,Ph))if(!o||Le.intersect(w.data.rect,o)!==null){o=w.data.rect,s=!0;break}const c=Le.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),f=s?o[2]-o[0]+5:0,h=c[0]+f,g=c[1];L(this,gc,[100*(h-i)/n,100*(g-a)/r]);const{style:y}=m(this,jn);y.left=`${m(this,gc)[0]}%`,y.top=`${m(this,gc)[1]}%`},Y1=function(){if(m(this,Da)){m(this,Da).toggleCommentPopup(this,!1);return}L(this,Zo,!m(this,Zo)),m(this,Zo)?(F(this,ht,K1).call(this),m(this,jn).addEventListener("click",m(this,Bg)),m(this,jn).addEventListener("keydown",m(this,hd))):(F(this,ht,rk).call(this),m(this,jn).removeEventListener("click",m(this,Bg)),m(this,jn).removeEventListener("keydown",m(this,hd)))},K1=function(){m(this,La)||this.render(),this.isVisible?m(this,Zo)&&m(this,jn).classList.add("focused"):(F(this,ht,jK).call(this),m(this,jn).hidden=!1,m(this,jn).style.zIndex=parseInt(m(this,jn).style.zIndex)+1e3)},rk=function(){m(this,jn).classList.remove("focused"),!(m(this,Zo)||!this.isVisible)&&(m(this,jn).hidden=!0,m(this,jn).style.zIndex=parseInt(m(this,jn).style.zIndex)-1e3)};class FK extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=it.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var gx;class DTe extends Rn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});j(this,gx,null)}render(){this.container.classList.add("lineAnnotation");const{data:n,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),s=L(this,gx,this.svgFactory.createElement("svg:line"));return s.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),s.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),s.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),s.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),s.setAttribute("stroke-width",n.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),a.append(s),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,gx)}addHighlightArea(){this.container.classList.add("highlightArea")}}gx=new WeakMap;var vx;class LTe extends Rn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});j(this,vx,null)}render(){this.container.classList.add("squareAnnotation");const{data:n,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),s=n.borderStyle.width,o=L(this,vx,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",r-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,vx)}addHighlightArea(){this.container.classList.add("highlightArea")}}vx=new WeakMap;var yx;class OTe extends Rn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});j(this,yx,null)}render(){this.container.classList.add("circleAnnotation");const{data:n,width:r,height:i}=this,a=this.svgFactory.create(r,i,!0),s=n.borderStyle.width,o=L(this,yx,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",i/2),o.setAttribute("rx",r/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!n.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,yx)}addHighlightArea(){this.container.classList.add("highlightArea")}}yx=new WeakMap;var bx;class UK extends Rn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});j(this,bx,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,vertices:r,borderStyle:i,popupRef:a},width:s,height:o}=this;if(!r)return this.container;const c=this.svgFactory.create(s,o,!0);let u=[];for(let h=0,g=r.length;h<g;h+=2){const y=r[h]-n[0],w=n[3]-r[h+1];u.push(`${y},${w}`)}u=u.join(" ");const f=L(this,bx,this.svgFactory.createElement(this.svgElementName));return f.setAttribute("points",u),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),c.append(f),this.container.append(c),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return m(this,bx)}addHighlightArea(){this.container.classList.add("highlightArea")}}bx=new WeakMap;class jTe extends UK{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class FTe extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var xx,Ih,wx,ik;class mL extends Rn{constructor(n){super(n,{isRenderable:!0,ignoreBorder:!0});j(this,wx);j(this,xx,null);j(this,Ih,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?it.HIGHLIGHT:it.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:n,rotation:r,inkLists:i,borderStyle:a,popupRef:s}}=this,{transform:o,width:c,height:u}=F(this,wx,ik).call(this,r,n),f=this.svgFactory.create(c,u,!0),h=L(this,xx,this.svgFactory.createElement("svg:g"));f.append(h),h.setAttribute("stroke-width",a.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let g=0,y=i.length;g<y;g++){const w=this.svgFactory.createElement(this.svgElementName);m(this,Ih).push(w),w.setAttribute("points",i[g].join(",")),h.append(w)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(n){super.updateEdited(n);const{thickness:r,points:i,rect:a}=n,s=m(this,xx);if(r>=0&&s.setAttribute("stroke-width",r||1),i)for(let o=0,c=m(this,Ih).length;o<c;o++)m(this,Ih)[o].setAttribute("points",i[o].join(","));if(a){const{transform:o,width:c,height:u}=F(this,wx,ik).call(this,this.data.rotation,a);s.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return m(this,Ih)}addHighlightArea(){this.container.classList.add("highlightArea")}}xx=new WeakMap,Ih=new WeakMap,wx=new WeakSet,ik=function(n,r){switch(n){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class BK extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=it.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class UTe extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class BTe extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class HTe extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class HK extends Rn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=it.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Sx,Ex,ak;class zTe extends Rn{constructor(n){var i;super(n,{isRenderable:!0});j(this,Ex);j(this,Sx,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:n,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",F(this,Ex,ak).bind(this)),L(this,Sx,i);const{isMac:a}=jr.platform;return n.addEventListener("keydown",s=>{s.key==="Enter"&&(a?s.metaKey:s.ctrlKey)&&F(this,Ex,ak).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),n.append(i),n}getElementsToTriggerPopup(){return m(this,Sx)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sx=new WeakMap,Ex=new WeakSet,ak=function(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.content,this.filename)};var qg,Dh,Vg,yd,Ax,Lh,Yd,sk,ok,Wg;let gL=(Wg=class{constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:o,commentManager:c,linkService:u,annotationStorage:f}){j(this,Yd);j(this,qg,null);j(this,Dh,null);j(this,Vg,null);j(this,yd,new Map);j(this,Ax,null);j(this,Lh,null);this.div=e,L(this,qg,n),L(this,Dh,r),L(this,Ax,o||null),L(this,Lh,u||null),L(this,Vg,f||new cL),this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return m(this,yd).size>0}async render(e){var s,o,c;const{annotations:n}=e,r=this.div;qd(r,this.viewport);const i=new Map,a={data:null,layer:r,linkService:m(this,Lh),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new lb,annotationStorage:m(this,Vg),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of n){if(u.noHTML)continue;const f=u.annotationType===Vn.POPUP;if(f){const y=i.get(u.id);if(!y)continue;a.elements=y}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;a.data=u;const h=B6.create(a);if(!h.isRenderable)continue;if(!f&&u.popupRef){const y=i.get(u.popupRef);y?y.push(h):i.set(u.popupRef,[h])}const g=h.render();u.hidden&&(g.style.visibility="hidden"),await F(this,Yd,sk).call(this,g,u.id,a.elements),(o=(s=h.extraPopupElement)==null?void 0:s.popup)==null||o.renderCommentButton(),h._isEditable&&(m(this,yd).set(h.data.id,h),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(h))}F(this,Yd,ok).call(this)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:m(this,Lh),svgFactory:new lb,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=Wg._defaultBorderStyle),n.data=r;const i=B6.create(n);if(!i.isRenderable)continue;const a=i.render();await F(this,Yd,sk).call(this,a,r.id,null)}}update({viewport:e}){const n=this.div;this.viewport=e,qd(n,{rotation:e.rotation}),F(this,Yd,ok).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(m(this,yd).values())}getEditableAnnotation(e){return m(this,yd).get(e)}addFakeAnnotation(e){var o;const{div:n}=this,{id:r,rotation:i}=e,a=new CTe({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:m(this,Lh),annotationStorage:m(this,Vg)}),s=a.render();return n.append(s),(o=m(this,qg))==null||o.moveElementInDOM(n,s,s,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return dt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:pm.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},qg=new WeakMap,Dh=new WeakMap,Vg=new WeakMap,yd=new WeakMap,Ax=new WeakMap,Lh=new WeakMap,Yd=new WeakSet,sk=async function(e,n,r){var o,c;const i=e.firstChild||e,a=i.id=`${sL}${n}`,s=await((o=m(this,Ax))==null?void 0:o.getAriaAttributes(a));if(s)for(const[u,f]of s)i.setAttribute(u,f);r?r.at(-1).container.after(e):(this.div.append(e),(c=m(this,qg))==null||c.moveElementInDOM(this.div,e,i,!1))},ok=function(){var n;if(!m(this,Dh))return;const e=this.div;for(const[r,i]of m(this,Dh)){const a=e.querySelector(`[data-annotation-id="${r}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:s}=a;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):a.append(i);const o=m(this,yd).get(r);o&&(o._hasNoCanvas?((n=this._annotationEditorUIManager)==null||n.setMissingCanvas(r,a.id,i),o._hasNoCanvas=!1):o.canvas=i)}m(this,Dh).clear()},Wg);const b1=/\r\n?|\n/g;var Oa,_x,Oh,ja,sr,zK,$K,GK,X1,Dc,J1,Q1,qK,ck,VK;const fn=class fn extends ln{constructor(n){super({...n,name:"freeTextEditor"});j(this,sr);j(this,Oa,"");j(this,_x,`${this.id}-editor`);j(this,Oh,null);j(this,ja);Se(this,"_colorPicker",null);this.color=n.color||fn._defaultColor||ln._defaultLineColor,L(this,ja,n.fontSize||fn._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const n=fn.prototype,r=s=>s.isEmpty(),i=Vd.TRANSLATE_SMALL,a=Vd.TRANSLATE_BIG;return dt(this,"_keyboardManager",new xw([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],n.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],n.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],n._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n._translateEmpty,{args:[-a,0],checker:r}],[["ArrowRight","mac+ArrowRight"],n._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n._translateEmpty,{args:[a,0],checker:r}],[["ArrowUp","mac+ArrowUp"],n._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n._translateEmpty,{args:[0,-a],checker:r}],[["ArrowDown","mac+ArrowDown"],n._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n._translateEmpty,{args:[0,a],checker:r}]]))}static initialize(n,r){ln.initialize(n,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(n,r){switch(n){case wt.FREETEXT_SIZE:fn._defaultFontSize=r;break;case wt.FREETEXT_COLOR:fn._defaultColor=r;break}}updateParams(n,r){switch(n){case wt.FREETEXT_SIZE:F(this,sr,zK).call(this,r);break;case wt.FREETEXT_COLOR:F(this,sr,$K).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[wt.FREETEXT_SIZE,fn._defaultFontSize],[wt.FREETEXT_COLOR,fn._defaultColor||ln._defaultLineColor]]}get propertiesToUpdate(){return[[wt.FREETEXT_SIZE,m(this,ja)],[wt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new vA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return wt.FREETEXT_COLOR}onUpdatedColor(){var n;this.editorDiv.style.color=this.color,(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_translateEmpty(n,r){this._uiManager.translateSelectedEditors(n,r,!0)}getInitialTranslation(){const n=this.parentScale;return[-fn._internalPadding*n,-(fn._internalPadding+m(this,ja))*n]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),L(this,Oh,new AbortController);const n=this._uiManager.combinedSignal(m(this,Oh));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:n}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:n}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:n}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:n}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:n}),!0}disableEditMode(){var n;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",m(this,_x)),this._isDraggable=!0,(n=m(this,Oh))==null||n.abort(),L(this,Oh,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(n){this._focusEventsAllowed&&(super.focusin(n),n.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(n){var r;this.width||(this.enableEditMode(),n&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const n=m(this,Oa),r=L(this,Oa,F(this,sr,GK).call(this).trimEnd());if(n===r)return;const i=a=>{if(L(this,Oa,a),!a){this.remove();return}F(this,sr,Q1).call(this),this._uiManager.rebuild(this),F(this,sr,X1).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(n)},mustExec:!1}),F(this,sr,X1).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(n){n.target===this.div&&n.key==="Enter"&&(this.enterInEditMode(),n.preventDefault())}editorDivKeydown(n){fn._keyboardManager.exec(this,n)}editorDivFocus(n){this.isEditing=!0}editorDivBlur(n){this.isEditing=!1}editorDivInput(n){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let n,r;(this._isCopy||this.annotationElementId)&&(n=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",m(this,_x)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${m(this,ja)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,s]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[f,h]=this.pageDimensions,[g,y]=this.pageTranslation;let w,S;switch(this.rotation){case 0:w=n+(o[0]-g)/f,S=r+this.height-(o[1]-y)/h;break;case 90:w=n+(o[0]-g)/f,S=r-(o[1]-y)/h,[c,u]=[u,-c];break;case 180:w=n-this.width+(o[0]-g)/f,S=r-(o[1]-y)/h,[c,u]=[-c,-u];break;case 270:w=n+(o[0]-g-this.height*h)/f,S=r+(o[1]-y-this.width*f)/h,[c,u]=[-u,c];break}this.setAt(w*a,S*s,c,u)}else this._moveAfterPaste(n,r);F(this,sr,Q1).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(n){var w,S,E;const r=n.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;n.preventDefault();const a=F(w=fn,Dc,ck).call(w,r.getData("text")||"").replaceAll(b1,`
`);if(!a)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const o=s.getRangeAt(0);if(!a.includes(`
`)){o.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:c,startOffset:u}=o,f=[],h=[];if(c.nodeType===Node.TEXT_NODE){const C=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(b1,"")),C!==this.editorDiv){let M=f;for(const R of this.editorDiv.childNodes){if(R===C){M=h;continue}M.push(F(S=fn,Dc,J1).call(S,R))}}f.push(c.nodeValue.slice(0,u).replaceAll(b1,""))}else if(c===this.editorDiv){let C=f,M=0;for(const R of this.editorDiv.childNodes)M++===u&&(C=h),C.push(F(E=fn,Dc,J1).call(E,R))}L(this,Oa,`${f.join(`
`)}${a}${h.join(`
`)}`),F(this,sr,Q1).call(this);const g=new Range;let y=Math.sumPrecise(f.map(C=>C.length));for(const{firstChild:C}of this.editorDiv.childNodes)if(C.nodeType===Node.TEXT_NODE){const M=C.nodeValue.length;if(y<=M){g.setStart(C,y),g.setEnd(C,y);break}y-=M}s.removeAllRanges(),s.addRange(g)}get contentDiv(){return this.editorDiv}getPDFRect(){const n=fn._internalPadding*this.parentScale;return this.getRect(n,n)}static async deserialize(n,r,i){var o;let a=null;if(n instanceof FK){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:f,rotation:h,id:g,popupRef:y,richText:w,contentsObj:S,creationDate:E,modificationDate:C},textContent:M,textPosition:R,parent:{page:{pageNumber:D}}}=n;if(!M||M.length===0)return null;a=n={annotationType:it.FREETEXT,color:Array.from(u),fontSize:c,value:M.join(`
`),position:R,pageIndex:D-1,rect:f.slice(0),rotation:h,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:(S==null?void 0:S.str)||null,richText:w,creationDate:E,modificationDate:C}}const s=await super.deserialize(n,r,i);return L(s,ja,n.fontSize),s.color=Le.makeHexColor(...n.color),L(s,Oa,F(o=fn,Dc,ck).call(o,n.value)),s._initialData=a,n.comment&&s.setCommentData(n),s}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=ln._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(n),{color:r,fontSize:m(this,ja),value:F(this,sr,qK).call(this)});return this.addComment(i),n?(i.isCopy=!0,i):this.annotationElementId&&!F(this,sr,VK).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){const r=super.renderAnnotationElement(n);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${m(this,ja)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(const a of m(this,Oa).split(`
`)){const s=document.createElement("div");s.append(a?document.createTextNode(a):document.createElement("br")),r.append(s)}return n.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:m(this,Oa)}}),r}resetAnnotationElement(n){super.resetAnnotationElement(n),n.resetEdited()}};Oa=new WeakMap,_x=new WeakMap,Oh=new WeakMap,ja=new WeakMap,sr=new WeakSet,zK=function(n){const r=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-m(this,ja))*this.parentScale),L(this,ja,a),F(this,sr,X1).call(this)},i=m(this,ja);this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},$K=function(n){const r=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,n),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},GK=function(){var i;const n=[];this.editorDiv.normalize();let r=null;for(const a of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(n.push(F(i=fn,Dc,J1).call(i,a)),r=a);return n.join(`
`)},X1=function(){const[n,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:s}=this,o=s.style.display,c=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",a.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/n,this.height=i.height/r):(this.width=i.height/n,this.height=i.width/r),this.fixAndSetPosition()},Dc=new WeakSet,J1=function(n){return(n.nodeType===Node.TEXT_NODE?n.nodeValue:n.innerText).replaceAll(b1,"")},Q1=function(){if(this.editorDiv.replaceChildren(),!!m(this,Oa))for(const n of m(this,Oa).split(`
`)){const r=document.createElement("div");r.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(r)}},qK=function(){return m(this,Oa).replaceAll(""," ")},ck=function(n){return n.replaceAll(" ","")},VK=function(n){const{value:r,fontSize:i,color:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||n.value!==r||n.fontSize!==i||n.color.some((o,c)=>o!==a[c])||n.pageIndex!==s},j(fn,Dc),Se(fn,"_freeTextDefaultContent",""),Se(fn,"_internalPadding",0),Se(fn,"_defaultColor",null),Se(fn,"_defaultFontSize",10),Se(fn,"_type","freetext"),Se(fn,"_editorType",it.FREETEXT);let lk=fn;class De{toSVGPath(){sn("Abstract method `toSVGPath` must be implemented.")}get box(){sn("Abstract getter `box` must be implemented.")}serialize(e,n){sn("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)s[o]=n+e[o]*i,s[o+1]=r+e[o+1]*a;return s}static _rescaleAndSwap(e,n,r,i,a,s){s||(s=new Float32Array(e.length));for(let o=0,c=e.length;o<c;o+=2)s[o]=n+e[o+1]*i,s[o+1]=r+e[o]*a;return s}static _translate(e,n,r,i){i||(i=new Float32Array(e.length));for(let a=0,s=e.length;a<s;a+=2)i[a]=n+e[a],i[a+1]=r+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,i,a){switch(a){case 90:return[1-n/r,e/i];case 180:return[1-e/r,1-n/i];case 270:return[n/r,1-e/i];default:return[e/r,n/i]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,i,a,s){return[(e+5*r)/6,(n+5*i)/6,(5*r+a)/6,(5*i+s)/6,(r+a)/2,(i+s)/2]}}Se(De,"PRECISION",1e-4);var Fa,oo,Yg,Kg,el,mt,jh,Fh,Cx,Tx,Xg,Jg,bd,Nx,jA,FA,pr,w0,WK,YK,KK,XK,JK,QK;const Gl=class Gl{constructor({x:e,y:n},r,i,a,s,o=0){j(this,pr);j(this,Fa);j(this,oo,[]);j(this,Yg);j(this,Kg);j(this,el,[]);j(this,mt,new Float32Array(18));j(this,jh);j(this,Fh);j(this,Cx);j(this,Tx);j(this,Xg);j(this,Jg);j(this,bd,[]);L(this,Fa,r),L(this,Jg,a*i),L(this,Kg,s),m(this,mt).set([NaN,NaN,NaN,NaN,e,n],6),L(this,Yg,o),L(this,Tx,m(Gl,Nx)*i),L(this,Cx,m(Gl,FA)*i),L(this,Xg,i),m(this,bd).push(e,n)}isEmpty(){return isNaN(m(this,mt)[8])}add({x:e,y:n}){var B;L(this,jh,e),L(this,Fh,n);const[r,i,a,s]=m(this,Fa);let[o,c,u,f]=m(this,mt).subarray(8,12);const h=e-u,g=n-f,y=Math.hypot(h,g);if(y<m(this,Cx))return!1;const w=y-m(this,Tx),S=w/y,E=S*h,C=S*g;let M=o,R=c;o=u,c=f,u+=E,f+=C,(B=m(this,bd))==null||B.push(e,n);const D=-C/w,I=E/w,P=D*m(this,Jg),k=I*m(this,Jg);return m(this,mt).set(m(this,mt).subarray(2,8),0),m(this,mt).set([u+P,f+k],4),m(this,mt).set(m(this,mt).subarray(14,18),12),m(this,mt).set([u-P,f-k],16),isNaN(m(this,mt)[6])?(m(this,el).length===0&&(m(this,mt).set([o+P,c+k],2),m(this,el).push(NaN,NaN,NaN,NaN,(o+P-r)/a,(c+k-i)/s),m(this,mt).set([o-P,c-k],14),m(this,oo).push(NaN,NaN,NaN,NaN,(o-P-r)/a,(c-k-i)/s)),m(this,mt).set([M,R,o,c,u,f],6),!this.isEmpty()):(m(this,mt).set([M,R,o,c,u,f],6),Math.abs(Math.atan2(R-c,M-o)-Math.atan2(C,E))<Math.PI/2?([o,c,u,f]=m(this,mt).subarray(2,6),m(this,el).push(NaN,NaN,NaN,NaN,((o+u)/2-r)/a,((c+f)/2-i)/s),[o,c,M,R]=m(this,mt).subarray(14,18),m(this,oo).push(NaN,NaN,NaN,NaN,((M+o)/2-r)/a,((R+c)/2-i)/s),!0):([M,R,o,c,u,f]=m(this,mt).subarray(0,6),m(this,el).push(((M+5*o)/6-r)/a,((R+5*c)/6-i)/s,((5*o+u)/6-r)/a,((5*c+f)/6-i)/s,((o+u)/2-r)/a,((c+f)/2-i)/s),[u,f,o,c,M,R]=m(this,mt).subarray(12,18),m(this,oo).push(((M+5*o)/6-r)/a,((R+5*c)/6-i)/s,((5*o+u)/6-r)/a,((5*c+f)/6-i)/s,((o+u)/2-r)/a,((c+f)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=m(this,el),n=m(this,oo);if(isNaN(m(this,mt)[6])&&!this.isEmpty())return F(this,pr,WK).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);F(this,pr,KK).call(this,r);for(let i=n.length-6;i>=6;i-=6)isNaN(n[i])?r.push(`L${n[i+4]} ${n[i+5]}`):r.push(`C${n[i]} ${n[i+1]} ${n[i+2]} ${n[i+3]} ${n[i+4]} ${n[i+5]}`);return F(this,pr,YK).call(this,r),r.join(" ")}newFreeDrawOutline(e,n,r,i,a,s){return new ZK(e,n,r,i,a,s)}getOutlines(){var h;const e=m(this,el),n=m(this,oo),r=m(this,mt),[i,a,s,o]=m(this,Fa),c=new Float32Array((((h=m(this,bd))==null?void 0:h.length)??0)+2);for(let g=0,y=c.length-2;g<y;g+=2)c[g]=(m(this,bd)[g]-i)/s,c[g+1]=(m(this,bd)[g+1]-a)/o;if(c[c.length-2]=(m(this,jh)-i)/s,c[c.length-1]=(m(this,Fh)-a)/o,isNaN(r[6])&&!this.isEmpty())return F(this,pr,XK).call(this,c);const u=new Float32Array(m(this,el).length+24+m(this,oo).length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){u[g]=u[g+1]=NaN;continue}u[g]=e[g],u[g+1]=e[g+1]}f=F(this,pr,QK).call(this,u,f);for(let g=n.length-6;g>=6;g-=6)for(let y=0;y<6;y+=2){if(isNaN(n[g+y])){u[f]=u[f+1]=NaN,f+=2;continue}u[f]=n[g+y],u[f+1]=n[g+y+1],f+=2}return F(this,pr,JK).call(this,u,f),this.newFreeDrawOutline(u,c,m(this,Fa),m(this,Xg),m(this,Yg),m(this,Kg))}};Fa=new WeakMap,oo=new WeakMap,Yg=new WeakMap,Kg=new WeakMap,el=new WeakMap,mt=new WeakMap,jh=new WeakMap,Fh=new WeakMap,Cx=new WeakMap,Tx=new WeakMap,Xg=new WeakMap,Jg=new WeakMap,bd=new WeakMap,Nx=new WeakMap,jA=new WeakMap,FA=new WeakMap,pr=new WeakSet,w0=function(){const e=m(this,mt).subarray(4,6),n=m(this,mt).subarray(16,18),[r,i,a,s]=m(this,Fa);return[(m(this,jh)+(e[0]-n[0])/2-r)/a,(m(this,Fh)+(e[1]-n[1])/2-i)/s,(m(this,jh)+(n[0]-e[0])/2-r)/a,(m(this,Fh)+(n[1]-e[1])/2-i)/s]},WK=function(){const[e,n,r,i]=m(this,Fa),[a,s,o,c]=F(this,pr,w0).call(this);return`M${(m(this,mt)[2]-e)/r} ${(m(this,mt)[3]-n)/i} L${(m(this,mt)[4]-e)/r} ${(m(this,mt)[5]-n)/i} L${a} ${s} L${o} ${c} L${(m(this,mt)[16]-e)/r} ${(m(this,mt)[17]-n)/i} L${(m(this,mt)[14]-e)/r} ${(m(this,mt)[15]-n)/i} Z`},YK=function(e){const n=m(this,oo);e.push(`L${n[4]} ${n[5]} Z`)},KK=function(e){const[n,r,i,a]=m(this,Fa),s=m(this,mt).subarray(4,6),o=m(this,mt).subarray(16,18),[c,u,f,h]=F(this,pr,w0).call(this);e.push(`L${(s[0]-n)/i} ${(s[1]-r)/a} L${c} ${u} L${f} ${h} L${(o[0]-n)/i} ${(o[1]-r)/a}`)},XK=function(e){const n=m(this,mt),[r,i,a,s]=m(this,Fa),[o,c,u,f]=F(this,pr,w0).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(n[2]-r)/a,(n[3]-i)/s,NaN,NaN,NaN,NaN,(n[4]-r)/a,(n[5]-i)/s,NaN,NaN,NaN,NaN,o,c,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,(n[16]-r)/a,(n[17]-i)/s,NaN,NaN,NaN,NaN,(n[14]-r)/a,(n[15]-i)/s],0),this.newFreeDrawOutline(h,e,m(this,Fa),m(this,Xg),m(this,Yg),m(this,Kg))},JK=function(e,n){const r=m(this,oo);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6},QK=function(e,n){const r=m(this,mt).subarray(4,6),i=m(this,mt).subarray(16,18),[a,s,o,c]=m(this,Fa),[u,f,h,g]=F(this,pr,w0).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/o,(r[1]-s)/c,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,h,g,NaN,NaN,NaN,NaN,(i[0]-a)/o,(i[1]-s)/c],n),n+=24},j(Gl,Nx,8),j(Gl,jA,2),j(Gl,FA,m(Gl,Nx)+m(Gl,jA));let yA=Gl;var Qg,Uh,bc,Rx,Ua,Mx,Yn,UA,eX;class ZK extends De{constructor(n,r,i,a,s,o){super();j(this,UA);j(this,Qg);j(this,Uh,new Float32Array(4));j(this,bc);j(this,Rx);j(this,Ua);j(this,Mx);j(this,Yn);L(this,Yn,n),L(this,Ua,r),L(this,Qg,i),L(this,Mx,a),L(this,bc,s),L(this,Rx,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],F(this,UA,eX).call(this,o);const[c,u,f,h]=m(this,Uh);for(let g=0,y=n.length;g<y;g+=2)n[g]=(n[g]-c)/f,n[g+1]=(n[g+1]-u)/h;for(let g=0,y=r.length;g<y;g+=2)r[g]=(r[g]-c)/f,r[g+1]=(r[g+1]-u)/h}toSVGPath(){const n=[`M${m(this,Yn)[4]} ${m(this,Yn)[5]}`];for(let r=6,i=m(this,Yn).length;r<i;r+=6){if(isNaN(m(this,Yn)[r])){n.push(`L${m(this,Yn)[r+4]} ${m(this,Yn)[r+5]}`);continue}n.push(`C${m(this,Yn)[r]} ${m(this,Yn)[r+1]} ${m(this,Yn)[r+2]} ${m(this,Yn)[r+3]} ${m(this,Yn)[r+4]} ${m(this,Yn)[r+5]}`)}return n.push("Z"),n.join(" ")}serialize([n,r,i,a],s){const o=i-n,c=a-r;let u,f;switch(s){case 0:u=De._rescale(m(this,Yn),n,a,o,-c),f=De._rescale(m(this,Ua),n,a,o,-c);break;case 90:u=De._rescaleAndSwap(m(this,Yn),n,r,o,c),f=De._rescaleAndSwap(m(this,Ua),n,r,o,c);break;case 180:u=De._rescale(m(this,Yn),i,r,-o,c),f=De._rescale(m(this,Ua),i,r,-o,c);break;case 270:u=De._rescaleAndSwap(m(this,Yn),i,a,-o,-c),f=De._rescaleAndSwap(m(this,Ua),i,a,-o,-c);break}return{outline:Array.from(u),points:[Array.from(f)]}}get box(){return m(this,Uh)}newOutliner(n,r,i,a,s,o=0){return new yA(n,r,i,a,s,o)}getNewOutline(n,r){const[i,a,s,o]=m(this,Uh),[c,u,f,h]=m(this,Qg),g=s*f,y=o*h,w=i*f+c,S=a*h+u,E=this.newOutliner({x:m(this,Ua)[0]*g+w,y:m(this,Ua)[1]*y+S},m(this,Qg),m(this,Mx),n,m(this,Rx),r??m(this,bc));for(let C=2;C<m(this,Ua).length;C+=2)E.add({x:m(this,Ua)[C]*g+w,y:m(this,Ua)[C+1]*y+S});return E.getOutlines()}}Qg=new WeakMap,Uh=new WeakMap,bc=new WeakMap,Rx=new WeakMap,Ua=new WeakMap,Mx=new WeakMap,Yn=new WeakMap,UA=new WeakSet,eX=function(n){const r=m(this,Yn);let i=r[4],a=r[5];const s=[i,a,i,a];let o=i,c=a,u=i,f=a;const h=n?Math.max:Math.min,g=new Float32Array(4);for(let w=6,S=r.length;w<S;w+=6){const E=r[w+4],C=r[w+5];isNaN(r[w])?(Le.pointBoundingBox(E,C,s),c>C?(o=E,c=C):c===C&&(o=h(o,E)),f<C?(u=E,f=C):f===C&&(u=h(u,E))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,Le.bezierBoundingBox(i,a,...r.slice(w,w+6),g),Le.rectBoundingBox(g[0],g[1],g[2],g[3],s),c>g[1]?(o=g[0],c=g[1]):c===g[1]&&(o=h(o,g[0])),f<g[3]?(u=g[2],f=g[3]):f===g[3]&&(u=h(u,g[2]))),i=E,a=C}const y=m(this,Uh);y[0]=s[0]-m(this,bc),y[1]=s[1]-m(this,bc),y[2]=s[2]-s[0]+2*m(this,bc),y[3]=s[3]-s[1]+2*m(this,bc),this.firstPoint=[o,c],this.lastPoint=[u,f]};var Px,kx,Ix,xd,lo,Hi,tX,Z1,nX,rX,dk;class uk{constructor(e,n=0,r=0,i=!0){j(this,Hi);j(this,Px);j(this,kx);j(this,Ix);j(this,xd,[]);j(this,lo,[]);const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:S,y:E,width:C,height:M}of e){const R=Math.floor((S-n)/s)*s,D=Math.ceil((S+C+n)/s)*s,I=Math.floor((E-n)/s)*s,P=Math.ceil((E+M+n)/s)*s,k=[R,I,P,!0],U=[D,I,P,!1];m(this,xd).push(k,U),Le.rectBoundingBox(R,I,D,P,a)}const o=a[2]-a[0]+2*r,c=a[3]-a[1]+2*r,u=a[0]-r,f=a[1]-r;let h=i?-1/0:1/0,g=1/0;const y=m(this,xd).at(i?-1:-2),w=[y[0],y[2]];for(const S of m(this,xd)){const[E,C,M,R]=S;!R&&i?C<g?(g=C,h=E):C===g&&(h=Math.max(h,E)):R&&!i&&(C<g?(g=C,h=E):C===g&&(h=Math.min(h,E))),S[0]=(E-u)/o,S[1]=(C-f)/c,S[2]=(M-f)/c}L(this,Px,new Float32Array([u,f,o,c])),L(this,kx,[h,g]),L(this,Ix,w)}getOutlines(){m(this,xd).sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of m(this,xd))n[3]?(e.push(...F(this,Hi,dk).call(this,n)),F(this,Hi,nX).call(this,n)):(F(this,Hi,rX).call(this,n),e.push(...F(this,Hi,dk).call(this,n)));return F(this,Hi,tX).call(this,e)}}Px=new WeakMap,kx=new WeakMap,Ix=new WeakMap,xd=new WeakMap,lo=new WeakMap,Hi=new WeakSet,tX=function(e){const n=[],r=new Set;for(const s of e){const[o,c,u]=s;n.push([o,c,s],[o,u,s])}n.sort((s,o)=>s[1]-o[1]||s[0]-o[0]);for(let s=0,o=n.length;s<o;s+=2){const c=n[s][2],u=n[s+1][2];c.push(u),u.push(c),r.add(c),r.add(u)}const i=[];let a;for(;r.size>0;){const s=r.values().next().value;let[o,c,u,f,h]=s;r.delete(s);let g=o,y=c;for(a=[o,u],i.push(a);;){let w;if(r.has(f))w=f;else if(r.has(h))w=h;else break;r.delete(w),[o,c,u,f,h]=w,g!==o&&(a.push(g,y,o,y===c?c:u),g=o),y=y===c?u:c}a.push(g,y)}return new $Te(i,m(this,Px),m(this,kx),m(this,Ix))},Z1=function(e){const n=m(this,lo);let r=0,i=n.length-1;for(;r<=i;){const a=r+i>>1,s=n[a][0];if(s===e)return a;s<e?r=a+1:i=a-1}return i+1},nX=function([,e,n]){const r=F(this,Hi,Z1).call(this,e);m(this,lo).splice(r,0,[e,n])},rX=function([,e,n]){const r=F(this,Hi,Z1).call(this,e);for(let i=r;i<m(this,lo).length;i++){const[a,s]=m(this,lo)[i];if(a!==e)break;if(a===e&&s===n){m(this,lo).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,s]=m(this,lo)[i];if(a!==e)break;if(a===e&&s===n){m(this,lo).splice(i,1);return}}},dk=function(e){const[n,r,i]=e,a=[[n,r,i]],s=F(this,Hi,Z1).call(this,i);for(let o=0;o<s;o++){const[c,u]=m(this,lo)[o];for(let f=0,h=a.length;f<h;f++){const[,g,y]=a[f];if(!(u<=g||y<=c)){if(g>=c){if(y>u)a[f][1]=u;else{if(h===1)return[];a.splice(f,1),f--,h--}continue}a[f][2]=c,y>u&&a.push([n,u,y])}}}return a};var Dx,Zg;class $Te extends De{constructor(n,r,i,a){super();j(this,Dx);j(this,Zg);L(this,Zg,n),L(this,Dx,r),this.firstPoint=i,this.lastPoint=a}toSVGPath(){const n=[];for(const r of m(this,Zg)){let[i,a]=r;n.push(`M${i} ${a}`);for(let s=2;s<r.length;s+=2){const o=r[s],c=r[s+1];o===i?(n.push(`V${c}`),a=c):c===a&&(n.push(`H${o}`),i=o)}n.push("Z")}return n.join(" ")}serialize([n,r,i,a],s){const o=[],c=i-n,u=a-r;for(const f of m(this,Zg)){const h=new Array(f.length);for(let g=0;g<f.length;g+=2)h[g]=n+f[g]*c,h[g+1]=a-f[g+1]*u;o.push(h)}return o}get box(){return m(this,Dx)}get classNamesForOutlining(){return["highlightOutline"]}}Dx=new WeakMap,Zg=new WeakMap;class fk extends yA{newFreeDrawOutline(e,n,r,i,a,s){return new GTe(e,n,r,i,a,s)}}class GTe extends ZK{newOutliner(e,n,r,i,a,s=0){return new fk(e,n,r,i,a,s)}}var ev,Lx,xc,Bh,Ox,ca,jx,Fx,Hh,Ba,Ha,Jr,tv,nv,xi,rv,Rs,Ux,ft,hk,eE,iX,aX,sX,pk,Lf,Is,xm,oX,tE,nE,lX,cX,uX,dX,fX;const Dt=class Dt extends ln{constructor(n){super({...n,name:"highlightEditor"});j(this,ft);j(this,ev,null);j(this,Lx,0);j(this,xc);j(this,Bh,null);j(this,Ox,null);j(this,ca,null);j(this,jx,null);j(this,Fx,0);j(this,Hh,null);j(this,Ba,null);j(this,Ha,null);j(this,Jr,!1);j(this,tv,null);j(this,nv,null);j(this,xi,null);j(this,rv,"");j(this,Rs);j(this,Ux,"");this.color=n.color||Dt._defaultColor,L(this,Rs,n.thickness||Dt._defaultThickness),this.opacity=n.opacity||Dt._defaultOpacity,L(this,xc,n.boxes||null),L(this,Ux,n.methodOfCreation||""),L(this,rv,n.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",n.highlightId>-1?(L(this,Jr,!0),F(this,ft,eE).call(this,n),F(this,ft,Lf).call(this)):m(this,xc)&&(L(this,ev,n.anchorNode),L(this,Lx,n.anchorOffset),L(this,jx,n.focusNode),L(this,Fx,n.focusOffset),F(this,ft,hk).call(this),F(this,ft,Lf).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const n=Dt.prototype;return dt(this,"_keyboardManager",new xw([[["ArrowLeft","mac+ArrowLeft"],n._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],n._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],n._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],n._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:m(this,Jr)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:m(this,Rs),methodOfCreation:m(this,Ux)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(n){return{numberOfColors:n.get("color").size}}static initialize(n,r){var i;ln.initialize(n,r),Dt._defaultColor||(Dt._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(n,r){switch(n){case wt.HIGHLIGHT_COLOR:Dt._defaultColor=r;break;case wt.HIGHLIGHT_THICKNESS:Dt._defaultThickness=r;break}}translateInPage(n,r){}get toolbarPosition(){return m(this,nv)}get commentButtonPosition(){return m(this,tv)}updateParams(n,r){switch(n){case wt.HIGHLIGHT_COLOR:F(this,ft,iX).call(this,r);break;case wt.HIGHLIGHT_THICKNESS:F(this,ft,aX).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[wt.HIGHLIGHT_COLOR,Dt._defaultColor],[wt.HIGHLIGHT_THICKNESS,Dt._defaultThickness]]}get propertiesToUpdate(){return[[wt.HIGHLIGHT_COLOR,this.color||Dt._defaultColor],[wt.HIGHLIGHT_THICKNESS,m(this,Rs)||Dt._defaultThickness],[wt.HIGHLIGHT_FREE,m(this,Jr)]]}onUpdatedColor(){var n,r;(n=this.parent)==null||n.drawLayer.updateProperties(m(this,Ha),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=m(this,Ox))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",L(this,Ox,new ob({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(F(this,ft,nE).call(this))}getBaseTranslation(){return[0,0]}getRect(n,r){return super.getRect(n,r,F(this,ft,nE).call(this))}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),n&&this.div.focus()}remove(){F(this,ft,pk).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(F(this,ft,Lf).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?F(this,ft,pk).call(this):n&&(F(this,ft,Lf).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),this.show(this._isVisible),r&&this.select()}rotate(n){var a,s,o;const{drawLayer:r}=this.parent;let i;m(this,Jr)?(n=(n-this.rotation+360)%360,i=F(a=Dt,Is,xm).call(a,m(this,Ba).box,n)):i=F(s=Dt,Is,xm).call(s,[this.x,this.y,this.width,this.height],n),r.updateProperties(m(this,Ha),{bbox:i,root:{"data-main-rotation":n}}),r.updateProperties(m(this,xi),{bbox:F(o=Dt,Is,xm).call(o,m(this,ca).box,n),root:{"data-main-rotation":n}})}render(){if(this.div)return this.div;const n=super.render();m(this,rv)&&(n.setAttribute("aria-label",m(this,rv)),n.setAttribute("role","mark")),m(this,Jr)?n.classList.add("free"):this.div.addEventListener("keydown",F(this,ft,oX).bind(this),{signal:this._uiManager._signal});const r=L(this,Hh,document.createElement("div"));return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=m(this,Bh),this.setDims(this.width,this.height),k7(this,m(this,Hh),["pointerover","pointerleave"]),this.enableEditing(),n}pointerover(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(m(this,xi),{rootClass:{hovered:!0}})}pointerleave(){var n;this.isSelected||(n=this.parent)==null||n.drawLayer.updateProperties(m(this,xi),{rootClass:{hovered:!1}})}_moveCaret(n){switch(this.parent.unselect(this),n){case 0:case 2:F(this,ft,tE).call(this,!0);break;case 1:case 3:F(this,ft,tE).call(this,!1);break}}select(){var n;super.select(),m(this,xi)&&((n=this.parent)==null||n.drawLayer.updateProperties(m(this,xi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var n;super.unselect(),m(this,xi)&&((n=this.parent)==null||n.drawLayer.updateProperties(m(this,xi),{rootClass:{selected:!1}}),m(this,Jr)||F(this,ft,tE).call(this,!1))}get _mustFixPosition(){return!m(this,Jr)}show(n=this._isVisible){super.show(n),this.parent&&(this.parent.drawLayer.updateProperties(m(this,Ha),{rootClass:{hidden:!n}}),this.parent.drawLayer.updateProperties(m(this,xi),{rootClass:{hidden:!n}}))}static startHighlighting(n,r,{target:i,x:a,y:s}){const{x:o,y:c,width:u,height:f}=i.getBoundingClientRect(),h=new AbortController,g=n.combinedSignal(h),y=w=>{h.abort(),F(this,Is,dX).call(this,n,w)};window.addEventListener("blur",y,{signal:g}),window.addEventListener("pointerup",y,{signal:g}),window.addEventListener("pointerdown",Nn,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",es,{signal:g}),i.addEventListener("pointermove",F(this,Is,uX).bind(this,n),{signal:g}),this._freeHighlight=new fk({x:a,y:s},[o,c,u,f],n.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(n,r,i){var S,E,C,M;let a=null;if(n instanceof BK){const{data:{quadPoints:R,rect:D,rotation:I,id:P,color:k,opacity:U,popupRef:B,richText:V,contentsObj:H,creationDate:G,modificationDate:Q},parent:{page:{pageNumber:W}}}=n;a=n={annotationType:it.HIGHLIGHT,color:Array.from(k),opacity:U,quadPoints:R,boxes:null,pageIndex:W-1,rect:D.slice(0),rotation:I,annotationElementId:P,id:P,deleted:!1,popupRef:B,richText:V,comment:(H==null?void 0:H.str)||null,creationDate:G,modificationDate:Q}}else if(n instanceof mL){const{data:{inkLists:R,rect:D,rotation:I,id:P,color:k,borderStyle:{rawWidth:U},popupRef:B,richText:V,contentsObj:H,creationDate:G,modificationDate:Q},parent:{page:{pageNumber:W}}}=n;a=n={annotationType:it.HIGHLIGHT,color:Array.from(k),thickness:U,inkLists:R,boxes:null,pageIndex:W-1,rect:D.slice(0),rotation:I,annotationElementId:P,id:P,deleted:!1,popupRef:B,richText:V,comment:(H==null?void 0:H.str)||null,creationDate:G,modificationDate:Q}}const{color:s,quadPoints:o,inkLists:c,opacity:u}=n,f=await super.deserialize(n,r,i);f.color=Le.makeHexColor(...s),f.opacity=u||1,c&&L(f,Rs,n.thickness),f._initialData=a,n.comment&&f.setCommentData(n);const[h,g]=f.pageDimensions,[y,w]=f.pageTranslation;if(o){const R=L(f,xc,[]);for(let D=0;D<o.length;D+=8)R.push({x:(o[D]-y)/h,y:1-(o[D+1]-w)/g,width:(o[D+2]-o[D])/h,height:(o[D+1]-o[D+5])/g});F(S=f,ft,hk).call(S),F(E=f,ft,Lf).call(E),f.rotate(f.rotation)}else if(c){L(f,Jr,!0);const R=c[0],D={x:R[0]-y,y:g-(R[1]-w)},I=new fk(D,[0,0,h,g],1,m(f,Rs)/2,!0,.001);for(let U=0,B=R.length;U<B;U+=2)D.x=R[U]-y,D.y=g-(R[U+1]-w),I.add(D);const{id:P,clipPathId:k}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);F(C=f,ft,eE).call(C,{highlightOutlines:I.getOutlines(),highlightId:P,clipPathId:k}),F(M=f,ft,Lf).call(M),f.rotate(f.parentRotation)}return f}serialize(n=!1){if(this.isEmpty()||n)return null;if(this.deleted)return this.serializeDeleted();const r=ln._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(n);return Object.assign(i,{color:r,opacity:this.opacity,thickness:m(this,Rs),quadPoints:F(this,ft,lX).call(this),outlines:F(this,ft,cX).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!F(this,ft,fX).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};ev=new WeakMap,Lx=new WeakMap,xc=new WeakMap,Bh=new WeakMap,Ox=new WeakMap,ca=new WeakMap,jx=new WeakMap,Fx=new WeakMap,Hh=new WeakMap,Ba=new WeakMap,Ha=new WeakMap,Jr=new WeakMap,tv=new WeakMap,nv=new WeakMap,xi=new WeakMap,rv=new WeakMap,Rs=new WeakMap,Ux=new WeakMap,ft=new WeakSet,hk=function(){const n=new uk(m(this,xc),.001);L(this,Ba,n.getOutlines()),[this.x,this.y,this.width,this.height]=m(this,Ba).box;const r=new uk(m(this,xc),.0025,.001,this._uiManager.direction==="ltr");L(this,ca,r.getOutlines());const{firstPoint:i}=m(this,Ba);L(this,tv,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:a}=m(this,ca);L(this,nv,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},eE=function({highlightOutlines:n,highlightId:r,clipPathId:i}){var g,y;if(L(this,Ba,n),L(this,ca,n.getNewOutline(m(this,Rs)/2+1.5,.0025)),r>=0)L(this,Ha,r),L(this,Bh,i),this.parent.drawLayer.finalizeDraw(r,{bbox:n.box,path:{d:n.toSVGPath()}}),L(this,xi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:m(this,ca).box,path:{d:m(this,ca).toSVGPath()}},!0));else if(this.parent){const w=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(m(this,Ha),{bbox:F(g=Dt,Is,xm).call(g,m(this,Ba).box,(w-this.rotation+360)%360),path:{d:n.toSVGPath()}}),this.parent.drawLayer.updateProperties(m(this,xi),{bbox:F(y=Dt,Is,xm).call(y,m(this,ca).box,w),path:{d:m(this,ca).toSVGPath()}})}const[s,o,c,u]=n.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=c,this.height=u;break;case 90:{const[w,S]=this.parentDimensions;this.x=o,this.y=1-s,this.width=c*S/w,this.height=u*w/S;break}case 180:this.x=1-s,this.y=1-o,this.width=c,this.height=u;break;case 270:{const[w,S]=this.parentDimensions;this.x=1-o,this.y=s,this.width=c*S/w,this.height=u*w/S;break}}const{firstPoint:f}=n;L(this,tv,[(f[0]-s)/c,(f[1]-o)/u]);const{lastPoint:h}=m(this,ca);L(this,nv,[(h[0]-s)/c,(h[1]-o)/u])},iX=function(n){const r=(s,o)=>{this.color=s,this.opacity=o,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:r.bind(this,n,Dt._defaultOpacity),undo:r.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(n)},!0)},aX=function(n){const r=m(this,Rs),i=a=>{L(this,Rs,a),F(this,ft,sX).call(this,a)};this.addCommands({cmd:i.bind(this,n),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:wt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:n},!0)},sX=function(n){m(this,Jr)&&(F(this,ft,eE).call(this,{highlightOutlines:m(this,Ba).getNewOutline(n/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},pk=function(){m(this,Ha)===null||!this.parent||(this.parent.drawLayer.remove(m(this,Ha)),L(this,Ha,null),this.parent.drawLayer.remove(m(this,xi)),L(this,xi,null))},Lf=function(n=this.parent){m(this,Ha)===null&&({id:lr(this,Ha)._,clipPathId:lr(this,Bh)._}=n.drawLayer.draw({bbox:m(this,Ba).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:m(this,Jr)},path:{d:m(this,Ba).toSVGPath()}},!1,!0),L(this,xi,n.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:m(this,Jr)},bbox:m(this,ca).box,path:{d:m(this,ca).toSVGPath()}},m(this,Jr))),m(this,Hh)&&(m(this,Hh).style.clipPath=m(this,Bh)))},Is=new WeakSet,xm=function([n,r,i,a],s){switch(s){case 90:return[1-r-a,n,a,i];case 180:return[1-n-i,1-r-a,i,a];case 270:return[r,1-n-i,a,i]}return[n,r,i,a]},oX=function(n){Dt._keyboardManager.exec(this,n)},tE=function(n){if(!m(this,ev))return;const r=window.getSelection();n?r.setPosition(m(this,ev),m(this,Lx)):r.setPosition(m(this,jx),m(this,Fx))},nE=function(){return m(this,Jr)?this.rotation:0},lX=function(){if(m(this,Jr))return null;const[n,r]=this.pageDimensions,[i,a]=this.pageTranslation,s=m(this,xc),o=new Float32Array(s.length*8);let c=0;for(const{x:u,y:f,width:h,height:g}of s){const y=u*n+i,w=(1-f)*r+a;o[c]=o[c+4]=y,o[c+1]=o[c+3]=w,o[c+2]=o[c+6]=y+h*n,o[c+5]=o[c+7]=w-g*r,c+=8}return o},cX=function(n){return m(this,Ba).serialize(n,F(this,ft,nE).call(this))},uX=function(n,r){this._freeHighlight.add(r)&&n.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},dX=function(n,r){this._freeHighlight.isEmpty()?n.drawLayer.remove(this._freeHighlightId):n.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},fX=function(n){const{color:r}=this._initialData;return this.hasEditedComment||n.color.some((i,a)=>i!==r[a])},j(Dt,Is),Se(Dt,"_defaultColor",null),Se(Dt,"_defaultOpacity",1),Se(Dt,"_defaultThickness",12),Se(Dt,"_type","highlight"),Se(Dt,"_editorType",it.HIGHLIGHT),Se(Dt,"_freeHighlightId",-1),Se(Dt,"_freeHighlight",null),Se(Dt,"_freeHighlightClipId","");let bA=Dt;var zh;class hX{constructor(){j(this,zh,Object.create(null))}updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,r)}updateSVGProperty(e,n){m(this,zh)[e]=n}toSVGProperties(){const e=m(this,zh);return L(this,zh,Object.create(null)),{root:e}}reset(){L(this,zh,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){sn("Not implemented")}}zh=new WeakMap;var za,iv,Rr,$h,Gh,wd,Sd,Ed,qh,Tt,mk,gk,vk,S0,pX,rE,E0,wm;const Fe=class Fe extends ln{constructor(n){super(n);j(this,Tt);j(this,za,null);j(this,iv);Se(this,"_colorPicker",null);Se(this,"_drawId",null);L(this,iv,n.mustBeCommitted||!1),this._addOutlines(n)}onUpdatedColor(){var n;(n=this._colorPicker)==null||n.update(this.color),super.onUpdatedColor()}_addOutlines(n){n.drawOutlines&&(F(this,Tt,mk).call(this,n),F(this,Tt,S0).call(this))}static _mergeSVGProperties(n,r){const i=new Set(Object.keys(n));for(const[a,s]of Object.entries(r))i.has(a)?Object.assign(n[a],s):n[a]=s;return n}static getDefaultDrawingOptions(n){sn("Not implemented")}static get typesMap(){sn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(n,r){const i=this.typesMap.get(n);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(m(Fe,Rr).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(n,r){const i=this.constructor.typesMap.get(n);i&&this._updateProperty(n,i,r)}static get defaultPropertiesToUpdate(){const n=[],r=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)n.push([i,r[a]]);return n}get propertiesToUpdate(){const n=[],{_drawingOptions:r}=this;for(const[i,a]of this.constructor.typesMap)n.push([i,r[a]]);return n}_updateProperty(n,r,i){const a=this._drawingOptions,s=a[r],o=c=>{var f;a.updateProperty(r,c);const u=m(this,za).updateProperty(r,c);u&&F(this,Tt,E0).call(this,u),(f=this.parent)==null||f.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),n===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:n,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Fe._mergeSVGProperties(m(this,za).getPathResizingSVGProperties(F(this,Tt,rE).call(this)),{bbox:F(this,Tt,wm).call(this)}))}_onResized(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Fe._mergeSVGProperties(m(this,za).getPathResizedSVGProperties(F(this,Tt,rE).call(this)),{bbox:F(this,Tt,wm).call(this)}))}_onTranslating(n,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:F(this,Tt,wm).call(this)})}_onTranslated(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,Fe._mergeSVGProperties(m(this,za).getPathTranslatedSVGProperties(F(this,Tt,rE).call(this),this.parentDimensions),{bbox:F(this,Tt,wm).call(this)}))}_onStartDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(n){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,m(this,iv)&&(L(this,iv,!1),this.commit(),this.parent.setSelected(this),n&&this.isOnScreen&&this.div.focus())}remove(){F(this,Tt,vk).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(F(this,Tt,S0).call(this),F(this,Tt,E0).call(this,m(this,za).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(n){var i;let r=!1;this.parent&&!n?(this._uiManager.removeShouldRescale(this),F(this,Tt,vk).call(this)):n&&(this._uiManager.addShouldRescale(this),F(this,Tt,S0).call(this,n),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(n),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Fe._mergeSVGProperties({bbox:F(this,Tt,wm).call(this)},m(this,za).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&F(this,Tt,E0).call(this,m(this,za).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let n,r;this._isCopy&&(n=this.x,r=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(n,r),i}static createDrawerInstance(n,r,i,a,s){sn("Not implemented")}static startDrawing(n,r,i,a){var E;const{target:s,offsetX:o,offsetY:c,pointerId:u,pointerType:f}=a;if(m(Fe,Sd)&&m(Fe,Sd)!==f)return;const{viewport:{rotation:h}}=n,{width:g,height:y}=s.getBoundingClientRect(),w=L(Fe,$h,new AbortController),S=n.combinedSignal(w);if(m(Fe,wd)||L(Fe,wd,u),m(Fe,Sd)??L(Fe,Sd,f),window.addEventListener("pointerup",C=>{var M;m(Fe,wd)===C.pointerId?this._endDraw(C):(M=m(Fe,Ed))==null||M.delete(C.pointerId)},{signal:S}),window.addEventListener("pointercancel",C=>{var M;m(Fe,wd)===C.pointerId?this._currentParent.endDrawingSession():(M=m(Fe,Ed))==null||M.delete(C.pointerId)},{signal:S}),window.addEventListener("pointerdown",C=>{m(Fe,Sd)===C.pointerType&&((m(Fe,Ed)||L(Fe,Ed,new Set)).add(C.pointerId),m(Fe,Rr).isCancellable()&&(m(Fe,Rr).removeLastElement(),m(Fe,Rr).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",es,{signal:S}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),s.addEventListener("touchmove",C=>{C.timeStamp===m(Fe,qh)&&Nn(C)},{signal:S}),n.toggleDrawing(),(E=r._editorUndoBar)==null||E.hide(),m(Fe,Rr)){n.drawLayer.updateProperties(this._currentDrawId,m(Fe,Rr).startNew(o,c,g,y,h));return}r.updateUIForDefaultProperties(this),L(Fe,Rr,this.createDrawerInstance(o,c,g,y,h)),L(Fe,Gh,this.getDefaultDrawingOptions()),this._currentParent=n,{id:this._currentDrawId}=n.drawLayer.draw(this._mergeSVGProperties(m(Fe,Gh).toSVGProperties(),m(Fe,Rr).defaultSVGProperties),!0,!1)}static _drawMove(n){var s;if(L(Fe,qh,-1),!m(Fe,Rr))return;const{offsetX:r,offsetY:i,pointerId:a}=n;if(m(Fe,wd)===a){if(((s=m(Fe,Ed))==null?void 0:s.size)>=1){this._endDraw(n);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,m(Fe,Rr).add(r,i)),L(Fe,qh,n.timeStamp),Nn(n)}}static _cleanup(n){n&&(this._currentDrawId=-1,this._currentParent=null,L(Fe,Rr,null),L(Fe,Gh,null),L(Fe,Sd,null),L(Fe,qh,NaN)),m(Fe,$h)&&(m(Fe,$h).abort(),L(Fe,$h,null),L(Fe,wd,NaN),L(Fe,Ed,null))}static _endDraw(n){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(n==null?void 0:n.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,m(Fe,Rr).end(n.offsetX,n.offsetY)),this.supportMultipleDrawings){const i=m(Fe,Rr),a=this._currentDrawId,s=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(a,i.setLastElement(s))},undo:()=>{r.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:wt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(n){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(wt.DRAW_STEP),!m(Fe,Rr).isEmpty()){const{pageDimensions:[i,a],scale:s}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:m(Fe,Rr).getOutlines(i*s,a*s,s,this._INNER_MARGIN),drawingOptions:m(Fe,Gh),mustBeCommitted:!n});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(n){}static deserializeDraw(n,r,i,a,s,o){sn("Not implemented")}static async deserialize(n,r,i){var h,g;const{rawDims:{pageWidth:a,pageHeight:s,pageX:o,pageY:c}}=r.viewport,u=this.deserializeDraw(o,c,a,s,this._INNER_MARGIN,n),f=await super.deserialize(n,r,i);return f.createDrawingOptions(n),F(h=f,Tt,mk).call(h,{drawOutlines:u}),F(g=f,Tt,S0).call(g),f.onScaleChanging(),f.rotate(),f}serializeDraw(n){const[r,i]=this.pageTranslation,[a,s]=this.pageDimensions;return m(this,za).serialize([r,i,a,s],n)}renderAnnotationElement(n){return n.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};za=new WeakMap,iv=new WeakMap,Rr=new WeakMap,$h=new WeakMap,Gh=new WeakMap,wd=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,qh=new WeakMap,Tt=new WeakSet,mk=function({drawOutlines:n,drawId:r,drawingOptions:i}){L(this,za,n),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,n.defaultProperties)):this._drawId=F(this,Tt,gk).call(this,n,this.parent),F(this,Tt,E0).call(this,n.box)},gk=function(n,r){const{id:i}=r.drawLayer.draw(Fe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),n.defaultSVGProperties),!1,!1);return i},vk=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},S0=function(n=this.parent){if(!(this._drawId!==null&&this.parent===n)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,n.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=F(this,Tt,gk).call(this,m(this,za),n)}},pX=function([n,r,i,a]){const{parentDimensions:[s,o],rotation:c}=this;switch(c){case 90:return[r,1-n,i*(o/s),a*(s/o)];case 180:return[1-n,1-r,i,a];case 270:return[1-r,n,i*(o/s),a*(s/o)];default:return[n,r,i,a]}},rE=function(){const{x:n,y:r,width:i,height:a,parentDimensions:[s,o],rotation:c}=this;switch(c){case 90:return[1-r,n,i*(s/o),a*(o/s)];case 180:return[1-n,1-r,i,a];case 270:return[r,1-n,i*(s/o),a*(o/s)];default:return[n,r,i,a]}},E0=function(n){[this.x,this.y,this.width,this.height]=F(this,Tt,pX).call(this,n),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},wm=function(){const{x:n,y:r,width:i,height:a,rotation:s,parentRotation:o,parentDimensions:[c,u]}=this;switch((s*4+o)/90){case 1:return[1-r-a,n,a,i];case 2:return[1-n-i,1-r-a,i,a];case 3:return[r,1-n-i,a,i];case 4:return[n,r-i*(c/u),a*(u/c),i*(c/u)];case 5:return[1-r,n,i*(c/u),a*(u/c)];case 6:return[1-n-a*(u/c),1-r,a*(u/c),i*(c/u)];case 7:return[r-i*(c/u),1-n-a*(u/c),i*(c/u),a*(u/c)];case 8:return[n-i,r-a,i,a];case 9:return[1-r,n-i,a,i];case 10:return[1-n,1-r,i,a];case 11:return[r-a,1-n,a,i];case 12:return[n-a*(u/c),r,a*(u/c),i*(c/u)];case 13:return[1-r-i*(c/u),n-a*(u/c),i*(c/u),a*(u/c)];case 14:return[1-n,1-r-i*(c/u),a*(u/c),i*(c/u)];case 15:return[r,1-n,i*(c/u),a*(u/c)];default:return[n,r,i,a]}},Se(Fe,"_currentDrawId",-1),Se(Fe,"_currentParent",null),j(Fe,Rr,null),j(Fe,$h,null),j(Fe,Gh,null),j(Fe,wd,NaN),j(Fe,Sd,null),j(Fe,Ed,null),j(Fe,qh,NaN),Se(Fe,"_INNER_MARGIN",3);let xA=Fe;var tl,Mr,Pr,Vh,av,Ii,Qr,Ms,Wh,Yh,Kh,sv,iE;class qTe{constructor(e,n,r,i,a,s){j(this,sv);j(this,tl,new Float64Array(6));j(this,Mr);j(this,Pr);j(this,Vh);j(this,av);j(this,Ii);j(this,Qr,"");j(this,Ms,0);j(this,Wh,new Sw);j(this,Yh);j(this,Kh);L(this,Yh,r),L(this,Kh,i),L(this,Vh,a),L(this,av,s),[e,n]=F(this,sv,iE).call(this,e,n);const o=L(this,Mr,[NaN,NaN,NaN,NaN,e,n]);L(this,Ii,[e,n]),L(this,Pr,[{line:o,points:m(this,Ii)}]),m(this,tl).set(o,0)}updateProperty(e,n){e==="stroke-width"&&L(this,av,n)}isEmpty(){return!m(this,Pr)||m(this,Pr).length===0}isCancellable(){return m(this,Ii).length<=10}add(e,n){[e,n]=F(this,sv,iE).call(this,e,n);const[r,i,a,s]=m(this,tl).subarray(2,6),o=e-a,c=n-s;return Math.hypot(m(this,Yh)*o,m(this,Kh)*c)<=2?null:(m(this,Ii).push(e,n),isNaN(r)?(m(this,tl).set([a,s,e,n],2),m(this,Mr).push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(m(this,tl)[0])&&m(this,Mr).splice(6,6),m(this,tl).set([r,i,a,s,e,n],0),m(this,Mr).push(...De.createBezierPoints(r,i,a,s,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(m(this,Ii).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,i,a){L(this,Yh,r),L(this,Kh,i),L(this,Vh,a),[e,n]=F(this,sv,iE).call(this,e,n);const s=L(this,Mr,[NaN,NaN,NaN,NaN,e,n]);L(this,Ii,[e,n]);const o=m(this,Pr).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),m(this,Pr).push({line:s,points:m(this,Ii)}),m(this,tl).set(s,0),L(this,Ms,0),this.toSVGPath(),null}getLastElement(){return m(this,Pr).at(-1)}setLastElement(e){return m(this,Pr)?(m(this,Pr).push(e),L(this,Mr,e.line),L(this,Ii,e.points),L(this,Ms,0),{path:{d:this.toSVGPath()}}):m(this,Wh).setLastElement(e)}removeLastElement(){if(!m(this,Pr))return m(this,Wh).removeLastElement();m(this,Pr).pop(),L(this,Qr,"");for(let e=0,n=m(this,Pr).length;e<n;e++){const{line:r,points:i}=m(this,Pr)[e];L(this,Mr,r),L(this,Ii,i),L(this,Ms,0),this.toSVGPath()}return{path:{d:m(this,Qr)}}}toSVGPath(){const e=De.svgRound(m(this,Mr)[4]),n=De.svgRound(m(this,Mr)[5]);if(m(this,Ii).length===2)return L(this,Qr,`${m(this,Qr)} M ${e} ${n} Z`),m(this,Qr);if(m(this,Ii).length<=6){const i=m(this,Qr).lastIndexOf("M");L(this,Qr,`${m(this,Qr).slice(0,i)} M ${e} ${n}`),L(this,Ms,6)}if(m(this,Ii).length===4){const i=De.svgRound(m(this,Mr)[10]),a=De.svgRound(m(this,Mr)[11]);return L(this,Qr,`${m(this,Qr)} L ${i} ${a}`),L(this,Ms,12),m(this,Qr)}const r=[];m(this,Ms)===0&&(r.push(`M ${e} ${n}`),L(this,Ms,6));for(let i=m(this,Ms),a=m(this,Mr).length;i<a;i+=6){const[s,o,c,u,f,h]=m(this,Mr).slice(i,i+6).map(De.svgRound);r.push(`C${s} ${o} ${c} ${u} ${f} ${h}`)}return L(this,Qr,m(this,Qr)+r.join(" ")),L(this,Ms,m(this,Mr).length),m(this,Qr)}getOutlines(e,n,r,i){const a=m(this,Pr).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),m(this,Wh).build(m(this,Pr),e,n,r,m(this,Vh),m(this,av),i),L(this,tl,null),L(this,Mr,null),L(this,Pr,null),L(this,Qr,null),m(this,Wh)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}tl=new WeakMap,Mr=new WeakMap,Pr=new WeakMap,Vh=new WeakMap,av=new WeakMap,Ii=new WeakMap,Qr=new WeakMap,Ms=new WeakMap,Wh=new WeakMap,Yh=new WeakMap,Kh=new WeakMap,sv=new WeakSet,iE=function(e,n){return De._normalizePoint(e,n,m(this,Yh),m(this,Kh),m(this,Vh))};var Di,Bx,Hx,$a,nl,rl,ov,lv,Xh,ii,zl,mX,gX,vX;class Sw extends De{constructor(){super(...arguments);j(this,ii);j(this,Di);j(this,Bx,0);j(this,Hx);j(this,$a);j(this,nl);j(this,rl);j(this,ov);j(this,lv);j(this,Xh)}build(n,r,i,a,s,o,c){L(this,nl,r),L(this,rl,i),L(this,ov,a),L(this,lv,s),L(this,Xh,o),L(this,Hx,c??0),L(this,$a,n),F(this,ii,gX).call(this)}get thickness(){return m(this,Xh)}setLastElement(n){return m(this,$a).push(n),{path:{d:this.toSVGPath()}}}removeLastElement(){return m(this,$a).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const n=[];for(const{line:r}of m(this,$a)){if(n.push(`M${De.svgRound(r[4])} ${De.svgRound(r[5])}`),r.length===6){n.push("Z");continue}if(r.length===12&&isNaN(r[6])){n.push(`L${De.svgRound(r[10])} ${De.svgRound(r[11])}`);continue}for(let i=6,a=r.length;i<a;i+=6){const[s,o,c,u,f,h]=r.subarray(i,i+6).map(De.svgRound);n.push(`C${s} ${o} ${c} ${u} ${f} ${h}`)}}return n.join("")}serialize([n,r,i,a],s){const o=[],c=[],[u,f,h,g]=F(this,ii,mX).call(this);let y,w,S,E,C,M,R,D,I;switch(m(this,lv)){case 0:I=De._rescale,y=n,w=r+a,S=i,E=-a,C=n+u*i,M=r+(1-f-g)*a,R=n+(u+h)*i,D=r+(1-f)*a;break;case 90:I=De._rescaleAndSwap,y=n,w=r,S=i,E=a,C=n+f*i,M=r+u*a,R=n+(f+g)*i,D=r+(u+h)*a;break;case 180:I=De._rescale,y=n+i,w=r,S=-i,E=a,C=n+(1-u-h)*i,M=r+f*a,R=n+(1-u)*i,D=r+(f+g)*a;break;case 270:I=De._rescaleAndSwap,y=n+i,w=r+a,S=-i,E=-a,C=n+(1-f-g)*i,M=r+(1-u-h)*a,R=n+(1-f)*i,D=r+(1-u)*a;break}for(const{line:P,points:k}of m(this,$a))o.push(I(P,y,w,S,E,s?new Array(P.length):null)),c.push(I(k,y,w,S,E,s?new Array(k.length):null));return{lines:o,points:c,rect:[C,M,R,D]}}static deserialize(n,r,i,a,s,{paths:{lines:o,points:c},rotation:u,thickness:f}){const h=[];let g,y,w,S,E;switch(u){case 0:E=De._rescale,g=-n/i,y=r/a+1,w=1/i,S=-1/a;break;case 90:E=De._rescaleAndSwap,g=-r/a,y=-n/i,w=1/a,S=1/i;break;case 180:E=De._rescale,g=n/i+1,y=-r/a,w=-1/i,S=1/a;break;case 270:E=De._rescaleAndSwap,g=r/a+1,y=n/i+1,w=-1/a,S=-1/i;break}if(!o){o=[];for(const M of c){const R=M.length;if(R===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1]]));continue}if(R===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,M[0],M[1],NaN,NaN,NaN,NaN,M[2],M[3]]));continue}const D=new Float32Array(3*(R-2));o.push(D);let[I,P,k,U]=M.subarray(0,4);D.set([NaN,NaN,NaN,NaN,I,P],0);for(let B=4;B<R;B+=2){const V=M[B],H=M[B+1];D.set(De.createBezierPoints(I,P,k,U,V,H),(B-2)*3),[I,P,k,U]=[k,U,V,H]}}}for(let M=0,R=o.length;M<R;M++)h.push({line:E(o[M].map(D=>D??NaN),g,y,w,S),points:E(c[M].map(D=>D??NaN),g,y,w,S)});const C=new this.prototype.constructor;return C.build(h,i,a,1,u,f,s),C}get box(){return m(this,Di)}updateProperty(n,r){return n==="stroke-width"?F(this,ii,vX).call(this,r):null}updateParentDimensions([n,r],i){const[a,s]=F(this,ii,zl).call(this);L(this,nl,n),L(this,rl,r),L(this,ov,i);const[o,c]=F(this,ii,zl).call(this),u=o-a,f=c-s,h=m(this,Di);return h[0]-=u,h[1]-=f,h[2]+=2*u,h[3]+=2*f,h}updateRotation(n){return L(this,Bx,n),{path:{transform:this.rotationTransform}}}get viewBox(){return m(this,Di).map(De.svgRound).join(" ")}get defaultProperties(){const[n,r]=m(this,Di);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${De.svgRound(n)} ${De.svgRound(r)}`}}}get rotationTransform(){const[,,n,r]=m(this,Di);let i=0,a=0,s=0,o=0,c=0,u=0;switch(m(this,Bx)){case 90:a=r/n,s=-n/r,c=n;break;case 180:i=-1,o=-1,c=n,u=r;break;case 270:a=-r/n,s=n/r,u=r;break;default:return""}return`matrix(${i} ${a} ${s} ${o} ${De.svgRound(c)} ${De.svgRound(u)})`}getPathResizingSVGProperties([n,r,i,a]){const[s,o]=F(this,ii,zl).call(this),[c,u,f,h]=m(this,Di);if(Math.abs(f-s)<=De.PRECISION||Math.abs(h-o)<=De.PRECISION){const E=n+i/2-(c+f/2),C=r+a/2-(u+h/2);return{path:{"transform-origin":`${De.svgRound(n)} ${De.svgRound(r)}`,transform:`${this.rotationTransform} translate(${E} ${C})`}}}const g=(i-2*s)/(f-2*s),y=(a-2*o)/(h-2*o),w=f/i,S=h/a;return{path:{"transform-origin":`${De.svgRound(c)} ${De.svgRound(u)}`,transform:`${this.rotationTransform} scale(${w} ${S}) translate(${De.svgRound(s)} ${De.svgRound(o)}) scale(${g} ${y}) translate(${De.svgRound(-s)} ${De.svgRound(-o)})`}}}getPathResizedSVGProperties([n,r,i,a]){const[s,o]=F(this,ii,zl).call(this),c=m(this,Di),[u,f,h,g]=c;if(c[0]=n,c[1]=r,c[2]=i,c[3]=a,Math.abs(h-s)<=De.PRECISION||Math.abs(g-o)<=De.PRECISION){const C=n+i/2-(u+h/2),M=r+a/2-(f+g/2);for(const{line:R,points:D}of m(this,$a))De._translate(R,C,M,R),De._translate(D,C,M,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${De.svgRound(n)} ${De.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(i-2*s)/(h-2*s),w=(a-2*o)/(g-2*o),S=-y*(u+s)+n+s,E=-w*(f+o)+r+o;if(y!==1||w!==1||S!==0||E!==0)for(const{line:C,points:M}of m(this,$a))De._rescale(C,S,E,y,w,C),De._rescale(M,S,E,y,w,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${De.svgRound(n)} ${De.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([n,r],i){const[a,s]=i,o=m(this,Di),c=n-o[0],u=r-o[1];if(m(this,nl)===a&&m(this,rl)===s)for(const{line:f,points:h}of m(this,$a))De._translate(f,c,u,f),De._translate(h,c,u,h);else{const f=m(this,nl)/a,h=m(this,rl)/s;L(this,nl,a),L(this,rl,s);for(const{line:g,points:y}of m(this,$a))De._rescale(g,c,u,f,h,g),De._rescale(y,c,u,f,h,y);o[2]*=f,o[3]*=h}return o[0]=n,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${De.svgRound(n)} ${De.svgRound(r)}`}}}get defaultSVGProperties(){const n=m(this,Di);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${De.svgRound(n[0])} ${De.svgRound(n[1])}`,transform:this.rotationTransform||null},bbox:n}}}Di=new WeakMap,Bx=new WeakMap,Hx=new WeakMap,$a=new WeakMap,nl=new WeakMap,rl=new WeakMap,ov=new WeakMap,lv=new WeakMap,Xh=new WeakMap,ii=new WeakSet,zl=function(n=m(this,Xh)){const r=m(this,Hx)+n/2*m(this,ov);return m(this,lv)%180===0?[r/m(this,nl),r/m(this,rl)]:[r/m(this,rl),r/m(this,nl)]},mX=function(){const[n,r,i,a]=m(this,Di),[s,o]=F(this,ii,zl).call(this,0);return[n+s,r+o,i-2*s,a-2*o]},gX=function(){const n=L(this,Di,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of m(this,$a)){if(a.length<=12){for(let c=4,u=a.length;c<u;c+=6)Le.pointBoundingBox(a[c],a[c+1],n);continue}let s=a[4],o=a[5];for(let c=6,u=a.length;c<u;c+=6){const[f,h,g,y,w,S]=a.subarray(c,c+6);Le.bezierBoundingBox(s,o,f,h,g,y,w,S,n),s=w,o=S}}const[r,i]=F(this,ii,zl).call(this);n[0]=Si(n[0]-r,0,1),n[1]=Si(n[1]-i,0,1),n[2]=Si(n[2]+r,0,1),n[3]=Si(n[3]+i,0,1),n[2]-=n[0],n[3]-=n[1]},vX=function(n){const[r,i]=F(this,ii,zl).call(this);L(this,Xh,n);const[a,s]=F(this,ii,zl).call(this),[o,c]=[a-r,s-i],u=m(this,Di);return u[0]-=o,u[1]-=c,u[2]+=2*o,u[3]+=2*c,u};class rC extends hX{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ln._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??(n=this["stroke-width"]),n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new rC(this._viewParameters);return e.updateAll(this),e}}var BA,yX;const km=class km extends xA{constructor(n){super({...n,name:"inkEditor"});j(this,BA);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(n,r){ln.initialize(n,r),this._defaultDrawingOptions=new rC(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return dt(this,"typesMap",new Map([[wt.INK_THICKNESS,"stroke-width"],[wt.INK_COLOR,"stroke"],[wt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(n,r,i,a,s){return new qTe(n,r,i,a,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(n,r,i,a,s,o){return Sw.deserialize(n,r,i,a,s,o)}static async deserialize(n,r,i){let a=null;if(n instanceof mL){const{data:{inkLists:o,rect:c,rotation:u,id:f,color:h,opacity:g,borderStyle:{rawWidth:y},popupRef:w,richText:S,contentsObj:E,creationDate:C,modificationDate:M},parent:{page:{pageNumber:R}}}=n;a=n={annotationType:it.INK,color:Array.from(h),thickness:y,opacity:g,paths:{points:o},boxes:null,pageIndex:R-1,rect:c.slice(0),rotation:u,annotationElementId:f,id:f,deleted:!1,popupRef:w,richText:S,comment:(E==null?void 0:E.str)||null,creationDate:C,modificationDate:M}}const s=await super.deserialize(n,r,i);return s._initialData=a,n.comment&&s.setCommentData(n),s}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new vA(this)),[["colorPicker",this._colorPicker]]}get colorType(){return wt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:n,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(n,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const n=this._currentParent;n&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:n,thickness:r,opacity:i}){this._drawingOptions=km.getDefaultDrawingOptions({stroke:Le.makeHexColor(...n),"stroke-width":r,"stroke-opacity":i})}serialize(n=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{stroke:a,"stroke-opacity":s,"stroke-width":o}}=this,c=Object.assign(super.serialize(n),{color:ln._colorManager.convert(a),opacity:s,thickness:o,paths:{lines:r,points:i}});return this.addComment(c),n?(c.isCopy=!0,c):this.annotationElementId&&!F(this,BA,yX).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(n){if(this.deleted)return n.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1);return n.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};BA=new WeakSet,yX=function(n){const{color:r,thickness:i,opacity:a,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||n.color.some((o,c)=>o!==r[c])||n.thickness!==i||n.opacity!==a||n.pageIndex!==s},Se(km,"_type","ink"),Se(km,"_editorType",it.INK),Se(km,"_defaultDrawingOptions",null);let yk=km;class bk extends Sw{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const x1=8,Qy=3;var Jh,Ot,xk,co,bX,xX,wk,aE,wX,SX,EX,Sk,Ek,AX;class ll{static extractContoursFromText(e,{fontFamily:n,fontStyle:r,fontWeight:i},a,s,o,c){let u=new OffscreenCanvas(1,1),f=u.getContext("2d",{alpha:!1});const h=200,g=f.font=`${r} ${i} ${h}px ${n}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:E,fontBoundingBoxAscent:C,fontBoundingBoxDescent:M,width:R}=f.measureText(e),D=1.5,I=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,R)*D),P=Math.ceil(Math.max(Math.abs(S)+Math.abs(E)||h,Math.abs(C)+Math.abs(M)||h)*D);u=new OffscreenCanvas(I,P),f=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=g,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,I,P),f.fillStyle="black",f.fillText(e,I*(D-1)/2,P*(3-D)/2);const k=F(this,Ot,Sk).call(this,f.getImageData(0,0,I,P).data),U=F(this,Ot,EX).call(this,k),B=F(this,Ot,Ek).call(this,U),V=F(this,Ot,wk).call(this,k,I,P,B);return this.processDrawnLines({lines:{curves:V,width:I,height:P},pageWidth:a,pageHeight:s,rotation:o,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,n,r,i,a){const[s,o,c]=F(this,Ot,AX).call(this,e),[u,f]=F(this,Ot,SX).call(this,s,o,c,Math.hypot(o,c)*m(this,Jh).sigmaSFactor,m(this,Jh).sigmaR,m(this,Jh).kernelSize),h=F(this,Ot,Ek).call(this,f),g=F(this,Ot,wk).call(this,u,o,c,h);return this.processDrawnLines({lines:{curves:g,width:o,height:c},pageWidth:n,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:s,areContours:o}){i%180!==0&&([n,r]=[r,n]);const{curves:c,width:u,height:f}=e,h=e.thickness??0,g=[],y=Math.min(n/u,r/f),w=y/n,S=y/r,E=[];for(const{points:M}of c){const R=s?F(this,Ot,wX).call(this,M):M;if(!R)continue;E.push(R);const D=R.length,I=new Float32Array(D),P=new Float32Array(3*(D===2?2:D-2));if(g.push({line:P,points:I}),D===2){I[0]=R[0]*w,I[1]=R[1]*S,P.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[k,U,B,V]=R;k*=w,U*=S,B*=w,V*=S,I.set([k,U,B,V],0),P.set([NaN,NaN,NaN,NaN,k,U],0);for(let H=4;H<D;H+=2){const G=I[H]=R[H]*w,Q=I[H+1]=R[H+1]*S;P.set(De.createBezierPoints(k,U,B,V,G,Q),(H-2)*3),[k,U,B,V]=[B,V,G,Q]}}if(g.length===0)return null;const C=o?new bk:new Sw;return C.build(g,n,r,1,i,o?0:h,a),{outline:C,newCurves:E,areContours:o,thickness:h,width:u,height:f}}static async compressSignature({outlines:e,areContours:n,thickness:r,width:i,height:a}){let s=1/0,o=-1/0,c=0;for(const R of e){c+=R.length;for(let D=2,I=R.length;D<I;D++){const P=R[D]-R[D-2];s=Math.min(s,P),o=Math.max(o,P)}}let u;s>=-128&&o<=127?u=Int8Array:s>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const f=e.length,h=x1+Qy*f,g=new Uint32Array(h);let y=0;g[y++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*f)*u.BYTES_PER_ELEMENT,g[y++]=0,g[y++]=i,g[y++]=a,g[y++]=n?0:1,g[y++]=Math.max(0,Math.floor(r??0)),g[y++]=f,g[y++]=u.BYTES_PER_ELEMENT;for(const R of e)g[y++]=R.length-2,g[y++]=R[0],g[y++]=R[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(g);const E=u.prototype.constructor;for(const R of e){const D=new E(R.length-2);for(let I=2,P=R.length;I<P;I++)D[I-2]=R[I]-R[I-2];S.write(D)}S.close();const C=await new Response(w.readable).arrayBuffer(),M=new Uint8Array(C);return x7(M)}static async decompressSignature(e){try{const n=gCe(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(n).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,o=0;for await(const R of r)s||(s=new Uint8Array(new Uint32Array(R.buffer,0,4)[0])),s.set(R,o),o+=R.length;const c=new Uint32Array(s.buffer,0,s.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const f=c[2],h=c[3],g=c[4]===0,y=c[5],w=c[6],S=c[7],E=[],C=(x1+Qy*w)*Uint32Array.BYTES_PER_ELEMENT;let M;switch(S){case Int8Array.BYTES_PER_ELEMENT:M=new Int8Array(s.buffer,C);break;case Int16Array.BYTES_PER_ELEMENT:M=new Int16Array(s.buffer,C);break;case Int32Array.BYTES_PER_ELEMENT:M=new Int32Array(s.buffer,C);break}o=0;for(let R=0;R<w;R++){const D=c[Qy*R+x1],I=new Float32Array(D+2);E.push(I);for(let P=0;P<Qy-1;P++)I[P]=c[Qy*R+x1+P+1];for(let P=0;P<D;P++)I[P+2]=I[P]+M[o++]}return{areContours:g,thickness:y,outlines:E,width:f,height:h}}catch(n){return at(`decompressSignature: ${n}`),null}}}Jh=new WeakMap,Ot=new WeakSet,xk=function(e,n,r,i){return r-=e,i-=n,r===0?i>0?0:4:r===1?i+6:2-i},co=new WeakMap,bX=function(e,n,r,i,a,s,o){const c=F(this,Ot,xk).call(this,r,i,a,s);for(let u=0;u<8;u++){const f=(-u+c-o+16)%8,h=m(this,co)[2*f],g=m(this,co)[2*f+1];if(e[(r+h)*n+(i+g)]!==0)return f}return-1},xX=function(e,n,r,i,a,s,o){const c=F(this,Ot,xk).call(this,r,i,a,s);for(let u=0;u<8;u++){const f=(u+c+o+16)%8,h=m(this,co)[2*f],g=m(this,co)[2*f+1];if(e[(r+h)*n+(i+g)]!==0)return f}return-1},wk=function(e,n,r,i){const a=e.length,s=new Int32Array(a);for(let f=0;f<a;f++)s[f]=e[f]<=i?1:0;for(let f=1;f<r-1;f++)s[f*n]=s[f*n+n-1]=0;for(let f=0;f<n;f++)s[f]=s[n*r-1-f]=0;let o=1,c;const u=[];for(let f=1;f<r-1;f++){c=1;for(let h=1;h<n-1;h++){const g=f*n+h,y=s[g];if(y===0)continue;let w=f,S=h;if(y===1&&s[g-1]===0)o+=1,S-=1;else if(y>=1&&s[g+1]===0)o+=1,S+=1,y>1&&(c=y);else{y!==1&&(c=Math.abs(y));continue}const E=[h,f],C=S===h+1,M={isHole:C,points:E,id:o,parent:0};u.push(M);let R;for(const H of u)if(H.id===c){R=H;break}R?R.isHole?M.parent=C?R.parent:c:M.parent=C?c:R.parent:M.parent=C?c:0;const D=F(this,Ot,bX).call(this,s,n,f,h,w,S,0);if(D===-1){s[g]=-o,s[g]!==1&&(c=Math.abs(s[g]));continue}let I=m(this,co)[2*D],P=m(this,co)[2*D+1];const k=f+I,U=h+P;w=k,S=U;let B=f,V=h;for(;;){const H=F(this,Ot,xX).call(this,s,n,B,V,w,S,1);I=m(this,co)[2*H],P=m(this,co)[2*H+1];const G=B+I,Q=V+P;E.push(Q,G);const W=B*n+V;if(s[W+1]===0?s[W]=-o:s[W]===1&&(s[W]=o),G===f&&Q===h&&B===k&&V===U){s[g]!==1&&(c=Math.abs(s[g]));break}else w=B,S=V,B=G,V=Q}}}return u},aE=function(e,n,r,i){if(r-n<=4){for(let k=n;k<r-2;k+=2)i.push(e[k],e[k+1]);return}const a=e[n],s=e[n+1],o=e[r-4]-a,c=e[r-3]-s,u=Math.hypot(o,c),f=o/u,h=c/u,g=f*s-h*a,y=c/o,w=1/u,S=Math.atan(y),E=Math.cos(S),C=Math.sin(S),M=w*(Math.abs(E)+Math.abs(C)),R=w*(1-M+M**2),D=Math.max(Math.atan(Math.abs(C+E)*R),Math.atan(Math.abs(C-E)*R));let I=0,P=n;for(let k=n+2;k<r-2;k+=2){const U=Math.abs(g-f*e[k+1]+h*e[k]);U>I&&(P=k,I=U)}I>(u*D)**2?(F(this,Ot,aE).call(this,e,n,P+2,i),F(this,Ot,aE).call(this,e,P,r,i)):i.push(a,s)},wX=function(e){const n=[],r=e.length;return F(this,Ot,aE).call(this,e,0,r,n),n.push(e[r-2],e[r-1]),n.length<=4?null:n},SX=function(e,n,r,i,a,s){const o=new Float32Array(s**2),c=-2*i**2,u=s>>1;for(let S=0;S<s;S++){const E=(S-u)**2;for(let C=0;C<s;C++)o[S*s+C]=Math.exp((E+(C-u)**2)/c)}const f=new Float32Array(256),h=-2*a**2;for(let S=0;S<256;S++)f[S]=Math.exp(S**2/h);const g=e.length,y=new Uint8Array(g),w=new Uint32Array(256);for(let S=0;S<r;S++)for(let E=0;E<n;E++){const C=S*n+E,M=e[C];let R=0,D=0;for(let P=0;P<s;P++){const k=S+P-u;if(!(k<0||k>=r))for(let U=0;U<s;U++){const B=E+U-u;if(B<0||B>=n)continue;const V=e[k*n+B],H=o[P*s+U]*f[Math.abs(V-M)];R+=V*H,D+=H}}const I=y[C]=Math.round(R/D);w[I]++}return[y,w]},EX=function(e){const n=new Uint32Array(256);for(const r of e)n[r]++;return n},Sk=function(e){const n=e.length,r=new Uint8ClampedArray(n>>2);let i=-1/0,a=1/0;for(let o=0,c=r.length;o<c;o++){const u=r[o]=e[o<<2];i=Math.max(i,u),a=Math.min(a,u)}const s=255/(i-a);for(let o=0,c=r.length;o<c;o++)r[o]=(r[o]-a)*s;return r},Ek=function(e){let n,r=-1/0,i=-1/0;const a=e.findIndex(c=>c!==0);let s=a,o=a;for(n=a;n<256;n++){const c=e[n];c>r&&(n-s>i&&(i=n-s,o=n-1),r=c,s=n)}for(n=o-1;n>=0&&!(e[n]>e[n+1]);n--);return n},AX=function(e){const n=e,{width:r,height:i}=e,{maxDim:a}=m(this,Jh);let s=r,o=i;if(r>a||i>a){let g=r,y=i,w=Math.log2(Math.max(r,i)/a);const S=Math.floor(w);w=w===S?S-1:S;for(let C=0;C<w;C++){s=Math.ceil(g/2),o=Math.ceil(y/2);const M=new OffscreenCanvas(s,o);M.getContext("2d").drawImage(e,0,0,g,y,0,0,s,o),g=s,y=o,e!==n&&e.close(),e=M.transferToImageBitmap()}const E=Math.min(a/s,a/o);s=Math.round(s*E),o=Math.round(o*E)}const u=new OffscreenCanvas(s,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,s,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,s,o);const f=u.getImageData(0,0,s,o).data;return[F(this,Ot,Sk).call(this,f),s,o]},j(ll,Ot),j(ll,Jh,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),j(ll,co,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class vL extends hX{constructor(){super(),super.updateProperties({fill:ln._defaultLineColor,"stroke-width":0})}clone(){const e=new vL;return e.updateAll(this),e}}class yL extends rC{constructor(e){super(e),super.updateProperties({stroke:ln._defaultLineColor,"stroke-width":1})}clone(){const e=new yL(this._viewParameters);return e.updateAll(this),e}}var Ad,il,_d,Qh;const Ta=class Ta extends xA{constructor(n){super({...n,mustBeCommitted:!0,name:"signatureEditor"});j(this,Ad,!1);j(this,il,null);j(this,_d,null);j(this,Qh,null);this._willKeepAspectRatio=!0,L(this,_d,n.signatureData||null),L(this,il,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(n,r){ln.initialize(n,r),this._defaultDrawingOptions=new vL,this._defaultDrawnSignatureOptions=new yL(r.viewParameters)}static getDefaultDrawingOptions(n){const r=this._defaultDrawingOptions.clone();return r.updateProperties(n),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return dt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!m(this,il)}}static computeTelemetryFinalData(n){const r=n.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let n,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,n=this.x,r=this.y),super.render(),this._drawId===null)if(m(this,_d)){const{lines:a,mustSmooth:s,areContours:o,description:c,uuid:u,heightInPage:f}=m(this,_d),{rawDims:{pageWidth:h,pageHeight:g},rotation:y}=this.parent.viewport,w=ll.processDrawnLines({lines:a,pageWidth:h,pageHeight:g,rotation:y,innerMargin:Ta._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(w,f,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:m(this,il)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(n,r)),this.div}setUuid(n){L(this,Qh,n),this.addEditToolbar()}getUuid(){return m(this,Qh)}get description(){return m(this,il)}set description(n){L(this,il,n),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:n})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(n)}))}getSignaturePreview(){const{newCurves:n,areContours:r,thickness:i,width:a,height:s}=m(this,_d),o=Math.max(a,s),c=ll.processDrawnLines({lines:{curves:n.map(u=>({points:u})),thickness:i,width:a,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(n,r,i,a){const{x:s,y:o}=this,{outline:c}=L(this,_d,n);L(this,Ad,c instanceof bk),this.description=i;let u;m(this,Ad)?u=Ta.getDefaultDrawingOptions():(u=Ta._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,f]=this.pageDimensions;let h=r/f;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return ll.process(n,r,i,a,Ta._INNER_MARGIN)}getFromText(n,r){const{rawDims:{pageWidth:i,pageHeight:a},rotation:s}=this.parent.viewport;return ll.extractContoursFromText(n,r,i,a,s,Ta._INNER_MARGIN)}getDrawnSignature(n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return ll.processDrawnLines({lines:n,pageWidth:r,pageHeight:i,rotation:a,innerMargin:Ta._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:n,thickness:r}){n?this._drawingOptions=Ta.getDefaultDrawingOptions():(this._drawingOptions=Ta._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(n=!1){if(this.isEmpty())return null;const{lines:r,points:i}=this.serializeDraw(n),{_drawingOptions:{"stroke-width":a}}=this,s=Object.assign(super.serialize(n),{isSignature:!0,areContours:m(this,Ad),color:[0,0,0],thickness:m(this,Ad)?0:a});return this.addComment(s),n?(s.paths={lines:r,points:i},s.uuid=m(this,Qh),s.isCopy=!0):s.lines=r,m(this,il)&&(s.accessibilityData={type:"Figure",alt:m(this,il)}),s}static deserializeDraw(n,r,i,a,s,o){return o.areContours?bk.deserialize(n,r,i,a,s,o):Sw.deserialize(n,r,i,a,s,o)}static async deserialize(n,r,i){var s;const a=await super.deserialize(n,r,i);return L(a,Ad,n.areContours),a.description=((s=n.accessibilityData)==null?void 0:s.alt)||"",L(a,Qh,n.uuid),a}};Ad=new WeakMap,il=new WeakMap,_d=new WeakMap,Qh=new WeakMap,Se(Ta,"_type","signature"),Se(Ta,"_editorType",it.SIGNATURE),Se(Ta,"_defaultDrawingOptions",null);let Ak=Ta;var yn,kr,Cd,wc,Td,cv,Sc,Zh,al,Ga,uv,Nt,A0,_0,sE,oE,lE,Ck,cE,_X;class _k extends ln{constructor(n){super({...n,name:"stampEditor"});j(this,Nt);j(this,yn,null);j(this,kr,null);j(this,Cd,null);j(this,wc,null);j(this,Td,null);j(this,cv,"");j(this,Sc,null);j(this,Zh,!1);j(this,al,null);j(this,Ga,!1);j(this,uv,!1);L(this,wc,n.bitmapUrl),L(this,Td,n.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(n,r){ln.initialize(n,r)}static isHandlingMimeForPasting(n){return fA.includes(n)}static paste(n,r){r.pasteEditor({mode:it.STAMP},{bitmapFile:n.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var n;return{type:"stamp",hasAltText:!!((n=this.altTextData)!=null&&n.altText)}}static computeTelemetryFinalData(n){const r=n.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(n=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:s,height:o}=n||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:a,width:s,height:o,channels:a.length/(s*o)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),r&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var n;m(this,kr)&&(L(this,yn,null),this._uiManager.imageManager.deleteId(m(this,kr)),(n=m(this,Sc))==null||n.remove(),L(this,Sc,null),m(this,al)&&(clearTimeout(m(this,al)),L(this,al,null))),super.remove()}rebuild(){if(!this.parent){m(this,kr)&&F(this,Nt,sE).call(this);return}super.rebuild(),this.div!==null&&(m(this,kr)&&m(this,Sc)===null&&F(this,Nt,sE).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(n){this._isDraggable=!0,n&&this.div.focus()}isEmpty(){return!(m(this,Cd)||m(this,yn)||m(this,wc)||m(this,Td)||m(this,kr)||m(this,Zh))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let n,r;return this._isCopy&&(n=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),m(this,Zh)||(m(this,yn)?F(this,Nt,oE).call(this):F(this,Nt,sE).call(this)),this._isCopy&&this._moveAfterPaste(n,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(n,r){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(n,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(L(this,kr,i),a&&L(this,yn,a),L(this,Zh,!1),F(this,Nt,oE).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;m(this,al)!==null&&clearTimeout(m(this,al)),L(this,al,setTimeout(()=>{L(this,al,null),F(this,Nt,Ck).call(this)},200))}copyCanvas(n,r,i=!1){n||(n=224);const{width:a,height:s}=m(this,yn),o=new Ao;let c=m(this,yn),u=a,f=s,h=null;if(r){if(a>r||s>r){const k=Math.min(r/a,r/s);u=Math.floor(a*k),f=Math.floor(s*k)}h=document.createElement("canvas");const y=h.width=Math.ceil(u*o.sx),w=h.height=Math.ceil(f*o.sy);m(this,Ga)||(c=F(this,Nt,lE).call(this,y,w));const S=h.getContext("2d");S.filter=this._uiManager.hcmFilter;let E="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":bCe.isDarkMode&&(E="#8f8f9d",C="#42414d");const M=15,R=M*o.sx,D=M*o.sy,I=new OffscreenCanvas(R*2,D*2),P=I.getContext("2d");P.fillStyle=E,P.fillRect(0,0,R*2,D*2),P.fillStyle=C,P.fillRect(0,0,R,D),P.fillRect(R,D,R,D),S.fillStyle=S.createPattern(I,"repeat"),S.fillRect(0,0,y,w),S.drawImage(c,0,0,c.width,c.height,0,0,y,w)}let g=null;if(i){let y,w;if(o.symmetric&&c.width<n&&c.height<n)y=c.width,w=c.height;else if(c=m(this,yn),a>n||s>n){const C=Math.min(n/a,n/s);y=Math.floor(a*C),w=Math.floor(s*C),m(this,Ga)||(c=F(this,Nt,lE).call(this,y,w))}const E=new OffscreenCanvas(y,w).getContext("2d",{willReadFrequently:!0});E.drawImage(c,0,0,c.width,c.height,0,0,y,w),g={width:y,height:w,data:E.getImageData(0,0,y,w).data}}return{canvas:h,width:u,height:f,imageData:g}}static async deserialize(n,r,i){var E;let a=null,s=!1;if(n instanceof HK){const{data:{rect:C,rotation:M,id:R,structParent:D,popupRef:I,richText:P,contentsObj:k,creationDate:U,modificationDate:B},container:V,parent:{page:{pageNumber:H}},canvas:G}=n;let Q,W;G?(delete n.canvas,{id:Q,bitmap:W}=i.imageManager.getFromCanvas(V.id,G),G.remove()):(s=!0,n._hasNoCanvas=!0);const ee=((E=await r._structTree.getAriaAttributes(`${sL}${R}`))==null?void 0:E.get("aria-label"))||"";a=n={annotationType:it.STAMP,bitmapId:Q,bitmap:W,pageIndex:H-1,rect:C.slice(0),rotation:M,annotationElementId:R,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:ee},isSvg:!1,structParent:D,popupRef:I,richText:P,comment:(k==null?void 0:k.str)||null,creationDate:U,modificationDate:B}}const o=await super.deserialize(n,r,i),{rect:c,bitmap:u,bitmapUrl:f,bitmapId:h,isSvg:g,accessibilityData:y}=n;s?(i.addMissingCanvas(n.id,o),L(o,Zh,!0)):h&&i.imageManager.isValidId(h)?(L(o,kr,h),u&&L(o,yn,u)):L(o,wc,f),L(o,Ga,g);const[w,S]=o.pageDimensions;return o.width=(c[2]-c[0])/w,o.height=(c[3]-c[1])/S,y&&(o.altTextData=y),o._initialData=a,n.comment&&o.setCommentData(n),L(o,uv,!!a),o}serialize(n=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(n),{bitmapId:m(this,kr),isSvg:m(this,Ga)});if(this.addComment(i),n)return i.bitmapUrl=F(this,Nt,cE).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:s}=this.serializeAltText(!1);if(!a&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const c=F(this,Nt,_X).call(this,i);return c.isSame?null:(c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);const o=m(this,Ga)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(m(this,kr)))r.stamps.set(m(this,kr),{area:o,serialized:i}),i.bitmap=F(this,Nt,cE).call(this,!1);else if(m(this,Ga)){const c=r.stamps.get(m(this,kr));o>c.area&&(c.area=o,c.serialized.bitmap.close(),c.serialized.bitmap=F(this,Nt,cE).call(this,!1))}return i}renderAnnotationElement(n){return this.deleted?(n.hide(),null):(n.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}yn=new WeakMap,kr=new WeakMap,Cd=new WeakMap,wc=new WeakMap,Td=new WeakMap,cv=new WeakMap,Sc=new WeakMap,Zh=new WeakMap,al=new WeakMap,Ga=new WeakMap,uv=new WeakMap,Nt=new WeakSet,A0=function(n,r=!1){if(!n){this.remove();return}L(this,yn,n.bitmap),r||(L(this,kr,n.id),L(this,Ga,n.isSvg)),n.file&&L(this,cv,n.file.name),F(this,Nt,oE).call(this)},_0=function(){if(L(this,Cd,null),this._uiManager.enableWaiting(!1),!!m(this,Sc)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,yn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&m(this,yn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},sE=function(){if(m(this,kr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(m(this,kr)).then(i=>F(this,Nt,A0).call(this,i,!0)).finally(()=>F(this,Nt,_0).call(this));return}if(m(this,wc)){const i=m(this,wc);L(this,wc,null),this._uiManager.enableWaiting(!0),L(this,Cd,this._uiManager.imageManager.getFromUrl(i).then(a=>F(this,Nt,A0).call(this,a)).finally(()=>F(this,Nt,_0).call(this)));return}if(m(this,Td)){const i=m(this,Td);L(this,Td,null),this._uiManager.enableWaiting(!0),L(this,Cd,this._uiManager.imageManager.getFromFile(i).then(a=>F(this,Nt,A0).call(this,a)).finally(()=>F(this,Nt,_0).call(this)));return}const n=document.createElement("input");n.type="file",n.accept=fA.join(",");const r=this._uiManager._signal;L(this,Cd,new Promise(i=>{n.addEventListener("change",async()=>{if(!n.files||n.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(n.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),F(this,Nt,A0).call(this,a)}i()},{signal:r}),n.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>F(this,Nt,_0).call(this))),n.click()},oE=function(){var u;const{div:n}=this;let{width:r,height:i}=m(this,yn);const[a,s]=this.pageDimensions,o=.75;if(this.width)r=this.width*a,i=this.height*s;else if(r>o*a||i>o*s){const f=Math.min(o*a/r,o*s/i);r*=f,i*=f}this._uiManager.enableWaiting(!1);const c=L(this,Sc,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=r/a,this.height=i/s,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(n.hidden=!1),F(this,Nt,Ck).call(this),m(this,uv)||(this.parent.addUndoableEditor(this),L(this,uv,!0)),this._reportTelemetry({action:"inserted_image"}),m(this,cv)&&this.div.setAttribute("aria-description",m(this,cv)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},lE=function(n,r){const{width:i,height:a}=m(this,yn);let s=i,o=a,c=m(this,yn);for(;s>2*n||o>2*r;){const u=s,f=o;s>2*n&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(s,o);h.getContext("2d").drawImage(c,0,0,u,f,0,0,s,o),c=h.transferToImageBitmap()}return c},Ck=function(){const[n,r]=this.parentDimensions,{width:i,height:a}=this,s=new Ao,o=Math.ceil(i*n*s.sx),c=Math.ceil(a*r*s.sy),u=m(this,Sc);if(!u||u.width===o&&u.height===c)return;u.width=o,u.height=c;const f=m(this,Ga)?m(this,yn):F(this,Nt,lE).call(this,o,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(f,0,0,f.width,f.height,0,0,o,c)},cE=function(n){if(n){if(m(this,Ga)){const a=this._uiManager.imageManager.getSvgUrl(m(this,kr));if(a)return a}const r=document.createElement("canvas");return{width:r.width,height:r.height}=m(this,yn),r.getContext("2d").drawImage(m(this,yn),0,0),r.toDataURL()}if(m(this,Ga)){const[r,i]=this.pageDimensions,a=Math.round(this.width*r*qc.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*qc.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(a,s);return o.getContext("2d").drawImage(m(this,yn),0,0,m(this,yn).width,m(this,yn).height,0,0,a,s),o.transferToImageBitmap()}return structuredClone(m(this,yn))},_X=function(n){var o;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,a=n.pageIndex===r,s=(((o=n.accessibilityData)==null?void 0:o.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&s,isSameAltText:s}},Se(_k,"_type","stamp"),Se(_k,"_editorType",it.STAMP);var ep,dv,Nd,Rd,Ec,ua,Md,fv,hv,uo,Ac,Ir,_c,Pd,pv,$e,kd,rn,Tk,CX,Lo,Nk,Rk,uE;const Zs=class Zs{constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:o,textLayer:c,viewport:u,l10n:f}){j(this,rn);j(this,ep);j(this,dv,!1);j(this,Nd,null);j(this,Rd,null);j(this,Ec,null);j(this,ua,new Map);j(this,Md,!1);j(this,fv,!1);j(this,hv,!1);j(this,uo,null);j(this,Ac,null);j(this,Ir,null);j(this,_c,null);j(this,Pd,null);j(this,pv,-1);j(this,$e);const h=[...m(Zs,kd).values()];if(!Zs._initialized){Zs._initialized=!0;for(const g of h)g.initialize(f,e)}e.registerEditorTypes(h),L(this,$e,e),this.pageIndex=n,this.div=r,L(this,ep,a),L(this,Nd,s),this.viewport=u,L(this,Ir,c),this.drawLayer=o,this._structTree=i,m(this,$e).addLayer(this)}get isEmpty(){return m(this,ua).size===0}get isInvisible(){return this.isEmpty&&m(this,$e).getMode()===it.NONE}updateToolbar(e){m(this,$e).updateToolbar(e)}updateMode(e=m(this,$e).getMode()){switch(F(this,rn,uE).call(this),e){case it.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case it.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case it.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===it.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const r of m(Zs,kd).values())n.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var n;return e===((n=m(this,Ir))==null?void 0:n.div)}setEditingState(e){m(this,$e).setEditingState(e)}addCommands(e){m(this,$e).addCommands(e)}cleanUndoStack(e){m(this,$e).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var n;(n=m(this,Nd))==null||n.div.classList.toggle("disabled",!e)}async enable(){var r;L(this,hv,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=m(this,Pd))==null||r.abort(),L(this,Pd,null);const e=new Set;for(const i of m(this,rn,Tk))i.enableEditing(),i.show(!0),i.annotationElementId&&(m(this,$e).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=m(this,Nd);if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),m(this,$e).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}L(this,hv,!1),m(this,$e)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(L(this,fv,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),m(this,Ir)&&!m(this,Pd)){L(this,Pd,new AbortController);const i=m(this,$e).combinedSignal(m(this,Pd));m(this,Ir).div.addEventListener("pointerdown",a=>{const{clientX:o,clientY:c,timeStamp:u}=a,f=m(this,pv);if(u-f>500){L(this,pv,u);return}L(this,pv,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const g=document.elementsFromPoint(o,c);if(h.toggle("getElements",!1),!this.div.contains(g[0]))return;let y;const w=new RegExp(`^${tb}[0-9]+$`);for(const E of g)if(w.test(E.id)){y=E.id;break}if(!y)return;const S=m(this,ua).get(y);(S==null?void 0:S.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),S.dblclick(a))},{signal:i,capture:!0})}const e=m(this,Nd);if(e){const i=new Map,a=new Map;for(const o of m(this,rn,Tk)){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){i.set(o.annotationElementId,o);continue}else a.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}const s=e.getEditableAnnotations();for(const o of s){const{id:c}=o.data;if(m(this,$e).isDeletedAnnotationElement(c)){o.updateEdited({deleted:!0});continue}let u=a.get(c);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=i.get(c),u&&(m(this,$e).addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}F(this,rn,uE).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of m(Zs,kd).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),L(this,fv,!1)}getEditableAnnotation(e){var n;return((n=m(this,Nd))==null?void 0:n.getEditableAnnotation(e))||null}setActiveEditor(e){m(this,$e).getActive()!==e&&m(this,$e).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=m(this,Ir))!=null&&e.div&&!m(this,_c)){L(this,_c,new AbortController);const n=m(this,$e).combinedSignal(m(this,_c));m(this,Ir).div.addEventListener("pointerdown",F(this,rn,CX).bind(this),{signal:n}),m(this,Ir).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=m(this,Ir))!=null&&e.div&&m(this,_c)&&(m(this,_c).abort(),L(this,_c,null),m(this,Ir).div.classList.remove("highlighting"))}enableClick(){if(m(this,Rd))return;L(this,Rd,new AbortController);const e=m(this,$e).combinedSignal(m(this,Rd));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){var e;(e=m(this,Rd))==null||e.abort(),L(this,Rd,null)}attach(e){m(this,ua).set(e.id,e);const{annotationElementId:n}=e;n&&m(this,$e).isDeletedAnnotationElement(n)&&m(this,$e).removeDeletedAnnotationElement(e)}detach(e){var n;m(this,ua).delete(e.id),(n=m(this,ep))==null||n.removePointerInTextLayer(e.contentDiv),!m(this,fv)&&e.annotationElementId&&m(this,$e).addDeletedAnnotationElement(e)}remove(e){this.detach(e),m(this,$e).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var n;e.parent!==this&&(e.parent&&e.annotationElementId&&(m(this,$e).addDeletedAnnotationElement(e.annotationElementId),ln.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(n=e.parent)==null||n.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),m(this,$e).addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!m(this,hv)),m(this,$e).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!m(this,Ec)&&(e._focusEventsAllowed=!1,L(this,Ec,setTimeout(()=>{L(this,Ec,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:m(this,$e)._signal}),n.focus())},0))),e._structTreeParentId=(r=m(this,ep))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getEditorByUID(e){for(const n of m(this,ua).values())if(n.uid===e)return n;return null}getNextId(){return m(this,$e).getId()}combinedSignal(e){return m(this,$e).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=m(this,rn,Lo))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await m(this,$e).updateMode(e.mode);const{offsetX:r,offsetY:i}=F(this,rn,Rk).call(this),a=this.getNextId(),s=F(this,rn,Nk).call(this,{parent:this,id:a,x:r,y:i,uiManager:m(this,$e),isCentered:!0,...n});s&&this.add(s)}async deserialize(e){var n;return await((n=m(Zs,kd).get(e.annotationType??e.annotationEditorType))==null?void 0:n.deserialize(e,this,m(this,$e)))||null}createAndAddNewEditor(e,n,r={}){const i=this.getNextId(),a=F(this,rn,Nk).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:m(this,$e),isCentered:n,...r});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(F(this,rn,Rk).call(this),!0,e)}setSelected(e){m(this,$e).setSelected(e)}toggleSelected(e){m(this,$e).toggleSelected(e)}unselect(e){m(this,$e).unselect(e)}pointerup(e){var i;const{isMac:n}=jr.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!m(this,Md)||(L(this,Md,!1),(i=m(this,rn,Lo))!=null&&i.isDrawer&&m(this,rn,Lo).supportMultipleDrawings))return;if(!m(this,dv)){L(this,dv,!0);return}const r=m(this,$e).getMode();if(r===it.STAMP||r===it.SIGNATURE){m(this,$e).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(m(this,$e).getMode()===it.HIGHLIGHT&&this.enableTextSelection(),m(this,Md)){L(this,Md,!1);return}const{isMac:n}=jr.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(L(this,Md,!0),(i=m(this,rn,Lo))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=m(this,$e).getActive();L(this,dv,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),m(this,uo)){m(this,rn,Lo).startDrawing(this,m(this,$e),!1,e);return}m(this,$e).setCurrentDrawingSession(this),L(this,uo,new AbortController);const n=m(this,$e).combinedSignal(m(this,uo));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(L(this,Ac,null),this.commitOrRemove())},{signal:n}),m(this,rn,Lo).startDrawing(this,m(this,$e),!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&L(this,Ac,n);return}m(this,Ac)&&setTimeout(()=>{var n;(n=m(this,Ac))==null||n.focus(),L(this,Ac,null)},0)}endDrawingSession(e=!1){return m(this,uo)?(m(this,$e).setCurrentDrawingSession(null),m(this,uo).abort(),L(this,uo,null),L(this,Ac,null),m(this,rn,Lo).endDrawing(e)):null}findNewParent(e,n,r){const i=m(this,$e).findParent(n,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return m(this,uo)?(this.endDrawingSession(),!0):!1}onScaleChanging(){m(this,uo)&&m(this,rn,Lo).onScaleChangingWhenDrawing(this)}destroy(){var e,n;this.commitOrRemove(),((e=m(this,$e).getActive())==null?void 0:e.parent)===this&&(m(this,$e).commitOrRemove(),m(this,$e).setActiveEditor(null)),m(this,Ec)&&(clearTimeout(m(this,Ec)),L(this,Ec,null));for(const r of m(this,ua).values())(n=m(this,ep))==null||n.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,m(this,ua).clear(),m(this,$e).removeLayer(this)}render({viewport:e}){this.viewport=e,qd(this.div,e);for(const n of m(this,$e).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){m(this,$e).commitOrRemove(),F(this,rn,uE).call(this);const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,qd(this.div,{rotation:r}),n!==r)for(const i of m(this,ua).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return m(this,$e).viewParameters.realScale}};ep=new WeakMap,dv=new WeakMap,Nd=new WeakMap,Rd=new WeakMap,Ec=new WeakMap,ua=new WeakMap,Md=new WeakMap,fv=new WeakMap,hv=new WeakMap,uo=new WeakMap,Ac=new WeakMap,Ir=new WeakMap,_c=new WeakMap,Pd=new WeakMap,pv=new WeakMap,$e=new WeakMap,kd=new WeakMap,rn=new WeakSet,Tk=function(){return m(this,ua).size!==0?m(this,ua).values():m(this,$e).getEditors(this.pageIndex)},CX=function(e){m(this,$e).unselectAll();const{target:n}=e;if(n===m(this,Ir).div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&m(this,Ir).div.contains(n)){const{isMac:r}=jr.platform;if(e.button!==0||e.ctrlKey&&r)return;m(this,$e).showAllEditors("highlight",!0,!0),m(this,Ir).div.classList.add("free"),this.toggleDrawing(),bA.startHighlighting(this,m(this,$e).direction==="ltr",{target:m(this,Ir).div,x:e.x,y:e.y}),m(this,Ir).div.addEventListener("pointerup",()=>{m(this,Ir).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:m(this,$e)._signal}),e.preventDefault()}},Lo=function(){return m(Zs,kd).get(m(this,$e).getMode())},Nk=function(e){const n=m(this,rn,Lo);return n?new n.prototype.constructor(e):null},Rk=function(){const{x:e,y:n,width:r,height:i}=this.boundingClientRect,a=Math.max(0,e),s=Math.max(0,n),o=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,n+i),u=(a+o)/2-e,f=(s+c)/2-n,[h,g]=this.viewport.rotation%180===0?[u,f]:[f,u];return{offsetX:h,offsetY:g}},uE=function(){for(const e of m(this,ua).values())e.isEmpty()&&e.remove()},Se(Zs,"_initialized",!1),j(Zs,kd,new Map([lk,yk,_k,bA,Ak].map(e=>[e._editorType,e])));let wA=Zs;var fo,Li,tp,zx,HA,TX,vl,Mk,NX,Pk;const cr=class cr{constructor({pageIndex:e}){j(this,vl);j(this,fo,null);j(this,Li,new Map);j(this,tp,new Map);this.pageIndex=e}setParent(e){if(!m(this,fo)){L(this,fo,e);return}if(m(this,fo)!==e){if(m(this,Li).size>0)for(const n of m(this,Li).values())n.remove(),e.append(n);L(this,fo,e)}}static get _svgFactory(){return dt(this,"_svgFactory",new lb)}draw(e,n=!1,r=!1){const i=lr(cr,zx)._++,a=F(this,vl,Mk).call(this),s=cr._svgFactory.createElement("defs");a.append(s);const o=cr._svgFactory.createElement("path");s.append(o);const c=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke"),n&&m(this,tp).set(i,o);const u=r?F(this,vl,NX).call(this,s,c):null,f=cr._svgFactory.createElement("use");return a.append(f),f.setAttribute("href",`#${c}`),this.updateProperties(a,e),m(this,Li).set(i,a),{id:i,clipPathId:`url(#${u})`}}drawOutline(e,n){const r=lr(cr,zx)._++,i=F(this,vl,Mk).call(this),a=cr._svgFactory.createElement("defs");i.append(a);const s=cr._svgFactory.createElement("path");a.append(s);const o=`path_p${this.pageIndex}_${r}`;s.setAttribute("id",o),s.setAttribute("vector-effect","non-scaling-stroke");let c;if(n){const h=cr._svgFactory.createElement("mask");a.append(h),c=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const g=cr._svgFactory.createElement("rect");h.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const y=cr._svgFactory.createElement("use");h.append(y),y.setAttribute("href",`#${o}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const u=cr._svgFactory.createElement("use");i.append(u),u.setAttribute("href",`#${o}`),c&&u.setAttribute("mask",`url(#${c})`);const f=u.cloneNode();return i.append(f),u.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),m(this,Li).set(r,i),r}finalizeDraw(e,n){m(this,tp).delete(e),this.updateProperties(e,n)}updateProperties(e,n){var c;if(!n)return;const{root:r,bbox:i,rootClass:a,path:s}=n,o=typeof e=="number"?m(this,Li).get(e):e;if(o){if(r&&F(this,vl,Pk).call(this,o,r),i&&F(c=cr,HA,TX).call(c,o,i),a){const{classList:u}=o;for(const[f,h]of Object.entries(a))u.toggle(f,h)}if(s){const f=o.firstChild.firstChild;F(this,vl,Pk).call(this,f,s)}}}updateParent(e,n){if(n===this)return;const r=m(this,Li).get(e);r&&(m(n,fo).append(r),m(this,Li).delete(e),m(n,Li).set(e,r))}remove(e){m(this,tp).delete(e),m(this,fo)!==null&&(m(this,Li).get(e).remove(),m(this,Li).delete(e))}destroy(){L(this,fo,null);for(const e of m(this,Li).values())e.remove();m(this,Li).clear(),m(this,tp).clear()}};fo=new WeakMap,Li=new WeakMap,tp=new WeakMap,zx=new WeakMap,HA=new WeakSet,TX=function(e,[n,r,i,a]){const{style:s}=e;s.top=`${100*r}%`,s.left=`${100*n}%`,s.width=`${100*i}%`,s.height=`${100*a}%`},vl=new WeakSet,Mk=function(){const e=cr._svgFactory.create(1,1,!0);return m(this,fo).append(e),e.setAttribute("aria-hidden",!0),e},NX=function(e,n){const r=cr._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${n}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=cr._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${n}`),a.classList.add("clip"),i},Pk=function(e,n){for(const[r,i]of Object.entries(n))i===null?e.removeAttribute(r):e.setAttribute(r,i)},j(cr,HA),j(cr,zx,0);let SA=cr;globalThis._pdfjsTestingUtils={HighlightOutliner:uk};globalThis.pdfjsLib={AbortException:Gc,AnnotationEditorLayer:wA,AnnotationEditorParamsType:wt,AnnotationEditorType:it,AnnotationEditorUIManager:Vd,AnnotationLayer:gL,AnnotationMode:ol,AnnotationType:Vn,applyOpacity:_7,build:RK,ColorPicker:ob,createValidAbsoluteUrl:rL,CSSConstants:A7,DOMSVGFactory:lb,DrawLayer:SA,FeatureTest:jr,fetchData:Hv,findContrastColor:C7,getDocument:fL,getFilenameFromUrl:w7,getPdfFilenameFromUrl:S7,getRGB:zv,getUuid:aL,getXfaPageViewport:E7,GlobalWorkerOptions:ks,ImageKind:M0,InvalidPDFException:dA,isDataScheme:bw,isPdfFile:tC,isValidExplicitDest:aK,MathClamp:Si,noContextMenu:es,normalizeUnicode:b7,OPS:Sv,OutputScale:Ao,PasswordResponses:v7,PDFDataRangeTransport:hL,PDFDateString:ib,PDFWorker:Ev,PermissionFlag:g7,PixelsPerInch:qc,RenderingCancelledException:eC,renderRichText:lL,ResponseException:nb,setLayerDimensions:qd,shadow:dt,SignatureExtractor:ll,stopEvent:Nn,SupportedImageMimeTypes:fA,TextLayer:sb,TouchManager:ab,updateUrlHash:iL,Util:Le,VerbosityLevel:gw,version:NK,XfaLayer:oL};const VTe=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Gc,AnnotationEditorLayer:wA,AnnotationEditorParamsType:wt,AnnotationEditorType:it,AnnotationEditorUIManager:Vd,AnnotationLayer:gL,AnnotationMode:ol,AnnotationType:Vn,CSSConstants:A7,ColorPicker:ob,DOMSVGFactory:lb,DrawLayer:SA,FeatureTest:jr,GlobalWorkerOptions:ks,ImageKind:M0,InvalidPDFException:dA,MathClamp:Si,OPS:Sv,OutputScale:Ao,PDFDataRangeTransport:hL,PDFDateString:ib,PDFWorker:Ev,PasswordResponses:v7,PermissionFlag:g7,PixelsPerInch:qc,RenderingCancelledException:eC,ResponseException:nb,SignatureExtractor:ll,SupportedImageMimeTypes:fA,TextLayer:sb,TouchManager:ab,Util:Le,VerbosityLevel:gw,XfaLayer:oL,applyOpacity:_7,build:RK,createValidAbsoluteUrl:rL,fetchData:Hv,findContrastColor:C7,getDocument:fL,getFilenameFromUrl:w7,getPdfFilenameFromUrl:S7,getRGB:zv,getUuid:aL,getXfaPageViewport:E7,isDataScheme:bw,isPdfFile:tC,isValidExplicitDest:aK,noContextMenu:es,normalizeUnicode:b7,renderRichText:lL,setLayerDimensions:qd,shadow:dt,stopEvent:Nn,updateUrlHash:iL,version:NK},Symbol.toStringTag,{value:"Module"}));var H6=Object.prototype.hasOwnProperty;function z6(t,e,n){for(n of t.keys())if(Hm(n,e))return n}function Hm(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Hm(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=z6(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=z6(e,i),!i)||!Hm(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(H6.call(t,n)&&++r&&!H6.call(e,n)||!(n in e)||!Hm(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function Ew(t){let e=!1;return{promise:new Promise((r,i)=>{t.then(a=>!e&&r(a)).catch(a=>!e&&i(a))}),cancel(){e=!0}}}const WTe=["onCopy","onCut","onPaste"],YTe=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],KTe=["onFocus","onBlur"],XTe=["onInput","onInvalid","onReset","onSubmit"],JTe=["onLoad","onError"],QTe=["onKeyDown","onKeyPress","onKeyUp"],ZTe=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],eNe=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],tNe=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],nNe=["onSelect"],rNe=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],iNe=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],aNe=["onScroll"],sNe=["onWheel"],oNe=["onAnimationStart","onAnimationEnd","onAnimationIteration"],lNe=["onTransitionEnd"],cNe=["onToggle"],uNe=["onChange"],dNe=[...WTe,...YTe,...KTe,...XTe,...JTe,...QTe,...ZTe,...eNe,...tNe,...nNe,...rNe,...iNe,...aNe,...sNe,...oNe,...lNe,...uNe,...cNe];function RX(t,e){const n={};for(const r of dNe){const i=t[r];i&&(e?n[r]=(a=>i(a,e(r))):n[r]=i)}return n}var NR,$6;function fNe(){if($6)return NR;$6=1;var t=function(){};return NR=t,NR}var hNe=fNe();const _i=Co(hNe),MX=T.createContext(null),pNe="noopener noreferrer nofollow";class mNe{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return nn(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){nn(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,n,r){e.href=n,e.rel=this.externalLinkRel||pNe,e.target=r?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(n=>{nn(this.pdfDocument),nn(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(n):Array.isArray(e)?n(e):e.then(n)}).then(n=>{nn(Array.isArray(n));const r=n[0];new Promise(i=>{nn(this.pdfDocument),r instanceof Object?this.pdfDocument.getPageIndex(r).then(a=>{i(a)}).catch(()=>{nn(!1)}):typeof r=="number"?i(r):nn(!1)}).then(i=>{const a=i+1;nn(this.pdfViewer),nn(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:n,pageIndex:i,pageNumber:a})})})}goToPage(e){const n=e-1;nn(this.pdfViewer),nn(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:n,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function zm({children:t,type:e}){return v.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:t})}const G6={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function gNe(t,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return t}}function Av(){return T.useReducer(gNe,{value:void 0,error:void 0})}const iC=typeof window<"u",PX=iC&&window.location.protocol==="file:";function vNe(t){return typeof t<"u"}function Nf(t){return vNe(t)&&t!==null}function yNe(t){return typeof t=="string"}function bNe(t){return t instanceof ArrayBuffer}function xNe(t){return nn(iC),t instanceof Blob}function kk(t){return yNe(t)&&/^data:/.test(t)}function q6(t){nn(kk(t));const[e="",n=""]=t.split(",");return e.split(";").indexOf("base64")!==-1?atob(n):unescape(n)}function wNe(){return iC&&window.devicePixelRatio||1}const kX="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function V6(){_i(!PX,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${kX}`)}function SNe(){_i(!PX,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${kX}`)}function mp(t){t!=null&&t.cancel&&t.cancel()}function Ik(t,e){return Object.defineProperty(t,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(t,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(t,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(t,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),t}function IX(t){return t.name==="AbortException"||t.name==="RenderingCancelledException"}function ENe(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return n(new Error("Error while reading a file."));e(r.result)},r.onerror=i=>{if(!i.target)return n(new Error("Error while reading a file."));const{error:a}=i.target;if(!a)return n(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},r.readAsArrayBuffer(t)})}const{PDFDataRangeTransport:ANe}=VTe,_Ne=(t,e)=>{switch(e){case G6.NEED_PASSWORD:{const n=prompt("Enter the password to open this PDF file.");t(n);break}case G6.INCORRECT_PASSWORD:{const n=prompt("Invalid password. Please try again.");t(n);break}}};function W6(t){return typeof t=="object"&&t!==null&&("data"in t||"range"in t||"url"in t)}const CNe=T.forwardRef(function({children:e,className:n,error:r="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:a,file:s,inputRef:o,imageResourcesPath:c,loading:u="Loading PDF",noData:f="No PDF file specified.",onItemClick:h,onLoadError:g,onLoadProgress:y,onLoadSuccess:w,onPassword:S=_Ne,onSourceError:E,onSourceSuccess:C,options:M,renderMode:R,rotate:D,scale:I,...P},k){const[U,B]=Av(),{value:V,error:H}=U,[G,Q]=Av(),{value:W,error:ee}=G,$=T.useRef(new mNe),q=T.useRef([]),J=T.useRef(void 0),ae=T.useRef(void 0);s&&s!==J.current&&W6(s)&&(_i(!Hm(s,J.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),J.current=s),M&&M!==ae.current&&(_i(!Hm(M,ae.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ae.current=M);const ye=T.useRef({scrollPageIntoView:Ee=>{const{dest:be,pageNumber:Te,pageIndex:qe=Te-1}=Ee;if(h){h({dest:be,pageIndex:qe,pageNumber:Te});return}const et=q.current[qe];if(et){et.scrollIntoView();return}_i(!1,`An internal link leading to page ${Te} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});T.useImperativeHandle(k,()=>({linkService:$,pages:q,viewer:ye}),[]);function Y(){C&&C()}function ne(){H&&(_i(!1,H.toString()),E&&E(H))}function ue(){B({type:"RESET"})}T.useEffect(ue,[s,B]);const me=T.useCallback(async()=>{if(!s)return null;if(typeof s=="string")return kk(s)?{data:q6(s)}:(V6(),{url:s});if(s instanceof ANe)return{range:s};if(bNe(s))return{data:s};if(iC&&xNe(s))return{data:await ENe(s)};if(nn(typeof s=="object"),nn(W6(s)),"url"in s&&typeof s.url=="string"){if(kk(s.url)){const{url:Ee,...be}=s;return{data:q6(Ee),...be}}V6()}return s},[s]);T.useEffect(()=>{const Ee=Ew(me());return Ee.promise.then(be=>{B({type:"RESOLVE",value:be})}).catch(be=>{B({type:"REJECT",error:be})}),()=>{mp(Ee)}},[me,B]),T.useEffect(()=>{if(!(typeof V>"u")){if(V===!1){ne();return}Y()}},[V]);function xe(){W&&(w&&w(W),q.current=new Array(W.numPages),$.current.setDocument(W))}function Me(){ee&&(_i(!1,ee.toString()),g&&g(ee))}T.useEffect(function(){Q({type:"RESET"})},[Q,V]),T.useEffect(function(){if(!V)return;const be=M?{...V,...M}:V,Te=fL(be);y&&(Te.onProgress=y),S&&(Te.onPassword=S);const qe=Te;return qe.promise.then(et=>{qe.destroyed||Q({type:"RESOLVE",value:et})}).catch(et=>{qe.destroyed||Q({type:"REJECT",error:et})}),()=>{qe.destroy()}},[M,Q,V]),T.useEffect(()=>{if(!(typeof W>"u")){if(W===!1){Me();return}xe()}},[W]),T.useEffect(function(){$.current.setViewer(ye.current),$.current.setExternalLinkRel(i),$.current.setExternalLinkTarget(a)},[i,a]);const Ce=T.useCallback((Ee,be)=>{q.current[Ee]=be},[]),pt=T.useCallback(Ee=>{delete q.current[Ee]},[]),he=T.useMemo(()=>({imageResourcesPath:c,linkService:$.current,onItemClick:h,pdf:W,registerPage:Ce,renderMode:R,rotate:D,scale:I,unregisterPage:pt}),[c,h,W,Ce,R,D,I,pt]),He=T.useMemo(()=>RX(P,()=>W),[P,W]);function ke(){function Ee(Te){return!!(Te!=null&&Te.pdf)}if(!Ee(he))throw new Error("pdf is undefined");const be=typeof e=="function"?e(he):e;return v.jsx(MX.Provider,{value:he,children:be})}function te(){return s?W==null?v.jsx(zm,{type:"loading",children:typeof u=="function"?u():u}):W===!1?v.jsx(zm,{type:"error",children:typeof r=="function"?r():r}):ke():v.jsx(zm,{type:"no-data",children:typeof f=="function"?f():f})}return v.jsx("div",{className:$t("react-pdf__Document",n),ref:o,...He,children:te()})});function DX(){return T.useContext(MX)}function LX(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.filter(Boolean);if(n.length<=1){var r=n[0];return r||null}return function(a){for(var s=0,o=n;s<o.length;s++){var c=o[s];typeof c=="function"?c(a):c&&(c.current=a)}}}const OX=T.createContext(null);function aC(){return T.useContext(OX)}function TNe(){const t=DX(),e=aC();nn(e);const n={...t,...e},{filterAnnotations:r,imageResourcesPath:i,linkService:a,onGetAnnotationsError:s,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:f,pdf:h,renderForms:g,rotate:y,scale:w=1}=n;nn(h),nn(f),nn(a);const[S,E]=Av(),{value:C,error:M}=S,R=T.useRef(null);_i(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){C&&o&&o(C)}function I(){M&&(_i(!1,M.toString()),s&&s(M))}T.useEffect(function(){E({type:"RESET"})},[E,f]),T.useEffect(function(){if(!f)return;const V=Ew(f.getAnnotations()),H=V;return V.promise.then(G=>{E({type:"RESOLVE",value:G})}).catch(G=>{E({type:"REJECT",error:G})}),()=>{mp(H)}},[E,f]),T.useEffect(()=>{if(C!==void 0){if(C===!1){I();return}D()}},[C]);function P(){u&&u()}function k(B){_i(!1,`${B}`),c&&c(B)}const U=T.useMemo(()=>f.getViewport({scale:w,rotation:y}),[f,y,w]);return T.useEffect(function(){if(!h||!f||!a||!C)return;const{current:V}=R;if(!V)return;const H=U.clone({dontFlip:!0}),G={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:h.annotationStorage,commentManager:null,div:V,l10n:null,linkService:a,page:f,structTreeLayer:null,viewport:H},Q={annotations:r?r({annotations:C}):C,annotationStorage:h.annotationStorage,div:V,imageResourcesPath:i,linkService:a,page:f,renderForms:g,viewport:H};V.innerHTML="";try{new gL(G).render(Q),P()}catch(W){k(W)}return()=>{}},[C,r,i,a,f,h,g,U]),v.jsx("div",{className:$t("react-pdf__Page__annotations","annotationLayer"),ref:R})}const jX={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},NNe=/^H(\d+)$/;function RNe(t){return t in jX}function sC(t){return"children"in t}function FX(t){return sC(t)?t.children.length===1&&0 in t.children&&"id"in t.children[0]:!1}function MNe(t){const e={};if(sC(t)){const{role:n}=t,r=n.match(NNe);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(RNe(n)){const i=jX[n];i&&(e.role=i)}}return e}function UX(t){const e={};if(sC(t)){if(t.alt!==void 0&&(e["aria-label"]=t.alt),t.lang!==void 0&&(e.lang=t.lang),FX(t)){const[n]=t.children;if(n){const r=UX(n);return{...e,...r}}}}else"id"in t&&(e["aria-owns"]=t.id);return e}function PNe(t){return t?{...MNe(t),...UX(t)}:null}function BX({className:t,node:e}){const n=T.useMemo(()=>PNe(e),[e]),r=T.useMemo(()=>!sC(e)||FX(e)?null:e.children.map((i,a)=>v.jsx(BX,{node:i},a)),[e]);return v.jsx("span",{className:t,...n,children:r})}function kNe(){const t=aC();nn(t);const{onGetStructTreeError:e,onGetStructTreeSuccess:n}=t,[r,i]=Av(),{value:a,error:s}=r,{customTextRenderer:o,page:c}=t;function u(){a&&n&&n(a)}function f(){s&&(_i(!1,s.toString()),e&&e(s))}return T.useEffect(function(){i({type:"RESET"})},[i,c]),T.useEffect(function(){if(o||!c)return;const g=Ew(c.getStructTree()),y=g;return g.promise.then(w=>{i({type:"RESOLVE",value:w})}).catch(w=>{i({type:"REJECT",error:w})}),()=>mp(y)},[o,c,i]),T.useEffect(()=>{if(a!==void 0){if(a===!1){f();return}u()}},[a]),a?v.jsx(BX,{className:"react-pdf__Page__structTree structTree",node:a}):null}const Y6=ol;function INe(t){const e=aC();nn(e);const n={...e,...t},{_className:r,canvasBackground:i,devicePixelRatio:a=wNe(),onRenderError:s,onRenderSuccess:o,page:c,renderForms:u,renderTextLayer:f,rotate:h,scale:g}=n,{canvasRef:y}=t;nn(c);const w=T.useRef(null);function S(){c&&o&&o(Ik(c,g))}function E(D){IX(D)||(_i(!1,D.toString()),s&&s(D))}const C=T.useMemo(()=>c.getViewport({scale:g*a,rotation:h}),[a,c,h,g]),M=T.useMemo(()=>c.getViewport({scale:g,rotation:h}),[c,h,g]);T.useEffect(function(){if(!c)return;c.cleanup();const{current:I}=w;if(!I)return;I.width=C.width,I.height=C.height,I.style.width=`${Math.floor(M.width)}px`,I.style.height=`${Math.floor(M.height)}px`,I.style.visibility="hidden";const P={annotationMode:u?Y6.ENABLE_FORMS:Y6.ENABLE,canvas:I,canvasContext:I.getContext("2d",{alpha:!1}),viewport:C};i&&(P.background=i);const k=c.render(P),U=k;return k.promise.then(()=>{I.style.visibility="",S()}).catch(E),()=>mp(U)},[i,c,u,C,M]);const R=T.useCallback(()=>{const{current:D}=w;D&&(D.width=0,D.height=0)},[]);return T.useEffect(()=>R,[R]),v.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:LX(y,w),style:{display:"block",userSelect:"none"},children:f?v.jsx(kNe,{}):null})}function DNe(t){return"str"in t}function LNe(){const t=aC();nn(t);const{customTextRenderer:e,onGetTextError:n,onGetTextSuccess:r,onRenderTextLayerError:i,onRenderTextLayerSuccess:a,page:s,pageIndex:o,pageNumber:c,rotate:u,scale:f}=t;nn(s);const[h,g]=Av(),{value:y,error:w}=h,S=T.useRef(null);_i(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function E(){y&&r&&r(y)}function C(){w&&(_i(!1,w.toString()),n&&n(w))}T.useEffect(function(){g({type:"RESET"})},[s,g]),T.useEffect(function(){if(!s)return;const U=Ew(s.getTextContent()),B=U;return U.promise.then(V=>{g({type:"RESOLVE",value:V})}).catch(V=>{g({type:"REJECT",error:V})}),()=>mp(B)},[s,g]),T.useEffect(()=>{if(y!==void 0){if(y===!1){C();return}E()}},[y]);const M=T.useCallback(()=>{a&&a()},[a]),R=T.useCallback(k=>{IX(k)||(_i(!1,k.toString()),i&&i(k))},[i]);function D(){const k=S.current;k&&k.classList.add("selecting")}function I(){const k=S.current;k&&k.classList.remove("selecting")}const P=T.useMemo(()=>s.getViewport({scale:f,rotation:u}),[s,u,f]);return T.useLayoutEffect(function(){if(!s||!y)return;const{current:U}=S;if(!U)return;U.innerHTML="";const B=s.streamTextContent({includeMarkedContent:!0}),V={container:U,textContentSource:B,viewport:P},H=new sb(V),G=H;return H.render().then(()=>{const Q=document.createElement("div");Q.className="endOfContent",U.append(Q);const W=U.querySelectorAll('[role="presentation"]');if(e){let ee=0;y.items.forEach(($,q)=>{if(!DNe($))return;const J=W[ee];if(!J)return;const ae=e({pageIndex:o,pageNumber:c,itemIndex:q,...$});J.innerHTML=ae,ee+=$.str&&$.hasEOL?2:1})}M()}).catch(R),()=>mp(G)},[e,R,M,s,o,c,y,P]),v.jsx("div",{className:$t("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:D,ref:S})}const K6=1;function ONe(t){const n={...DX(),...t},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:a,canvasRef:s,children:o,className:c,customRenderer:u,customTextRenderer:f,devicePixelRatio:h,error:g="Failed to load the page.",filterAnnotations:y,height:w,inputRef:S,loading:E="Loading page",noData:C="No page specified.",onGetAnnotationsError:M,onGetAnnotationsSuccess:R,onGetStructTreeError:D,onGetStructTreeSuccess:I,onGetTextError:P,onGetTextSuccess:k,onLoadError:U,onLoadSuccess:B,onRenderAnnotationLayerError:V,onRenderAnnotationLayerSuccess:H,onRenderError:G,onRenderSuccess:Q,onRenderTextLayerError:W,onRenderTextLayerSuccess:ee,pageIndex:$,pageNumber:q,pdf:J,registerPage:ae,renderAnnotationLayer:ye=!0,renderForms:Y=!1,renderMode:ne="canvas",renderTextLayer:ue=!0,rotate:me,scale:xe=K6,unregisterPage:Me,width:Ce,...pt}=n,[he,He]=Av(),{value:ke,error:te}=he,Ee=T.useRef(null);nn(J);const be=Nf(q)?q-1:$??null,Te=q??(Nf($)?$+1:null),qe=me??(ke?ke.rotate:null),et=T.useMemo(()=>{if(!ke)return null;let Sn=1;const Sr=xe??K6;if(Ce||w){const Wi=ke.getViewport({scale:1,rotation:qe});Ce?Sn=Ce/Wi.width:w&&(Sn=w/Wi.height)}return Sr*Sn},[w,ke,qe,xe,Ce]);T.useEffect(function(){return()=>{Nf(be)&&i&&Me&&Me(be)}},[i,J,be,Me]);function Hn(){if(B){if(!ke||!et)return;B(Ik(ke,et))}if(i&&ae){if(!Nf(be)||!Ee.current)return;ae(be,Ee.current)}}function rs(){te&&(_i(!1,te.toString()),U&&U(te))}T.useEffect(function(){He({type:"RESET"})},[He,J,be]),T.useEffect(function(){if(!J||!Te)return;const Sr=Ew(J.getPage(Te)),Wi=Sr;return Sr.promise.then(ef=>{He({type:"RESOLVE",value:ef})}).catch(ef=>{He({type:"REJECT",error:ef})}),()=>mp(Wi)},[He,J,Te]),T.useEffect(()=>{if(ke!==void 0){if(ke===!1){rs();return}Hn()}},[ke,et]);const xr=T.useMemo(()=>Nf(be)&&Te&&Nf(qe)&&Nf(et)?{_className:r,canvasBackground:a,customTextRenderer:f,devicePixelRatio:h,filterAnnotations:y,onGetAnnotationsError:M,onGetAnnotationsSuccess:R,onGetStructTreeError:D,onGetStructTreeSuccess:I,onGetTextError:P,onGetTextSuccess:k,onRenderAnnotationLayerError:V,onRenderAnnotationLayerSuccess:H,onRenderError:G,onRenderSuccess:Q,onRenderTextLayerError:W,onRenderTextLayerSuccess:ee,page:ke,pageIndex:be,pageNumber:Te,renderForms:Y,renderTextLayer:ue,rotate:qe,scale:et}:null,[r,a,f,h,y,M,R,D,I,P,k,V,H,G,Q,W,ee,ke,be,Te,Y,ue,qe,et]),is=T.useMemo(()=>RX(pt,()=>ke&&(et?Ik(ke,et):void 0)),[pt,ke,et]),Mn=`${be}@${et}/${qe}`;function ya(){switch(ne){case"custom":return nn(u),v.jsx(u,{},`${Mn}_custom`);case"none":return null;case"canvas":default:return v.jsx(INe,{canvasRef:s},`${Mn}_canvas`)}}function Lt(){return ue?v.jsx(LNe,{},`${Mn}_text`):null}function wr(){return ye?v.jsx(TNe,{},`${Mn}_annotations`):null}function Vi(){function Sn(Wi){return!!(Wi!=null&&Wi.page)}if(!Sn(xr))throw new Error("page is undefined");const Sr=typeof o=="function"?o(xr):o;return v.jsxs(OX.Provider,{value:xr,children:[ya(),Lt(),wr(),Sr]})}function as(){return Te?J===null||ke===void 0||ke===null?v.jsx(zm,{type:"loading",children:typeof E=="function"?E():E}):J===!1||ke===!1?v.jsx(zm,{type:"error",children:typeof g=="function"?g():g}):Vi():v.jsx(zm,{type:"no-data",children:typeof C=="function"?C():C})}return v.jsx("div",{className:$t(r,c),"data-page-number":Te,ref:LX(S,Ee),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${et}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...is,children:as()})}SNe();ks.workerSrc="pdf.worker.mjs";const{useParams:jNe,useNavigate:FNe}=Fr;ks.workerSrc="https://esm.sh/pdfjs-dist@4.4.168/build/pdf.worker.min.mjs";const UNe=()=>{const{bookId:t}=jNe(),e=FNe(),{currentUser:n,userType:r,allBooks:i}=Gi(),[a,s]=T.useState(null),[o,c]=T.useState(!0),[u,f]=T.useState(!1),[h,g]=T.useState(!1),[y,w]=T.useState({theme:"dark",fontSize:18,lineHeight:1.8,fontFamily:"serif"}),[S,E]=T.useState(0),[C,M]=T.useState(1),[R,D]=T.useState(1.2),[I,P]=T.useState(null),[k,U]=T.useState(0),B=T.useRef(null);T.useEffect(()=>{(async()=>{var ae,ye,Y;if(!t)return;c(!0);let J=i.find(ne=>ne.id===t);if(!J&&n&&(r===Ht.SELLER?J=(ae=n.uploadedBooks)==null?void 0:ae.find(ne=>ne.id===t):r===Ht.USER&&(J=(ye=n.purchaseHistory)==null?void 0:ye.find(ne=>ne.id===t))),J){const ne=J.price===0;let ue=ne;if(!ue&&n&&(r===Ht.SELLER?ue=J.sellerId===n.id:r===Ht.USER&&(ue=(Y=n.purchaseHistory)==null?void 0:Y.some(me=>me.id===t))),ue){if(s(J),J.pdfUrl)try{const xe=await(await fetch(J.pdfUrl)).blob(),Me=URL.createObjectURL(xe);P(Me)}catch{P(J.pdfUrl)}}else if(!n&&!ne){e("/login");return}else if(n){alert("Access denied. Please purchase this book."),e("/store");return}}c(!1)})()},[t,n,r,e,i]),T.useEffect(()=>()=>{I&&I.startsWith("blob:")&&URL.revokeObjectURL(I)},[I]);const V=()=>{switch(y.theme){case"light":return"bg-[#f8f9fa] text-neutral-900 selection:bg-yellow-200";case"sepia":return"bg-[#f4ecd8] text-[#5b4636] selection:bg-[#d6cbb1]";case"dark":default:return"bg-[#0a0a0a] text-[#d4d4d4] selection:bg-white/20"}},H=()=>{switch(y.theme){case"light":return"bg-white shadow-[0_0_50px_rgba(0,0,0,0.1)] border-neutral-200";case"sepia":return"bg-[#faf4e8] shadow-[0_0_50px_rgba(91,70,54,0.1)] border-[#e3d8c4]";case"dark":default:return"bg-[#111] shadow-[0_0_50px_rgba(0,0,0,0.8)] border-white/5"}},G=()=>{switch(y.fontFamily){case"sans":return"font-sans";case"mono":return"font-mono";case"serif":default:return"font-serif"}},Q=q=>q.split(/(!\[.*?\]\(.*?\))/g).map((ae,ye)=>{const Y=ae.match(/!\[(.*?)\]\((.*?)\)/);return Y?v.jsxs("div",{className:"my-8 flex flex-col items-center group",children:[v.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl border border-white/10 bg-black",children:v.jsx("img",{src:Y[2],alt:Y[1],className:"max-h-[500px] w-auto object-contain transition-transform duration-500 hover:scale-[1.02]"})}),Y[1]&&v.jsx("span",{className:"text-[10px] text-neutral-500 mt-3 font-mono uppercase tracking-widest",children:Y[1]})]},ye):v.jsx("div",{className:"whitespace-pre-wrap",children:ae.split(`
`).map((ne,ue)=>{if(!ne.trim())return v.jsx("div",{className:"h-4"},ue);if(ne.startsWith("# "))return v.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6 mt-8 leading-tight",children:ne.replace("# ","")},ue);if(ne.startsWith("## "))return v.jsx("h2",{className:"text-2xl font-bold mb-4 mt-6 leading-snug opacity-90",children:ne.replace("## ","")},ue);if(ne.startsWith("### "))return v.jsx("h3",{className:"text-xl font-bold mb-3 mt-5 leading-snug opacity-80",children:ne.replace("### ","")},ue);if(ne.startsWith("- "))return v.jsx("li",{className:"ml-6 list-disc mb-2 pl-2",children:ne.replace("- ","")},ue);const me=ne.split(/(\*\*.*?\*\*)/g);return v.jsx("p",{className:"mb-4 leading-relaxed",children:me.map((xe,Me)=>xe.startsWith("**")&&xe.endsWith("**")?v.jsx("strong",{className:"font-bold opacity-100",children:xe.slice(2,-2)},Me):xe)},ue)})},ye)});if(o)return v.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center relative overflow-hidden",children:[v.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"}),v.jsx(bp,{className:"w-16 h-16 mb-6 border border-white/20 bg-black shadow-[0_0_30px_white/20] rounded-full"}),v.jsx("p",{className:"text-neutral-500 font-mono text-xs uppercase tracking-widest animate-pulse",children:"Initializing Reader Engine..."})]});if(!a)return null;const W=a.pages&&a.pages.length>0?a.pages:[{id:"1",title:"Cover",pageNumber:1,content:"No content available."}],ee=W[k],$=a.pdfUrl?Math.round(C/S*100):Math.round((k+1)/W.length*100);return v.jsxs("div",{className:`min-h-screen w-full flex flex-col fixed inset-0 z-50 transition-colors duration-500 font-sans ${V()}`,children:[v.jsxs("header",{className:`
                h-16 flex items-center justify-between px-4 md:px-8 border-b z-40 relative backdrop-blur-xl transition-colors duration-300
                ${y.theme==="dark"?"bg-black/80 border-white/10":y.theme==="light"?"bg-white/80 border-black/5":"bg-[#f4ecd8]/80 border-[#5b4636]/10"}
            `,children:[v.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0",children:[v.jsx("button",{onClick:()=>e(-1),className:"group p-2 rounded-full hover:bg-black/5 transition-all",title:"Exit",children:v.jsx(zd,{className:`w-5 h-5 ${y.theme==="dark"?"text-neutral-400 group-hover:text-white":"text-neutral-500 group-hover:text-black"}`})}),v.jsx("button",{onClick:()=>f(!0),className:"group p-2 rounded-full hover:bg-black/5 transition-all",title:"Table of Contents",children:v.jsx(vq,{className:`w-5 h-5 ${y.theme==="dark"?"text-neutral-400 group-hover:text-white":"text-neutral-500 group-hover:text-black"}`})}),v.jsx("h1",{className:"text-sm font-bold truncate opacity-80 flex-1 min-w-0",children:a.title})]}),v.jsxs("div",{className:"flex items-center gap-2 md:gap-4 shrink-0",children:[!a.pdfUrl&&v.jsxs("div",{className:"relative",children:[v.jsx("button",{onClick:()=>g(!h),className:`p-2 rounded-full transition-all border ${h?"bg-black/5":"bg-transparent border-transparent"} ${y.theme==="dark"?"hover:bg-white/10 text-neutral-300":"hover:bg-black/5 text-neutral-600"}`,children:v.jsx("span",{className:"font-serif font-bold text-lg",children:"Aa"})}),h&&v.jsxs("div",{className:`absolute top-12 right-0 w-72 p-5 rounded-2xl shadow-2xl border animate-slide-up origin-top-right z-50
                                    ${y.theme==="dark"?"bg-[#1a1a1a] border-white/10 text-white":"bg-white border-neutral-200 text-neutral-900"}
                                `,children:[v.jsx("div",{className:"flex bg-black/5 rounded-lg p-1 mb-6 border border-black/5",children:[{id:"light",icon:v.jsx(kue,{className:"w-4 h-4"}),label:"Light"},{id:"sepia",icon:v.jsx("div",{className:"w-3 h-3 rounded-full bg-[#d6cbb1]"}),label:"Sepia"},{id:"dark",icon:v.jsx(Iue,{className:"w-4 h-4"}),label:"Dark"}].map(q=>v.jsxs("button",{onClick:()=>w(J=>({...J,theme:q.id})),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-xs font-bold uppercase tracking-wider transition-all
                                                    ${y.theme===q.id?y.theme==="dark"?"bg-white text-black":"bg-black text-white":"hover:bg-black/5 text-neutral-500"}
                                                `,children:[q.icon," ",q.label]},q.id))}),v.jsxs("div",{className:"mb-6",children:[v.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50 mb-2",children:"Typography"}),v.jsx("div",{className:"flex gap-2",children:[{id:"sans",label:"Sans",font:"font-sans"},{id:"serif",label:"Serif",font:"font-serif"},{id:"mono",label:"Mono",font:"font-mono"}].map(q=>v.jsx("button",{onClick:()=>w(J=>({...J,fontFamily:q.id})),className:`flex-1 py-3 border rounded-lg text-sm transition-all ${q.font}
                                                        ${y.fontFamily===q.id?"border-current bg-current/5":"border-transparent bg-black/5 hover:bg-black/10"}
                                                    `,children:q.label},q.id))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:"Size"}),v.jsxs("span",{className:"text-xs font-mono",children:[y.fontSize,"px"]})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("button",{onClick:()=>w(q=>({...q,fontSize:Math.max(12,q.fontSize-1)})),className:"p-2 hover:bg-black/5 rounded",children:v.jsx("span",{className:"text-xs font-bold",children:"A-"})}),v.jsx("input",{type:"range",min:"12",max:"32",value:y.fontSize,onChange:q=>w(J=>({...J,fontSize:parseInt(q.target.value)})),className:"flex-1 h-1 bg-neutral-500/20 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-current [&::-webkit-slider-thumb]:rounded-full"}),v.jsx("button",{onClick:()=>w(q=>({...q,fontSize:Math.min(32,q.fontSize+1)})),className:"p-2 hover:bg-black/5 rounded",children:v.jsx("span",{className:"text-lg font-bold",children:"A+"})})]})]})]})]}),v.jsxs("div",{className:"hidden md:flex items-center gap-3 px-3 py-1.5 rounded-full border border-current/10 bg-current/5",children:[v.jsxs("span",{className:"text-xs font-bold tabular-nums",children:[$,"%"]}),v.jsx("div",{className:"w-16 h-1 bg-current/20 rounded-full overflow-hidden",children:v.jsx("div",{className:"h-full bg-current transition-all duration-300",style:{width:`${$}%`}})})]})]})]}),u&&v.jsxs("div",{className:"fixed inset-0 z-[60] flex",children:[v.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>f(!1)}),v.jsxs("div",{className:`relative w-80 h-full shadow-2xl flex flex-col animate-slide-right border-r ${y.theme==="dark"?"bg-[#0f0f0f] border-white/10":"bg-white border-neutral-200"}`,children:[v.jsxs("div",{className:"p-6 border-b border-current/10 flex items-center justify-between",children:[v.jsx("h3",{className:"font-bold text-sm uppercase tracking-widest",children:"Chapters"}),v.jsx("button",{onClick:()=>f(!1),children:v.jsx(zd,{className:"w-5 h-5"})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:W.map((q,J)=>v.jsxs("button",{onClick:()=>{var ae;U(J),f(!1),(ae=B.current)==null||ae.scrollTo(0,0)},className:`w-full text-left p-4 rounded-xl transition-all border ${k===J?"bg-current/10 border-current/20 font-bold":"bg-transparent border-transparent hover:bg-current/5 text-current/60"}`,children:[v.jsxs("span",{className:"text-xs opacity-50 block mb-1",children:["Chapter ",J+1]}),v.jsx("span",{className:"text-sm",children:q.title})]},q.id))})]})]}),v.jsx("main",{className:"flex-1 relative overflow-hidden flex flex-col pb-24",children:a.pdfUrl&&I?v.jsxs("div",{className:"flex-1 relative bg-black/50 overflow-auto flex justify-center p-4 md:p-10 custom-scrollbar pb-32",children:[v.jsx("div",{className:"shadow-[0_0_60px_rgba(0,0,0,0.5)] border border-white/5 transition-transform origin-top",style:{transform:`scale(${R})`},children:v.jsx(CNe,{file:I,onLoadSuccess:({numPages:q})=>E(q),loading:v.jsx("div",{className:"text-white p-10 font-mono text-xs",children:"Loading Document..."}),error:v.jsx("div",{className:"text-red-400 p-10 font-mono text-xs",children:"PDF Error"}),children:v.jsx(ONe,{pageNumber:C,scale:1,className:"shadow-2xl",renderTextLayer:!1,renderAnnotationLayer:!1})})}),v.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-xl border border-white/10 p-2 rounded-full flex items-center gap-4 shadow-2xl z-40 text-white",children:[v.jsx("button",{onClick:()=>M(q=>Math.max(1,q-1)),disabled:C<=1,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 disabled:opacity-30",children:v.jsx(KF,{className:"w-5 h-5"})}),v.jsxs("span",{className:"font-mono text-xs font-bold",children:[C," / ",S]}),v.jsx("button",{onClick:()=>M(q=>Math.min(S,q+1)),disabled:C>=S,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 disabled:opacity-30",children:v.jsx(XF,{className:"w-5 h-5"})}),v.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),v.jsx("button",{onClick:()=>D(q=>Math.max(.5,q-.1)),className:"p-2 hover:text-white text-neutral-400",children:v.jsx(mq,{className:"w-4 h-4"})}),v.jsx("button",{onClick:()=>D(q=>Math.min(2,q+.1)),className:"p-2 hover:text-white text-neutral-400",children:v.jsx(dM,{className:"w-4 h-4"})})]})]}):v.jsx("div",{ref:B,className:"flex-1 overflow-y-auto custom-scrollbar scroll-smooth",children:v.jsx("div",{className:"max-w-3xl mx-auto py-8 md:py-12 px-4 md:px-0",children:v.jsxs("div",{className:`
                                min-h-[calc(100vh-200px)] p-6 md:p-16 rounded-[12px] transition-all duration-300 border
                                ${H()}
                            `,children:[v.jsxs("div",{className:"mb-8 md:mb-12 text-center pb-8 border-b border-current/10",children:[v.jsxs("h4",{className:"text-[10px] md:text-xs font-bold uppercase tracking-[0.2em] opacity-40 mb-3",children:["Chapter ",k+1]}),v.jsx("h2",{className:`text-2xl md:text-5xl font-bold leading-tight ${y.fontFamily==="serif"?"font-serif":"font-sans"}`,children:ee.title})]}),v.jsx("article",{className:`prose prose-base md:prose-lg max-w-none transition-all duration-300 ${G()}`,style:{fontSize:`${y.fontSize}px`,lineHeight:y.lineHeight,color:"currentColor"},children:v.jsx("div",{className:"opacity-90",children:Q(ee.content||"Start writing to see content here...")})}),v.jsxs("div",{className:"mt-12 md:mt-20 pt-10 border-t border-current/10 flex flex-col md:flex-row gap-4 justify-between items-center opacity-50 text-[10px] md:text-xs font-mono uppercase tracking-widest text-center md:text-left",children:[v.jsx("span",{children:a.title}),v.jsxs("span",{children:[k+1," / ",W.length]})]})]})})})}),!a.pdfUrl&&v.jsx("div",{className:`fixed bottom-0 left-0 right-0 p-4 border-t z-50 backdrop-blur-xl ${y.theme==="dark"?"bg-black/90 border-white/10":y.theme==="light"?"bg-white/90 border-black/10":"bg-[#f4ecd8]/90 border-[#5b4636]/10"}`,children:v.jsxs("div",{className:"max-w-2xl mx-auto flex items-center justify-between gap-4",children:[v.jsxs("button",{onClick:()=>{var q;k>0&&(U(J=>J-1),(q=B.current)==null||q.scrollTo(0,0))},disabled:k===0,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-full transition-all border ${y.theme==="dark"?"hover:bg-white/10 border-white/10 text-white disabled:opacity-30":"hover:bg-black/5 border-black/10 text-black disabled:opacity-30"}`,children:[v.jsx(KF,{className:"w-4 h-4"}),v.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Prev"})]}),v.jsxs("div",{className:`text-[10px] font-mono font-bold uppercase tracking-widest opacity-50 ${y.theme==="dark"?"text-white":"text-black"}`,children:[k+1," / ",W.length]}),v.jsxs("button",{onClick:()=>{var q;k<W.length-1&&(U(J=>J+1),(q=B.current)==null||q.scrollTo(0,0))},disabled:k===W.length-1,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-full transition-all border ${y.theme==="dark"?"hover:bg-white/10 border-white/10 text-white disabled:opacity-30":"hover:bg-black/5 border-black/10 text-black disabled:opacity-30"}`,children:[v.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Next"}),v.jsx(XF,{className:"w-4 h-4"})]})]})})]})},{useParams:BNe,Link:HNe}=Fr,zNe=()=>{const{username:t}=BNe(),{allBooks:e}=Gi(),[n,r]=T.useState(null),[i,a]=T.useState(null),[s,o]=T.useState([]),[c,u]=T.useState(!0);if(T.useEffect(()=>{(async()=>{if(u(!0),!t){u(!1);return}const g=await j_e(t);if(g&&g.sellerProfile){r(g.sellerProfile),a(g.siteConfig);const y=g.books||[];o(y),u(!1);return}setTimeout(()=>{const y=Object.values(Oo).find(w=>{var S,E;return((S=w.creatorSite)==null?void 0:S.slug)===t||((E=w.username)==null?void 0:E.replace("@",""))===t||w.id===t});if(y&&y.creatorSite){r(y),a(y.creatorSite);const w=[...np,...e],E=Array.from(new Map(w.map(C=>[C.id,C])).values()).filter(C=>y.creatorSite.showcasedBookIds.includes(C.id)&&C.sellerId===y.id);o(E)}u(!1)},800)})()},[t,e]),T.useEffect(()=>(document.body.style.backgroundColor=(i==null?void 0:i.theme)==="light-elegant"?"#ffffff":"#0a0a0a",document.body.style.color=(i==null?void 0:i.theme)==="light-elegant"?"#000000":"#ffffff",()=>{document.body.style.backgroundColor="",document.body.style.color=""}),[i]),c)return v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-black text-white font-mono",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white rounded-full animate-spin mb-4"}),v.jsx("p",{className:"uppercase tracking-widest text-xs",children:"Resolving host: ebook-engine.github.io..."})]});if(!n||!i)return v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-black text-neutral-500 font-mono text-center p-6",children:[v.jsx("div",{className:"mb-4",children:"404"}),v.jsx("h1",{className:"text-xl text-white mb-2",children:"Site Not Found"}),v.jsxs("p",{className:"text-sm",children:['The GitHub Pages site for "',t,'" does not exist.']})]});const f=i.theme==="light-elegant";return v.jsxs("div",{className:`min-h-screen font-sans ${f?"bg-white text-neutral-900":"bg-[#050505] text-white"}`,children:[v.jsxs("div",{className:"bg-[#1a1a1a] text-neutral-400 text-[10px] font-mono py-1 px-4 flex items-center gap-4 border-b border-[#333]",children:[v.jsxs("div",{className:"flex gap-1.5",children:[v.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/50"}),v.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500/50"}),v.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500/50"})]}),v.jsxs("div",{className:"flex-1 bg-[#000] rounded px-3 py-0.5 flex items-center gap-2",children:[v.jsx(fM,{className:"w-3 h-3 text-neutral-500"}),v.jsxs("span",{children:["https://ebook-engine.github.io/",i.slug]})]})]}),v.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-20",children:[v.jsxs("header",{className:"text-center mb-20 animate-slide-up",children:[v.jsx("div",{className:`w-32 h-32 mx-auto rounded-full overflow-hidden mb-6 border-4 ${f?"border-neutral-100 shadow-xl":"border-white/10 shadow-[0_0_40px_rgba(255,255,255,0.1)]"}`,children:i.profileImageUrl?v.jsx("img",{src:i.profileImageUrl,alt:n.name,className:"w-full h-full object-cover"}):v.jsx("div",{className:`w-full h-full flex items-center justify-center text-3xl font-bold ${f?"bg-neutral-100":"bg-white/10"}`,children:n.name.charAt(0)})}),v.jsx("h1",{className:"text-4xl md:text-6xl font-black tracking-tight mb-4",children:i.displayName}),v.jsx("p",{className:`text-lg md:text-xl font-light max-w-2xl mx-auto leading-relaxed ${f?"text-neutral-600":"text-neutral-400"}`,children:i.tagline}),v.jsxs("div",{className:"flex justify-center gap-6 mt-8",children:[v.jsxs("button",{className:`flex items-center gap-2 px-6 py-2 rounded-full border transition-all ${f?"border-neutral-200 hover:bg-neutral-100":"border-white/10 hover:bg-white/10"}`,children:[v.jsx(fM,{className:"w-4 h-4"}),v.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Follow"})]}),v.jsxs("button",{className:`flex items-center gap-2 px-6 py-2 rounded-full border transition-all ${f?"border-neutral-200 hover:bg-neutral-100":"border-white/10 hover:bg-white/10"}`,children:[v.jsx(CI,{className:"w-4 h-4"}),v.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Website"})]})]})]}),v.jsxs("main",{children:[v.jsxs("div",{className:`flex items-center gap-4 mb-10 ${f?"border-neutral-200":"border-white/10"} border-b pb-4`,children:[v.jsx(Ti,{className:`w-5 h-5 ${f?"text-neutral-400":"text-neutral-500"}`}),v.jsx("h2",{className:"text-sm font-bold uppercase tracking-widest",children:"Published Works"})]}),s.length>0?v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:s.map(h=>v.jsxs("div",{className:`group flex gap-6 p-6 rounded-2xl transition-all hover:-translate-y-1 ${f?"bg-neutral-50 hover:bg-white hover:shadow-xl":"bg-white/5 hover:bg-white/10 hover:shadow-[0_10px_40px_rgba(0,0,0,0.5)]"}`,children:[v.jsx("div",{className:`w-24 h-36 flex-shrink-0 shadow-lg rounded overflow-hidden ${f?"":"border border-white/10"}`,children:v.jsx("img",{src:h.coverImageUrl,alt:h.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),v.jsxs("div",{className:"flex flex-col justify-center",children:[v.jsxs("div",{className:"mb-auto",children:[v.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full mb-2 inline-block ${f?"bg-neutral-200 text-neutral-600":"bg-white/10 text-neutral-400"}`,children:h.genre}),v.jsx("h3",{className:"text-xl font-bold leading-tight mb-1",children:h.title}),v.jsxs("p",{className:`text-sm ${f?"text-neutral-500":"text-neutral-400"}`,children:[h.description.substring(0,60),"..."]})]}),v.jsxs("div",{className:"flex items-center justify-between mt-4",children:[v.jsx("span",{className:"font-mono text-lg font-medium",children:h.price===0?"Free":`${h.price}`}),v.jsxs(HNe,{to:`/store?bookId=${h.id}`,className:`flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:underline ${f?"text-blue-600":"text-blue-400"}`,children:["Get Book ",v.jsx(hq,{className:"w-3 h-3"})]})]})]})]},h.id))}):v.jsx("div",{className:`text-center py-20 border border-dashed rounded-xl ${f?"border-neutral-300 text-neutral-400":"border-white/10 text-neutral-600"}`,children:v.jsx("p",{className:"font-mono text-xs uppercase tracking-widest",children:"No books deployed yet."})})]}),v.jsx("footer",{className:`mt-32 pt-10 border-t text-center ${f?"border-neutral-200 text-neutral-400":"border-white/10 text-neutral-600"}`,children:v.jsxs("p",{className:"text-xs font-mono",children:[" ",new Date().getFullYear()," ",i.displayName,". Hosted via Ebook-Engine."]})})]})]})},HX="https://opendev-labs-nanopi.hf.space",$Ne="nanopi",zX=async()=>{try{return(await fetch(`${HX}/api/tags`,{signal:AbortSignal.timeout(5e3)})).ok}catch{return!1}},GNe=t=>({history:[],systemPrompt:t}),qNe=async(t,e,n)=>{var s;const r=[{role:"system",content:t.systemPrompt},...t.history,{role:"user",content:e}];let i="";try{const o=await fetch(`${HX}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:$Ne,messages:r,stream:!0})});if(!o.ok||!o.body)throw new Error(`NanoPi API error: ${o.status}`);const c=o.body.getReader(),u=new TextDecoder;for(;;){const{done:f,value:h}=await c.read();if(f)break;const y=u.decode(h,{stream:!0}).split(`
`).filter(Boolean);for(const w of y)try{const S=JSON.parse(w),E=((s=S==null?void 0:S.message)==null?void 0:s.content)??"";if(E&&(i+=E,n(i)),S.done)break}catch{}}}catch(o){throw console.error("[NanoPi] Stream error:",o),o}return{updatedSession:{...t,history:[...t.history,{role:"user",content:e},{role:"assistant",content:i}]},fullResponse:i}},VNe=`You are NanoPi  the photonic intelligence model built by OpenDev Labs.
You are the AI co-author inside Co-Writter, a book writing and publishing platform.
You help users write books, brainstorm ideas, generate outlines, improve prose, and get publishing advice.
You are direct, intelligent, and creative. You write with depth and clarity.
When writing content, use markdown formatting. Keep your chat responses concise unless asked to write long-form content.`,{useLocation:WNe}=Fr,YNe=()=>{const[t,e]=T.useState(!1),[n,r]=T.useState(null),i=WNe();return T.useEffect(()=>{zX().then(r)},[]),i.pathname==="/ebook-studio"?null:v.jsxs(v.Fragment,{children:[v.jsxs("button",{onClick:()=>e(a=>!a),title:"Chat with NanoPi",className:"fixed bottom-6 right-6 z-[60] w-14 h-14 rounded-full bg-gradient-to-br from-violet-600 to-indigo-600 shadow-[0_0_30px_rgba(139,92,246,0.5)] flex items-center justify-center hover:scale-110 active:scale-95 transition-all",children:[t?v.jsx("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:v.jsx("path",{d:"M18 6L6 18M6 6l12 12",strokeLinecap:"round"})}):v.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor",opacity:"0.7"}),v.jsx("path",{d:"M2 12h3m14 0h3M12 2v3m0 14v3",strokeLinecap:"round"}),v.jsx("path",{d:"M4.93 4.93l2.12 2.12m9.9 9.9 2.12 2.12M19.07 4.93l-2.12 2.12m-9.9 9.9-2.12 2.12",strokeLinecap:"round"})]}),n!==null&&v.jsx("span",{className:`absolute top-1 right-1 w-2.5 h-2.5 rounded-full border-2 border-[#09090b] ${n?"bg-green-400":"bg-red-500"}`})]}),t&&v.jsx(KNe,{onClose:()=>e(!1)})]})},KNe=({onClose:t})=>{const[e,n]=T.useState([]),[r,i]=T.useState(""),[a,s]=T.useState(!1),[o,c]=T.useState(()=>GNe(VNe)),[u,f]=T.useState(null),h=T.useRef(null),g=T.useRef(null);T.useEffect(()=>{zX().then(f)},[]),T.useEffect(()=>{var S;(S=h.current)==null||S.scrollIntoView({behavior:"smooth"})},[e]),T.useEffect(()=>{g.current&&(g.current.style.height="auto",g.current.style.height=Math.min(g.current.scrollHeight,120)+"px")},[r]);const y=T.useCallback(async S=>{if(S==null||S.preventDefault(),!r.trim()||a)return;const E={id:Date.now().toString(),role:"user",text:r.trim()},C=(Date.now()+1).toString();n(R=>[...R,E,{id:C,role:"ai",text:"",isStreaming:!0}]);const M=r.trim();i(""),g.current&&(g.current.style.height="auto"),s(!0);try{const{updatedSession:R}=await qNe(o,M,D=>{n(I=>I.map(P=>P.id===C?{...P,text:D}:P))});c(R),n(D=>D.map(I=>I.id===C?{...I,isStreaming:!1}:I))}catch{n(D=>D.map(I=>I.id===C?{...I,text:" NanoPi is waking up or offline. Try again in a moment.",isStreaming:!1}:I))}finally{s(!1)}},[r,a,o]),w=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),y())};return v.jsxs("div",{className:"fixed bottom-24 right-4 sm:right-6 z-[60] w-[92vw] md:w-[400px] max-h-[75vh] bg-[#09090b]/97 backdrop-blur-2xl rounded-3xl border border-violet-500/20 shadow-[0_0_60px_rgba(139,92,246,0.2)] flex flex-col overflow-hidden animate-slide-up ring-1 ring-white/5",children:[v.jsxs("header",{className:"flex items-center justify-between px-5 py-4 border-b border-white/5 bg-gradient-to-r from-violet-900/20 to-transparent",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-violet-600 to-indigo-600 flex items-center justify-center shadow-[0_0_15px_rgba(139,92,246,0.4)]",children:v.jsxs("svg",{viewBox:"0 0 24 24",className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor",opacity:"0.7"}),v.jsx("path",{d:"M2 12h3m14 0h3M12 2v3m0 14v3",strokeLinecap:"round"})]})}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-sm font-bold text-white tracking-wide",children:"NanoPi"}),v.jsx("p",{className:"text-[10px] text-violet-400 font-mono",children:u===null?"Checking...":u?" Online":" Waking up..."})]})]}),v.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-white/10 text-neutral-400 hover:text-white transition-colors",children:v.jsx(EI,{className:"w-5 h-5"})})]}),v.jsxs("div",{className:"flex-grow overflow-y-auto custom-scrollbar p-0 bg-[#09090b]",children:[e.length===0&&v.jsxs("div",{className:"text-center px-6 pt-10 pb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-violet-600/30 to-indigo-600/20 border border-violet-500/20 flex items-center justify-center mx-auto mb-4",children:v.jsxs("svg",{viewBox:"0 0 24 24",className:"w-6 h-6 text-violet-400",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[v.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor",opacity:"0.6"}),v.jsx("path",{d:"M2 12h3m14 0h3M12 2v3m0 14v3",strokeLinecap:"round"}),v.jsx("path",{d:"M4.93 4.93l2.12 2.12m9.9 9.9 2.12 2.12M19.07 4.93l-2.12 2.12m-9.9 9.9-2.12 2.12",strokeLinecap:"round"})]})}),v.jsx("p",{className:"text-neutral-400 text-sm font-medium mb-1",children:"NanoPi is ready"}),v.jsx("p",{className:"text-neutral-600 text-xs",children:"Ask me to write, plan, or improve your book."}),v.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-5",children:["Help me start a book","Write Chapter 1","Create an outline","Improve my prose"].map(S=>v.jsx("button",{onClick:()=>i(S),className:"px-3 py-1.5 rounded-full text-xs border border-violet-500/20 text-violet-300 hover:bg-violet-500/10 transition-colors",children:S},S))})]}),e.map(S=>v.jsx("div",{className:"animate-fade-in border-b border-white/5 last:border-0 hover:bg-white/[0.02] transition-colors",children:v.jsxs("div",{className:"px-5 py-5 flex gap-3 items-start",children:[S.role==="ai"&&v.jsx("div",{className:"flex-shrink-0 w-7 h-7 mt-0.5 rounded-lg bg-gradient-to-br from-violet-600/40 to-indigo-600/30 border border-violet-500/20 flex items-center justify-center",children:v.jsxs("svg",{viewBox:"0 0 24 24",className:"w-3.5 h-3.5 text-violet-400",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"currentColor",opacity:"0.6"}),v.jsx("path",{d:"M2 12h3m14 0h3M12 2v3m0 14v3",strokeLinecap:"round"})]})}),v.jsxs("div",{className:`flex-1 space-y-1 ${S.role==="user"?"text-right":"text-left"}`,children:[S.role==="ai"&&v.jsx("span",{className:"text-[10px] font-bold text-violet-400 uppercase tracking-widest",children:"NanoPi"}),v.jsxs("div",{className:`text-sm leading-7 font-sans whitespace-pre-wrap ${S.role==="user"?"text-neutral-200 font-medium":"text-neutral-300"}`,children:[S.text,S.isStreaming&&v.jsx("span",{className:"inline-block w-1.5 h-4 ml-1 bg-violet-400 animate-pulse align-middle rounded-sm"})]})]})]})},S.id)),v.jsx("div",{ref:h})]}),v.jsxs("div",{className:"p-4 bg-gradient-to-t from-[#09090b] via-[#09090b] to-transparent",children:[v.jsxs("div",{className:"w-full bg-[#1e1e1e] border border-white/10 rounded-[28px] p-2 pl-4 flex items-end gap-2 shadow-lg transition-all focus-within:border-violet-500/30",children:[v.jsx("div",{className:"flex-grow py-2",children:v.jsx("textarea",{ref:g,className:"w-full bg-transparent text-white text-sm placeholder-neutral-500 resize-none focus:outline-none max-h-32 custom-scrollbar",placeholder:"Ask NanoPi anything about your book...",rows:1,value:r,onKeyDown:w,onChange:S=>i(S.target.value),disabled:a,style:{minHeight:"24px"}})}),r.trim()?v.jsx("button",{onClick:S=>y(S),disabled:a,className:"w-9 h-9 mb-0.5 rounded-full bg-gradient-to-br from-violet-600 to-indigo-600 text-white flex items-center justify-center hover:scale-105 active:scale-95 transition-all disabled:opacity-50 flex-shrink-0 shadow-[0_0_15px_rgba(139,92,246,0.4)]",children:v.jsx(_I,{className:"w-4 h-4"})}):v.jsx("div",{className:"w-9 h-9 mb-0.5 flex-shrink-0"})]}),v.jsx("p",{className:"text-center text-[9px] text-neutral-600 mt-2",children:"Powered by NanoPi  opendev-labs-nanopi.hf.space"})]})]})},XNe=()=>v.jsx("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:v.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[v.jsxs("div",{className:"text-center mb-16",children:[v.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter mb-4",children:"Contact Support"}),v.jsx("p",{className:"text-neutral-400 text-lg",children:"We are here to help you."})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[v.jsxs("div",{className:"md:col-span-2 bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:[v.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Get in Touch"}),v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Merchant Name"}),v.jsx("p",{className:"text-white font-medium text-lg",children:js}),v.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"Created by OpenDev Labs"})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Registered Address"}),v.jsxs("p",{className:"text-neutral-300 leading-relaxed",children:["Gala No. 1, 1st Floor, Malwa,",v.jsx("br",{}),"Patanwala Industrial Estate, LBS Marg,",v.jsx("br",{}),"Ghatkopar West, Mumbai - 400086."]})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Support Channels"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/5",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-white text-black flex items-center justify-center",children:v.jsx(_I,{className:"w-4 h-4"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-neutral-500 uppercase font-bold",children:"Email Us"}),v.jsx("a",{href:"mailto:opendev-labs.help@gmail.com",className:"text-white hover:text-brand-accent transition-colors",children:"opendev-labs.help@gmail.com"})]})]}),v.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/5",children:[v.jsx("div",{className:"w-10 h-10 rounded-full bg-black border border-white/20 text-white flex items-center justify-center",children:v.jsx(CI,{className:"w-4 h-4"})}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs text-neutral-500 uppercase font-bold",children:"Website"}),v.jsx("a",{href:"https://opendev-labs.github.io",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-brand-accent transition-colors",children:"opendev-labs.github.io"})]})]})]})]})]})]}),v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-[32px] p-8 flex flex-col justify-between flex-grow",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Response Time"}),v.jsx("p",{className:"text-neutral-400 text-sm leading-relaxed mb-6",children:"Our support team usually responds within 24 hours. For urgent inquiries regarding payments, please include your Transaction ID."})]}),v.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/5",children:[v.jsx("p",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Operational Hours"}),v.jsx("p",{className:"text-white font-medium",children:"Mon - Fri"}),v.jsx("p",{className:"text-neutral-400 text-sm",children:"9:00 AM - 6:00 PM IST"})]})]}),v.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-[32px] p-8",children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Connect"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("a",{href:"https://instagram.com/iamyash.io",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-neutral-300 hover:text-white transition-colors group",children:[v.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center group-hover:bg-pink-600 group-hover:text-white transition-all",children:v.jsx(YF,{className:"w-4 h-4"})}),v.jsx("span",{className:"text-sm font-medium",children:"@iamyash.io"})]}),v.jsxs("a",{href:"https://instagram.com/opendev-labs",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-neutral-300 hover:text-white transition-colors group",children:[v.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center group-hover:bg-pink-600 group-hover:text-white transition-all",children:v.jsx(YF,{className:"w-4 h-4"})}),v.jsx("span",{className:"text-sm font-medium",children:"@opendev-labs"})]})]})]})]})]})]})}),JNe=()=>v.jsx("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:v.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[v.jsxs("div",{className:"text-center mb-16",children:[v.jsx("div",{className:"w-16 h-16 mx-auto bg-[#1e1e1e] rounded-2xl flex items-center justify-center border border-white/10 mb-6 shadow-lg",children:v.jsx(bo,{className:"w-8 h-8 text-white"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4",children:"Shipping Policy"}),v.jsx("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:"Instant Digital Delivery"})]}),v.jsx("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:v.jsxs("div",{className:"space-y-8 text-neutral-300 leading-relaxed",children:[v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"1. Digital Delivery"}),v.jsxs("p",{children:[js," is a digital marketplace. We do not ship physical products. Upon successful payment, delivery of your eBook is ",v.jsx("strong",{children:"instant"}),"."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"2. Accessing Your Order"}),v.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-2 text-neutral-400",children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Dashboard:"}),' Access via "Purchase History" immediately.']}),v.jsxs("li",{children:[v.jsx("strong",{children:"Email:"})," A download link is sent to your registered email."]})]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"3. Shipping Costs"}),v.jsxs("p",{children:["There are ",v.jsx("strong",{children:"zero shipping charges"})," applicable to any purchase on ",js,"."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"4. Delays"}),v.jsx("p",{children:"If you do not receive access within 5 minutes of payment, please verify your email spam folder or contact support."})]})]})})]})}),QNe=()=>v.jsx("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:v.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[v.jsxs("div",{className:"text-center mb-16",children:[v.jsx("div",{className:"w-16 h-16 mx-auto bg-[#1e1e1e] rounded-2xl flex items-center justify-center border border-white/10 mb-6 shadow-lg",children:v.jsx(f_,{className:"w-8 h-8 text-white"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4",children:"Refund Policy"}),v.jsx("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:"Digital Goods & Services"})]}),v.jsx("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:v.jsxs("div",{className:"space-y-8 text-neutral-300 leading-relaxed",children:[v.jsxs("div",{className:"p-6 bg-red-900/10 border border-red-500/20 rounded-2xl",children:[v.jsx("h3",{className:"text-red-400 font-bold mb-2 uppercase tracking-widest text-xs",children:"Important Notice"}),v.jsxs("p",{className:"text-sm text-neutral-300",children:["Due to the nature of digital goods (eBooks), which can be downloaded instantly, orders are generally ",v.jsx("strong",{children:"non-refundable"})," once processed."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"1. Cancellations"}),v.jsx("p",{children:"As our products are instant digital downloads, orders cannot be cancelled once the payment is processed and the download link has been generated."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"2. Eligibility for Refunds"}),v.jsx("p",{children:"We may consider a refund request under these exceptional circumstances:"}),v.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1 text-neutral-400",children:[v.jsx("li",{children:"The eBook file is corrupt or technically defective."}),v.jsx("li",{children:"Duplicate payment for the same item."})]}),v.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Requests must be made within 7 days of purchase."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"3. Processing Timeline"}),v.jsx("p",{children:"Approved refunds are processed within 5-7 working days. The amount will be credited back to your original payment method."})]})]})})]})}),ZNe=()=>v.jsxs("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:[v.jsx("div",{className:"fixed inset-0 z-[-1] pointer-events-none",children:v.jsx("div",{className:"absolute bottom-[20%] left-[10%] w-[400px] h-[400px] bg-white/5 rounded-full blur-[100px]"})}),v.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[v.jsxs("div",{className:"text-center mb-16",children:[v.jsx("div",{className:"w-16 h-16 mx-auto bg-[#1e1e1e] rounded-2xl flex items-center justify-center border border-white/10 mb-6 shadow-lg",children:v.jsx(Ti,{className:"w-8 h-8 text-white"})}),v.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter mb-4",children:"Terms of Service"}),v.jsxs("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:["Effective Date: ",new Date().toLocaleDateString()]})]}),v.jsx("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:v.jsxs("div",{className:"space-y-10 text-neutral-300 leading-relaxed",children:[v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"1. Agreement to Terms"}),v.jsxs("p",{children:["By accessing ",v.jsx("span",{className:"text-white font-mono",children:"ebook-engine.github.io"}),", you agree to be bound by these Terms of Service. If you do not agree to abide by the terms of this Agreement, you are not authorized to use or access the Website."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"2. Intellectual Property"}),v.jsxs("p",{children:["The Platform and its original content, features, and functionality are owned by ",js," and are protected by international copyright, trademark, patent, trade secret, and other intellectual property or proprietary rights laws."]}),v.jsxs("p",{className:"mt-2 text-sm text-neutral-500 bg-white/5 p-4 rounded-xl border border-white/5",children:[v.jsx("strong",{children:"Note on AI Content:"})," Content generated via our AI tools belongs to the user (you), subject to the terms of the underlying model providers (Google Gemini)."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"3. Google API Services"}),v.jsx("p",{children:"Our application integrates with Google API Services. By using these features, you acknowledge and agree to be bound by Google's Terms of Service."}),v.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 text-neutral-400",children:[v.jsx("li",{children:"We do not transfer user data to third parties for surveillance."}),v.jsx("li",{children:"We do not sell user data sourced from Google APIs."}),v.jsx("li",{children:"We do not use user data for advertising purposes."})]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"4. User Accounts"}),v.jsx("p",{children:"When you create an account with us, you must provide information that is accurate, complete, and current at all times. Failure to do so constitutes a breach of the Terms, which may result in immediate termination of your account on our Service."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"5. Limitation of Liability"}),v.jsxs("p",{children:["In no event shall ",js,", nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"6. Governing Law"}),v.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]})]})})]})]}),e2e=()=>v.jsxs("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:[v.jsx("div",{className:"fixed inset-0 z-[-1] pointer-events-none",children:v.jsx("div",{className:"absolute top-[20%] right-[10%] w-[500px] h-[500px] bg-white/5 rounded-full blur-[120px]"})}),v.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[v.jsxs("div",{className:"text-center mb-16",children:[v.jsx("div",{className:"flex justify-center mb-6",children:v.jsx(bp,{className:"w-20 h-20 border border-white/20 bg-black shadow-[0_0_30px_rgba(255,255,255,0.1)] rounded-full",isActive:!0})}),v.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter mb-4",children:"Privacy Policy"}),v.jsxs("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:["Last Updated: ",new Date().toLocaleDateString()]})]}),v.jsxs("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-50 hidden md:block",children:v.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-900/20 border border-green-500/30 rounded-full",children:[v.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),v.jsx("span",{className:"text-[10px] font-bold text-green-500 uppercase tracking-widest",children:"Google Core Security Active"})]})}),v.jsxs("div",{className:"space-y-12 text-neutral-300 leading-relaxed",children:[v.jsxs("section",{children:[v.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[v.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"01"}),"Introduction"]}),v.jsxs("p",{children:["At ",js,", accessible from ",v.jsx("span",{className:"text-white font-mono",children:"ebook-engine.github.io"}),", the privacy of our visitors and creators is our top priority. This Privacy Policy document contains types of information that is collected and recorded by ",js," and how we use it."]})]}),v.jsxs("section",{children:[v.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[v.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"02"}),"Google Core Data & Security"]}),v.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[v.jsx("p",{className:"mb-4 text-sm font-medium text-white",children:"We comply with Google API Services User Data Policy, including the Limited Use requirements."}),v.jsxs("ul",{className:"space-y-3",children:[v.jsxs("li",{className:"flex gap-3 text-sm text-neutral-400",children:[v.jsx(Or,{className:"w-5 h-5 text-google-blue shrink-0"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Authentication:"})," We use Google OAuth 2.0 to securely authenticate users. Your password is never stored on our servers."]})]}),v.jsxs("li",{className:"flex gap-3 text-sm text-neutral-400",children:[v.jsx(Or,{className:"w-5 h-5 text-google-blue shrink-0"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Database Integrity:"})," User data (such as eBook drafts) is processed using ephemeral secure sessions. Long-term storage leverages secure cloud infrastructure."]})]}),v.jsxs("li",{className:"flex gap-3 text-sm text-neutral-400",children:[v.jsx(Or,{className:"w-5 h-5 text-google-blue shrink-0"}),v.jsxs("span",{children:[v.jsx("strong",{children:"Gemini AI:"})," Content generated via Google Gemini is transmitted over encrypted (TLS 1.3) channels."]})]})]})]})]}),v.jsxs("section",{children:[v.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[v.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"03"}),"Information Collection"]}),v.jsx("p",{className:"mb-4",children:"We collect information to provide better services to all our users:"}),v.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-2 text-neutral-400",children:[v.jsx("li",{children:"Personal identification (Name, Email address, Profile Picture)."}),v.jsx("li",{children:"Log Data (IP address, browser version, visit duration)."}),v.jsx("li",{children:"Transactional Data (Purchase history of eBooks)."})]})]}),v.jsxs("section",{children:[v.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[v.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"04"}),"Data Usage & Rights"]}),v.jsx("p",{children:"We use the collected data to maintain our service, notify you about changes, provide customer support, and detect technical issues."}),v.jsx("p",{className:"mt-4",children:"You have the right to request copies of your personal data, request corrections, or request deletion of your account at any time via the User Dashboard."})]})]}),v.jsx("div",{className:"mt-12 pt-8 border-t border-white/5 text-center",children:v.jsx("p",{className:"text-xs text-neutral-600 uppercase tracking-widest",children:"Protected by Ebook-Engine Secure Enclave"})})]})]})]}),{HashRouter:t2e,Routes:n2e,Route:hi,useLocation:r2e}=Fr,i2e=()=>{const t=r2e();return ir.useLayoutEffect(()=>{window.scrollTo(0,0)},[t.pathname]),v.jsx("div",{className:"flex-grow flex flex-col animate-page-enter will-change-transform origin-top",children:v.jsxs(n2e,{location:t,children:[v.jsx(hi,{path:"/",element:v.jsx(nde,{})}),v.jsx(hi,{path:"/login",element:v.jsx(Y_e,{})}),v.jsx(hi,{path:"/store",element:v.jsx(sde,{})}),v.jsx(hi,{path:"/pricing",element:v.jsx(X_e,{})}),v.jsx(hi,{path:"/dashboard",element:v.jsx(z_e,{})}),v.jsx(hi,{path:"/checkout",element:v.jsx(G_e,{})}),v.jsx(hi,{path:"/s/:slug",element:v.jsx(Q_e,{})}),v.jsx(hi,{path:"/site/:username",element:v.jsx(zNe,{})}),v.jsx(hi,{path:"/edit-ebook/:bookId",element:v.jsx(tCe,{})}),v.jsx(hi,{path:"/ebook-studio",element:v.jsx(sCe,{})}),v.jsx(hi,{path:"/read/:bookId",element:v.jsx(UNe,{})}),v.jsx(hi,{path:"/contact",element:v.jsx(XNe,{})}),v.jsx(hi,{path:"/shipping-policy",element:v.jsx(JNe,{})}),v.jsx(hi,{path:"/refund-policy",element:v.jsx(QNe,{})}),v.jsx(hi,{path:"/terms-and-conditions",element:v.jsx(ZNe,{})}),v.jsx(hi,{path:"/privacy-policy",element:v.jsx(e2e,{})})]})},t.pathname)},a2e=()=>v.jsx(Gue,{children:v.jsx(t2e,{children:v.jsxs("div",{className:"flex flex-col min-h-screen bg-black font-sans text-foreground overflow-x-hidden relative",children:[v.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(20,20,30,1)_0%,rgba(0,0,0,1)_100%)]"}),v.jsx("div",{className:"absolute top-[20%] left-[15%] w-32 h-32 border border-white/5 rounded-full animate-float opacity-30 blur-[1px]"}),v.jsx("div",{className:"absolute bottom-[25%] right-[20%] w-64 h-64 border border-white/5 rotate-45 animate-float-delayed opacity-20"}),v.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-10 pointer-events-none"}),v.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/10 to-transparent animate-[grid-flow_8s_linear_infinite]"})]}),v.jsxs("div",{className:"flex-grow relative z-10 flex flex-col w-full",children:[v.jsx(Wue,{}),v.jsx("main",{className:"flex-grow flex flex-col",children:v.jsx(i2e,{})}),v.jsx(Kue,{})]}),v.jsx(YNe,{})]})})}),$X=document.getElementById("root");if(!$X)throw new Error("Could not find root element to mount to");const s2e=lZ.createRoot($X);s2e.render(v.jsx(ir.StrictMode,{children:v.jsx(a2e,{})}));
