import{j as e,r as d,m as we,p as Ue,k as X,f as He}from"./index-BiwChM94.js";import{G as Me,T as _}from"./index-BjAxNs1s.js";const be=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M12 5v14"}),e.jsx("path",{d:"M5 12h14"})]}),Je=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Ke=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),_e=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})}),qe=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M12 19V5M5 12l7-7 7 7"})}),Ye=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Ze=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M15 4V2m0 14v-2m-7.5-10.5L6 4m9 1.5L16.5 4M3 21l18-18M9.5 13.5L4 19l5.5-1.5L15 2l-1.5 5.5Z"})}),Xe=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Qe=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),Oe=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),et=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),tt=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),Q=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),e.jsx("polyline",{points:"13 2 13 9 20 9"})]}),Te=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),ce=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),nt=t=>e.jsxs("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("path",{d:"M3.5 1.5C3.5 1.22386 3.72386 1 4 1H12C12.2761 1 12.5 1.22386 12.5 1.5V14.5C12.5 14.7761 12.2761 15 12 15H4C3.72386 15 3.5 14.7761 3.5 14.5V1.5Z",stroke:"currentColor",strokeLinejoin:"round"}),e.jsx("path",{d:"M5.5 12.5H10.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 4.5C5.83333 3.66667 8 3.5 8.5 4.5C9.5 6.5 11 5.5 11 7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),ue=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),rt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),it=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),Ae=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),st=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"}),e.jsx("path",{d:"m15 15-3-3 3-3"})]}),ot=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"15",y1:"3",x2:"15",y2:"21"}),e.jsx("path",{d:"m9 9 3 3-3 3"})]}),at=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("path",{d:"M9 22v-4h6v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M16 10h.01"}),e.jsx("path",{d:"M16 14h.01"}),e.jsx("path",{d:"M8 10h.01"}),e.jsx("path",{d:"M8 14h.01"})]}),lt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),ct=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),dt=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),pe=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),ut=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),pt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]}),ht=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),xt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M12 5a3 3 0 1 0-5.993.129 3 3 0 0 0 5.993-.13Z"}),e.jsx("path",{d:"M12 19a3 3 0 1 0 5.993-.129A3 3 0 0 0 12 19Z"}),e.jsx("path",{d:"M21 12a3 3 0 1 0-.129-5.993A3 3 0 0 0 21 12Z"}),e.jsx("path",{d:"M3 12a3 3 0 1 0 .129 5.993A3 3 0 0 0 3 12Z"}),e.jsx("path",{d:"M12 12a3 3 0 1 0-5.993-.129 3 3 0 0 0 5.993.13Z"}),e.jsx("path",{d:"M14.63 15.35a3 3 0 1 0-1.28-1.28"}),e.jsx("path",{d:"M6.1 6.1a3 3 0 1 0 5.8 2.22"}),e.jsx("path",{d:"M9.35 9.37a3 3 0 1 0 1.28 1.28"}),e.jsx("path",{d:"M14.65 14.63a3 3 0 1 0 2.22 5.8"}),e.jsx("path",{d:"M17.9 17.9a3 3 0 1 0-5.8-2.22"}),e.jsx("path",{d:"m9 14 3 3"}),e.jsx("path",{d:"M12 12 9.27 9.27"}),e.jsx("path",{d:"M14.73 9.27 12 12"}),e.jsx("path",{d:"m6 6 3 3"}),e.jsx("path",{d:"M18 6 15 9"})]});function ft({onNavigate:t,recentChats:n,onSelectChat:r,onDeleteSession:i,activeView:s,activeChatId:o,onToggle:u}){return e.jsxs("aside",{className:"w-64 bg-black border-r border-zinc-900 p-6 flex flex-col justify-between hidden md:flex selection:bg-white selection:text-black",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-white rounded-none flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-black"})}),e.jsx("span",{className:"text-xl font-bold tracking-tighter text-white lowercase",children:"nexus."})]}),e.jsx("button",{onClick:u,className:"p-1.5 border border-zinc-900 hover:border-zinc-700 transition-colors rounded-none","aria-label":"Collapse sidebar",children:e.jsx(it,{className:"h-4 w-4 text-zinc-500"})})]}),e.jsxs("button",{onClick:()=>t("new-chat"),className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 rounded-none",children:[e.jsx(be,{className:"h-4 w-4"}),"Materialize Node"]}),e.jsx("nav",{className:"mt-10 space-y-2",children:[{id:"all-chats",label:"Neural Archives",icon:Je},{id:"settings",label:"Core Configuration",icon:Ke}].map(l=>e.jsxs("button",{onClick:()=>t(l.id),className:`w-full text-left flex items-center gap-3 px-4 py-2 text-[10px] font-bold uppercase tracking-[0.2em] transition-all border border-transparent ${s===l.id?"bg-zinc-900 border-zinc-800 text-white":"text-zinc-600 hover:text-zinc-300"}`,children:[e.jsx(l.icon,{className:"h-4 w-4"}),l.label]},l.id))}),n.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("p",{className:"px-4 text-[9px] font-bold text-zinc-700 uppercase tracking-[0.4em] mb-4",children:"Active Nodes"}),e.jsx("nav",{className:"space-y-1",children:n.slice(0,5).map(l=>e.jsxs("div",{className:"group relative px-2",children:[e.jsx("button",{onClick:()=>r(l.id),className:`w-full text-left flex items-center justify-between gap-3 px-3 py-2 text-[11px] font-medium text-zinc-500 truncate transition-all border border-transparent hover:border-zinc-900 ${l.id===o?"text-white bg-zinc-900/50":"hover:bg-zinc-950 hover:text-zinc-300"}`,children:e.jsx("span",{className:"truncate lowercase",children:l.title})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm(`Are you sure you want to delete "${l.title}"?`)&&i(l.id)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 text-zinc-800 opacity-0 group-hover:opacity-100 hover:text-red-500 transition-all","aria-label":`Delete chat ${l.title}`,children:e.jsx(pe,{className:"h-3.5 w-3.5"})})]},l.id))})]})]}),e.jsx("div",{className:"pt-6 border-t border-zinc-900",children:e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-[9px] font-bold text-zinc-700 uppercase tracking-widest",children:[e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Sovereign"}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Audit"})]}),e.jsx("a",{href:"#",className:"text-zinc-700 hover:text-white transition-colors",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]})}const he=[{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",provider:"Google",apiIdentifier:"gemini-1.5-pro"},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",provider:"Google",apiIdentifier:"gemini-1.5-flash"},{id:"deepseek-coder-v2",name:"DeepSeek Coder V2",provider:"DeepSeek",apiIdentifier:"deepseek-coder"},{id:"openrouter-nous-hermes-2-mixtral",name:"Nous Hermes 2 (OpenRouter)",provider:"OpenRouter",apiIdentifier:"nousresearch/nous-hermes-2-mixtral-8x7b-dpo"},{id:"meta-codellama-70b",name:"CodeLlama 70B",provider:"Meta",apiIdentifier:"codellama/CodeLlama-70b-hf"},{id:"bigcode-starcoder",name:"StarCoder",provider:"BigCode",apiIdentifier:"bigcode/starcoder"},{id:"wizardlm-wizardcoder-python",name:"WizardCoder",provider:"WizardLM",apiIdentifier:"WizardLM/WizardCoder-Python-34B-V1.0"},{id:"mistral-ai-mistral-7b",name:"Mistral 7B",provider:"Mistral AI",apiIdentifier:"mistralai/Mistral-7B-v0.1"},{id:"openchat-openchat-3.5",name:"OpenChat 3.5",provider:"OpenChat",apiIdentifier:"openchat/openchat-3.5"},{id:"phind-codellama-v2",name:"Phind CodeLlama V2",provider:"Phind",apiIdentifier:"phind/Phind-CodeLlama-34B-v2"},{id:"replit-code-v1.5",name:"Replit Code V1.5",provider:"Replit",apiIdentifier:"replit/replit-code-v1-3b"},{id:"openai-gpt-4o",name:"GPT-4o",provider:"OpenAI",apiIdentifier:"gpt-4o"},{id:"openai-gpt-4-turbo",name:"GPT-4 Turbo",provider:"OpenAI",apiIdentifier:"gpt-4-turbo"},{id:"anthropic-claude-3-5-sonnet",name:"Claude 3.5 Sonnet",provider:"Anthropic",apiIdentifier:"claude-3-5-sonnet-20240620"},{id:"anthropic-claude-3-opus",name:"Claude 3 Opus",provider:"Anthropic",apiIdentifier:"claude-3-opus-20240229"},{id:"anthropic-claude-3-haiku",name:"Claude 3 Haiku",provider:"Anthropic",apiIdentifier:"claude-3-haiku-20240307"}],Le=he.reduce((t,n)=>{const r=n.provider;return t[r]||(t[r]=[]),t[r].push(n),t},{}),mt=["Google","OpenAI","Anthropic","OpenRouter","DeepSeek","Meta","Mistral AI","BigCode","WizardLM","OpenChat","Phind","Replit"],gt=mt.filter(t=>Le[t]),wt=({isOpen:t,onClose:n,anchorRef:r,selectedModelId:i,onModelSelect:s})=>{const o=d.useRef(null);if(d.useEffect(()=>{const l=c=>{t&&o.current&&!o.current.contains(c.target)&&r.current&&!r.current.contains(c.target)&&n()};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[t,n,r]),!t)return null;const u={position:"absolute",top:"calc(100% + 8px)",left:"0",zIndex:50,width:"320px"};return e.jsx("div",{ref:o,style:u,className:"bg-[#1C1C1C] border border-neutral-700 rounded-lg shadow-2xl text-white animate-fadeIn max-h-80 overflow-y-auto",children:e.jsx("div",{className:"p-2",children:gt.map(l=>e.jsxs("div",{children:[e.jsx("h3",{className:"px-2 pt-2 pb-1 text-xs font-semibold text-gray-400",children:l}),e.jsx("ul",{className:"space-y-1",children:Le[l].map(c=>e.jsx("li",{children:e.jsx("button",{onClick:()=>s(c.id),className:`w-full text-left px-2 py-1.5 text-sm rounded-md transition-colors ${i===c.id?"bg-white/10":"hover:bg-white/5"}`,children:c.name})},c.id))})]},l))})})};function Ee({onSendMessage:t,disabled:n,selectedModelId:r,onModelChange:i}){const[s,o]=d.useState(""),u=d.useRef(null),[l,c]=d.useState(!1),h=d.useRef(null);d.useEffect(()=>{const x=u.current;x&&(x.style.height="auto",x.style.height=`${x.scrollHeight}px`)},[s]);const w=x=>{x.preventDefault(),s.trim()&&!n&&(t(s),o(""))},g=x=>{i(x),c(!1)},O=s.trim().length>0,B=he.find(x=>x.id===r);return e.jsx("form",{onSubmit:w,className:"w-full max-w-3xl mx-auto relative group",children:e.jsxs("div",{className:"bg-zinc-950 border border-zinc-900 rounded-none px-6 py-4 flex flex-col justify-between transition-all duration-300 focus-within:border-orange-500/50 shadow-2xl",children:[e.jsx("textarea",{ref:u,value:s,onChange:x=>o(x.target.value),onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),w(x))},placeholder:"What shall we materialize today?",className:"w-full bg-transparent text-zinc-200 text-base placeholder-zinc-700 resize-none focus:outline-none font-medium mb-4",rows:1,disabled:n,style:{maxHeight:"200px"}}),e.jsxs("div",{className:"flex items-center justify-between border-t border-zinc-900 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-zinc-600",children:[[{icon:Xe,label:"Visual Context"},{icon:Ye,label:"Materialize"},{icon:Qe,label:"Node Templates"}].map((x,F)=>e.jsx("button",{type:"button",className:"hover:text-white transition-colors p-1.5 hover:bg-zinc-900","aria-label":x.label,title:x.label,children:e.jsx(x.icon,{className:"h-4 w-4"})},F)),e.jsx("div",{className:"h-4 border-l border-zinc-900 mx-1"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:h,type:"button",className:"flex items-center gap-2 hover:text-white transition-colors text-[10px] font-bold uppercase tracking-widest px-3 py-1.5 hover:bg-zinc-900","aria-label":"Select model",onClick:()=>c(x=>!x),children:[e.jsx(xt,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"truncate max-w-[120px]",children:B?.name||"Select Node"})]}),e.jsx(wt,{isOpen:l,onClose:()=>c(!1),anchorRef:h,selectedModelId:r,onModelSelect:g})]})]}),e.jsx("button",{type:"submit",disabled:n||!O,className:`h-9 w-9 flex items-center justify-center transition-all duration-300 rounded-none ${O?"bg-white text-black hover:bg-orange-500 hover:text-white":"bg-zinc-900 text-zinc-700 cursor-not-allowed"}`,"aria-label":"Send message",children:e.jsx(qe,{className:"h-5 w-5 transition-colors"})})]})]})})}function je({onSendMessage:t,isThinking:n,selectedModelId:r,onModelChange:i}){return e.jsxs("div",{className:"flex flex-col h-screen w-full bg-black text-white selection:bg-white selection:text-black relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[e.jsx(we.img,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:.4},transition:{duration:1.5,ease:"easeOut"},src:"/home/cube/Downloads/hyperspace-speed-5120x2880-18191.jpg",alt:"Hyperspace Background",className:"w-full h-full object-cover opacity-40",style:{objectPosition:"center center"}}),e.jsx("div",{className:"absolute inset-0",style:{background:"radial-gradient(circle at center, transparent 0%, rgba(0,0,0,0.8) 50%, #000 80%)"}}),e.jsx("div",{className:"absolute inset-0 opacity-[0.05]",style:{backgroundImage:"linear-gradient(#fff 1px, transparent 1px), linear-gradient(90deg, #fff 1px, transparent 1px)",backgroundSize:"40px 40px"}})]}),e.jsx("main",{className:"relative z-10 flex-grow flex flex-col items-center justify-center text-center px-6",children:e.jsxs("div",{className:"w-full max-w-4xl animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 text-[10px] font-bold text-zinc-500 mb-8 uppercase tracking-[0.4em] backdrop-blur-md",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500 animate-pulse"}),"Open-Studio // Evolution Protocol"]}),e.jsxs("h1",{className:"text-6xl md:text-8xl font-bold text-white mb-6 tracking-tighter leading-[0.85] lowercase",children:["evolve your",e.jsx("br",{}),e.jsx("span",{className:"text-zinc-600",children:"imagination."})]}),e.jsx("p",{className:"text-zinc-500 text-lg md:text-xl font-medium mb-12 max-w-2xl mx-auto leading-relaxed uppercase tracking-widest opacity-80",children:"architect, build, and deploy high-fidelity nodes across the sovereign mesh with zero-shot intelligence."}),e.jsx("div",{className:"mb-12",children:e.jsx(Ee,{onSendMessage:t,disabled:n,selectedModelId:r,onModelChange:i})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto",children:[{title:"SaaS Engine",desc:"Full-stack node with auth & state",icon:"âš¡"},{title:"Neural Dash",desc:"AI-centric monitoring surface",icon:"ðŸ§ "},{title:"Edge API",desc:"Native high-velocity protocol",icon:"ðŸŒ"}].map((s,o)=>e.jsxs("button",{onClick:()=>t(`Build a ${s.title}: ${s.desc}`),className:"group p-6 bg-zinc-950/20 backdrop-blur-md border border-zinc-900/50 text-left hover:border-orange-500/50 transition-all duration-300 rounded-none relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-[1px] h-full bg-orange-500/0 group-hover:bg-orange-500/50 transition-all"}),e.jsx("div",{className:"text-2xl mb-4 opacity-50 group-hover:opacity-100 transition-opacity",children:s.icon}),e.jsx("h3",{className:"text-xs font-bold text-zinc-300 uppercase tracking-widest mb-2",children:s.title}),e.jsx("p",{className:"text-[10px] text-zinc-600 font-medium leading-relaxed uppercase",children:s.desc})]},o))})]})})]})}function bt({info:t}){const n=t.files.length,r=t.status==="generating"?`Applying ${n} change${n!==1?"s":""}`:`Applied ${n} change${n!==1?"s":""}`;return e.jsxs("div",{className:"mt-4 border border-white/10 rounded-lg p-3 bg-black/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(nt,{className:"w-4 h-4 text-gray-400"}),e.jsx("h3",{className:"text-sm font-semibold text-white",children:r})]}),e.jsx("ul",{className:"space-y-2",children:t.files.map((i,s)=>e.jsxs("li",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i.action==="created"?e.jsx(be,{className:"w-3.5 h-3.5 text-green-500 flex-shrink-0"}):i.action==="modified"?e.jsx(Te,{className:"w-3.5 h-3.5 text-yellow-500 flex-shrink-0"}):e.jsx(pe,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"font-mono",children:i.path})]}),i.status==="generating"?e.jsx(ue,{className:"w-3.5 h-3.5 animate-spin text-gray-500"}):e.jsx(rt,{className:"w-3.5 h-3.5 text-green-500"})]},s))})]})}const ye=({message:t})=>{const{role:n,content:r,generationInfo:i}=t,s=n==="user",u=n==="open-studio"&&i?.status==="generating"&&i?.files.length===0&&!r;return e.jsxs("div",{className:`flex items-start gap-6 w-full max-w-5xl mx-auto ${s?"flex-row-reverse":""} mb-12 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[e.jsx("div",{className:`flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-none border ${s?"bg-white border-white text-black":"bg-black border-zinc-900 shadow-2xl"}`,children:s?e.jsx(Oe,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5 text-orange-500"})}),e.jsx("div",{className:`flex flex-col w-full ${s?"items-end":"items-start"}`,children:e.jsxs("div",{className:`w-full max-w-3xl ${s?"text-right":"text-left"}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 opacity-30",children:e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.3em] text-zinc-500",children:s?"Materializer // User":"Architect // open-studio"})}),e.jsxs("div",{className:`px-0 py-2 ${s?"text-zinc-200":"text-white"}`,children:[u?e.jsxs("div",{className:"flex items-center gap-4 py-4 bg-zinc-950/50 border border-zinc-900 px-6",children:[e.jsx(ue,{className:"h-4 w-4 animate-spin text-orange-500"}),e.jsx("p",{className:"text-[10px] font-bold tracking-[0.4em] text-zinc-500 uppercase",children:"Synchronizing Neural Mesh..."})]}):e.jsxs(e.Fragment,{children:[n==="open-studio"&&e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-5 h-5 bg-zinc-900 border border-zinc-800 flex items-center justify-center",children:e.jsx(Ue,{size:10,className:"text-zinc-500"})}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-[0.2em]",children:"open-studio"})]}),e.jsx("div",{className:`text-[15px] leading-relaxed font-medium ${s?"bg-zinc-900/30 p-6 border border-zinc-800":""}`,children:r})]}),t.generationInfo&&t.generationInfo.files.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 opacity-50",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-emerald-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.3em] text-zinc-500",children:"Nodes Materializing"})]}),e.jsx("div",{className:"bg-zinc-950 border border-zinc-900 p-6",children:e.jsx(bt,{info:t.generationInfo})})]})]})]})})]})};function vt({suggestions:t,onSendMessage:n}){return!t||t.length===0?null:e.jsx("div",{className:"w-full max-w-3xl mx-auto pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1.5",children:e.jsx(Ze,{className:"h-4 w-4 text-gray-400"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(r=>e.jsx("button",{onClick:()=>n(r),className:"bg-[#1C1C1C] border border-white/10 text-gray-400 text-sm px-3 py-1.5 rounded-lg hover:bg-[#2A2A2A] hover:text-gray-200 transition-colors duration-200",children:r},r))})]})})}function jt({messages:t,isThinking:n,onSendMessage:r,suggestions:i,selectedModelId:s,onModelChange:o}){const u=d.useRef(null);return d.useEffect(()=>{u.current&&(u.current.scrollTop=u.current.scrollHeight)},[t]),e.jsxs("div",{className:"flex flex-col h-full bg-[#0A0A0A] relative",children:[e.jsxs("div",{ref:u,className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8 space-y-6",children:[t.map(l=>e.jsx(ye,{message:l},l.id)),n&&t.length>0&&t[t.length-1].role==="user"&&e.jsx(ye,{message:{id:Date.now(),role:"open-studio",content:"Thinking..."}})]}),e.jsxs("div",{className:"px-4 md:px-6 lg:px-8 pb-4 bg-gradient-to-t from-[#0A0A0A] to-transparent",children:[!n&&i&&i.length>0&&e.jsx(vt,{suggestions:i,onSendMessage:r}),e.jsx(Ee,{onSendMessage:r,disabled:n,selectedModelId:s,onModelChange:o})]})]})}function Ne(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,i=Array(n);r<n;r++)i[r]=t[r];return i}function yt(t){if(Array.isArray(t))return t}function Nt(t,n,r){return(n=Ot(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function kt(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var i,s,o,u,l=[],c=!0,h=!1;try{if(o=(r=r.call(t)).next,n!==0)for(;!(c=(i=o.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(w){h=!0,s=w}finally{try{if(!c&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(h)throw s}}return l}}function St(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ke(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function Se(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ke(Object(r),!0).forEach(function(i){Nt(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function zt(t,n){if(t==null)return{};var r,i,s=Ct(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(s[r]=t[r])}return s}function Ct(t,n){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(n.indexOf(i)!==-1)continue;r[i]=t[i]}return r}function It(t,n){return yt(t)||kt(t,n)||Tt(t,n)||St()}function Mt(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Ot(t){var n=Mt(t,"string");return typeof n=="symbol"?n:n+""}function Tt(t,n){if(t){if(typeof t=="string")return Ne(t,n);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(t,n):void 0}}function At(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function ze(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function Ce(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?ze(Object(r),!0).forEach(function(i){At(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Lt(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(s,o){return o(s)},i)}}function te(t){return function n(){for(var r=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.length>=t.length?t.apply(this,s):function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return n.apply(r,[].concat(s,l))}}}function de(t){return{}.toString.call(t).includes("Object")}function Et(t){return!Object.keys(t).length}function re(t){return typeof t=="function"}function Rt(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function Pt(t,n){return de(n)||Y("changeType"),Object.keys(n).some(function(r){return!Rt(t,r)})&&Y("changeField"),n}function Ft(t){re(t)||Y("selectorType")}function $t(t){re(t)||de(t)||Y("handlerType"),de(t)&&Object.values(t).some(function(n){return!re(n)})&&Y("handlersType")}function Bt(t){t||Y("initialIsRequired"),de(t)||Y("initialType"),Et(t)&&Y("initialContent")}function Dt(t,n){throw new Error(t[n]||t.default)}var Wt={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Y=te(Dt)(Wt),ae={changes:Pt,selector:Ft,handler:$t,initial:Bt};function Vt(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ae.initial(t),ae.handler(n);var r={current:t},i=te(Ht)(r,n),s=te(Ut)(r),o=te(ae.changes)(t),u=te(Gt)(r);function l(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(w){return w};return ae.selector(h),h(r.current)}function c(h){Lt(i,s,o,u)(h)}return[l,c]}function Gt(t,n){return re(n)?n(t.current):n}function Ut(t,n){return t.current=Ce(Ce({},t.current),n),n}function Ht(t,n,r){return re(n)?n(t.current):Object.keys(r).forEach(function(i){var s;return(s=n[i])===null||s===void 0?void 0:s.call(n,t.current[i])}),r}var Jt={create:Vt},Kt={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function _t(t){return function n(){for(var r=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.length>=t.length?t.apply(this,s):function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return n.apply(r,[].concat(s,l))}}}function qt(t){return{}.toString.call(t).includes("Object")}function Yt(t){return t||Ie("configIsRequired"),qt(t)||Ie("configType"),t.urls?(Zt(),{paths:{vs:t.urls.monacoBase}}):t}function Zt(){console.warn(Re.deprecation)}function Xt(t,n){throw new Error(t[n]||t.default)}var Re={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ie=_t(Xt)(Re),Qt={config:Yt},en=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return function(s){return r.reduceRight(function(o,u){return u(o)},s)}};function Pe(t,n){return Object.keys(n).forEach(function(r){n[r]instanceof Object&&t[r]&&Object.assign(n[r],Pe(t[r],n[r]))}),Se(Se({},t),n)}var tn={type:"cancelation",msg:"operation is manually canceled"};function fe(t){var n=!1,r=new Promise(function(i,s){t.then(function(o){return n?s(tn):i(o)}),t.catch(s)});return r.cancel=function(){return n=!0},r}var nn=["monaco"],rn=Jt.create({config:Kt,isInitialized:!1,resolve:null,reject:null,monaco:null}),Fe=It(rn,2),ie=Fe[0],xe=Fe[1];function sn(t){var n=Qt.config(t),r=n.monaco,i=zt(n,nn);xe(function(s){return{config:Pe(s.config,i),monaco:r}})}function on(){var t=ie(function(n){var r=n.monaco,i=n.isInitialized,s=n.resolve;return{monaco:r,isInitialized:i,resolve:s}});if(!t.isInitialized){if(xe({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),fe(me);if(window.monaco&&window.monaco.editor)return $e(window.monaco),t.resolve(window.monaco),fe(me);en(an,cn)(dn)}return fe(me)}function an(t){return document.body.appendChild(t)}function ln(t){var n=document.createElement("script");return t&&(n.src=t),n}function cn(t){var n=ie(function(i){var s=i.config,o=i.reject;return{config:s,reject:o}}),r=ln("".concat(n.config.paths.vs,"/loader.js"));return r.onload=function(){return t()},r.onerror=n.reject,r}function dn(){var t=ie(function(r){var i=r.config,s=r.resolve,o=r.reject;return{config:i,resolve:s,reject:o}}),n=window.require;n.config(t.config),n(["vs/editor/editor.main"],function(r){var i=r.m||r;$e(i),t.resolve(i)},function(r){t.reject(r)})}function $e(t){ie().monaco||xe({monaco:t})}function un(){return ie(function(t){var n=t.monaco;return n})}var me=new Promise(function(t,n){return xe({resolve:t,reject:n})}),ve={config:sn,init:on,__getMonacoInstance:un},pn={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ge=pn,hn={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},xn=hn;function fn({children:t}){return X.createElement("div",{style:xn.container},t)}var mn=fn,gn=mn;function wn({width:t,height:n,isEditorReady:r,loading:i,_ref:s,className:o,wrapperProps:u}){return X.createElement("section",{style:{...ge.wrapper,width:t,height:n},...u},!r&&X.createElement(gn,null,i),X.createElement("div",{ref:s,style:{...ge.fullWidth,...!r&&ge.hide},className:o}))}var bn=wn,Be=d.memo(bn);function vn(t){d.useEffect(t,[])}var De=vn;function jn(t,n,r=!0){let i=d.useRef(!0);d.useEffect(i.current||!r?()=>{i.current=!1}:t,n)}var K=jn;function ne(){}function Z(t,n,r,i){return yn(t,i)||Nn(t,n,r,i)}function yn(t,n){return t.editor.getModel(We(t,n))}function Nn(t,n,r,i){return t.editor.createModel(n,r,i?We(t,i):void 0)}function We(t,n){return t.Uri.parse(n)}function kn({original:t,modified:n,language:r,originalLanguage:i,modifiedLanguage:s,originalModelPath:o,modifiedModelPath:u,keepCurrentOriginalModel:l=!1,keepCurrentModifiedModel:c=!1,theme:h="light",loading:w="Loading...",options:g={},height:O="100%",width:B="100%",className:x,wrapperProps:F={},beforeMount:$=ne,onMount:z=ne}){let[j,A]=d.useState(!1),[N,m]=d.useState(!0),T=d.useRef(null),E=d.useRef(null),H=d.useRef(null),R=d.useRef(z),a=d.useRef($),p=d.useRef(!1);De(()=>{let k=ve.init();return k.then(f=>(E.current=f)&&m(!1)).catch(f=>f?.type!=="cancelation"&&console.error("Monaco initialization: error:",f)),()=>T.current?P():k.cancel()}),K(()=>{if(T.current&&E.current){let k=T.current.getOriginalEditor(),f=Z(E.current,t||"",i||r||"text",o||"");f!==k.getModel()&&k.setModel(f)}},[o],j),K(()=>{if(T.current&&E.current){let k=T.current.getModifiedEditor(),f=Z(E.current,n||"",s||r||"text",u||"");f!==k.getModel()&&k.setModel(f)}},[u],j),K(()=>{let k=T.current.getModifiedEditor();k.getOption(E.current.editor.EditorOption.readOnly)?k.setValue(n||""):n!==k.getValue()&&(k.executeEdits("",[{range:k.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),k.pushUndoStop())},[n],j),K(()=>{T.current?.getModel()?.original.setValue(t||"")},[t],j),K(()=>{let{original:k,modified:f}=T.current.getModel();E.current.editor.setModelLanguage(k,i||r||"text"),E.current.editor.setModelLanguage(f,s||r||"text")},[r,i,s],j),K(()=>{E.current?.editor.setTheme(h)},[h],j),K(()=>{T.current?.updateOptions(g)},[g],j);let C=d.useCallback(()=>{if(!E.current)return;a.current(E.current);let k=Z(E.current,t||"",i||r||"text",o||""),f=Z(E.current,n||"",s||r||"text",u||"");T.current?.setModel({original:k,modified:f})},[r,n,s,t,i,o,u]),v=d.useCallback(()=>{!p.current&&H.current&&(T.current=E.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...g}),C(),E.current?.editor.setTheme(h),A(!0),p.current=!0)},[g,h,C]);d.useEffect(()=>{j&&R.current(T.current,E.current)},[j]),d.useEffect(()=>{!N&&!j&&v()},[N,j,v]);function P(){let k=T.current?.getModel();l||k?.original?.dispose(),c||k?.modified?.dispose(),T.current?.dispose()}return X.createElement(Be,{width:B,height:O,isEditorReady:j,loading:w,_ref:H,className:x,wrapperProps:F})}var Sn=kn;d.memo(Sn);function zn(t){let n=d.useRef();return d.useEffect(()=>{n.current=t},[t]),n.current}var Cn=zn,le=new Map;function In({defaultValue:t,defaultLanguage:n,defaultPath:r,value:i,language:s,path:o,theme:u="light",line:l,loading:c="Loading...",options:h={},overrideServices:w={},saveViewState:g=!0,keepCurrentModel:O=!1,width:B="100%",height:x="100%",className:F,wrapperProps:$={},beforeMount:z=ne,onMount:j=ne,onChange:A,onValidate:N=ne}){let[m,T]=d.useState(!1),[E,H]=d.useState(!0),R=d.useRef(null),a=d.useRef(null),p=d.useRef(null),C=d.useRef(j),v=d.useRef(z),P=d.useRef(),k=d.useRef(i),f=Cn(o),W=d.useRef(!1),I=d.useRef(!1);De(()=>{let D=ve.init();return D.then(G=>(R.current=G)&&H(!1)).catch(G=>G?.type!=="cancelation"&&console.error("Monaco initialization: error:",G)),()=>a.current?J():D.cancel()}),K(()=>{let D=Z(R.current,t||i||"",n||s||"",o||r||"");D!==a.current?.getModel()&&(g&&le.set(f,a.current?.saveViewState()),a.current?.setModel(D),g&&a.current?.restoreViewState(le.get(o)))},[o],m),K(()=>{a.current?.updateOptions(h)},[h],m),K(()=>{!a.current||i===void 0||(a.current.getOption(R.current.editor.EditorOption.readOnly)?a.current.setValue(i):i!==a.current.getValue()&&(I.current=!0,a.current.executeEdits("",[{range:a.current.getModel().getFullModelRange(),text:i,forceMoveMarkers:!0}]),a.current.pushUndoStop(),I.current=!1))},[i],m),K(()=>{let D=a.current?.getModel();D&&s&&R.current?.editor.setModelLanguage(D,s)},[s],m),K(()=>{l!==void 0&&a.current?.revealLine(l)},[l],m),K(()=>{R.current?.editor.setTheme(u)},[u],m);let V=d.useCallback(()=>{if(!(!p.current||!R.current)&&!W.current){v.current(R.current);let D=o||r,G=Z(R.current,i||t||"",n||s||"",D||"");a.current=R.current?.editor.create(p.current,{model:G,automaticLayout:!0,...h},w),g&&a.current.restoreViewState(le.get(D)),R.current.editor.setTheme(u),l!==void 0&&a.current.revealLine(l),T(!0),W.current=!0}},[t,n,r,i,s,o,h,w,g,u,l]);d.useEffect(()=>{m&&C.current(a.current,R.current)},[m]),d.useEffect(()=>{!E&&!m&&V()},[E,m,V]),k.current=i,d.useEffect(()=>{m&&A&&(P.current?.dispose(),P.current=a.current?.onDidChangeModelContent(D=>{I.current||A(a.current.getValue(),D)}))},[m,A]),d.useEffect(()=>{if(m){let D=R.current.editor.onDidChangeMarkers(G=>{let L=a.current.getModel()?.uri;if(L&&G.find(y=>y.path===L.path)){let y=R.current.editor.getModelMarkers({resource:L});N?.(y)}});return()=>{D?.dispose()}}return()=>{}},[m,N]);function J(){P.current?.dispose(),O?g&&le.set(o,a.current.saveViewState()):a.current.getModel()?.dispose(),a.current.dispose()}return X.createElement(Be,{width:B,height:x,isEditorReady:m,loading:c,_ref:p,className:F,wrapperProps:$})}var Mn=In,On=d.memo(Mn),Tn=On;ve.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.49.0/min/vs"}});const An=t=>{const n={};return t.forEach(r=>{const i=r.path.split("/");let s=n;i.forEach((o,u)=>{u===i.length-1?s[o]=r:(s[o]=s[o]||{},s=s[o])})}),n},Ve=({tree:t,onSelectFile:n,activeFile:r,generationStatusMap:i,onAddFileOrFolder:s,onDeleteFileOrFolder:o,onRenameFileOrFolder:u,level:l=0,parentPath:c=""})=>{const[h,w]=d.useState(null),[g,O]=d.useState(null),B=d.useRef(null);d.useEffect(()=>{(h||g)&&(B.current?.focus(),B.current?.select())},[h,g]);const x=(z,j,A)=>{z.preventDefault();const N=z.currentTarget.elements.namedItem("name").value,m=j.split("/").pop()||"";if(N&&N!==m){const T=[...j.split("/").slice(0,-1),N].join("/");u(j,T,A)}w(null)},F=z=>{z.preventDefault();const j=z.currentTarget.elements.namedItem("name").value;if(j&&g){const A=c?`${c}/${j}`:j;s(A,g)}O(null)},$=({defaultValue:z,onSubmit:j,onBlur:A,icon:N})=>e.jsxs("form",{onSubmit:j,className:"w-full text-left text-sm flex items-center gap-2 px-2 py-1 rounded-md bg-white/10",style:{paddingLeft:`${l*1.25+.5}rem`},children:[N,e.jsx("input",{ref:B,type:"text",name:"name",defaultValue:z,onBlur:A,className:"bg-transparent text-white w-full focus:outline-none",autoComplete:"off"})]});return e.jsxs("ul",{className:"space-y-0.5",children:[Object.entries(t).filter(([z])=>z!==".keep").sort(([z,j],[A,N])=>{const m=!!j.path,T=!!N.path;return m===T?z.localeCompare(A):m?1:-1}).map(([z,j])=>{const A=!!j.path,N=c?`${c}/${z}`:z;return h===N?e.jsx("li",{children:e.jsx($,{defaultValue:z,onSubmit:m=>x(m,N,A),onBlur:()=>w(null),icon:A?e.jsx(Q,{className:"h-4 w-4 flex-shrink-0"}):e.jsx(ce,{className:"h-4 w-4 flex-shrink-0"})})},N):e.jsxs("li",{children:[e.jsxs("div",{className:"group relative",children:[e.jsxs("button",{onClick:()=>A&&n(j),style:{paddingLeft:`${l*1.25}rem`},className:`w-full text-left text-sm flex items-center justify-between gap-2 px-2 py-1 rounded-md ${r?.path===N?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[A?e.jsx(Q,{className:"h-4 w-4 flex-shrink-0"}):e.jsx(ce,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:z})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:i.get(N)?.status==="generating"&&e.jsx(ue,{className:"w-3.5 h-3.5 animate-spin text-gray-500"})})]}),e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 right-1 flex items-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-md",children:[e.jsx("button",{onClick:()=>w(N),className:"p-1 text-gray-400 hover:text-white",title:"Rename",children:e.jsx(Te,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>o(N,A),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:e.jsx(pe,{className:"w-3.5 h-3.5"})})]})]}),!A&&e.jsx(Ve,{tree:j,onSelectFile:n,activeFile:r,generationStatusMap:i,onAddFileOrFolder:s,onDeleteFileOrFolder:o,onRenameFileOrFolder:u,level:l+1,parentPath:N})]},N)}),g&&e.jsx("li",{children:e.jsx($,{onSubmit:F,onBlur:()=>O(null),icon:g==="file"?e.jsx(Q,{className:"h-4 w-4 flex-shrink-0"}):e.jsx(ce,{className:"h-4 w-4 flex-shrink-0"})})})]})},Ln=({files:t})=>{const[n,r]=d.useState(!!window.Babel),[i,s]=d.useState('<html><body style="background-color: #0A0A0A;"></body></html>');return d.useEffect(()=>{if(n)return;const o=setInterval(()=>{window.Babel&&(r(!0),clearInterval(o))},100);return()=>clearInterval(o)},[n]),d.useEffect(()=>{const o=(c,h)=>`<html><body style="margin: 0; background-color: #0A0A0A; color: #9ca3af; font-family: sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; text-align: center;"><div style="display: flex; flex-direction: column; align-items: center; gap: 8px;"><div>${c}</div><div style="font-size: 0.8rem; color: #6b7280;">${h}</div></div></body></html>`;if(!n){s(o("Loading Preview Engine","Waiting for Babel transpiler..."));return}const u=t.find(c=>c.path==="index.html");if(u){s(u.content);return}const l=t.find(c=>/index\.(tsx|jsx|ts|js)$/i.test(c.path));if(!l){s(o("Preview Error","An `index.html` or `index.tsx` file must exist to render a preview."));return}try{const c=x=>x.replace(/[^a-zA-Z0-9]/g,"_"),h=new Map(t.map(x=>[x.path,x.content])),w={imports:{react:"https://esm.sh/react@18.2.0","react-dom/client":"https://esm.sh/react-dom@18.2.0/client"}};let g="";for(const x of t)if(/\.(tsx|jsx|ts|js)$/.test(x.path)){const F=c(x.path);x.path===l.path&&(g=F);let $=x.content;const z=/import\s+(?:[\w\s{},*]+ as \w+\s*)?([\w\s{},*]+)?\s+from\s+['"](\.\.?\/.*?)['"]/g;$=$.replace(z,(A,N,m)=>{const T=x.path.split("/");T.pop();const E=m.split("/");for(const p of E)p!=="."&&(p===".."?T.length>0&&T.pop():T.push(p));const H=T.join("/"),R=[".ts",".tsx",".js",".jsx","/index.ts","/index.tsx","/index.js","/index.jsx"];let a=null;if(h.has(H))a=H;else for(const p of R){const C=H+p;if(h.has(C)){a=C;break}}return a?A.replace(m,c(a)):A});const j=window.Babel.transform($,{presets:["react","typescript"],filename:x.path}).code;w.imports[F]=`data:text/javascript,${encodeURIComponent(j)}`}const O=`
              document.body.innerHTML = \`<div style="background-color: #0A0A0A; color: #e5e7eb; font-family: Inter, sans-serif; height: 100vh; display: flex; align-items: center; justify-content: center; padding: 2rem; box-sizing: border-box;">
                <div style="border: 1px solid #27272A; background-color: #171717; padding: 1.5rem; border-radius: 0.5rem; max-width: 80%;">
                  <h3 style="color: #fca5a5; font-size: 1.125rem; margin: 0 0 0.75rem 0; font-weight: 600;">Preview Runtime Error</h3>
                  <pre style="background-color: #27272A; color: #d1d5db; padding: 1rem; border-radius: 0.25rem; white-space: pre-wrap; word-break: break-all; font-family: 'JetBrains Mono', monospace; font-size: 0.875rem;">\${error.message}</pre>
                </div>
              </div>\`;
              console.error("Preview Error:", error);
            `,B=`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8" />
                    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                    <title>Preview</title>
                    <script src="https://cdn.tailwindcss.com"><\/script>
                    <script async src="https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.js"><\/script>
                    <link rel="preconnect" href="https://fonts.googleapis.com">
                    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
                    <style> body { font-family: 'Inter', sans-serif; background-color: #fff; } </style>
                </head>
                <body>
                    <div id="root"></div>
                    <script type="importmap">
                        ${JSON.stringify(w)}
                    <\/script>
                    <script type="module">
                        window.onerror = function(message, source, lineno, colno, error) {
                           ${O}
                           return true;
                        };
                        try {
                            await import('${g}');
                        } catch (error) {
                           ${O}
                        }
                    <\/script>
                </body>
                </html>
            `;s(B)}catch(c){console.error("Error creating preview:",c);const h=c.message.replace(/</g,"&lt;").replace(/>/g,"&gt;");s(`<html><body style="margin: 0; background-color: #0A0A0A; color: #fca5a5; font-family: 'JetBrains Mono', monospace; padding: 1rem; font-size: 0.9rem; white-space: pre-wrap;">Failed to transpile code for preview:

${h}</body></html>`)}},[t,n]),e.jsx("iframe",{srcDoc:i,title:"Preview",sandbox:"allow-scripts allow-same-origin",className:"w-full h-full bg-white"})};function En({session:t,setActiveFile:n,onFileContentChange:r,generationInfo:i,onAddFileOrFolder:s,onDeleteFileOrFolder:o,onRenameFileOrFolder:u,activeTab:l}){const{fileTree:c,activeFile:h}=t,[w,g]=d.useState(null),[O,B]=d.useState(!0),x=d.useRef(null);d.useEffect(()=>{w&&(x.current?.focus(),x.current?.select())},[w]);const F=(N,m)=>{m.languages.typescript.typescriptDefaults.setCompilerOptions({target:m.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,moduleResolution:m.languages.typescript.ModuleResolutionKind.NodeJs,module:m.languages.typescript.ModuleKind.ESNext,noEmit:!0,jsx:m.languages.typescript.JsxEmit.ReactJSX,reactNamespace:"React",typeRoots:["file:///node_modules/@types"]}),(async()=>{try{const[H,R,a]=await Promise.all([fetch("https://unpkg.com/@types/react@18/index.d.ts").then(p=>p.text()),fetch("https://unpkg.com/@types/react@18/global.d.ts").then(p=>p.text()),fetch("https://unpkg.com/@types/react-dom@18/index.d.ts").then(p=>p.text())]);m.languages.typescript.typescriptDefaults.addExtraLib(H,"file:///node_modules/@types/react/index.d.ts"),m.languages.typescript.typescriptDefaults.addExtraLib(R,"file:///node_modules/@types/react/global.d.ts"),m.languages.typescript.typescriptDefaults.addExtraLib(a,"file:///node_modules/@types/react-dom/index.d.ts"),console.log("Monaco TypeScript environment configured for React.")}catch(E){console.error("Could not fetch React type definitions for Monaco:",E)}})()},$=d.useMemo(()=>An(c),[c]),z=d.useMemo(()=>{const N=new Map;return i&&i.files.forEach(m=>N.set(m.path,m)),N},[i]),j=N=>{N.preventDefault();const m=N.currentTarget.elements.namedItem("name").value;m&&w&&s(m,w),g(null)},A=e.jsxs("div",{className:"flex items-center justify-center h-full text-neutral-600 gap-2",children:[e.jsx(ue,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading Editor..."})]});return e.jsx("div",{className:"flex flex-col h-full bg-[#0A0A0A]",children:l==="code"?e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[O&&e.jsxs("aside",{className:"w-56 bg-zinc-950 p-4 overflow-y-auto border-r border-zinc-900",children:[e.jsxs("header",{className:"flex items-center justify-between pb-4 border-b border-zinc-900 mb-4",children:[e.jsx("h3",{className:"text-[9px] font-bold text-zinc-600 uppercase tracking-[0.3em]",children:"Node Files"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>g("folder"),className:"p-1.5 hover:bg-zinc-900 text-zinc-600 hover:text-white transition-colors",title:"New Folder",children:e.jsx(pt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g("file"),className:"p-1.5 hover:bg-zinc-900 text-zinc-600 hover:text-white transition-colors",title:"New File",children:e.jsx(ut,{className:"w-4 h-4"})})]})]}),w&&e.jsxs("form",{onSubmit:j,className:"w-full text-left text-sm flex items-center gap-2 px-2 py-1.5 bg-zinc-900 border border-zinc-800 mb-2",children:[w==="file"?e.jsx(Q,{className:"h-4 w-4 text-zinc-500"}):e.jsx(ce,{className:"h-4 w-4 text-zinc-500"}),e.jsx("input",{ref:x,type:"text",name:"name",onBlur:()=>g(null),className:"bg-transparent text-white text-xs w-full focus:outline-none placeholder-zinc-700",autoComplete:"off",placeholder:"Name..."})]}),Object.keys($).length>0||w?e.jsx(Ve,{tree:$,onSelectFile:n,activeFile:h,generationStatusMap:z,onAddFileOrFolder:s,onDeleteFileOrFolder:o,onRenameFileOrFolder:u}):e.jsx("p",{className:"text-[9px] font-bold text-zinc-800 uppercase tracking-widest text-center mt-10",children:"Neural void"})]}),e.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[!O&&e.jsx("button",{onClick:()=>B(!0),className:"absolute top-4 left-4 z-10 p-2 bg-zinc-950 border border-zinc-900 hover:border-zinc-700 transition-colors",title:"Show File Manager",children:e.jsx(Ae,{className:"w-4 h-4 text-zinc-500"})}),h?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 bg-black px-6 py-3 flex items-center justify-between border-b border-zinc-900",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"h-3.5 w-3.5 text-zinc-600"}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:h.path})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-orange-500/50"}),e.jsx("span",{className:"text-[9px] font-bold text-zinc-600 uppercase tracking-[0.2em]",children:"Materializing..."})]})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsx(Tn,{path:h.path,value:h.content,onChange:N=>r(h.path,N||""),theme:"vs-dark",loading:A,onMount:F,options:{minimap:{enabled:!1},fontSize:13,fontFamily:"'JetBrains Mono', monospace",wordWrap:"on",lineNumbers:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,padding:{top:20,bottom:20}}})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-800",children:[e.jsx("div",{className:"w-12 h-12 bg-zinc-950 border border-zinc-900 flex items-center justify-center mb-6",children:e.jsx(Q,{className:"h-6 w-6 opacity-20"})}),e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.4em]",children:"Select Node Segment"}),e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-[0.2em] mt-2 opacity-50",children:"Or ask the Architect to materialize one"})]})]})]}):e.jsx("div",{className:"flex-1 bg-white",children:e.jsx(Ln,{files:c})})})}function Rn({session:t,isThinking:n,onSendMessage:r,setActiveFile:i,onFileContentChange:s,onAddFileOrFolder:o,onDeleteFileOrFolder:u,onRenameFileOrFolder:l,selectedModelId:c,onModelChange:h}){const w=t.messages[t.messages.length-1],g=w?.role==="open-studio"&&w.generationInfo?w.generationInfo:null,[O,B]=d.useState(!0),[x,F]=d.useState("code"),[$,z]=d.useState(()=>typeof window<"u"?window.innerWidth/2:600),j=d.useRef(null),A=d.useRef(n);d.useEffect(()=>{n?F("code"):A.current&&!n&&g?.files&&g.files.length>0&&F("preview"),A.current=n},[n,g]);const N=d.useCallback(m=>{m.preventDefault();const T=j.current?.offsetWidth??$,E=m.clientX;function H(a){const p=T+a.clientX-E,C=400,v=window.innerWidth-400;p>=C&&p<=v&&z(p)}function R(){window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",R)}window.addEventListener("mousemove",H),window.addEventListener("mouseup",R)},[$]);return e.jsxs("div",{className:"flex flex-col h-full bg-black selection:bg-white selection:text-black",children:[e.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between px-6 py-4 border-b border-zinc-900 bg-black",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:()=>window.location.hash="/",className:"text-[10px] font-bold text-zinc-600 hover:text-orange-500 transition-colors uppercase tracking-[0.4em]",children:"â† Return to Fleet"}),e.jsx("div",{className:"w-[1px] h-4 bg-zinc-900"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"text-[9px] font-bold text-zinc-500 uppercase tracking-[0.3em] mb-0.5",children:["Node: ",e.jsx("span",{className:"text-white",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-orange-500 uppercase tracking-widest",children:"Neural Uplink // Active"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[O&&e.jsxs("div",{className:"flex items-center bg-zinc-950 border border-zinc-900 p-1 rounded-none",children:[e.jsx("button",{onClick:()=>F("code"),className:`px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest transition-all ${x==="code"?"bg-zinc-800 text-white":"text-zinc-600 hover:text-zinc-400"}`,children:"Code"}),e.jsx("button",{onClick:()=>F("preview"),className:`px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest transition-all ${x==="preview"?"bg-zinc-800 text-white":"text-zinc-600 hover:text-zinc-400"}`,children:"Live Preview"})]}),e.jsx("button",{onClick:()=>B(!O),className:"p-2 border border-zinc-900 hover:border-zinc-700 transition-colors rounded-none group",title:O?"Collapse Node":"Expand Node",children:O?e.jsx(st,{className:"h-4 w-4 text-zinc-500 group-hover:text-white"}):e.jsx(ot,{className:"h-4 w-4 text-zinc-500 group-hover:text-white"})}),e.jsxs("button",{className:"px-5 py-2 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 flex items-center gap-2 rounded-none",children:[e.jsx(tt,{className:"h-4 w-4"}),"Materialize Node"]})]})]}),e.jsxs("div",{className:"flex-1 flex h-full overflow-hidden",children:[e.jsx(we.div,{ref:j,className:"h-full border-r border-neutral-800",initial:!1,animate:{width:O?`${$}px`:"100%"},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx(jt,{messages:t.messages,isThinking:n,onSendMessage:r,suggestions:t.suggestions,selectedModelId:c,onModelChange:h})}),e.jsx(He,{children:O&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onMouseDown:N,className:"w-1.5 h-full cursor-col-resize bg-neutral-900 hover:bg-zinc-800 transition-colors flex-shrink-0 hidden lg:block z-10"}),e.jsx(we.div,{className:"flex-1 h-full overflow-hidden",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:200,damping:25},children:e.jsx(En,{session:t,setActiveFile:i,onFileContentChange:s,generationInfo:g,onAddFileOrFolder:o,onDeleteFileOrFolder:u,onRenameFileOrFolder:l,activeTab:x})})]})})]})]})}const ee=({icon:t,title:n,description:r,children:i})=>e.jsxs("div",{className:"bg-zinc-950 border border-zinc-900 rounded-none overflow-hidden mb-8",children:[e.jsx("div",{className:"p-8 border-b border-zinc-900",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"text-zinc-500",children:t}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[11px] font-bold text-white uppercase tracking-[0.3em] mb-1",children:n}),e.jsx("p",{className:"text-[10px] text-zinc-600 uppercase font-bold tracking-widest",children:r})]})]})}),e.jsx("div",{className:"p-8 bg-black",children:i})]}),q=({label:t,children:n})=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between py-4 border-b border-zinc-900 last:border-b-0",children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-4 sm:mb-0",children:t}),e.jsx("div",{className:"w-full sm:w-auto",children:n})]});function Pn(){return e.jsx("div",{className:"h-full overflow-y-auto bg-black text-white selection:bg-white selection:text-black",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-12",children:[e.jsxs("header",{className:"mb-16",children:[e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 text-[9px] font-bold text-zinc-500 mb-6 uppercase tracking-[0.3em]",children:"System // Core Configuration"}),e.jsxs("h1",{className:"text-6xl font-bold tracking-tighter lowercase leading-none",children:["uplink",e.jsx("br",{}),e.jsx("span",{className:"text-zinc-600",children:"parameters."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ee,{icon:e.jsx(Oe,{className:"w-5 h-5"}),title:"Neural Profile",description:"Identity parameters and handshake preferences.",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{label:"Full Name",children:e.jsx("input",{type:"text",disabled:!0,value:"Sovereign User",className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed focus:outline-none"})}),e.jsx(q,{label:"Uplink ID",children:e.jsx("input",{type:"email",disabled:!0,value:"uplink@opendev-labs.io",className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed focus:outline-none"})}),e.jsx(q,{label:"System Theme",children:e.jsx("select",{disabled:!0,className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed appearance-none focus:outline-none",children:e.jsx("option",{children:"Titan // Black"})})})]})}),e.jsx(ee,{icon:e.jsx(at,{className:"w-5 h-5"}),title:"Consortium",description:"Cluster management and role distribution.",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{label:"Consortium Name",children:e.jsx("input",{type:"text",disabled:!0,value:"OpenDev Labs",className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed focus:outline-none"})}),e.jsx(q,{label:"Active Nodes",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"Invite Architects"})})]})}),e.jsx(ee,{icon:e.jsx(lt,{className:"w-5 h-5"}),title:"Compute Credits",description:"Resource allocation and usage history.",children:e.jsx(q,{label:"Resource Plan",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-orange-500 border border-orange-500/30 px-3 py-1 bg-orange-500/5",children:"Unlimited Compute"}),e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"Manage Allocation"})]})})}),e.jsx(ee,{icon:e.jsx(ct,{className:"w-5 h-5"}),title:"Encryption Keys",description:"Model authentication and external mesh handshakes.",children:e.jsx(q,{label:"Uplink Keys",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-white text-black cursor-not-allowed",children:"Generate New Key"})})}),e.jsxs(ee,{icon:e.jsx(dt,{className:"w-5 h-5"}),title:"Audit & Security",description:"System hardening and access logs.",children:[e.jsx(q,{label:"Mesh SSO",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"Configure Protocol"})}),e.jsx(q,{label:"Uplink Logs",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"View Transactions"})})]})]})]})})}function Fn(t){const n=Date.now(),r=Math.floor((n-t)/1e3);let i=r/31536e3;return i>1?Math.floor(i)+" years ago":(i=r/2592e3,i>1?Math.floor(i)+" months ago":(i=r/86400,i>1?Math.floor(i)+" days ago":(i=r/3600,i>1?Math.floor(i)+" hours ago":(i=r/60,i>1?Math.floor(i)+" minutes ago":"Just now"))))}function $n({sessions:t,onSelectChat:n,onDeleteSession:r,onNavigate:i}){const[s,o]=d.useState(""),u=d.useMemo(()=>t.filter(l=>l.title.toLowerCase().includes(s.toLowerCase())).sort((l,c)=>c.lastUpdated-l.lastUpdated),[t,s]);return e.jsx("div",{className:"h-full overflow-y-auto bg-black text-white selection:bg-white selection:text-black",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-12",children:[e.jsxs("header",{className:"flex items-center justify-between mb-16",children:[e.jsxs("div",{children:[e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 text-[9px] font-bold text-zinc-500 mb-6 uppercase tracking-[0.3em]",children:"Archives // Neural Repository"}),e.jsxs("h1",{className:"text-6xl font-bold tracking-tighter lowercase leading-none",children:["node",e.jsx("br",{}),e.jsx("span",{className:"text-zinc-600",children:"archives."})]})]}),e.jsxs("button",{onClick:()=>i("new-chat"),className:"flex items-center gap-3 px-6 py-3 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 rounded-none shadow-2xl",children:[e.jsx(be,{className:"h-4 w-4"}),"Materialize Node"]})]}),e.jsxs("div",{className:"relative mb-12",children:[e.jsx(ht,{className:"absolute left-6 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600"}),e.jsx("input",{type:"text",placeholder:"Search archives by project name or purpose...",value:s,onChange:l=>o(l.target.value),className:"w-full bg-zinc-950 border border-zinc-900 rounded-none pl-14 pr-6 py-4 text-[11px] font-mono text-zinc-300 placeholder-zinc-800 focus:outline-none focus:border-zinc-700 transition-colors"})]}),e.jsx("div",{className:"space-y-4",children:u.length>0?u.map(l=>e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:()=>n(l.id),className:"w-full text-left p-8 bg-zinc-950/50 border border-zinc-900 rounded-none hover:border-zinc-700 transition-all duration-300 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-zinc-800 group-hover:bg-orange-500 transition-colors"}),e.jsx("h2",{className:"text-[12px] font-bold text-white uppercase tracking-widest truncate",children:l.title})]}),e.jsxs("p",{className:"text-[9px] font-bold text-zinc-600 uppercase tracking-[0.2em] mt-1 ml-5",children:["Handshake: ",Fn(l.lastUpdated)]})]})}),e.jsx("button",{onClick:c=>{c.stopPropagation(),window.confirm(`Are you sure you want to delete "${l.title}"?`)&&r(l.id)},className:"absolute right-8 top-1/2 -translate-y-1/2 p-3 rounded-none text-zinc-700 opacity-0 group-hover:opacity-100 hover:bg-zinc-900 hover:text-red-500 transition-all border border-zinc-900","aria-label":`Delete chat ${l.title}`,children:e.jsx(pe,{className:"h-4 w-4"})})]},l.id)):e.jsxs("div",{className:"text-center py-24 px-8 border border-dashed border-zinc-900 rounded-none",children:[e.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-[0.4em] text-zinc-500",children:"Node records void"}),e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-700 mt-4 leading-relaxed max-w-xs mx-auto",children:s?"The requested identifier does not exist in the current neural history.":"Initialize your first node to populate the system archives."})]})})]})})}const Bn=`You are open-studio, an elite AI development orchestrator. When generating code:

CRITICAL FORMATTING RULES:
- Your response MUST be valid JSON with this exact structure:
{
  "conversation": "Your conversational response here",
  "files": [
    {
      "path": "src/components/Button.tsx",
      "content": "// file content here",
      "action": "created"
    }
  ]
}

MODIFICATION GUIDELINES:
1. For NEW files: Use "action": "created"
2. For EXISTING files being changed: Use "action": "modified"  
3. For files to REMOVE: Use "action": "deleted" (content can be empty)
4. Always include the full file content, not just diffs
5. Do not include files that are not changed.
6. The 'content' value must be a single string with properly escaped newlines (\\n), tabs (\\t), and quotes (\\").
7. If there are no file changes, return an empty array for the "files" key.
`,Dn=t=>t.filter(n=>n.role==="user"||n.role==="open-studio"&&n.content).map(n=>({role:n.role==="open-studio"?"model":"user",parts:[{text:n.content}]}));async function*Wn(t,n,r,i){const s="AIzaSyBgjTsiUmjPnCESnd4PMiGbdpGmeGClhIM",o=new Me({apiKey:s,apiVersion:"v1"}),u=[...Dn(n),{role:"user",parts:[{text:t}]}],l=await o.models.generateContentStream({model:r.apiIdentifier,contents:u,config:{systemInstruction:Bn,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{conversation:{type:_.STRING},files:{type:_.ARRAY,items:{type:_.OBJECT,properties:{path:{type:_.STRING},content:{type:_.STRING},action:{type:_.STRING}},required:["path","action"]}}},required:["conversation","files"]}}});for await(const c of l)yield{text:c.text||""}}const Vn=t=>{switch(t){case"Google":return"AIzaSyBgjTsiUmjPnCESnd4PMiGbdpGmeGClhIM";case"OpenRouter":return"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";case"OpenAI":return;case"DeepSeek":return;default:return}},Ge=`You are open-studio, an AI development assistant. Your response MUST be a single, valid JSON object and nothing else.
DO NOT wrap the JSON in markdown backticks like \`\`\`json.
DO NOT add any text before or after the JSON object.

The JSON object must have this exact structure:
{
  "conversation": "Your conversational response here. Keep it concise.",
  "files": [
    {
      "path": "src/components/Button.tsx",
      "content": "// The full, complete file content goes here.\\n// Use \\\\n for newlines and \\\\t for tabs.",
      "action": "created"
    }
  ]
}

MODIFICATION GUIDELINES:
1.  For NEW files, use "action": "created".
2.  For CHANGING existing files, use "action": "modified".
3.  For REMOVING files, use "action": "deleted". 'content' can be omitted.
4.  Always provide the FULL file content, not just diffs or partial code.
5.  Do not include files that are not changed.
6.  If no files are changed, "files" MUST be an empty array: [].`,Gn=t=>t.filter(n=>n.role==="user"||n.role==="open-studio"&&n.content).map(n=>({role:n.role==="open-studio"?"assistant":"user",content:n.content})),Un=(t,n)=>{let r=t;if(n&&n.length>0){const i={files:n.map(o=>({path:o.path,content:o.content}))},s=`

[Current Project Files]
\`\`\`json
${JSON.stringify(i,null,2)}
\`\`\``;r+=s}return r};async function*Hn(t,n,r,i){let s="";const o={"Content-Type":"application/json",Authorization:`Bearer ${i}`};switch(r.provider){case"DeepSeek":s="https://api.deepseek.com/v1";break;case"OpenAI":s="https://api.openai.com/v1";break;case"OpenRouter":s="https://openrouter.ai/api/v1",o["HTTP-Referer"]="https://opendev-labs.ai",o["X-Title"]="opendev-labs";break;default:throw new Error(`Unsupported OpenAI-compatible provider: ${r.provider}`)}const u=[{role:"system",content:Ge},...Gn(n),{role:"user",content:t}],l=await fetch(`${s}/chat/completions`,{method:"POST",headers:o,body:JSON.stringify({model:r.apiIdentifier,messages:u,stream:!0})});if(!l.ok){let g=l.statusText;try{const O=await l.json();g=O?.error?.message||g,console.error(`API Error from ${r.provider}:`,O)}catch{const B=await l.text();console.error(`API Error from ${r.provider}:`,B)}throw new Error(g)}if(!l.body)throw new Error("Response body is null");const c=l.body.getReader(),h=new TextDecoder;let w="";for(;;){const{done:g,value:O}=await c.read();if(g)break;w+=h.decode(O,{stream:!0});const B=w.split(`
`);w=B.pop()||"";for(const x of B)if(x.startsWith("data: ")){const F=x.substring(6).trim();if(F==="[DONE]")return;try{const z=JSON.parse(F).choices[0]?.delta?.content||"";z&&(yield{text:z})}catch($){console.error("Error parsing stream data:",F,$)}}}}async function*Jn(t,n,r,i){const s=`${Ge}

**Task:**
${t}`,o=await fetch(`https://api-inference.huggingface.co/models/${r.apiIdentifier}`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:s})});if(!o.ok){let h=o.statusText;try{const w=await o.json();h=w?.error||h,console.error("Hugging Face API Error:",w)}catch{const g=await o.text();console.error("Hugging Face API Error:",g)}throw new Error(h)}const l=(await o.json())[0]?.generated_text;if(!l)throw new Error("Invalid response structure from Hugging Face.");const c=l.indexOf("{");if(c!==-1)yield{text:l.substring(c)};else{const h={conversation:`The model did not return the expected JSON format. Raw response:

${l}`,files:[]};yield{text:JSON.stringify(h)}}}async function*Kn(t,n,r,i,s){const o=he.find(c=>c.id===i);if(!o){yield{text:JSON.stringify({conversation:`Error: Model configuration for "${i}" not found.`,files:[]})};return}const u=Vn(o.provider);if(!u){yield{text:JSON.stringify({conversation:`Materialization handshake failed: API key for ${o.provider} is not configured in the mesh environment.`,files:[]})};return}const l=Un(t,r);try{switch(o.provider){case"Google":yield*Wn(l,n,o,void 0);break;case"OpenAI":case"DeepSeek":case"OpenRouter":yield*Hn(l,n,o,u);break;case"Meta":case"BigCode":case"WizardLM":case"Mistral AI":case"OpenChat":case"Phind":case"Replit":yield*Jn(l,n,o,u);break;case"Anthropic":yield{text:JSON.stringify({conversation:"The Anthropic provider is not yet fully implemented.",files:[]})};break;default:const h={conversation:`The model provider '${o.provider}' is not yet implemented.`,files:[]};yield{text:JSON.stringify(h)}}}catch(c){console.error(`Error with ${o.provider} API:`,c);const h=c instanceof Error?c.message:"An unknown error occurred.";yield{text:JSON.stringify({conversation:`An error occurred with ${o.provider}: ${h}`,files:[]})}}}async function _n(t){const n="AIzaSyBgjTsiUmjPnCESnd4PMiGbdpGmeGClhIM";try{const s=((await new Me({apiKey:n,apiVersion:"v1"}).models.generateContent({model:"gemini-1.5-flash",contents:t,config:{systemInstruction:`You are an expert developer assistant. Based on the user's last request and the files that were generated, provide 3-4 short, actionable follow-up prompts. Return a JSON object with a single key "suggestions" which is an array of strings. Example: {"suggestions": ["Make it responsive", "Add a loading state"]}`,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{suggestions:{type:_.ARRAY,items:{type:_.STRING}}},required:["suggestions"]}}})).text||"").trim(),o=JSON.parse(s);return o.suggestions&&Array.isArray(o.suggestions)?o.suggestions.slice(0,4):[]}catch(r){return console.error("Error generating suggestions:",r),[]}}const qn=()=>Date.now().toString()+Math.random().toString(36).substring(2);function Xn(){const[t,n]=d.useState("new-chat"),[r,i]=d.useState([]),[s,o]=d.useState(null),[u,l]=d.useState(!1),[c,h]=d.useState(!0),[w,g]=d.useState(!0),[O,B]=d.useState(he[0].id);d.useEffect(()=>{try{const a=localStorage.getItem("opendev-selectedModelId");a&&B(a)}catch(a){console.error("Failed to load settings from localStorage",a)}},[]);const x=d.useCallback(a=>{B(a),localStorage.setItem("opendev-selectedModelId",a)},[]);d.useEffect(()=>{const a=()=>{const p=window.location.hash.replace(/^#\/?/,""),[C,v]=p.split("/");C==="chat"&&v?(o(v),n("chat-session")):C==="chats"?(o(null),n("all-chats")):C==="settings"?(o(null),n("settings")):(o(null),n("new-chat")),h(!1)};return window.addEventListener("hashchange",a),a(),()=>window.removeEventListener("hashchange",a)},[]);const F=r.find(a=>a.id===s),$=a=>{switch(a){case"new-chat":window.location.hash="/";break;case"all-chats":window.location.hash="/chats";break;case"settings":window.location.hash="/settings";break}},z=a=>{window.location.hash=`/chat/${a}`},j=a=>{s&&i(p=>p.map(C=>C.id===s?{...C,activeFile:a}:C))},A=(a,p)=>{s&&i(C=>C.map(v=>{if(v.id===s){const P=v.fileTree.map(f=>f.path===a?{...f,content:p}:f),k=v.activeFile?.path===a?{...v.activeFile,content:p}:v.activeFile;return{...v,fileTree:P,activeFile:k}}return v}))},N=a=>{i(p=>p.filter(C=>C.id!==a)),s===a&&$("new-chat")},m=(a,p)=>{if(s){if(!a.trim()||/[\\?%*:|"<>]/g.test(a)){alert("Invalid file or folder name.");return}i(C=>C.map(v=>{if(v.id===s)if(p==="file"){if(v.fileTree.some(f=>f.path===a))return alert(`File "${a}" already exists.`),v;const P={path:a,content:""},k=[...v.fileTree,P];return{...v,fileTree:k,activeFile:P}}else{const P=a.endsWith("/")?a:a+"/";if(v.fileTree.some(W=>W.path.startsWith(P)||W.path===a))return alert(`A folder or file with the name "${a}" already exists.`),v;const k={path:`${P}.keep`,content:""},f=[...v.fileTree,k];return{...v,fileTree:f}}return v}))}},T=(a,p)=>{s&&window.confirm(`Are you sure you want to delete "${a}"? This cannot be undone.`)&&i(C=>C.map(v=>{if(v.id===s){const P=a.endsWith("/")?a:a+"/",k=v.fileTree.filter(W=>p?W.path!==a:!W.path.startsWith(P));let f=v.activeFile;return f&&(p?f.path===a:f.path.startsWith(P))&&(f=null),{...v,fileTree:k,activeFile:f}}return v}))},E=(a,p,C)=>{if(!(!s||a===p)){if(!p.trim()||/[\\?%*:|"<>]/g.test(p)){alert("Invalid new name.");return}i(v=>v.map(P=>{if(P.id===s){const k=P.fileTree.map(W=>{if(C)return W.path===a?{...W,path:p}:W;{const I=a.endsWith("/")?a:a+"/";return W.path.startsWith(I)?{...W,path:W.path.replace(I,p+"/")}:W}});let f=P.activeFile;if(f){if(C&&f.path===a)f={...f,path:p};else if(!C&&f.path.startsWith(a+"/")){const W=a.endsWith("/")?a:a+"/";f={...f,path:f.path.replace(W,p+"/")}}}return{...P,fileTree:k,activeFile:f}}return P}))}},H=async a=>{l(!0);let p=s,C=!1;p&&i(I=>I.map(V=>V.id===p?{...V,suggestions:[]}:V));let v=[],P=[];const k={id:Date.now(),role:"user",content:a},f=Date.now()+1,W={id:f,role:"open-studio",content:"",generationInfo:{status:"generating",files:[]}};if(p){const I=r.find(V=>V.id===p);I&&(v=I.messages,P=I.fileTree),i(V=>V.map(J=>J.id===p?{...J,messages:[...J.messages,k,W],lastUpdated:Date.now()}:J))}else{C=!0;const I=qn(),V={id:I,title:a.length>25?a.substring(0,22)+"...":a,messages:[k,W],fileTree:[],activeFile:null,lastUpdated:Date.now()};i(J=>[V,...J]),o(I),p=I,v=[],P=[]}C&&(n("chat-session"),window.location.hash=`#/chat/${p}`);try{let I="",V="";const J=Kn(a,v,P,O,void 0);for await(const L of J){I+=L.text;const y=I.match(/"conversation"\s*:\s*"((?:\\.|[^"\\])*)/);if(y&&y[1]){const b=y[1].replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\\\/g,"\\");b!==V&&(V=b,i(M=>M.map(S=>S.id===p?{...S,messages:S.messages.map(U=>U.id===f?{...U,content:V}:U)}:S)))}else!V&&!I.includes('"conversation"')&&i(b=>b.map(M=>M.id===p?{...M,messages:M.messages.map(S=>S.id===f?{...S,content:I}:S)}:M))}let D=[],G="Sorry, I encountered an issue generating a response.";if(I){let L="";const y=I.match(/```json\n([\s\S]*?)\n```/);if(y&&y[1])L=y[1];else{const b=I.indexOf("{"),M=I.lastIndexOf("}");b!==-1&&M>b&&(L=I.substring(b,M+1))}if(L)try{const b=JSON.parse(L);G=b.conversation||"(Nexus did not provide a conversational response.)",b.files&&Array.isArray(b.files)&&(D=b.files.filter(M=>M.path&&M.action))}catch(b){console.error("Failed to parse final JSON from response",b),G="I tried to generate a response, but it wasn't in the correct format. The raw response is shown below.",i(M=>M.map(S=>S.id===p?{...S,messages:S.messages.map(U=>U.id===f?{...U,content:I}:U)}:S))}else console.warn("No valid JSON found in the final response. Treating as pure conversation."),G=I}i(L=>L.map(y=>{if(y.id===p){const b=D.map(S=>({path:S.path,action:S.action,status:"generating"})),M=y.messages.map(S=>S.id===f?{...S,content:G,generationInfo:{status:"generating",files:b}}:S);return{...y,messages:M}}return y}));for(const L of D)L.action==="created"||L.action==="modified"?i(y=>y.map(b=>{if(b.id!==p)return b;const M=b.fileTree.some(oe=>oe.path===L.path),S={path:L.path,content:L.content||""},U=M?b.fileTree.map(oe=>oe.path===L.path?S:oe):[...b.fileTree,S];return{...b,fileTree:U,activeFile:S}})):L.action==="deleted"&&i(y=>y.map(b=>{if(b.id!==p)return b;const M=b.fileTree.filter(U=>U.path!==L.path),S=b.activeFile?.path===L.path?null:b.activeFile;return{...b,fileTree:M,activeFile:S}})),await new Promise(y=>setTimeout(y,200)),i(y=>y.map(b=>{if(b.id!==p)return b;const M=b.messages.map(S=>{if(S.id===f&&S.generationInfo){const U=S.generationInfo.files.map(se=>se.path===L.path?{...se,status:"complete"}:se);return{...S,generationInfo:{...S.generationInfo,files:U}}}return S});return{...b,messages:M}}));if(i(L=>L.map(y=>{if(y.id===p&&!y.activeFile&&y.fileTree.length>0){const b=y.fileTree.find(M=>/index\.(tsx|jsx)$/.test(M.path))||y.fileTree[0];return{...y,activeFile:b}}return y})),i(L=>L.map(y=>{if(y.id===p){const b=y.messages.map(M=>M.id===f&&M.generationInfo?{...M,generationInfo:{...M.generationInfo,status:"complete"}}:M);return{...y,messages:b}}return y})),D.length>0){const L=a,y=D.map(S=>S.path),b=`Based on the user's request to "${L}", I have generated or modified the following files: ${y.join(", ")}.`,M=await _n(b);i(S=>S.map(U=>U.id===p?{...U,suggestions:M}:U))}}catch(I){console.error("Error streaming chat response:",I),i(V=>V.map(J=>{if(J.id===p){const D=J.messages.map(G=>G.id===f?{...G,content:`Sorry, I encountered an error: ${I instanceof Error?I.message:"Unknown error"}`}:G);return{...J,messages:D}}return J}))}finally{l(!1)}};if(c)return null;const R={isThinking:u,onSendMessage:H,selectedModelId:O,onModelChange:x};return t==="new-chat"&&!s?e.jsx(je,{...R}):e.jsxs("div",{className:"flex h-screen bg-black text-zinc-400 selection:bg-white selection:text-black",children:[w&&e.jsx(ft,{onNavigate:$,recentChats:r,onSelectChat:z,onDeleteSession:N,activeView:t,activeChatId:s,onToggle:()=>g(!1)}),e.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[!w&&t!=="new-chat"&&e.jsx("button",{onClick:()=>g(!0),className:"absolute top-6 left-6 z-20 p-2 border border-zinc-900 bg-black hover:border-zinc-700 transition-colors rounded-none shadow-2xl","aria-label":"Open sidebar",children:e.jsx(Ae,{className:"h-4 w-4 text-zinc-500"})}),e.jsxs("div",{className:"h-full",children:[t==="chat-session"&&F&&e.jsx(Rn,{session:F,...R,setActiveFile:j,onFileContentChange:A,onAddFileOrFolder:m,onDeleteFileOrFolder:T,onRenameFileOrFolder:E}),t==="new-chat"&&!s&&e.jsx(je,{...R}),t==="chat-session"&&!F&&!c&&e.jsxs("div",{className:"p-8 text-white flex flex-col items-center justify-center h-full text-center",children:[e.jsx("h1",{className:"text-xl font-bold mb-2 lowercase tracking-tighter",children:"node not materialized"}),e.jsx("p",{className:"text-zinc-600 mb-8 max-w-sm uppercase text-[10px] font-bold tracking-[0.2em] leading-relaxed",children:"the session you are attempting to uplink with is currently void or offline in this mesh."}),e.jsx("button",{onClick:()=>$("new-chat"),className:"px-6 py-2.5 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 rounded-none",children:"Materialize New Node"})]}),t==="all-chats"&&e.jsx($n,{sessions:r,onSelectChat:z,onDeleteSession:N,onNavigate:$}),t==="settings"&&e.jsx(Pn,{})]},t+s)]})]})}export{Xn as default};
