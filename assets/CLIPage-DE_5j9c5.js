import{u as H,r as i,j as n,b as L}from"./index-D5Kx_1LA.js";import{b as U,s as I}from"./VoidApp-B2tobB8z.js";const _=`
<div class="space-y-1">
<div class="font-bold text-white uppercase tracking-widest text-[10px] mb-2">opendev CLI - Operational Protocols</div>
<div class="pl-0 flex gap-4"><span class="text-white font-bold w-32 shrink-0">help</span> <span class="text-zinc-600">Display available protocols.</span></div>
<div class="pl-0 flex gap-4"><span class="text-white font-bold w-32 shrink-0">fleet</span> <span class="text-zinc-600">List all registry nodes.</span></div>
<div class="pl-0 flex gap-4"><span class="text-white font-bold w-32 shrink-0">launch &lt;node&gt;</span> <span class="text-zinc-600">Initiate node deployment sequence.</span></div>
<div class="pl-0 flex gap-4"><span class="text-white font-bold w-32 shrink-0">telemetry &lt;node&gt;</span> <span class="text-zinc-600">Access real-time log stream.</span></div>
<div class="pl-0 flex gap-4"><span class="text-white font-bold w-32 shrink-0">whoami</span> <span class="text-zinc-600">Verify current authorization.</span></div>
<div class="pl-0 flex gap-4"><span class="text-white font-bold w-32 shrink-0">clear</span> <span class="text-zinc-600">Purge terminal buffer.</span></div>
<div class="pl-0 flex gap-4"><span class="text-white font-bold w-32 shrink-0">exit</span> <span class="text-zinc-600">Terminate secure session.</span></div>
</div>
`,q=(p,m)=>{if(m.length===0)return p.join("  ");const d=p.map((o,r)=>Math.max(o.length,...m.map(u=>u[r].length))),y=p.map((o,r)=>o.padEnd(d[r])).join("  "),h=d.map(o=>"â”€".repeat(o)).join("  "),x=m.map(o=>o.map((r,u)=>r.padEnd(d[u])).join("  ")).join(`
`);return`${y}
${h}
${x}`},B=({projects:p,onUpdateProject:m})=>{const{user:d,logout:y}=H(),[h,x]=i.useState([]),[o,r]=i.useState(""),[u,N]=i.useState(!1),[b,P]=i.useState([]),[z,v]=i.useState(-1),k=i.useRef(null),w=i.useRef(null),t=i.useCallback((e,s="output",c=!1)=>{x(l=>[...l,{type:s,content:e,isHtml:c}])},[]);i.useEffect(()=>{t("opendev secure terminal [version 1.0.0]","system"),t("establishing neural handshake with nexus...","system"),t("ready. type `help` for protocols.","system")},[]),i.useEffect(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight),u||k.current?.focus()},[h,u]);const T=async e=>{const[s,...c]=e.trim().split(" ").filter(Boolean);if(s){switch(t(`> ${e}`,"input"),N(!0),await new Promise(l=>setTimeout(l,100)),s.toLowerCase()){case"help":t(_,"output",!0);break;case"clear":x([]);break;case"whoami":d?t(`Authorized: ${d.name} <${d.email}>`,"success"):t("No active authorization detected.","error");break;case"fleet":case"projects":if(p.length>0){const a=["NAME","FRAMEWORK","LAST MODIFIED","STATUS"],E=p.map(g=>[g.name,g.framework,new Date(g.deployments[0].timestamp).toLocaleDateString(),g.deployments[0].status]);t(n.jsx("pre",{className:"whitespace-pre text-zinc-400 mt-2 font-mono text-[12px]",children:q(a,E)}))}else t("Empty fleet registry.","output");break;case"launch":case"deploy":const l=c[0];if(!l){t("Usage: launch <node-id>","error");break}const f=p.find(a=>a.name.toLowerCase()===l.toLowerCase());if(!f){t(`Error: Registry entry "${l}" not found.`,"error");break}const S={id:`dpl_cli_${Date.now()}`,commit:"build(cli): protocol handshake sequence",branch:"main",timestamp:new Date().toISOString(),status:L.QUEUED,url:f.domains.find(a=>a.isPrimary)?.name||`https://${f.name}.opendev.app`},j={...f,deployments:[S,...f.deployments]};m(j),t(`queued. synching nexus nodes for ${f.name}...`,"system"),await new Promise(a=>setTimeout(a,1e3));for(const a of I)t(n.jsxs("div",{className:"flex gap-4",children:[n.jsx("span",{className:"text-zinc-800 tabular-nums",children:new Date().toLocaleTimeString([],{hour12:!1})}),n.jsx("span",{className:"text-zinc-500 font-bold uppercase text-[10px] w-12",children:a.level}),n.jsx("span",{className:"text-zinc-300",children:a.message})]}),"output"),await new Promise(E=>setTimeout(E,100+Math.random()*150));const $={...S,status:L.DEPLOYED};m({...j,deployments:[$,...j.deployments.slice(1)]}),t(`Deployment success. Access live node: ${$.url}`,"success");break;case"telemetry":case"logs":const D=c[0];if(!D){t("Usage: telemetry <node-id>","error");break}const C=p.find(a=>a.name.toLowerCase()===D.toLowerCase());if(!C){t(`Error: Registry entry "${D}" not found.`,"error");break}const R=C.deployments[0],O=R.status===L.ERROR?U:I;t(`Streaming telemetry for node: ${R.id}`,"system"),O.forEach(a=>{t(n.jsxs("div",{className:"flex gap-4",children:[n.jsx("span",{className:"text-zinc-800 tabular-nums",children:new Date().toLocaleTimeString([],{hour12:!1})}),n.jsx("span",{className:"text-zinc-500 font-bold uppercase text-[10px] w-12",children:a.level}),n.jsx("span",{className:"text-zinc-300",children:a.message})]}),a.level==="ERROR"?"error":"output")});break;case"exit":case"logout":t("terminating secure tunnel...","system"),await new Promise(a=>setTimeout(a,500)),y();break;default:t(`unknown command: ${s}. type 'help' for protocols.`,"error")}N(!1)}},A=e=>{if(e.key==="Enter"){if(e.preventDefault(),!o.trim()||u)return;const s=o.trim();P(c=>[s,...c]),v(-1),T(s),r("")}else if(e.key==="ArrowUp"){e.preventDefault();const s=Math.min(b.length-1,z+1);s>=0&&(v(s),r(b[s]))}else if(e.key==="ArrowDown"){e.preventDefault();const s=Math.max(-1,z-1);v(s),r(s>=0?b[s]:"")}else e.key==="l"&&e.ctrlKey&&(e.preventDefault(),x([]))},M=(e,s)=>{const c={input:"text-zinc-500",output:"text-zinc-300",error:"text-red-900",success:"text-white font-bold",system:"text-zinc-400 italic"},l="min-h-[24px] leading-relaxed";return e.isHtml?n.jsx("div",{className:`${l} ${c[e.type]}`,dangerouslySetInnerHTML:{__html:e.content}},s):n.jsx("div",{className:`${l} ${c[e.type]}`,children:e.content},s)};return n.jsxs("div",{ref:w,className:"bg-black font-mono text-[13px] p-10 h-[70vh] overflow-y-auto border border-zinc-900 group focus-within:border-white transition-all duration-700 selection:bg-white selection:text-black",onClick:()=>k.current?.focus(),children:[n.jsx("div",{className:"space-y-1 mb-6",children:h.map(M)}),u?n.jsxs("div",{className:"flex items-center gap-3 h-[24px]",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full animate-ping"}),n.jsx("span",{className:"text-[10px] font-bold text-zinc-700 uppercase tracking-widest",children:"Executing protocol sequence..."})]}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"text-white font-bold",children:[d?.name.split(" ")[0].toLowerCase()||"guest","@opendev:~$"]}),n.jsx("input",{ref:k,type:"text",value:o,onChange:e=>r(e.target.value),onKeyDown:A,className:"bg-transparent border-none text-white w-full focus:outline-none p-0 caret-white",autoFocus:!0,spellCheck:"false",autoComplete:"off","aria-label":"CLI Input"})]})]})};export{B as CLIPage};
