import{j as e,r as c,k as ee,m as Ie,f as Ye}from"./index-aA3emgWN.js";import{G as Ne,T as Y}from"./index-BjAxNs1s.js";const ke=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M12 5v14"}),e.jsx("path",{d:"M5 12h14"})]}),Ze=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Xe=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("circle",{cx:"12",cy:"12",r:"3"}),e.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Qe=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})}),et=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),tt=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M12 19V5M5 12l7-7 7 7"})}),nt=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),rt=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M15 4V2m0 14v-2m-7.5-10.5L6 4m9 1.5L16.5 4M3 21l18-18M9.5 13.5L4 19l5.5-1.5L15 2l-1.5 5.5Z"})}),st=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21 15 16 10 5 21"})]}),it=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),Pe=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),ot=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),at=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),te=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),e.jsx("polyline",{points:"13 2 13 9 20 9"})]}),Re=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),me=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),lt=t=>e.jsxs("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[e.jsx("path",{d:"M3.5 1.5C3.5 1.22386 3.72386 1 4 1H12C12.2761 1 12.5 1.22386 12.5 1.5V14.5C12.5 14.7761 12.2761 15 12 15H4C3.72386 15 3.5 14.7761 3.5 14.5V1.5Z",stroke:"currentColor",strokeLinejoin:"round"}),e.jsx("path",{d:"M5.5 12.5H10.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M5 4.5C5.83333 3.66667 8 3.5 8.5 4.5C9.5 6.5 11 5.5 11 7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]}),ce=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M21 12a9 9 0 1 1-6.219-8.56"})}),ct=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),dt=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("polyline",{points:"15 18 9 12 15 6"})}),Fe=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"})]}),ut=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"9",y1:"3",x2:"9",y2:"21"}),e.jsx("path",{d:"m15 15-3-3 3-3"})]}),ht=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"15",y1:"3",x2:"15",y2:"21"}),e.jsx("path",{d:"m9 9 3 3-3 3"})]}),pt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),e.jsx("path",{d:"M9 22v-4h6v4"}),e.jsx("path",{d:"M8 6h.01"}),e.jsx("path",{d:"M16 6h.01"}),e.jsx("path",{d:"M12 6h.01"}),e.jsx("path",{d:"M12 10h.01"}),e.jsx("path",{d:"M12 14h.01"}),e.jsx("path",{d:"M16 10h.01"}),e.jsx("path",{d:"M16 14h.01"}),e.jsx("path",{d:"M8 10h.01"}),e.jsx("path",{d:"M8 14h.01"})]}),ft=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),$e=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"})}),xt=t=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),we=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),mt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e.jsx("polyline",{points:"14 2 14 8 20 8"}),e.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),e.jsx("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),gt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),e.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),e.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]}),wt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),bt=t=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[e.jsx("path",{d:"M12 5a3 3 0 1 0-5.993.129 3 3 0 0 0 5.993-.13Z"}),e.jsx("path",{d:"M12 19a3 3 0 1 0 5.993-.129A3 3 0 0 0 12 19Z"}),e.jsx("path",{d:"M21 12a3 3 0 1 0-.129-5.993A3 3 0 0 0 21 12Z"}),e.jsx("path",{d:"M3 12a3 3 0 1 0 .129 5.993A3 3 0 0 0 3 12Z"}),e.jsx("path",{d:"M12 12a3 3 0 1 0-5.993-.129 3 3 0 0 0 5.993.13Z"}),e.jsx("path",{d:"M14.63 15.35a3 3 0 1 0-1.28-1.28"}),e.jsx("path",{d:"M6.1 6.1a3 3 0 1 0 5.8 2.22"}),e.jsx("path",{d:"M9.35 9.37a3 3 0 1 0 1.28 1.28"}),e.jsx("path",{d:"M14.65 14.63a3 3 0 1 0 2.22 5.8"}),e.jsx("path",{d:"M17.9 17.9a3 3 0 1 0-5.8-2.22"}),e.jsx("path",{d:"m9 14 3 3"}),e.jsx("path",{d:"M12 12 9.27 9.27"}),e.jsx("path",{d:"M14.73 9.27 12 12"}),e.jsx("path",{d:"m6 6 3 3"}),e.jsx("path",{d:"M18 6 15 9"})]});function vt({onNavigate:t,recentChats:n,onSelectChat:r,onDeleteSession:s,activeView:i,activeChatId:o,onToggle:d}){return e.jsxs("aside",{className:"w-64 bg-black border-r border-zinc-900 p-6 flex flex-col justify-between hidden md:flex selection:bg-white selection:text-black",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-white rounded-none flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-3 bg-black"})}),e.jsx("span",{className:"text-xl font-bold tracking-tighter text-white lowercase",children:"sub0."})]}),e.jsx("button",{onClick:d,className:"p-1.5 border border-zinc-900 hover:border-zinc-700 transition-colors rounded-none","aria-label":"Collapse sidebar",children:e.jsx(dt,{className:"h-4 w-4 text-zinc-500"})})]}),e.jsxs("button",{onClick:()=>t("new-chat"),className:"w-full flex items-center justify-center gap-3 px-4 py-2.5 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 rounded-none",children:[e.jsx(ke,{className:"h-4 w-4"}),"Materialize Node"]}),e.jsx("nav",{className:"mt-10 space-y-2",children:[{id:"all-chats",label:"Neural Archives",icon:Ze},{id:"settings",label:"Core Configuration",icon:Xe}].map(a=>e.jsxs("button",{onClick:()=>t(a.id),className:`w-full text-left flex items-center gap-3 px-4 py-2 text-[10px] font-bold uppercase tracking-[0.2em] transition-all border border-transparent ${i===a.id?"bg-zinc-900 border-zinc-800 text-white":"text-zinc-600 hover:text-zinc-300"}`,children:[e.jsx(a.icon,{className:"h-4 w-4"}),a.label]},a.id))}),n.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("p",{className:"px-4 text-[9px] font-bold text-zinc-700 uppercase tracking-[0.4em] mb-4",children:"Active Nodes"}),e.jsx("nav",{className:"space-y-1",children:n.slice(0,5).map(a=>e.jsxs("div",{className:"group relative px-2",children:[e.jsx("button",{onClick:()=>r(a.id),className:`w-full text-left flex items-center justify-between gap-3 px-3 py-2 text-[11px] font-medium text-zinc-500 truncate transition-all border border-transparent hover:border-zinc-900 ${a.id===o?"text-white bg-zinc-900/50":"hover:bg-zinc-950 hover:text-zinc-300"}`,children:e.jsx("span",{className:"truncate lowercase",children:a.title})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),window.confirm(`Are you sure you want to delete "${a.title}"?`)&&s(a.id)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 text-zinc-800 opacity-0 group-hover:opacity-100 hover:text-red-500 transition-all","aria-label":`Delete chat ${a.title}`,children:e.jsx(we,{className:"h-3.5 w-3.5"})})]},a.id))})]})]}),e.jsx("div",{className:"pt-6 border-t border-zinc-900",children:e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-[9px] font-bold text-zinc-700 uppercase tracking-widest",children:[e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Sovereign"}),e.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Audit"})]}),e.jsx("a",{href:"#",className:"text-zinc-700 hover:text-white transition-colors",children:e.jsx(Qe,{className:"h-4 w-4"})})]})})]})}const ae=[{id:"gemini-1.5-pro",name:"Gemini 1.5 Pro",provider:"Google",apiIdentifier:"gemini-1.5-pro"},{id:"gemini-1.5-flash",name:"Gemini 1.5 Flash",provider:"Google",apiIdentifier:"gemini-1.5-flash"},{id:"deepseek-coder-v2",name:"DeepSeek Coder V2",provider:"DeepSeek",apiIdentifier:"deepseek-coder"},{id:"openrouter-nous-hermes-2-mixtral",name:"Nous Hermes 2 (OpenRouter)",provider:"OpenRouter",apiIdentifier:"nousresearch/nous-hermes-2-mixtral-8x7b-dpo"},{id:"meta-codellama-70b",name:"CodeLlama 70B",provider:"Meta",apiIdentifier:"codellama/CodeLlama-70b-hf"},{id:"bigcode-starcoder",name:"StarCoder",provider:"BigCode",apiIdentifier:"bigcode/starcoder"},{id:"wizardlm-wizardcoder-python",name:"WizardCoder",provider:"WizardLM",apiIdentifier:"WizardLM/WizardCoder-Python-34B-V1.0"},{id:"mistral-ai-mistral-7b",name:"Mistral 7B",provider:"Mistral AI",apiIdentifier:"mistralai/Mistral-7B-v0.1"},{id:"openchat-openchat-3.5",name:"OpenChat 3.5",provider:"OpenChat",apiIdentifier:"openchat/openchat-3.5"},{id:"phind-codellama-v2",name:"Phind CodeLlama V2",provider:"Phind",apiIdentifier:"phind/Phind-CodeLlama-34B-v2"},{id:"replit-code-v1.5",name:"Replit Code V1.5",provider:"Replit",apiIdentifier:"replit/replit-code-v1-3b"},{id:"openai-gpt-4o",name:"GPT-4o",provider:"OpenAI",apiIdentifier:"gpt-4o"},{id:"openai-gpt-4-turbo",name:"GPT-4 Turbo",provider:"OpenAI",apiIdentifier:"gpt-4-turbo"},{id:"anthropic-claude-3-5-sonnet",name:"Claude 3.5 Sonnet",provider:"Anthropic",apiIdentifier:"claude-3-5-sonnet-20240620"},{id:"anthropic-claude-3-opus",name:"Claude 3 Opus",provider:"Anthropic",apiIdentifier:"claude-3-opus-20240229"},{id:"anthropic-claude-3-haiku",name:"Claude 3 Haiku",provider:"Anthropic",apiIdentifier:"claude-3-haiku-20240307"}],Be=ae.reduce((t,n)=>{const r=n.provider;return t[r]||(t[r]=[]),t[r].push(n),t},{}),jt=["Google","OpenAI","Anthropic","OpenRouter","DeepSeek","Meta","Mistral AI","BigCode","WizardLM","OpenChat","Phind","Replit"],yt=jt.filter(t=>Be[t]),Nt=({isOpen:t,onClose:n,anchorRef:r,selectedModelId:s,onModelSelect:i})=>{const o=c.useRef(null);if(c.useEffect(()=>{const a=l=>{t&&o.current&&!o.current.contains(l.target)&&r.current&&!r.current.contains(l.target)&&n()};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[t,n,r]),!t)return null;const d={position:"absolute",top:"calc(100% + 8px)",left:"0",zIndex:50,width:"320px"};return e.jsx("div",{ref:o,style:d,className:"bg-[#1C1C1C] border border-neutral-700 rounded-lg shadow-2xl text-white animate-fadeIn max-h-80 overflow-y-auto",children:e.jsx("div",{className:"p-2",children:yt.map(a=>e.jsxs("div",{children:[e.jsx("h3",{className:"px-2 pt-2 pb-1 text-xs font-semibold text-gray-400",children:a}),e.jsx("ul",{className:"space-y-1",children:Be[a].map(l=>e.jsx("li",{children:e.jsx("button",{onClick:()=>i(l.id),className:`w-full text-left px-2 py-1.5 text-sm rounded-md transition-colors ${s===l.id?"bg-white/10":"hover:bg-white/5"}`,children:l.name})},l.id))})]},a))})})},kt=`You are sub0, an elite AI development orchestrator. When generating code:

CRITICAL FORMATTING RULES:
- Your response MUST be valid JSON with this exact structure:
{
  "conversation": "Your conversational response here",
  "files": [
    {
      "path": "src/components/Button.tsx",
      "content": "// file content here",
      "action": "created"
    }
  ]
}

MODIFICATION GUIDELINES:
1. For NEW files: Use "action": "created"
2. For EXISTING files being changed: Use "action": "modified"  
3. For files to REMOVE: Use "action": "deleted" (content can be empty)
4. Always include the full file content, not just diffs
5. Do not include files that are not changed.
6. The 'content' value must be a single string with properly escaped newlines (\\n), tabs (\\t), and quotes (\\").
7. If there are no file changes, return an empty array for the "files" key.
`,St=t=>t.filter(n=>n.role==="user"||n.role==="sub0"&&n.content).map(n=>({role:n.role==="sub0"?"model":"user",parts:[{text:n.content}]}));async function*It(t,n,r,s){const i=s||"AIzaSyBgjTsiUmjPnCESnd4PMiGbdpGmeGClhIM",o=new Ne({apiKey:i}),d=[...St(n),{role:"user",parts:[{text:t}]}],a=await o.models.generateContentStream({model:r.apiIdentifier,contents:d,config:{systemInstruction:kt,responseMimeType:"application/json",responseSchema:{type:Y.OBJECT,properties:{conversation:{type:Y.STRING},files:{type:Y.ARRAY,items:{type:Y.OBJECT,properties:{path:{type:Y.STRING},content:{type:Y.STRING},action:{type:Y.STRING}},required:["path","action"]}}},required:["conversation","files"]}}});for await(const l of a)yield{text:l.text||""}}const Ct=t=>{switch(t){case"Google":return"AIzaSyBgjTsiUmjPnCESnd4PMiGbdpGmeGClhIM";case"OpenRouter":return"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";case"OpenAI":return;case"DeepSeek":return;default:return}},De=`You are TARS, an AI development assistant. Your response MUST be a single, valid JSON object and nothing else.
DO NOT wrap the JSON in markdown backticks like \`\`\`json.
DO NOT add any text before or after the JSON object.

The JSON object must have this exact structure:
{
  "conversation": "Your conversational response here. Keep it concise.",
  "files": [
    {
      "path": "src/components/Button.tsx",
      "content": "// The full, complete file content goes here.\\n// Use \\\\n for newlines and \\\\t for tabs.",
      "action": "created"
    }
  ]
}

MODIFICATION GUIDELINES:
1.  For NEW files, use "action": "created".
2.  For CHANGING existing files, use "action": "modified".
3.  For REMOVING files, use "action": "deleted". 'content' can be omitted.
4.  Always provide the FULL file content, not just diffs or partial code.
5.  Do not include files that are not changed.
6.  If no files are changed, "files" MUST be an empty array: [].`,Mt=t=>t.filter(n=>n.role==="user"||n.role==="sub0"&&n.content).map(n=>({role:n.role==="sub0"?"assistant":"user",content:n.content})),zt=(t,n)=>{let r=t;if(n&&n.length>0){const s={files:n.map(o=>({path:o.path,content:o.content}))},i=`

[Current Project Files]
\`\`\`json
${JSON.stringify(s,null,2)}
\`\`\``;r+=i}return r};async function*At(t,n,r,s){let i="";const o={"Content-Type":"application/json",Authorization:`Bearer ${s}`};switch(r.provider){case"DeepSeek":i="https://api.deepseek.com/v1";break;case"OpenAI":i="https://api.openai.com/v1";break;case"OpenRouter":i="https://openrouter.ai/api/v1",o["HTTP-Referer"]="https://opendev-labs.ai",o["X-Title"]="opendev-labs";break;default:throw new Error(`Unsupported OpenAI-compatible provider: ${r.provider}`)}const d=[{role:"system",content:De},...Mt(n),{role:"user",content:t}],a=await fetch(`${i}/chat/completions`,{method:"POST",headers:o,body:JSON.stringify({model:r.apiIdentifier,messages:d,stream:!0})});if(!a.ok){let b=a.statusText;try{const j=await a.json();b=j?.error?.message||b,console.error(`API Error from ${r.provider}:`,j)}catch{const L=await a.text();console.error(`API Error from ${r.provider}:`,L)}throw new Error(b)}if(!a.body)throw new Error("Response body is null");const l=a.body.getReader(),p=new TextDecoder;let w="";for(;;){const{done:b,value:j}=await l.read();if(b)break;w+=p.decode(j,{stream:!0});const L=w.split(`
`);w=L.pop()||"";for(const y of L)if(y.startsWith("data: ")){const V=y.substring(6).trim();if(V==="[DONE]")return;try{const S=JSON.parse(V).choices[0]?.delta?.content||"";S&&(yield{text:S})}catch(F){console.error("Error parsing stream data:",V,F)}}}}async function*Ot(t,n,r,s){const i=`${De}

**Task:**
${t}`,o=await fetch(`https://api-inference.huggingface.co/models/${r.apiIdentifier}`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:i})});if(!o.ok){let p=o.statusText;try{const w=await o.json();p=w?.error||p,console.error("Hugging Face API Error:",w)}catch{const b=await o.text();console.error("Hugging Face API Error:",b)}throw new Error(p)}const a=(await o.json())[0]?.generated_text;if(!a)throw new Error("Invalid response structure from Hugging Face.");const l=a.indexOf("{");if(l!==-1)yield{text:a.substring(l)};else{const p={conversation:`The model did not return the expected JSON format. Raw response:

${a}`,files:[]};yield{text:JSON.stringify(p)}}}async function*Tt(t,n,r,s,i){const o=ae.find(l=>l.id===s);if(!o){yield{text:JSON.stringify({conversation:`Error: Model configuration for "${s}" not found.`,files:[]})};return}const d=i||Ct(o.provider);if(!d){yield{text:JSON.stringify({conversation:`API key for ${o.provider} is missing. Please add it in the model selector or configure your environment.`,files:[]})};return}const a=zt(t,r);try{switch(o.provider){case"Google":yield*It(a,n,o,i);break;case"OpenAI":case"DeepSeek":case"OpenRouter":yield*At(a,n,o,d);break;case"Meta":case"BigCode":case"WizardLM":case"Mistral AI":case"OpenChat":case"Phind":case"Replit":yield*Ot(a,n,o,d);break;case"Anthropic":yield{text:JSON.stringify({conversation:"The Anthropic provider is not yet fully implemented.",files:[]})};break;default:const p={conversation:`The model provider '${o.provider}' is not yet implemented.`,files:[]};yield{text:JSON.stringify(p)}}}catch(l){console.error(`Error with ${o.provider} API:`,l);const p=l instanceof Error?l.message:"An unknown error occurred.";yield{text:JSON.stringify({conversation:`An error occurred with ${o.provider}: ${p}`,files:[]})}}}async function Et(t){const n="AIzaSyBgjTsiUmjPnCESnd4PMiGbdpGmeGClhIM";try{const i=((await new Ne({apiKey:n}).models.generateContent({model:"gemini-1.5-flash",contents:t,config:{systemInstruction:`You are an expert developer assistant. Based on the user's last request and the files that were generated, provide 3-4 short, actionable follow-up prompts. Return a JSON object with a single key "suggestions" which is an array of strings. Example: {"suggestions": ["Make it responsive", "Add a loading state"]}`,responseMimeType:"application/json",responseSchema:{type:Y.OBJECT,properties:{suggestions:{type:Y.ARRAY,items:{type:Y.STRING}}},required:["suggestions"]}}})).text||"").trim(),o=JSON.parse(i);return o.suggestions&&Array.isArray(o.suggestions)?o.suggestions.slice(0,4):[]}catch(r){return console.error("Error generating suggestions:",r),[]}}async function Lt(t,n){if(!n.trim())throw new Error("API key cannot be empty.");try{switch(t){case"Google":return await new Ne({apiKey:n}).models.generateContent({model:"gemini-1.5-flash",contents:"test"}),!0;case"OpenAI":case"DeepSeek":case"OpenRouter":{let r="";const s={Authorization:`Bearer ${n}`};t==="OpenAI"?r="https://api.openai.com/v1":t==="DeepSeek"?r="https://api.deepseek.com/v1":t==="OpenRouter"&&(r="https://openrouter.ai/api/v1");const i=await fetch(`${r}/models`,{headers:s});if(!i.ok){if(i.status===401)throw new Error("Authentication failed. The API key is invalid or has been revoked.");let o=`API request failed with status ${i.status}.`;try{o=(await i.json())?.error?.message||o}catch{}throw new Error(o)}return!0}case"Meta":case"BigCode":case"WizardLM":case"Mistral AI":case"OpenChat":case"Phind":case"Replit":{const r=await fetch("https://huggingface.co/api/whoami-v2",{headers:{Authorization:`Bearer ${n}`}});if(!r.ok)throw r.status===401?new Error("The Hugging Face token is invalid."):new Error(`Hugging Face API request failed with status ${r.status}.`);return!0}case"Anthropic":throw new Error("Validation for Anthropic is not yet implemented.");default:throw new Error(`API key validation is not implemented for the provider '${t}'.`)}}catch(r){throw r instanceof Error?r.message.includes("API key not valid")?new Error("The provided API key is invalid."):r:new Error("An unknown error occurred during validation.")}}const Pt=({isOpen:t,onClose:n,model:r,apiKeys:s,onApiKeySave:i})=>{const[o,d]=c.useState(""),[a,l]=c.useState(!1),[p,w]=c.useState(null);c.useEffect(()=>{r&&(d(s[r.provider]||""),w(null))},[t,r,s]),c.useEffect(()=>{const j=L=>{L.key==="Escape"&&n()};return t&&window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)}},[t,n]);const b=async()=>{if(r){l(!0),w(null);try{await Lt(r.provider,o),i(r.provider,o),n()}catch(j){w(j instanceof Error?j.message:"An unknown error occurred.")}finally{l(!1)}}};return!t||!r?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm","aria-modal":"true",role:"dialog",onClick:n,children:e.jsxs("div",{className:"bg-[#1C1C1C] border border-neutral-700 rounded-lg shadow-2xl w-full max-w-md p-6 m-4 text-white animate-fadeIn",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold",children:["API Key for ",r.provider]}),e.jsx("button",{onClick:n,className:"p-1 rounded-full hover:bg-white/10",disabled:a,children:e.jsx(et,{className:"w-5 h-5"})})]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["Please provide an API key to use ",r.name,". Your key will be stored locally in your browser."]}),e.jsxs("div",{className:"relative mb-2",children:[e.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{id:"api-key-input",type:"password",placeholder:`Enter your ${r.provider} API key...`,value:o,onChange:j=>{d(j.target.value),p&&w(null)},onKeyDown:j=>j.key==="Enter"&&!a&&b(),className:"w-full bg-neutral-800 border border-neutral-600 rounded-md pl-9 pr-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-white/50",autoFocus:!0,disabled:a})]}),p&&e.jsx("p",{className:"text-sm text-red-400 px-1",children:p}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium rounded-md hover:bg-white/10 transition-colors disabled:opacity-50",disabled:a,children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 text-sm font-medium bg-white text-black rounded-md hover:bg-gray-200 transition-colors w-28 flex items-center justify-center disabled:bg-gray-400",disabled:a,children:a?e.jsx(ce,{className:"h-5 w-5 animate-spin"}):"Save Key"})]})]})})};function We({onSendMessage:t,disabled:n,selectedModelId:r,apiKeys:s,onModelChange:i,onApiKeySave:o}){const[d,a]=c.useState(""),l=c.useRef(null),[p,w]=c.useState(!1),[b,j]=c.useState(!1),L=c.useRef(null);c.useEffect(()=>{const h=l.current;h&&(h.style.height="auto",h.style.height=`${h.scrollHeight}px`)},[d]);const y=h=>{h.preventDefault(),d.trim()&&!n&&(t(d),a(""))},V=h=>{i(h),w(!1),j(!0)},F=d.trim().length>0,S=ae.find(h=>h.id===r);return e.jsxs("form",{onSubmit:y,className:"w-full max-w-3xl mx-auto relative group",children:[e.jsxs("div",{className:"bg-zinc-950 border border-zinc-900 rounded-none px-6 py-4 flex flex-col justify-between transition-all duration-300 focus-within:border-orange-500/50 shadow-2xl",children:[e.jsx("textarea",{ref:l,value:d,onChange:h=>a(h.target.value),onKeyDown:h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),y(h))},placeholder:"What shall we materialize today?",className:"w-full bg-transparent text-zinc-200 text-base placeholder-zinc-700 resize-none focus:outline-none font-medium mb-4",rows:1,disabled:n,style:{maxHeight:"200px"}}),e.jsxs("div",{className:"flex items-center justify-between border-t border-zinc-900 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-zinc-600",children:[[{icon:st,label:"Visual Context"},{icon:nt,label:"Materialize"},{icon:it,label:"Node Templates"}].map((h,A)=>e.jsx("button",{type:"button",className:"hover:text-white transition-colors p-1.5 hover:bg-zinc-900","aria-label":h.label,title:h.label,children:e.jsx(h.icon,{className:"h-4 w-4"})},A)),e.jsx("div",{className:"h-4 border-l border-zinc-900 mx-1"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{ref:L,type:"button",className:"flex items-center gap-2 hover:text-white transition-colors text-[10px] font-bold uppercase tracking-widest px-3 py-1.5 hover:bg-zinc-900","aria-label":"Select model",onClick:()=>w(h=>!h),children:[e.jsx(bt,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"truncate max-w-[120px]",children:S?.name||"Select Node"})]}),e.jsx(Nt,{isOpen:p,onClose:()=>w(!1),anchorRef:L,selectedModelId:r,onModelSelect:V})]})]}),e.jsx("button",{type:"submit",disabled:n||!F,className:`h-9 w-9 flex items-center justify-center transition-all duration-300 rounded-none ${F?"bg-white text-black hover:bg-orange-500 hover:text-white":"bg-zinc-900 text-zinc-700 cursor-not-allowed"}`,"aria-label":"Send message",children:e.jsx(tt,{className:"h-5 w-5 transition-colors"})})]})]}),e.jsx(Pt,{isOpen:b,onClose:()=>j(!1),model:S||null,apiKeys:s,onApiKeySave:o})]})}function Ce({onSendMessage:t,isThinking:n,selectedModelId:r,apiKeys:s,onModelChange:i,onApiKeySave:o}){return e.jsx("div",{className:"flex flex-col h-screen w-full bg-black selection:bg-white selection:text-black",children:e.jsx("main",{className:"flex-grow flex flex-col items-center justify-center text-center px-6",children:e.jsxs("div",{className:"w-full max-w-4xl animate-in fade-in slide-in-from-bottom-8 duration-1000",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 text-[10px] font-bold text-zinc-500 mb-8 uppercase tracking-[0.4em]",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500 animate-pulse"}),"Quantum // Materialization Hub"]}),e.jsxs("h1",{className:"text-6xl md:text-8xl font-bold text-white mb-6 tracking-tighter leading-[0.85] lowercase",children:["what shall we",e.jsx("br",{}),e.jsx("span",{className:"text-zinc-600",children:"materialize?"})]}),e.jsx("p",{className:"text-zinc-500 text-lg md:text-xl font-medium mb-12 max-w-2xl mx-auto leading-relaxed",children:"architect, build, and deploy high-fidelity nodes across the sovereign mesh with zero-shot intelligence."}),e.jsx("div",{className:"mb-12",children:e.jsx(We,{onSendMessage:t,disabled:n,selectedModelId:r,apiKeys:s,onModelChange:i,onApiKeySave:o})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto",children:[{title:"SaaS Engine",desc:"Full-stack node with auth & state",icon:"âš¡"},{title:"Neural Dash",desc:"AI-centric monitoring surface",icon:"ðŸ§ "},{title:"Edge API",desc:"Native high-velocity protocol",icon:"ðŸŒ"}].map((d,a)=>e.jsxs("button",{onClick:()=>t(`Build a ${d.title}: ${d.desc}`),className:"group p-6 bg-zinc-950 border border-zinc-900 text-left hover:border-orange-500/50 transition-all duration-300 rounded-none relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-[1px] h-full bg-orange-500/0 group-hover:bg-orange-500/50 transition-all"}),e.jsx("div",{className:"text-2xl mb-4 opacity-50 group-hover:opacity-100 transition-opacity",children:d.icon}),e.jsx("h3",{className:"text-xs font-bold text-zinc-300 uppercase tracking-widest mb-2",children:d.title}),e.jsx("p",{className:"text-[10px] text-zinc-600 font-medium leading-relaxed uppercase",children:d.desc})]},a))})]})})})}function Rt({info:t}){const n=t.files.length,r=t.status==="generating"?`Applying ${n} change${n!==1?"s":""}`:`Applied ${n} change${n!==1?"s":""}`;return e.jsxs("div",{className:"mt-4 border border-white/10 rounded-lg p-3 bg-black/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(lt,{className:"w-4 h-4 text-gray-400"}),e.jsx("h3",{className:"text-sm font-semibold text-white",children:r})]}),e.jsx("ul",{className:"space-y-2",children:t.files.map((s,i)=>e.jsxs("li",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.action==="created"?e.jsx(ke,{className:"w-3.5 h-3.5 text-green-500 flex-shrink-0"}):s.action==="modified"?e.jsx(Re,{className:"w-3.5 h-3.5 text-yellow-500 flex-shrink-0"}):e.jsx(we,{className:"w-3.5 h-3.5 text-red-500 flex-shrink-0"}),e.jsx("span",{className:"font-mono",children:s.path})]}),s.status==="generating"?e.jsx(ce,{className:"w-3.5 h-3.5 animate-spin text-gray-500"}):e.jsx(ct,{className:"w-3.5 h-3.5 text-green-500"})]},i))})]})}const Me=({message:t})=>{const{role:n,content:r,generationInfo:s}=t,i=n==="user",d=n==="sub0"&&s?.status==="generating"&&s?.files.length===0&&!r;return e.jsxs("div",{className:`flex items-start gap-6 w-full max-w-5xl mx-auto ${i?"flex-row-reverse":""} mb-12 animate-in fade-in slide-in-from-bottom-4 duration-500`,children:[e.jsx("div",{className:`flex-shrink-0 h-10 w-10 flex items-center justify-center rounded-none border ${i?"bg-white border-white text-black":"bg-black border-zinc-900 shadow-2xl"}`,children:i?e.jsx(Pe,{className:"h-5 w-5"}):e.jsx(ot,{className:"h-5 w-5 text-orange-500"})}),e.jsx("div",{className:`flex flex-col w-full ${i?"items-end":"items-start"}`,children:e.jsxs("div",{className:`w-full max-w-3xl ${i?"text-right":"text-left"}`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2 opacity-30",children:e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.3em] text-zinc-500",children:i?"Materializer // User":"Architect // sub0"})}),e.jsxs("div",{className:`px-0 py-2 ${i?"text-zinc-200":"text-white"}`,children:[d?e.jsxs("div",{className:"flex items-center gap-4 py-4 bg-zinc-950/50 border border-zinc-900 px-6",children:[e.jsx(ce,{className:"h-4 w-4 animate-spin text-orange-500"}),e.jsx("p",{className:"text-[10px] font-bold tracking-[0.4em] text-zinc-500 uppercase",children:"Synchronizing Neural Mesh..."})]}):e.jsx("div",{className:`text-[15px] leading-relaxed font-medium ${i?"bg-zinc-900/30 p-6 border border-zinc-800":""}`,children:r}),t.generationInfo&&t.generationInfo.files.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 opacity-50",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-emerald-500"}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.3em] text-zinc-500",children:"Nodes Materializing"})]}),e.jsx("div",{className:"bg-zinc-950 border border-zinc-900 p-6",children:e.jsx(Rt,{info:t.generationInfo})})]})]})]})})]})};function Ft({suggestions:t,onSendMessage:n}){return!t||t.length===0?null:e.jsx("div",{className:"w-full max-w-3xl mx-auto pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1.5",children:e.jsx(rt,{className:"h-4 w-4 text-gray-400"})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.map(r=>e.jsx("button",{onClick:()=>n(r),className:"bg-[#1C1C1C] border border-white/10 text-gray-400 text-sm px-3 py-1.5 rounded-lg hover:bg-[#2A2A2A] hover:text-gray-200 transition-colors duration-200",children:r},r))})]})})}function $t({messages:t,isThinking:n,onSendMessage:r,suggestions:s,selectedModelId:i,apiKeys:o,onModelChange:d,onApiKeySave:a}){const l=c.useRef(null);return c.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[t]),e.jsxs("div",{className:"flex flex-col h-full bg-[#0A0A0A] relative",children:[e.jsxs("div",{ref:l,className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-8 space-y-6",children:[t.map(p=>e.jsx(Me,{message:p},p.id)),n&&t.length>0&&t[t.length-1].role==="user"&&e.jsx(Me,{message:{id:Date.now(),role:"sub0",content:"Thinking..."}})]}),e.jsxs("div",{className:"px-4 md:px-6 lg:px-8 pb-4 bg-gradient-to-t from-[#0A0A0A] to-transparent",children:[!n&&s&&s.length>0&&e.jsx(Ft,{suggestions:s,onSendMessage:r}),e.jsx(We,{onSendMessage:r,disabled:n,selectedModelId:i,apiKeys:o,onModelChange:d,onApiKeySave:a})]})]})}function ze(t,n){(n==null||n>t.length)&&(n=t.length);for(var r=0,s=Array(n);r<n;r++)s[r]=t[r];return s}function Bt(t){if(Array.isArray(t))return t}function Dt(t,n,r){return(n=Kt(n))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Wt(t,n){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var s,i,o,d,a=[],l=!0,p=!1;try{if(o=(r=r.call(t)).next,n!==0)for(;!(l=(s=o.call(r)).done)&&(a.push(s.value),a.length!==n);l=!0);}catch(w){p=!0,i=w}finally{try{if(!l&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(p)throw i}}return a}}function Vt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ae(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Oe(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Ae(Object(r),!0).forEach(function(s){Dt(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Gt(t,n){if(t==null)return{};var r,s,i=Ut(t,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],n.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function Ut(t,n){if(t==null)return{};var r={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(n.indexOf(s)!==-1)continue;r[s]=t[s]}return r}function Ht(t,n){return Bt(t)||Wt(t,n)||qt(t,n)||Vt()}function Jt(t,n){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var s=r.call(t,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Kt(t){var n=Jt(t,"string");return typeof n=="symbol"?n:n+""}function qt(t,n){if(t){if(typeof t=="string")return ze(t,n);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(t,n):void 0}}function _t(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function Te(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,s)}return r}function Ee(t){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Te(Object(r),!0).forEach(function(s){_t(t,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(r,s))})}return t}function Yt(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(i,o){return o(i)},s)}}function ie(t){return function n(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var d=arguments.length,a=new Array(d),l=0;l<d;l++)a[l]=arguments[l];return n.apply(r,[].concat(i,a))}}}function ge(t){return{}.toString.call(t).includes("Object")}function Zt(t){return!Object.keys(t).length}function le(t){return typeof t=="function"}function Xt(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function Qt(t,n){return ge(n)||X("changeType"),Object.keys(n).some(function(r){return!Xt(t,r)})&&X("changeField"),n}function en(t){le(t)||X("selectorType")}function tn(t){le(t)||ge(t)||X("handlerType"),ge(t)&&Object.values(t).some(function(n){return!le(n)})&&X("handlersType")}function nn(t){t||X("initialIsRequired"),ge(t)||X("initialType"),Zt(t)&&X("initialContent")}function rn(t,n){throw new Error(t[n]||t.default)}var sn={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},X=ie(rn)(sn),fe={changes:Qt,selector:en,handler:tn,initial:nn};function on(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};fe.initial(t),fe.handler(n);var r={current:t},s=ie(cn)(r,n),i=ie(ln)(r),o=ie(fe.changes)(t),d=ie(an)(r);function a(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(w){return w};return fe.selector(p),p(r.current)}function l(p){Yt(s,i,o,d)(p)}return[a,l]}function an(t,n){return le(n)?n(t.current):n}function ln(t,n){return t.current=Ee(Ee({},t.current),n),n}function cn(t,n,r){return le(n)?n(t.current):Object.keys(r).forEach(function(s){var i;return(i=n[s])===null||i===void 0?void 0:i.call(n,t.current[s])}),r}var dn={create:on},un={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function hn(t){return function n(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var d=arguments.length,a=new Array(d),l=0;l<d;l++)a[l]=arguments[l];return n.apply(r,[].concat(i,a))}}}function pn(t){return{}.toString.call(t).includes("Object")}function fn(t){return t||Le("configIsRequired"),pn(t)||Le("configType"),t.urls?(xn(),{paths:{vs:t.urls.monacoBase}}):t}function xn(){console.warn(Ve.deprecation)}function mn(t,n){throw new Error(t[n]||t.default)}var Ve={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Le=hn(mn)(Ve),gn={config:fn},wn=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return function(i){return r.reduceRight(function(o,d){return d(o)},i)}};function Ge(t,n){return Object.keys(n).forEach(function(r){n[r]instanceof Object&&t[r]&&Object.assign(n[r],Ge(t[r],n[r]))}),Oe(Oe({},t),n)}var bn={type:"cancelation",msg:"operation is manually canceled"};function ve(t){var n=!1,r=new Promise(function(s,i){t.then(function(o){return n?i(bn):s(o)}),t.catch(i)});return r.cancel=function(){return n=!0},r}var vn=["monaco"],jn=dn.create({config:un,isInitialized:!1,resolve:null,reject:null,monaco:null}),Ue=Ht(jn,2),de=Ue[0],be=Ue[1];function yn(t){var n=gn.config(t),r=n.monaco,s=Gt(n,vn);be(function(i){return{config:Ge(i.config,s),monaco:r}})}function Nn(){var t=de(function(n){var r=n.monaco,s=n.isInitialized,i=n.resolve;return{monaco:r,isInitialized:s,resolve:i}});if(!t.isInitialized){if(be({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),ve(je);if(window.monaco&&window.monaco.editor)return He(window.monaco),t.resolve(window.monaco),ve(je);wn(kn,In)(Cn)}return ve(je)}function kn(t){return document.body.appendChild(t)}function Sn(t){var n=document.createElement("script");return t&&(n.src=t),n}function In(t){var n=de(function(s){var i=s.config,o=s.reject;return{config:i,reject:o}}),r=Sn("".concat(n.config.paths.vs,"/loader.js"));return r.onload=function(){return t()},r.onerror=n.reject,r}function Cn(){var t=de(function(r){var s=r.config,i=r.resolve,o=r.reject;return{config:s,resolve:i,reject:o}}),n=window.require;n.config(t.config),n(["vs/editor/editor.main"],function(r){var s=r.m||r;He(s),t.resolve(s)},function(r){t.reject(r)})}function He(t){de().monaco||be({monaco:t})}function Mn(){return de(function(t){var n=t.monaco;return n})}var je=new Promise(function(t,n){return be({resolve:t,reject:n})}),Se={config:yn,init:Nn,__getMonacoInstance:Mn},zn={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ye=zn,An={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},On=An;function Tn({children:t}){return ee.createElement("div",{style:On.container},t)}var En=Tn,Ln=En;function Pn({width:t,height:n,isEditorReady:r,loading:s,_ref:i,className:o,wrapperProps:d}){return ee.createElement("section",{style:{...ye.wrapper,width:t,height:n},...d},!r&&ee.createElement(Ln,null,s),ee.createElement("div",{ref:i,style:{...ye.fullWidth,...!r&&ye.hide},className:o}))}var Rn=Pn,Je=c.memo(Rn);function Fn(t){c.useEffect(t,[])}var Ke=Fn;function $n(t,n,r=!0){let s=c.useRef(!0);c.useEffect(s.current||!r?()=>{s.current=!1}:t,n)}var q=$n;function oe(){}function Q(t,n,r,s){return Bn(t,s)||Dn(t,n,r,s)}function Bn(t,n){return t.editor.getModel(qe(t,n))}function Dn(t,n,r,s){return t.editor.createModel(n,r,s?qe(t,s):void 0)}function qe(t,n){return t.Uri.parse(n)}function Wn({original:t,modified:n,language:r,originalLanguage:s,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:d,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:p="light",loading:w="Loading...",options:b={},height:j="100%",width:L="100%",className:y,wrapperProps:V={},beforeMount:F=oe,onMount:S=oe}){let[h,A]=c.useState(!1),[N,g]=c.useState(!0),T=c.useRef(null),E=c.useRef(null),J=c.useRef(null),$=c.useRef(S),k=c.useRef(F),B=c.useRef(!1);Ke(()=>{let x=Se.init();return x.then(m=>(E.current=m)&&g(!1)).catch(m=>m?.type!=="cancelation"&&console.error("Monaco initialization: error:",m)),()=>T.current?f():x.cancel()}),q(()=>{if(T.current&&E.current){let x=T.current.getOriginalEditor(),m=Q(E.current,t||"",s||r||"text",o||"");m!==x.getModel()&&x.setModel(m)}},[o],h),q(()=>{if(T.current&&E.current){let x=T.current.getModifiedEditor(),m=Q(E.current,n||"",i||r||"text",d||"");m!==x.getModel()&&x.setModel(m)}},[d],h),q(()=>{let x=T.current.getModifiedEditor();x.getOption(E.current.editor.EditorOption.readOnly)?x.setValue(n||""):n!==x.getValue()&&(x.executeEdits("",[{range:x.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),x.pushUndoStop())},[n],h),q(()=>{T.current?.getModel()?.original.setValue(t||"")},[t],h),q(()=>{let{original:x,modified:m}=T.current.getModel();E.current.editor.setModelLanguage(x,s||r||"text"),E.current.editor.setModelLanguage(m,i||r||"text")},[r,s,i],h),q(()=>{E.current?.editor.setTheme(p)},[p],h),q(()=>{T.current?.updateOptions(b)},[b],h);let K=c.useCallback(()=>{if(!E.current)return;k.current(E.current);let x=Q(E.current,t||"",s||r||"text",o||""),m=Q(E.current,n||"",i||r||"text",d||"");T.current?.setModel({original:x,modified:m})},[r,n,i,t,s,o,d]),u=c.useCallback(()=>{!B.current&&J.current&&(T.current=E.current.editor.createDiffEditor(J.current,{automaticLayout:!0,...b}),K(),E.current?.editor.setTheme(p),A(!0),B.current=!0)},[b,p,K]);c.useEffect(()=>{h&&$.current(T.current,E.current)},[h]),c.useEffect(()=>{!N&&!h&&u()},[N,h,u]);function f(){let x=T.current?.getModel();a||x?.original?.dispose(),l||x?.modified?.dispose(),T.current?.dispose()}return ee.createElement(Je,{width:L,height:j,isEditorReady:h,loading:w,_ref:J,className:y,wrapperProps:V})}var Vn=Wn;c.memo(Vn);function Gn(t){let n=c.useRef();return c.useEffect(()=>{n.current=t},[t]),n.current}var Un=Gn,xe=new Map;function Hn({defaultValue:t,defaultLanguage:n,defaultPath:r,value:s,language:i,path:o,theme:d="light",line:a,loading:l="Loading...",options:p={},overrideServices:w={},saveViewState:b=!0,keepCurrentModel:j=!1,width:L="100%",height:y="100%",className:V,wrapperProps:F={},beforeMount:S=oe,onMount:h=oe,onChange:A,onValidate:N=oe}){let[g,T]=c.useState(!1),[E,J]=c.useState(!0),$=c.useRef(null),k=c.useRef(null),B=c.useRef(null),K=c.useRef(h),u=c.useRef(S),f=c.useRef(),x=c.useRef(s),m=Un(o),D=c.useRef(!1),H=c.useRef(!1);Ke(()=>{let M=Se.init();return M.then(W=>($.current=W)&&J(!1)).catch(W=>W?.type!=="cancelation"&&console.error("Monaco initialization: error:",W)),()=>k.current?G():M.cancel()}),q(()=>{let M=Q($.current,t||s||"",n||i||"",o||r||"");M!==k.current?.getModel()&&(b&&xe.set(m,k.current?.saveViewState()),k.current?.setModel(M),b&&k.current?.restoreViewState(xe.get(o)))},[o],g),q(()=>{k.current?.updateOptions(p)},[p],g),q(()=>{!k.current||s===void 0||(k.current.getOption($.current.editor.EditorOption.readOnly)?k.current.setValue(s):s!==k.current.getValue()&&(H.current=!0,k.current.executeEdits("",[{range:k.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),k.current.pushUndoStop(),H.current=!1))},[s],g),q(()=>{let M=k.current?.getModel();M&&i&&$.current?.editor.setModelLanguage(M,i)},[i],g),q(()=>{a!==void 0&&k.current?.revealLine(a)},[a],g),q(()=>{$.current?.editor.setTheme(d)},[d],g);let C=c.useCallback(()=>{if(!(!B.current||!$.current)&&!D.current){u.current($.current);let M=o||r,W=Q($.current,s||t||"",n||i||"",M||"");k.current=$.current?.editor.create(B.current,{model:W,automaticLayout:!0,...p},w),b&&k.current.restoreViewState(xe.get(M)),$.current.editor.setTheme(d),a!==void 0&&k.current.revealLine(a),T(!0),D.current=!0}},[t,n,r,s,i,o,p,w,b,d,a]);c.useEffect(()=>{g&&K.current(k.current,$.current)},[g]),c.useEffect(()=>{!E&&!g&&C()},[E,g,C]),x.current=s,c.useEffect(()=>{g&&A&&(f.current?.dispose(),f.current=k.current?.onDidChangeModelContent(M=>{H.current||A(k.current.getValue(),M)}))},[g,A]),c.useEffect(()=>{if(g){let M=$.current.editor.onDidChangeMarkers(W=>{let P=k.current.getModel()?.uri;if(P&&W.find(_=>_.path===P.path)){let _=$.current.editor.getModelMarkers({resource:P});N?.(_)}});return()=>{M?.dispose()}}return()=>{}},[g,N]);function G(){f.current?.dispose(),j?b&&xe.set(o,k.current.saveViewState()):k.current.getModel()?.dispose(),k.current.dispose()}return ee.createElement(Je,{width:L,height:y,isEditorReady:g,loading:l,_ref:B,className:V,wrapperProps:F})}var Jn=Hn,Kn=c.memo(Jn),qn=Kn;Se.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.49.0/min/vs"}});const _n=t=>{const n={};return t.forEach(r=>{const s=r.path.split("/");let i=n;s.forEach((o,d)=>{d===s.length-1?i[o]=r:(i[o]=i[o]||{},i=i[o])})}),n},_e=({tree:t,onSelectFile:n,activeFile:r,generationStatusMap:s,onAddFileOrFolder:i,onDeleteFileOrFolder:o,onRenameFileOrFolder:d,level:a=0,parentPath:l=""})=>{const[p,w]=c.useState(null),[b,j]=c.useState(null),L=c.useRef(null);c.useEffect(()=>{(p||b)&&(L.current?.focus(),L.current?.select())},[p,b]);const y=(S,h,A)=>{S.preventDefault();const N=S.currentTarget.elements.namedItem("name").value,g=h.split("/").pop()||"";if(N&&N!==g){const T=[...h.split("/").slice(0,-1),N].join("/");d(h,T,A)}w(null)},V=S=>{S.preventDefault();const h=S.currentTarget.elements.namedItem("name").value;if(h&&b){const A=l?`${l}/${h}`:h;i(A,b)}j(null)},F=({defaultValue:S,onSubmit:h,onBlur:A,icon:N})=>e.jsxs("form",{onSubmit:h,className:"w-full text-left text-sm flex items-center gap-2 px-2 py-1 rounded-md bg-white/10",style:{paddingLeft:`${a*1.25+.5}rem`},children:[N,e.jsx("input",{ref:L,type:"text",name:"name",defaultValue:S,onBlur:A,className:"bg-transparent text-white w-full focus:outline-none",autoComplete:"off"})]});return e.jsxs("ul",{className:"space-y-0.5",children:[Object.entries(t).filter(([S])=>S!==".keep").sort(([S,h],[A,N])=>{const g=!!h.path,T=!!N.path;return g===T?S.localeCompare(A):g?1:-1}).map(([S,h])=>{const A=!!h.path,N=l?`${l}/${S}`:S;return p===N?e.jsx("li",{children:e.jsx(F,{defaultValue:S,onSubmit:g=>y(g,N,A),onBlur:()=>w(null),icon:A?e.jsx(te,{className:"h-4 w-4 flex-shrink-0"}):e.jsx(me,{className:"h-4 w-4 flex-shrink-0"})})},N):e.jsxs("li",{children:[e.jsxs("div",{className:"group relative",children:[e.jsxs("button",{onClick:()=>A&&n(h),style:{paddingLeft:`${a*1.25}rem`},className:`w-full text-left text-sm flex items-center justify-between gap-2 px-2 py-1 rounded-md ${r?.path===N?"bg-white/10 text-white":"text-gray-400 hover:bg-white/5 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 truncate",children:[A?e.jsx(te,{className:"h-4 w-4 flex-shrink-0"}):e.jsx(me,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:S})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:s.get(N)?.status==="generating"&&e.jsx(ce,{className:"w-3.5 h-3.5 animate-spin text-gray-500"})})]}),e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 right-1 flex items-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-md",children:[e.jsx("button",{onClick:()=>w(N),className:"p-1 text-gray-400 hover:text-white",title:"Rename",children:e.jsx(Re,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>o(N,A),className:"p-1 text-gray-400 hover:text-red-500",title:"Delete",children:e.jsx(we,{className:"w-3.5 h-3.5"})})]})]}),!A&&e.jsx(_e,{tree:h,onSelectFile:n,activeFile:r,generationStatusMap:s,onAddFileOrFolder:i,onDeleteFileOrFolder:o,onRenameFileOrFolder:d,level:a+1,parentPath:N})]},N)}),b&&e.jsx("li",{children:e.jsx(F,{onSubmit:V,onBlur:()=>j(null),icon:b==="file"?e.jsx(te,{className:"h-4 w-4 flex-shrink-0"}):e.jsx(me,{className:"h-4 w-4 flex-shrink-0"})})})]})},Yn=({files:t})=>{const[n,r]=c.useState(!!window.Babel),[s,i]=c.useState('<html><body style="background-color: #0A0A0A;"></body></html>');return c.useEffect(()=>{if(n)return;const o=setInterval(()=>{window.Babel&&(r(!0),clearInterval(o))},100);return()=>clearInterval(o)},[n]),c.useEffect(()=>{const o=(l,p)=>`<html><body style="margin: 0; background-color: #0A0A0A; color: #9ca3af; font-family: sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; text-align: center;"><div style="display: flex; flex-direction: column; align-items: center; gap: 8px;"><div>${l}</div><div style="font-size: 0.8rem; color: #6b7280;">${p}</div></div></body></html>`;if(!n){i(o("Loading Preview Engine","Waiting for Babel transpiler..."));return}const d=t.find(l=>l.path==="index.html");if(d){i(d.content);return}const a=t.find(l=>/index\.(tsx|jsx|ts|js)$/i.test(l.path));if(!a){i(o("Preview Error","An `index.html` or `index.tsx` file must exist to render a preview."));return}try{const l=y=>y.replace(/[^a-zA-Z0-9]/g,"_"),p=new Map(t.map(y=>[y.path,y.content])),w={imports:{react:"https://esm.sh/react@18.2.0","react-dom/client":"https://esm.sh/react-dom@18.2.0/client"}};let b="";for(const y of t)if(/\.(tsx|jsx|ts|js)$/.test(y.path)){const V=l(y.path);y.path===a.path&&(b=V);let F=y.content;const S=/import\s+(?:[\w\s{},*]+ as \w+\s*)?([\w\s{},*]+)?\s+from\s+['"](\.\.?\/.*?)['"]/g;F=F.replace(S,(A,N,g)=>{const T=y.path.split("/");T.pop();const E=g.split("/");for(const B of E)B!=="."&&(B===".."?T.length>0&&T.pop():T.push(B));const J=T.join("/"),$=[".ts",".tsx",".js",".jsx","/index.ts","/index.tsx","/index.js","/index.jsx"];let k=null;if(p.has(J))k=J;else for(const B of $){const K=J+B;if(p.has(K)){k=K;break}}return k?A.replace(g,l(k)):A});const h=window.Babel.transform(F,{presets:["react","typescript"],filename:y.path}).code;w.imports[V]=`data:text/javascript,${encodeURIComponent(h)}`}const j=`
              document.body.innerHTML = \`<div style="background-color: #0A0A0A; color: #e5e7eb; font-family: Inter, sans-serif; height: 100vh; display: flex; align-items: center; justify-content: center; padding: 2rem; box-sizing: border-box;">
                <div style="border: 1px solid #27272A; background-color: #171717; padding: 1.5rem; border-radius: 0.5rem; max-width: 80%;">
                  <h3 style="color: #fca5a5; font-size: 1.125rem; margin: 0 0 0.75rem 0; font-weight: 600;">Preview Runtime Error</h3>
                  <pre style="background-color: #27272A; color: #d1d5db; padding: 1rem; border-radius: 0.25rem; white-space: pre-wrap; word-break: break-all; font-family: 'JetBrains Mono', monospace; font-size: 0.875rem;">\${error.message}</pre>
                </div>
              </div>\`;
              console.error("Preview Error:", error);
            `,L=`
                <!DOCTYPE html>
                <html lang="en">
                <head>
                    <meta charset="UTF-8" />
                    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                    <title>Preview</title>
                    <script src="https://cdn.tailwindcss.com"><\/script>
                    <script async src="https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.js"><\/script>
                    <link rel="preconnect" href="https://fonts.googleapis.com">
                    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
                    <style> body { font-family: 'Inter', sans-serif; background-color: #fff; } </style>
                </head>
                <body>
                    <div id="root"></div>
                    <script type="importmap">
                        ${JSON.stringify(w)}
                    <\/script>
                    <script type="module">
                        window.onerror = function(message, source, lineno, colno, error) {
                           ${j}
                           return true;
                        };
                        try {
                            await import('${b}');
                        } catch (error) {
                           ${j}
                        }
                    <\/script>
                </body>
                </html>
            `;i(L)}catch(l){console.error("Error creating preview:",l);const p=l.message.replace(/</g,"&lt;").replace(/>/g,"&gt;");i(`<html><body style="margin: 0; background-color: #0A0A0A; color: #fca5a5; font-family: 'JetBrains Mono', monospace; padding: 1rem; font-size: 0.9rem; white-space: pre-wrap;">Failed to transpile code for preview:

${p}</body></html>`)}},[t,n]),e.jsx("iframe",{srcDoc:s,title:"Preview",sandbox:"allow-scripts allow-same-origin",className:"w-full h-full bg-white"})};function Zn({session:t,setActiveFile:n,onFileContentChange:r,generationInfo:s,onAddFileOrFolder:i,onDeleteFileOrFolder:o,onRenameFileOrFolder:d,activeTab:a}){const{fileTree:l,activeFile:p}=t,[w,b]=c.useState(null),[j,L]=c.useState(!0),y=c.useRef(null);c.useEffect(()=>{w&&(y.current?.focus(),y.current?.select())},[w]);const V=(N,g)=>{g.languages.typescript.typescriptDefaults.setCompilerOptions({target:g.languages.typescript.ScriptTarget.ESNext,allowNonTsExtensions:!0,moduleResolution:g.languages.typescript.ModuleResolutionKind.NodeJs,module:g.languages.typescript.ModuleKind.ESNext,noEmit:!0,jsx:g.languages.typescript.JsxEmit.ReactJSX,reactNamespace:"React",typeRoots:["file:///node_modules/@types"]}),(async()=>{try{const[J,$,k]=await Promise.all([fetch("https://unpkg.com/@types/react@18/index.d.ts").then(B=>B.text()),fetch("https://unpkg.com/@types/react@18/global.d.ts").then(B=>B.text()),fetch("https://unpkg.com/@types/react-dom@18/index.d.ts").then(B=>B.text())]);g.languages.typescript.typescriptDefaults.addExtraLib(J,"file:///node_modules/@types/react/index.d.ts"),g.languages.typescript.typescriptDefaults.addExtraLib($,"file:///node_modules/@types/react/global.d.ts"),g.languages.typescript.typescriptDefaults.addExtraLib(k,"file:///node_modules/@types/react-dom/index.d.ts"),console.log("Monaco TypeScript environment configured for React.")}catch(E){console.error("Could not fetch React type definitions for Monaco:",E)}})()},F=c.useMemo(()=>_n(l),[l]),S=c.useMemo(()=>{const N=new Map;return s&&s.files.forEach(g=>N.set(g.path,g)),N},[s]),h=N=>{N.preventDefault();const g=N.currentTarget.elements.namedItem("name").value;g&&w&&i(g,w),b(null)},A=e.jsxs("div",{className:"flex items-center justify-center h-full text-neutral-600 gap-2",children:[e.jsx(ce,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Loading Editor..."})]});return e.jsx("div",{className:"flex flex-col h-full bg-[#0A0A0A]",children:a==="code"?e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[j&&e.jsxs("aside",{className:"w-56 bg-zinc-950 p-4 overflow-y-auto border-r border-zinc-900",children:[e.jsxs("header",{className:"flex items-center justify-between pb-4 border-b border-zinc-900 mb-4",children:[e.jsx("h3",{className:"text-[9px] font-bold text-zinc-600 uppercase tracking-[0.3em]",children:"Node Files"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>b("folder"),className:"p-1.5 hover:bg-zinc-900 text-zinc-600 hover:text-white transition-colors",title:"New Folder",children:e.jsx(gt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b("file"),className:"p-1.5 hover:bg-zinc-900 text-zinc-600 hover:text-white transition-colors",title:"New File",children:e.jsx(mt,{className:"w-4 h-4"})})]})]}),w&&e.jsxs("form",{onSubmit:h,className:"w-full text-left text-sm flex items-center gap-2 px-2 py-1.5 bg-zinc-900 border border-zinc-800 mb-2",children:[w==="file"?e.jsx(te,{className:"h-4 w-4 text-zinc-500"}):e.jsx(me,{className:"h-4 w-4 text-zinc-500"}),e.jsx("input",{ref:y,type:"text",name:"name",onBlur:()=>b(null),className:"bg-transparent text-white text-xs w-full focus:outline-none placeholder-zinc-700",autoComplete:"off",placeholder:"Name..."})]}),Object.keys(F).length>0||w?e.jsx(_e,{tree:F,onSelectFile:n,activeFile:p,generationStatusMap:S,onAddFileOrFolder:i,onDeleteFileOrFolder:o,onRenameFileOrFolder:d}):e.jsx("p",{className:"text-[9px] font-bold text-zinc-800 uppercase tracking-widest text-center mt-10",children:"Neural void"})]}),e.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[!j&&e.jsx("button",{onClick:()=>L(!0),className:"absolute top-4 left-4 z-10 p-2 bg-zinc-950 border border-zinc-900 hover:border-zinc-700 transition-colors",title:"Show File Manager",children:e.jsx(Fe,{className:"w-4 h-4 text-zinc-500"})}),p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-shrink-0 bg-black px-6 py-3 flex items-center justify-between border-b border-zinc-900",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"h-3.5 w-3.5 text-zinc-600"}),e.jsx("span",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:p.path})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-orange-500/50"}),e.jsx("span",{className:"text-[9px] font-bold text-zinc-600 uppercase tracking-[0.2em]",children:"Materializing..."})]})]}),e.jsx("div",{className:"flex-1 relative",children:e.jsx(qn,{path:p.path,value:p.content,onChange:N=>r(p.path,N||""),theme:"vs-dark",loading:A,onMount:V,options:{minimap:{enabled:!1},fontSize:13,fontFamily:"'JetBrains Mono', monospace",wordWrap:"on",lineNumbers:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,insertSpaces:!0,padding:{top:20,bottom:20}}})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-800",children:[e.jsx("div",{className:"w-12 h-12 bg-zinc-950 border border-zinc-900 flex items-center justify-center mb-6",children:e.jsx(te,{className:"h-6 w-6 opacity-20"})}),e.jsx("p",{className:"text-[10px] font-bold uppercase tracking-[0.4em]",children:"Select Node Segment"}),e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-[0.2em] mt-2 opacity-50",children:"Or ask the Architect to materialize one"})]})]})]}):e.jsx("div",{className:"flex-1 bg-white",children:e.jsx(Yn,{files:l})})})}function Xn({session:t,isThinking:n,onSendMessage:r,setActiveFile:s,onFileContentChange:i,onAddFileOrFolder:o,onDeleteFileOrFolder:d,onRenameFileOrFolder:a,selectedModelId:l,apiKeys:p,onModelChange:w,onApiKeySave:b}){const j=t.messages[t.messages.length-1],L=j?.role==="sub0"&&j.generationInfo?j.generationInfo:null,[y,V]=c.useState(!0),[F,S]=c.useState("code"),[h,A]=c.useState(()=>typeof window<"u"?window.innerWidth/2:600),N=c.useRef(null),g=c.useRef(n);c.useEffect(()=>{n?S("code"):g.current&&!n&&L?.files&&L.files.length>0&&S("preview"),g.current=n},[n,L]);const T=c.useCallback(E=>{E.preventDefault();const J=N.current?.offsetWidth??h,$=E.clientX;function k(K){const u=J+K.clientX-$,f=400,x=window.innerWidth-400;u>=f&&u<=x&&A(u)}function B(){window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",B)}window.addEventListener("mousemove",k),window.addEventListener("mouseup",B)},[h]);return e.jsxs("div",{className:"flex flex-col h-full bg-black selection:bg-white selection:text-black",children:[e.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between px-6 py-4 border-b border-zinc-900 bg-black",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("button",{onClick:()=>window.location.hash="/",className:"text-[10px] font-bold text-zinc-600 hover:text-orange-500 transition-colors uppercase tracking-[0.4em]",children:"â† Return to Fleet"}),e.jsx("div",{className:"w-[1px] h-4 bg-zinc-900"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"text-[9px] font-bold text-zinc-500 uppercase tracking-[0.3em] mb-0.5",children:["Node: ",e.jsx("span",{className:"text-white",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 animate-pulse"}),e.jsx("span",{className:"text-[10px] font-bold text-orange-500 uppercase tracking-widest",children:"Neural Uplink // Active"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[y&&e.jsxs("div",{className:"flex items-center bg-zinc-950 border border-zinc-900 p-1 rounded-none",children:[e.jsx("button",{onClick:()=>S("code"),className:`px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest transition-all ${F==="code"?"bg-zinc-800 text-white":"text-zinc-600 hover:text-zinc-400"}`,children:"Code"}),e.jsx("button",{onClick:()=>S("preview"),className:`px-3 py-1.5 text-[10px] font-bold uppercase tracking-widest transition-all ${F==="preview"?"bg-zinc-800 text-white":"text-zinc-600 hover:text-zinc-400"}`,children:"Live Preview"})]}),e.jsx("button",{onClick:()=>V(!y),className:"p-2 border border-zinc-900 hover:border-zinc-700 transition-colors rounded-none group",title:y?"Collapse Node":"Expand Node",children:y?e.jsx(ut,{className:"h-4 w-4 text-zinc-500 group-hover:text-white"}):e.jsx(ht,{className:"h-4 w-4 text-zinc-500 group-hover:text-white"})}),e.jsxs("button",{className:"px-5 py-2 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 flex items-center gap-2 rounded-none",children:[e.jsx(at,{className:"h-4 w-4"}),"Materialize Node"]})]})]}),e.jsxs("div",{className:"flex-1 flex h-full overflow-hidden",children:[e.jsx(Ie.div,{ref:N,className:"h-full border-r border-neutral-800",initial:!1,animate:{width:y?`${h}px`:"100%"},transition:{type:"spring",stiffness:300,damping:30},children:e.jsx($t,{messages:t.messages,isThinking:n,onSendMessage:r,suggestions:t.suggestions,selectedModelId:l,apiKeys:p,onModelChange:w,onApiKeySave:b})}),e.jsx(Ye,{children:y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{onMouseDown:T,className:"w-1.5 h-full cursor-col-resize bg-neutral-900 hover:bg-zinc-800 transition-colors flex-shrink-0 hidden lg:block z-10"}),e.jsx(Ie.div,{className:"flex-1 h-full overflow-hidden",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:200,damping:25},children:e.jsx(Zn,{session:t,setActiveFile:s,onFileContentChange:i,generationInfo:L,onAddFileOrFolder:o,onDeleteFileOrFolder:d,onRenameFileOrFolder:a,activeTab:F})})]})})]})]})}const se=({icon:t,title:n,description:r,children:s})=>e.jsxs("div",{className:"bg-zinc-950 border border-zinc-900 rounded-none overflow-hidden mb-8",children:[e.jsx("div",{className:"p-8 border-b border-zinc-900",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"text-zinc-500",children:t}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-[11px] font-bold text-white uppercase tracking-[0.3em] mb-1",children:n}),e.jsx("p",{className:"text-[10px] text-zinc-600 uppercase font-bold tracking-widest",children:r})]})]})}),e.jsx("div",{className:"p-8 bg-black",children:s})]}),Z=({label:t,children:n})=>e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between py-4 border-b border-zinc-900 last:border-b-0",children:[e.jsx("label",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-4 sm:mb-0",children:t}),e.jsx("div",{className:"w-full sm:w-auto",children:n})]});function Qn(){return e.jsx("div",{className:"h-full overflow-y-auto bg-black text-white selection:bg-white selection:text-black",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-12",children:[e.jsxs("header",{className:"mb-16",children:[e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 text-[9px] font-bold text-zinc-500 mb-6 uppercase tracking-[0.3em]",children:"System // Core Configuration"}),e.jsxs("h1",{className:"text-6xl font-bold tracking-tighter lowercase leading-none",children:["uplink",e.jsx("br",{}),e.jsx("span",{className:"text-zinc-600",children:"parameters."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{icon:e.jsx(Pe,{className:"w-5 h-5"}),title:"Neural Profile",description:"Identity parameters and handshake preferences.",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{label:"Full Name",children:e.jsx("input",{type:"text",disabled:!0,value:"Sovereign User",className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed focus:outline-none"})}),e.jsx(Z,{label:"Uplink ID",children:e.jsx("input",{type:"email",disabled:!0,value:"uplink@sub0.io",className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed focus:outline-none"})}),e.jsx(Z,{label:"System Theme",children:e.jsx("select",{disabled:!0,className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed appearance-none focus:outline-none",children:e.jsx("option",{children:"Titan // Black"})})})]})}),e.jsx(se,{icon:e.jsx(pt,{className:"w-5 h-5"}),title:"Consortium",description:"Cluster management and role distribution.",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{label:"Consortium Name",children:e.jsx("input",{type:"text",disabled:!0,value:"OpenDev Labs",className:"bg-zinc-900/50 border border-zinc-800 rounded-none px-4 py-2 text-[11px] font-mono w-full sm:w-80 text-zinc-500 cursor-not-allowed focus:outline-none"})}),e.jsx(Z,{label:"Active Nodes",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"Invite Architects"})})]})}),e.jsx(se,{icon:e.jsx(ft,{className:"w-5 h-5"}),title:"Compute Credits",description:"Resource allocation and usage history.",children:e.jsx(Z,{label:"Resource Plan",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-orange-500 border border-orange-500/30 px-3 py-1 bg-orange-500/5",children:"Unlimited Compute"}),e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"Manage Allocation"})]})})}),e.jsx(se,{icon:e.jsx($e,{className:"w-5 h-5"}),title:"Encryption Keys",description:"Model authentication and external mesh handshakes.",children:e.jsx(Z,{label:"Uplink Keys",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-white text-black cursor-not-allowed",children:"Generate New Key"})})}),e.jsxs(se,{icon:e.jsx(xt,{className:"w-5 h-5"}),title:"Audit & Security",description:"System hardening and access logs.",children:[e.jsx(Z,{label:"Mesh SSO",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"Configure Protocol"})}),e.jsx(Z,{label:"Uplink Logs",children:e.jsx("button",{disabled:!0,className:"px-6 py-2 text-[10px] font-bold uppercase tracking-widest bg-zinc-900 text-zinc-700 cursor-not-allowed border border-zinc-800",children:"View Transactions"})})]})]})]})})}function er(t){const n=Date.now(),r=Math.floor((n-t)/1e3);let s=r/31536e3;return s>1?Math.floor(s)+" years ago":(s=r/2592e3,s>1?Math.floor(s)+" months ago":(s=r/86400,s>1?Math.floor(s)+" days ago":(s=r/3600,s>1?Math.floor(s)+" hours ago":(s=r/60,s>1?Math.floor(s)+" minutes ago":"Just now"))))}function tr({sessions:t,onSelectChat:n,onDeleteSession:r,onNavigate:s}){const[i,o]=c.useState(""),d=c.useMemo(()=>t.filter(a=>a.title.toLowerCase().includes(i.toLowerCase())).sort((a,l)=>l.lastUpdated-a.lastUpdated),[t,i]);return e.jsx("div",{className:"h-full overflow-y-auto bg-black text-white selection:bg-white selection:text-black",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-12",children:[e.jsxs("header",{className:"flex items-center justify-between mb-16",children:[e.jsxs("div",{children:[e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-white/5 border border-white/10 text-[9px] font-bold text-zinc-500 mb-6 uppercase tracking-[0.3em]",children:"Archives // Neural Repository"}),e.jsxs("h1",{className:"text-6xl font-bold tracking-tighter lowercase leading-none",children:["node",e.jsx("br",{}),e.jsx("span",{className:"text-zinc-600",children:"archives."})]})]}),e.jsxs("button",{onClick:()=>s("new-chat"),className:"flex items-center gap-3 px-6 py-3 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 rounded-none shadow-2xl",children:[e.jsx(ke,{className:"h-4 w-4"}),"Materialize Node"]})]}),e.jsxs("div",{className:"relative mb-12",children:[e.jsx(wt,{className:"absolute left-6 top-1/2 -translate-y-1/2 h-4 w-4 text-zinc-600"}),e.jsx("input",{type:"text",placeholder:"Search archives by project name or purpose...",value:i,onChange:a=>o(a.target.value),className:"w-full bg-zinc-950 border border-zinc-900 rounded-none pl-14 pr-6 py-4 text-[11px] font-mono text-zinc-300 placeholder-zinc-800 focus:outline-none focus:border-zinc-700 transition-colors"})]}),e.jsx("div",{className:"space-y-4",children:d.length>0?d.map(a=>e.jsxs("div",{className:"group relative",children:[e.jsx("button",{onClick:()=>n(a.id),className:"w-full text-left p-8 bg-zinc-950/50 border border-zinc-900 rounded-none hover:border-zinc-700 transition-all duration-300 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-none bg-zinc-800 group-hover:bg-orange-500 transition-colors"}),e.jsx("h2",{className:"text-[12px] font-bold text-white uppercase tracking-widest truncate",children:a.title})]}),e.jsxs("p",{className:"text-[9px] font-bold text-zinc-600 uppercase tracking-[0.2em] mt-1 ml-5",children:["Handshake: ",er(a.lastUpdated)]})]})}),e.jsx("button",{onClick:l=>{l.stopPropagation(),window.confirm(`Are you sure you want to delete "${a.title}"?`)&&r(a.id)},className:"absolute right-8 top-1/2 -translate-y-1/2 p-3 rounded-none text-zinc-700 opacity-0 group-hover:opacity-100 hover:bg-zinc-900 hover:text-red-500 transition-all border border-zinc-900","aria-label":`Delete chat ${a.title}`,children:e.jsx(we,{className:"h-4 w-4"})})]},a.id)):e.jsxs("div",{className:"text-center py-24 px-8 border border-dashed border-zinc-900 rounded-none",children:[e.jsx("h3",{className:"text-[10px] font-bold uppercase tracking-[0.4em] text-zinc-500",children:"Node records void"}),e.jsx("p",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-700 mt-4 leading-relaxed max-w-xs mx-auto",children:i?"The requested identifier does not exist in the current neural history.":"Initialize your first node to populate the system archives."})]})})]})})}const nr=()=>Date.now().toString()+Math.random().toString(36).substring(2);function ir(){const[t,n]=c.useState("new-chat"),[r,s]=c.useState([]),[i,o]=c.useState(null),[d,a]=c.useState(!1),[l,p]=c.useState(!0),[w,b]=c.useState(!0),[j,L]=c.useState(ae[0].id),[y,V]=c.useState({});c.useEffect(()=>{try{const u=localStorage.getItem("opendev-apiKeys");u&&V(JSON.parse(u));const f=localStorage.getItem("opendev-selectedModelId");f&&L(f)}catch(u){console.error("Failed to load settings from localStorage",u)}},[]);const F=c.useCallback(u=>{L(u),localStorage.setItem("opendev-selectedModelId",u)},[]),S=c.useCallback((u,f)=>{const x={...y,[u]:f};V(x),localStorage.setItem("opendev-apiKeys",JSON.stringify(x))},[y]);c.useEffect(()=>{const u=()=>{const f=window.location.hash.replace(/^#\/?/,""),[x,m]=f.split("/");x==="chat"&&m?(o(m),n("chat-session")):x==="chats"?(o(null),n("all-chats")):x==="settings"?(o(null),n("settings")):(o(null),n("new-chat")),p(!1)};return window.addEventListener("hashchange",u),u(),()=>window.removeEventListener("hashchange",u)},[]);const h=r.find(u=>u.id===i),A=u=>{switch(u){case"new-chat":window.location.hash="/";break;case"all-chats":window.location.hash="/chats";break;case"settings":window.location.hash="/settings";break}},N=u=>{window.location.hash=`/chat/${u}`},g=u=>{i&&s(f=>f.map(x=>x.id===i?{...x,activeFile:u}:x))},T=(u,f)=>{i&&s(x=>x.map(m=>{if(m.id===i){const D=m.fileTree.map(C=>C.path===u?{...C,content:f}:C),H=m.activeFile?.path===u?{...m.activeFile,content:f}:m.activeFile;return{...m,fileTree:D,activeFile:H}}return m}))},E=u=>{s(f=>f.filter(x=>x.id!==u)),i===u&&A("new-chat")},J=(u,f)=>{if(i){if(!u.trim()||/[\\?%*:|"<>]/g.test(u)){alert("Invalid file or folder name.");return}s(x=>x.map(m=>{if(m.id===i)if(f==="file"){if(m.fileTree.some(C=>C.path===u))return alert(`File "${u}" already exists.`),m;const D={path:u,content:""},H=[...m.fileTree,D];return{...m,fileTree:H,activeFile:D}}else{const D=u.endsWith("/")?u:u+"/";if(m.fileTree.some(G=>G.path.startsWith(D)||G.path===u))return alert(`A folder or file with the name "${u}" already exists.`),m;const H={path:`${D}.keep`,content:""},C=[...m.fileTree,H];return{...m,fileTree:C}}return m}))}},$=(u,f)=>{i&&window.confirm(`Are you sure you want to delete "${u}"? This cannot be undone.`)&&s(x=>x.map(m=>{if(m.id===i){const D=u.endsWith("/")?u:u+"/",H=m.fileTree.filter(G=>f?G.path!==u:!G.path.startsWith(D));let C=m.activeFile;return C&&(f?C.path===u:C.path.startsWith(D))&&(C=null),{...m,fileTree:H,activeFile:C}}return m}))},k=(u,f,x)=>{if(!(!i||u===f)){if(!f.trim()||/[\\?%*:|"<>]/g.test(f)){alert("Invalid new name.");return}s(m=>m.map(D=>{if(D.id===i){const H=D.fileTree.map(G=>{if(x)return G.path===u?{...G,path:f}:G;{const M=u.endsWith("/")?u:u+"/";return G.path.startsWith(M)?{...G,path:G.path.replace(M,f+"/")}:G}});let C=D.activeFile;if(C){if(x&&C.path===u)C={...C,path:f};else if(!x&&C.path.startsWith(u+"/")){const G=u.endsWith("/")?u:u+"/";C={...C,path:C.path.replace(G,f+"/")}}}return{...D,fileTree:H,activeFile:C}}return D}))}},B=async u=>{a(!0);let f=i,x=!1;f&&s(M=>M.map(W=>W.id===f?{...W,suggestions:[]}:W));let m=[],D=[];const H={id:Date.now(),role:"user",content:u},C=Date.now()+1,G={id:C,role:"sub0",content:"",generationInfo:{status:"generating",files:[]}};if(f){const M=r.find(W=>W.id===f);M&&(m=M.messages,D=M.fileTree),s(W=>W.map(P=>P.id===f?{...P,messages:[...P.messages,H,G],lastUpdated:Date.now()}:P))}else{x=!0;const M=nr(),W={id:M,title:u.length>25?u.substring(0,22)+"...":u,messages:[H,G],fileTree:[],activeFile:null,lastUpdated:Date.now()};s(P=>[W,...P]),o(M),f=M,m=[],D=[]}x&&(n("chat-session"),window.location.hash=`#/chat/${f}`);try{const M=ae.find(R=>R.id===j),W=M?y[M.provider]:void 0;let P="",_="";const ne=Tt(u,m,D,j,W);for await(const R of ne){P+=R.text;const z=P.match(/"conversation"\s*:\s*"((?:\\.|[^"\\])*)/);if(z&&z[1]){const v=z[1].replace(/\\n/g,`
`).replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\\\/g,"\\");v!==_&&(_=v,s(O=>O.map(I=>I.id===f?{...I,messages:I.messages.map(U=>U.id===C?{...U,content:_}:U)}:I)))}else!_&&!P.includes('"conversation"')&&s(v=>v.map(O=>O.id===f?{...O,messages:O.messages.map(I=>I.id===C?{...I,content:P}:I)}:O))}let re=[],ue="Sorry, I encountered an issue generating a response.";if(P){let R="";const z=P.match(/```json\n([\s\S]*?)\n```/);if(z&&z[1])R=z[1];else{const v=P.indexOf("{"),O=P.lastIndexOf("}");v!==-1&&O>v&&(R=P.substring(v,O+1))}if(R)try{const v=JSON.parse(R);ue=v.conversation||"(sub0 did not provide a conversational response.)",v.files&&Array.isArray(v.files)&&(re=v.files.filter(O=>O.path&&O.action))}catch(v){console.error("Failed to parse final JSON from response",v),ue="I tried to generate a response, but it wasn't in the correct format. The raw response is shown below.",s(O=>O.map(I=>I.id===f?{...I,messages:I.messages.map(U=>U.id===C?{...U,content:P}:U)}:I))}else console.warn("No valid JSON found in the final response. Treating as pure conversation."),ue=P}s(R=>R.map(z=>{if(z.id===f){const v=re.map(I=>({path:I.path,action:I.action,status:"generating"})),O=z.messages.map(I=>I.id===C?{...I,content:ue,generationInfo:{status:"generating",files:v}}:I);return{...z,messages:O}}return z}));for(const R of re)R.action==="created"||R.action==="modified"?s(z=>z.map(v=>{if(v.id!==f)return v;const O=v.fileTree.some(pe=>pe.path===R.path),I={path:R.path,content:R.content||""},U=O?v.fileTree.map(pe=>pe.path===R.path?I:pe):[...v.fileTree,I];return{...v,fileTree:U,activeFile:I}})):R.action==="deleted"&&s(z=>z.map(v=>{if(v.id!==f)return v;const O=v.fileTree.filter(U=>U.path!==R.path),I=v.activeFile?.path===R.path?null:v.activeFile;return{...v,fileTree:O,activeFile:I}})),await new Promise(z=>setTimeout(z,200)),s(z=>z.map(v=>{if(v.id!==f)return v;const O=v.messages.map(I=>{if(I.id===C&&I.generationInfo){const U=I.generationInfo.files.map(he=>he.path===R.path?{...he,status:"complete"}:he);return{...I,generationInfo:{...I.generationInfo,files:U}}}return I});return{...v,messages:O}}));if(s(R=>R.map(z=>{if(z.id===f&&!z.activeFile&&z.fileTree.length>0){const v=z.fileTree.find(O=>/index\.(tsx|jsx)$/.test(O.path))||z.fileTree[0];return{...z,activeFile:v}}return z})),s(R=>R.map(z=>{if(z.id===f){const v=z.messages.map(O=>O.id===C&&O.generationInfo?{...O,generationInfo:{...O.generationInfo,status:"complete"}}:O);return{...z,messages:v}}return z})),re.length>0){const R=u,z=re.map(I=>I.path),v=`Based on the user's request to "${R}", I have generated or modified the following files: ${z.join(", ")}.`,O=await Et(v);s(I=>I.map(U=>U.id===f?{...U,suggestions:O}:U))}}catch(M){console.error("Error streaming chat response:",M),s(W=>W.map(P=>{if(P.id===f){const _=P.messages.map(ne=>ne.id===C?{...ne,content:`Sorry, I encountered an error: ${M instanceof Error?M.message:"Unknown error"}`}:ne);return{...P,messages:_}}return P}))}finally{a(!1)}};if(l)return null;const K={isThinking:d,onSendMessage:B,selectedModelId:j,apiKeys:y,onModelChange:F,onApiKeySave:S};return t==="new-chat"&&!i?e.jsx(Ce,{...K}):e.jsxs("div",{className:"flex h-screen bg-black text-zinc-400 selection:bg-white selection:text-black",children:[w&&e.jsx(vt,{onNavigate:A,recentChats:r,onSelectChat:N,onDeleteSession:E,activeView:t,activeChatId:i,onToggle:()=>b(!1)}),e.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden relative",children:[!w&&t!=="new-chat"&&e.jsx("button",{onClick:()=>b(!0),className:"absolute top-6 left-6 z-20 p-2 border border-zinc-900 bg-black hover:border-zinc-700 transition-colors rounded-none shadow-2xl","aria-label":"Open sidebar",children:e.jsx(Fe,{className:"h-4 w-4 text-zinc-500"})}),e.jsxs("div",{className:"h-full",children:[t==="chat-session"&&h&&e.jsx(Xn,{session:h,...K,setActiveFile:g,onFileContentChange:T,onAddFileOrFolder:J,onDeleteFileOrFolder:$,onRenameFileOrFolder:k}),t==="new-chat"&&!i&&e.jsx(Ce,{...K}),t==="chat-session"&&!h&&!l&&e.jsxs("div",{className:"p-8 text-white flex flex-col items-center justify-center h-full text-center",children:[e.jsx("h1",{className:"text-xl font-bold mb-2 lowercase tracking-tighter",children:"node not materialized"}),e.jsx("p",{className:"text-zinc-600 mb-8 max-w-sm uppercase text-[10px] font-bold tracking-[0.2em] leading-relaxed",children:"the session you are attempting to uplink with is currently void or offline in this mesh."}),e.jsx("button",{onClick:()=>A("new-chat"),className:"px-6 py-2.5 text-[10px] font-bold uppercase tracking-widest bg-white text-black hover:bg-orange-500 hover:text-white transition-all duration-300 rounded-none",children:"Materialize New Node"})]}),t==="all-chats"&&e.jsx(tr,{sessions:r,onSelectChat:N,onDeleteSession:E,onNavigate:A}),t==="settings"&&e.jsx(Qn,{})]},t+i)]})]})}export{ir as default};
